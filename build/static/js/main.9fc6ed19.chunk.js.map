{"version":3,"sources":["firebase.js","services/userService.js","services/authService.js","components/Login.js","services/planningService.js","components/ChangePasswordModal.js","components/DashboardMedecin.js","components/DashboardAdmin.js","components/QuickFill.js","components/WeeklyPattern.js","components/FormulaireDesirata.js","components/GestionUtilisateurs.js","utils/planningGenerator.js","components/planning/PlanningHeader.js","components/planning/components/MedecinSearchSelect.js","components/planning/PlanningFilters.js","components/planning/PlanningStatistics.js","utils/planningUtils.js","components/planning/PlanningTable.js","components/planning/MedecinInfoPanel.js","components/planning/modals/ConfirmationModal.js","components/planning/modals/GeneratePlanningModal.js","components/planning/modals/PublishPlanningModal.js","components/planning/modals/DiscardChangesModal.js","components/planning/GestionPlanning.js","components/GestionPeriodeSaisie.js","components/PlanningVisualisation.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","USERS_COLLECTION","getUser","async","userDoc","getDoc","doc","uid","exists","console","log","data","id","error","getAllUsers","user","currentUser","Error","getDocs","collection","docs","map","getMedecins","q","query","where","logoutUser","signOut","Login","email","setEmail","useState","password","setPassword","setError","isLoading","setIsLoading","history","useHistory","_jsx","style","backgroundColor","minHeight","display","alignItems","justifyContent","padding","children","_jsxs","width","borderRadius","boxShadow","margin","borderTopLeftRadius","borderTopRightRadius","borderBottom","height","Calendar","color","textAlign","fontSize","fontWeight","marginBottom","onSubmit","e","preventDefault","userCredential","signInWithEmailAndPassword","userDetails","role","loginUser","push","type","required","value","onChange","target","border","disabled","cursor","DESIDERATA_COLLECTION","PLANNING_COLLECTION","PERIODE_SAISIE_DOC","convertToTimestamp","dateString","Timestamp","date","Date","fromDate","convertFromTimestamp","timestamp","toDate","toISOString","deleteObsoleteDesiderata","newStartDate","newEndDate","desiderataRef","querySnapshot","batch","writeBatch","forEach","desiderata","isDesiderataObsolete","delete","ref","commit","desiderataStart","startDate","desiderataEnd","endDate","newStart","newEnd","getPeriodeSaisie","periodeDoc","getDesiderataByUser","userId","getDesiderataForPeriod","debut","fin","debutTimestamp","finTimestamp","nombreGardesSouhaitees","nombreGardesMaxParSemaine","gardesGroupees","renfortsAssocies","updatePlanning","planningId","planning","planningRef","updateDoc","getLatestPlanning","orderBy","limit","empty","latestDoc","getPublishedPlanning","publishedDoc","publishedAt","ChangePasswordModal","_ref","onClose","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","success","setSuccess","position","top","left","right","bottom","zIndex","maxWidth","boxSizing","onClick","background","marginLeft","X","size","updatePassword","updateUserPassword","setTimeout","message","DashboardMedecin","setUser","setDesiderata","loading","setLoading","showChangePassword","setShowChangePassword","isMenuOpen","setIsMenuOpen","useEffect","unsubscribe","onAuthStateChanged","authUser","userData","userDesiderata","handleLogout","gap","ClipboardList","Key","LogOut","Menu","borderTop","flexDirection","nom","length","d","index","toLocaleDateString","DashboardAdmin","medecins","setMedecins","periodeSaisie","setPeriodeSaisie","setPlanning","medecinsList","periode","publishedPlan","fetchData","Settings","prenom","gridTemplateColumns","transition","onMouseOver","currentTarget","onMouseOut","Users","ChevronRight","Clock","QuickFill","creneaux","onApply","selectedCreneaux","setSelectedCreneaux","selectedJours","setSelectedJours","selectedDispo","setSelectedDispo","setStartDate","setEndDate","isExpanded","setIsExpanded","jours","label","ChevronUp","ChevronDown","flexWrap","minWidth","flex","handleSelectFullPeriod","split","toggleAllCreneaux","allSelected","every","creneau","newSelectedCreneaux","checked","prev","hours","toggleAllJours","jour","newSelectedJours","handleApply","alert","selectedCreneauxArray","Object","entries","filter","_ref2","_","isSelected","_ref3","creneauId","selectedJoursArray","_ref4","_ref5","jourId","disponibilite","Upload","WeeklyPattern","onApplyPattern","pattern","setPattern","overflowX","borderCollapse","_pattern$jour$id","samediOnly","handlePatternChange","handleApplyPattern","keys","Copy","options","joursFeries","FormulaireDesirata","setNombreGardesSouhaitees","setNombreGardesMaxParSemaine","setGardesGroupees","setRenfortsAssocies","existingDesiderataId","setExistingDesiderataId","generateDates","useCallback","dates","currentDate","end","setDate","getDate","relevantDesiderata","find","formatDate","getDay","toString","padStart","getMonth","ArrowLeft","desiderataData","desiderataId","updateDesiderata","addDoc","addDesiderata","Save","paddingTop","parseInt","min","max","borderColor","htmlFor","overflow","start","newDesiderata","includes","dayOfWeek","isHighlighted","day","formattedDate","isWeekendOrHoliday","_desiderata$dateStrin","handleDesiderataChange","_desiderata$dateStrin2","option","GestionUtilisateurs","users","setUsers","setCurrentUser","showAddForm","setShowAddForm","newUser","setNewUser","searchTerm","setSearchTerm","roleFilter","setRoleFilter","viewMode","setViewMode","showFilters","setShowFilters","currentPage","setCurrentPage","usersPerPage","showConfirmDelete","setShowConfirmDelete","userToDelete","setUserToDelete","fetchUsers","fetchedUsers","filteredUsers","matchesSearch","toLowerCase","matchesRole","indexOfLastUser","indexOfFirstUser","currentUsers","slice","totalPages","Math","ceil","handleInputChange","name","handleDeleteClick","showNotification","UserPlus","Search","placeholder","List","Grid","Mail","Trash2","Array","from","i","page","transform","marginTop","createUserWithEmailAndPassword","registerUser","setDoc","createUser","errorMessage","code","deleteDoc","deleteUser","creneauxChevauchants","aCreneauxChevauchants","medecinId","creneauxDuJour","some","creneauChevauchant","_creneauxDuJour$crene","genererPlanningSolution","c","assignerMedecins","getWeekNumber","setHours","yearStart","getFullYear","compterGardesParSemaine","weekNumber","count","planningDate","values","medecinsPriorises","_desiderata$medecinId","_desiderata$medecinId2","_desiderata$medecinId3","choix","preferences","gardesParSemaine","maxGardesParSemaine","aChevauchement","sort","a","b","_desiderata$a","_desiderata$a$prefere","_desiderata$b","_desiderata$b$prefere","choixA","choixB","assignes","medecinChoisi","choisirMedecin","splice","indexOf","medecinsDispo","mois","scoreA","calculerScoreMedecin","_prefMedecin$preferen","_prefMedecin$preferen2","_prefMedecin$preferen3","score","prefMedecin","gardesDuMois","compterGardesMois","estWeekEnd","aGardeWeekEnd","startsWith","aGardeJour","aRenfortJour","reduce","flat","m","dateObj","debutWeekEnd","finWeekEnd","_planning$date$RENFOR","_planning$date$RENFOR2","rechercheTabou","maxIterations","arguments","undefined","meilleurPlanning","meilleurScore","evaluerPlanning","listeTabou","Set","voisins","genererVoisins","meilleurVoisin","meilleurScoreVoisin","Infinity","voisin","scoreVoisin","has","JSON","stringify","add","next","floor","random","medecin","_desiderata$medecin","nouveauPlanning","parse","maxGardes","verifierContraintes","planningRetrait","gardesParMedecin","gardesParMedecinParSemaine","_desiderata$medecinId4","_desiderata$medecinId5","_desiderata$medecinId6","_desiderata$medecinId7","_desiderata$medecinId8","semaine","_desiderata$medecinId9","abs","medecinsDuJour","hierMedecins","avantHierMedecins","PlanningHeader","editMode","modified","onEditToggle","onGenerateClick","onPublishClick","onSaveChanges","onBackClick","_Fragment","RefreshCcw","Edit2","MedecinSearchSelect","isOpen","setIsOpen","wrapperRef","useRef","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","filteredMedecins","searchTermLower","selectedMedecin","onFocus","maxHeight","overflowY","PlanningFilters","onToggleFilters","dateFilter","onDateFilterChange","creneauFilter","onCreneauFilterChange","onMedecinFilterChange","onViewModeChange","Filter","PlanningStatistics","publishedPlanning","getPreferenceStyle","preference","getMedecinPreference","_desiderata$find2","_desiderata$find2$des","MedecinSelect","currentValue","sortedMedecins","sortMedecinsByPreference","sorted","oui","possible","nonSpecifie","non","_desiderata$find","_desiderata$find$desi","all","PreferenceIndicator","PlanningTable","onMedecinChange","isWeekend","getFilteredCreneaux","tableLayout","_planning$planning$da","_planning$planning$da2","_planning$planning$da3","_planning$planning$da4","MedecinInfoPanel","gardesAttribuees","compterGardesParMedecin","joursCreneaux","gardesSouhaitees","getNombreGardesSouhaitees","medecinDesiderata","gardesMaxParSemaine","User","ConfirmationModal","onConfirm","title","confirmLabel","cancelLabel","icon","Icon","AlertTriangle","iconColor","iconBgColor","confirmButtonColor","GeneratePlanningModal","PublishPlanningModal","DiscardChangesModal","GestionPlanning","isAdmin","setPublishedPlanning","setEditMode","setModified","setDateFilter","setCreneauFilter","setSelectedMedecin","showGenerateConfirm","setShowGenerateConfirm","showPublishConfirm","setShowPublishConfirm","showDiscardChanges","setShowDiscardChanges","latestPlan","Promise","animation","toggleEditMode","Check","handleMedecinChange","newPlanning","_creneaux$find","fill","newPlanningData","assign","genererPlanning","updatedPlanning","savedPlanningId","savePlanning","now","publishPlanning","updatedPublishedPlanning","GestionPeriodeSaisie","handleSubmit","textColor","PlanningVisualisation","allMedecins","getMedecinName","filteredDates","exportToICS","events","startHour","endHour","getHours","getMinutes","description","location","createEvents","blob","Blob","link","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","Download","Eye","EyeOff","flexGrow","verticalAlign","whiteSpace","textOverflow","App","Router","className","Switch","Route","exact","path","component","render","ReactDOM","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9fc6ed19.chunk.js","sourcesContent":["// src/firebase.js\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDesXYDyPsrG5HxkkPbj9XuqFQV91j2ixY\",\r\n  authDomain: \"apum-8cfa4.firebaseapp.com\",\r\n  databaseURL: \"https://apum-8cfa4-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"apum-8cfa4\",\r\n  storageBucket: \"apum-8cfa4.appspot.com\",\r\n  messagingSenderId: \"965430779165\",\r\n  appId: \"1:965430779165:web:2b1d142cc5937744d5d5f4\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nexport { db, auth };","import { db, auth } from '../firebase';\r\nimport { doc, getDoc, setDoc, updateDoc, deleteDoc, getDocs, collection, query, where } from 'firebase/firestore';\r\n\r\nconst USERS_COLLECTION = 'users';\r\n\r\nexport const createUser = async (uid, userData) => {\r\n  try {\r\n    await setDoc(doc(db, USERS_COLLECTION, uid), userData);\r\n    console.log('Utilisateur créé avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la création de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUser = async (uid) => {\r\n  try {\r\n    const userDoc = await getDoc(doc(db, USERS_COLLECTION, uid));\r\n    if (userDoc.exists()) {\r\n      console.log('Utilisateur trouvé:', userDoc.data());\r\n      return { id: userDoc.id, ...userDoc.data() };\r\n    } else {\r\n      console.log('Aucun utilisateur trouvé avec cet UID');\r\n      return null;\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateUser = async (uid, userData) => {\r\n  try {\r\n    await updateDoc(doc(db, USERS_COLLECTION, uid), userData);\r\n    console.log('Utilisateur mis à jour avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deleteUser = async (uid) => {\r\n  try {\r\n    await deleteDoc(doc(db, USERS_COLLECTION, uid));\r\n    console.log('Utilisateur supprimé avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getAllUsers = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const currentUserDoc = await getDoc(doc(db, USERS_COLLECTION, user.uid));\r\n    if (!currentUserDoc.exists()) {\r\n      throw new Error('Utilisateur non trouvé');\r\n    }\r\n\r\n    const querySnapshot = await getDocs(collection(db, USERS_COLLECTION));\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de tous les utilisateurs:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getMedecins = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const q = query(collection(db, USERS_COLLECTION), where(\"role\", \"==\", \"medecin\"));\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des médecins:', error);\r\n    throw error;\r\n  }\r\n};","import { auth } from '../firebase';\r\nimport { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut,\r\n  updatePassword\r\n} from 'firebase/auth';\r\nimport { getUser } from './userService';\r\n\r\nexport const registerUser = async (email, password) => {\r\n  try {\r\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n    console.log('Utilisateur enregistré:', userCredential);\r\n    return userCredential;\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'enregistrement:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const loginUser = async (email, password) => {\r\n  try {\r\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n    console.log('Utilisateur connecté:', userCredential);\r\n    const userDetails = await getUser(userCredential.user.uid);\r\n    return { ...userCredential, role: userDetails.role };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la connexion:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n    console.log('Utilisateur déconnecté');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la déconnexion:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const checkUserRole = async (uid, allowedRoles) => {\r\n  try {\r\n    const user = await getUser(uid);\r\n    if (user && allowedRoles.includes(user.role)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la vérification du rôle:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const updateUserPassword = async (newPassword) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (user) {\r\n      await updatePassword(user, newPassword);\r\n      console.log('Mot de passe mis à jour avec succès');\r\n    } else {\r\n      throw new Error('Aucun utilisateur connecté');\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour du mot de passe:', error);\r\n    throw error;\r\n  }\r\n};","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { loginUser } from '../services/authService';\r\nimport { getUser } from '../services/userService';\r\nimport { Calendar } from 'lucide-react';\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const userCredential = await loginUser(email, password);\r\n      if (!userCredential || !userCredential.user) {\r\n        throw new Error('Échec de l\\'authentification');\r\n      }\r\n\r\n      const user = await getUser(userCredential.user.uid);\r\n      if (!user) {\r\n        throw new Error('Utilisateur non trouvé dans Firestore');\r\n      }\r\n\r\n      if (user.role === 'medecin') {\r\n        history.push('/dashboard-medecin');\r\n      } else if (user.role === 'admin') {\r\n        history.push('/dashboard-admin');\r\n      } else {\r\n        setError('Rôle utilisateur non reconnu');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur de connexion:\", error);\r\n      setError('Identifiants incorrects ou erreur de connexion');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      backgroundColor: '#f3f4f6', \r\n      minHeight: '100vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: '24px'\r\n    }}>\r\n      <div style={{ \r\n        width: '400px',\r\n        backgroundColor: 'white', \r\n        borderRadius: '8px', \r\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n        margin: 'auto' // Ajout de margin: auto pour un centrage parfait\r\n      }}>\r\n        <div style={{ \r\n          padding: '24px', \r\n          backgroundColor: '#EBF5FF', \r\n          borderTopLeftRadius: '8px', \r\n          borderTopRightRadius: '8px', \r\n          borderBottom: '1px solid #E5E7EB'\r\n        }}>\r\n          <div style={{ \r\n            width: '64px', \r\n            height: '64px', \r\n            margin: '0 auto 16px', \r\n            backgroundColor: '#BFDBFE', \r\n            borderRadius: '50%', \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            justifyContent: 'center' \r\n          }}>\r\n            <Calendar style={{ width: '32px', height: '32px', color: '#2563EB' }} />\r\n          </div>\r\n          <h2 style={{ textAlign: 'center', fontSize: '24px', fontWeight: 'bold', color: '#2563EB', marginBottom: '8px' }}>\r\n            Planning APUM\r\n          </h2>\r\n          <p style={{ textAlign: 'center', fontSize: '14px', color: '#6B7280' }}>\r\n            Connectez-vous pour accéder à votre espace\r\n          </p>\r\n        </div>\r\n\r\n        <div style={{ padding: '24px' }}>\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{ \r\n                display: 'block', \r\n                fontSize: '14px', \r\n                fontWeight: '500', \r\n                color: '#374151', \r\n                marginBottom: '4px' \r\n              }}>\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{ \r\n                display: 'block', \r\n                fontSize: '14px', \r\n                fontWeight: '500', \r\n                color: '#374151', \r\n                marginBottom: '4px' \r\n              }}>\r\n                Mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            {error && (\r\n              <div style={{ \r\n                backgroundColor: '#FEE2E2', \r\n                padding: '12px', \r\n                borderRadius: '4px', \r\n                marginBottom: '16px',\r\n                border: '1px solid #FECACA'\r\n              }}>\r\n                <p style={{ color: '#DC2626', fontSize: '14px' }}>{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '8px 16px',\r\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\r\n                color: 'white',\r\n                borderRadius: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                cursor: isLoading ? 'not-allowed' : 'pointer'\r\n              }}\r\n            >\r\n              {isLoading ? 'Connexion...' : 'Se connecter'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import { db, auth } from '../firebase';\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  updateDoc, \r\n  doc, \r\n  deleteDoc, \r\n  getDocs, \r\n  query, \r\n  where,\r\n  orderBy,\r\n  limit,\r\n  getDoc,\r\n  setDoc,\r\n  Timestamp,\r\n  writeBatch\r\n} from 'firebase/firestore';\r\n\r\nconst DESIDERATA_COLLECTION = 'desiderata';\r\nconst PLANNING_COLLECTION = 'planning';\r\nconst PERIODE_SAISIE_DOC = 'periode_saisie';\r\n\r\nconst convertToTimestamp = (dateString) => {\r\n  if (dateString instanceof Timestamp) {\r\n    return dateString;\r\n  }\r\n  const date = new Date(dateString);\r\n  return Timestamp.fromDate(date);\r\n};\r\n\r\nconst convertFromTimestamp = (timestamp) => {\r\n  if (timestamp instanceof Timestamp) {\r\n    return timestamp.toDate().toISOString();\r\n  }\r\n  if (typeof timestamp === 'string') {\r\n    return timestamp;\r\n  }\r\n  console.error('Format de date non reconnu:', timestamp);\r\n  return null;\r\n};\r\n\r\nexport const setPeriodeSaisie = async (startDate, endDate) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    \r\n    await setDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC), { \r\n      startDate: convertToTimestamp(startDate),\r\n      endDate: convertToTimestamp(endDate)\r\n    });\r\n\r\n    await deleteObsoleteDesiderata(startDate, endDate);\r\n\r\n    console.log('Période de saisie mise à jour et desiderata obsolètes supprimés');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour de la période de saisie:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst deleteObsoleteDesiderata = async (newStartDate, newEndDate) => {\r\n  try {\r\n    const desiderataRef = collection(db, DESIDERATA_COLLECTION);\r\n    const q = query(desiderataRef);\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const batch = writeBatch(db);\r\n    querySnapshot.forEach((doc) => {\r\n      const desiderata = doc.data();\r\n      if (isDesiderataObsolete(desiderata, newStartDate, newEndDate)) {\r\n        batch.delete(doc.ref);\r\n      }\r\n    });\r\n\r\n    await batch.commit();\r\n    console.log('Desiderata obsolètes supprimés');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression des desiderata obsolètes:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst isDesiderataObsolete = (desiderata, newStartDate, newEndDate) => {\r\n  const desiderataStart = desiderata.startDate.toDate();\r\n  const desiderataEnd = desiderata.endDate.toDate();\r\n  const newStart = new Date(newStartDate);\r\n  const newEnd = new Date(newEndDate);\r\n\r\n  return desiderataEnd < newStart || desiderataStart > newEnd;\r\n};\r\n\r\nexport const getPeriodeSaisie = async () => {\r\n  try {\r\n    const periodeDoc = await getDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC));\r\n    if (periodeDoc.exists()) {\r\n      const data = periodeDoc.data();\r\n      return {\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate)\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de la période de saisie:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const addDesiderata = async (userId, desiderata) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const docRef = await addDoc(collection(db, DESIDERATA_COLLECTION), {\r\n      userId,\r\n      startDate: convertToTimestamp(desiderata.startDate),\r\n      endDate: convertToTimestamp(desiderata.endDate),\r\n      desiderata: desiderata.desiderata,\r\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\r\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\r\n      gardesGroupees: desiderata.gardesGroupees,\r\n      renfortsAssocies: desiderata.renfortsAssocies\r\n    });\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'ajout des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateDesiderata = async (desiderataId, desiderata) => {\r\n  try {\r\n    const desiderataRef = doc(db, DESIDERATA_COLLECTION, desiderataId);\r\n    await updateDoc(desiderataRef, {\r\n      startDate: convertToTimestamp(desiderata.startDate),\r\n      endDate: convertToTimestamp(desiderata.endDate),\r\n      desiderata: desiderata.desiderata,\r\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\r\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\r\n      gardesGroupees: desiderata.gardesGroupees,\r\n      renfortsAssocies: desiderata.renfortsAssocies\r\n    });\r\n    console.log('Desiderata mis à jour avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getDesiderataByUser = async (userId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(collection(db, DESIDERATA_COLLECTION), where(\"userId\", \"==\", userId));\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      return { \r\n        id: doc.id, \r\n        ...data,\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate)\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getDesiderataForPeriod = async (debut, fin) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const debutTimestamp = convertToTimestamp(debut);\r\n    const finTimestamp = convertToTimestamp(fin);\r\n\r\n    const q = query(\r\n      collection(db, DESIDERATA_COLLECTION),\r\n      where(\"startDate\", \"<=\", finTimestamp),\r\n      where(\"endDate\", \">=\", debutTimestamp)\r\n    );\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      return {\r\n        id: doc.id,\r\n        userId: data.userId,\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate),\r\n        desiderata: data.desiderata,\r\n        nombreGardesSouhaitees: data.nombreGardesSouhaitees,\r\n        nombreGardesMaxParSemaine: data.nombreGardesMaxParSemaine,\r\n        gardesGroupees: data.gardesGroupees,\r\n        renfortsAssocies: data.renfortsAssocies\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des desiderata pour la période:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const savePlanning = async (planning) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const docRef = await addDoc(collection(db, PLANNING_COLLECTION), {\r\n      ...planning,\r\n      startDate: convertToTimestamp(planning.startDate),\r\n      endDate: convertToTimestamp(planning.endDate),\r\n    });\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la sauvegarde du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updatePlanning = async (planningId, planning) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\r\n    await updateDoc(planningRef, {\r\n      ...planning,\r\n      startDate: convertToTimestamp(planning.startDate),\r\n      endDate: convertToTimestamp(planning.endDate),\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getLatestPlanning = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(collection(db, PLANNING_COLLECTION), orderBy('startDate', 'desc'), limit(1));\r\n    const querySnapshot = await getDocs(q);\r\n    if (querySnapshot.empty) {\r\n      return null;\r\n    }\r\n    const latestDoc = querySnapshot.docs[0];\r\n    const data = latestDoc.data();\r\n    return { \r\n      id: latestDoc.id, \r\n      ...data,\r\n      startDate: convertFromTimestamp(data.startDate),\r\n      endDate: convertFromTimestamp(data.endDate)\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération du dernier planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deletePlanning = async (planningId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    await deleteDoc(doc(db, PLANNING_COLLECTION, planningId));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const publishPlanning = async (planningId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\r\n    await updateDoc(planningRef, {\r\n      publishedAt: Timestamp.now()\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la publication du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getPublishedPlanning = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(\r\n      collection(db, PLANNING_COLLECTION), \r\n      where(\"publishedAt\", \"!=\", null),\r\n      orderBy(\"publishedAt\", \"desc\"),\r\n      limit(1)\r\n    );\r\n    const querySnapshot = await getDocs(q);\r\n    if (querySnapshot.empty) {\r\n      return null;\r\n    }\r\n    const publishedDoc = querySnapshot.docs[0];\r\n    const data = publishedDoc.data();\r\n    return { \r\n      id: publishedDoc.id, \r\n      ...data,\r\n      startDate: convertFromTimestamp(data.startDate),\r\n      endDate: convertFromTimestamp(data.endDate),\r\n      publishedAt: convertFromTimestamp(data.publishedAt)\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération du planning publié:', error);\r\n    throw error;\r\n  }\r\n};","// src/components/ChangePasswordModal.js\r\nimport React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport { updateUserPassword } from '../services/authService';\r\n\r\nfunction ChangePasswordModal({ onClose }) {\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    setIsLoading(true);\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setError('Les nouveaux mots de passe ne correspondent pas.');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await updateUserPassword(newPassword);\r\n      setSuccess('Mot de passe mis à jour avec succès.');\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n      setTimeout(onClose, 2000);\r\n    } catch (error) {\r\n      setError('Erreur lors de la mise à jour du mot de passe: ' + error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 50,\r\n      padding: '16px'\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '8px',\r\n        width: '100%',\r\n        maxWidth: '400px',\r\n        position: 'relative',\r\n        boxSizing: 'border-box'\r\n      }}>\r\n        {/* En-tête du modal avec titre et bouton de fermeture alignés */}\r\n        <div style={{\r\n          padding: '16px 24px',\r\n          borderBottom: '1px solid #E5E7EB',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n            color: '#2563EB',\r\n            margin: 0 // Supprime les marges par défaut\r\n          }}>\r\n            Changer le mot de passe\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              padding: '4px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '8px'\r\n            }}\r\n          >\r\n            <X size={20} color=\"#6B7280\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Corps du modal */}\r\n        <div style={{ padding: '24px' }}>\r\n          {error && (\r\n            <div style={{\r\n              backgroundColor: '#FEE2E2',\r\n              padding: '12px',\r\n              borderRadius: '4px',\r\n              marginBottom: '16px',\r\n              color: '#DC2626',\r\n              fontSize: '14px'\r\n            }}>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {success && (\r\n            <div style={{\r\n              backgroundColor: '#DCFCE7',\r\n              padding: '12px',\r\n              borderRadius: '4px',\r\n              marginBottom: '16px',\r\n              color: '#16A34A',\r\n              fontSize: '14px'\r\n            }}>\r\n              {success}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} style={{ marginBottom: '0' }}>\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Mot de passe actuel\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={currentPassword}\r\n                onChange={(e) => setCurrentPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Nouveau mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={newPassword}\r\n                onChange={(e) => setNewPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Confirmer le nouveau mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '8px 16px',\r\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: isLoading ? 'not-allowed' : 'pointer',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                boxSizing: 'border-box'\r\n              }}\r\n            >\r\n              {isLoading ? 'Mise à jour...' : 'Changer le mot de passe'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChangePasswordModal;","// src/components/DashboardMedecin.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { getDesiderataByUser } from '../services/planningService';\r\nimport { logoutUser } from '../services/authService';\r\nimport { Calendar, ClipboardList, LogOut, Key, Menu, X } from 'lucide-react';\r\nimport ChangePasswordModal from './ChangePasswordModal';\r\n\r\nfunction DashboardMedecin() {\r\n  const [user, setUser] = useState(null);\r\n  const [desiderata, setDesiderata] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showChangePassword, setShowChangePassword] = useState(false);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\r\n      if (authUser) {\r\n        try {\r\n          const userData = await getUser(authUser.uid);\r\n          if (userData && userData.role === 'medecin') {\r\n            setUser(userData);\r\n            try {\r\n              const userDesiderata = await getDesiderataByUser(userData.id);\r\n              setDesiderata(userDesiderata);\r\n            } catch (error) {\r\n              console.error('Erreur lors de la récupération des desiderata:', error);\r\n            }\r\n          } else {\r\n            setError('Utilisateur non autorisé');\r\n            history.push('/');\r\n          }\r\n        } catch (error) {\r\n          console.error('Erreur:', error);\r\n          setError('Erreur lors de la récupération des données');\r\n        }\r\n      } else {\r\n        history.push('/');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [history]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n      history.push('/');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la déconnexion:\", error);\r\n      setError('Erreur lors de la déconnexion');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Erreur: {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          {/* Logo et titre */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563eb',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.25rem'\r\n          }}>\r\n            <Calendar size={24} />\r\n            <span>Planning APUM</span>\r\n          </div>\r\n\r\n          {/* Navigation principale - Desktop */}\r\n          <div style={{\r\n            display: 'none',\r\n            gap: '1rem',\r\n            '@media (min-width: 768px)': {\r\n              display: 'flex'\r\n            }\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/formulaire-desirata')}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <ClipboardList size={18} />\r\n              Saisir desiderata\r\n            </button>\r\n            <button\r\n              onClick={() => history.push('/planning-visualisation')}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Calendar size={18} />\r\n              Voir planning\r\n            </button>\r\n            <button\r\n              onClick={() => setShowChangePassword(true)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#dc2626',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n\r\n          {/* Bouton menu mobile */}\r\n          <button\r\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n            style={{\r\n              display: 'flex',\r\n              padding: '0.5rem',\r\n              color: '#4b5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              '@media (min-width: 768px)': {\r\n                display: 'none'\r\n              }\r\n            }}\r\n          >\r\n            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Menu mobile */}\r\n        <div style={{\r\n          display: isMenuOpen ? 'block' : 'none',\r\n          backgroundColor: 'white',\r\n          borderTop: '1px solid #e5e7eb',\r\n          '@media (min-width: 768px)': {\r\n            display: 'none'\r\n          }\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            padding: '0.5rem'\r\n          }}>\r\n            <button\r\n              onClick={() => {\r\n                history.push('/formulaire-desirata');\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <ClipboardList size={18} />\r\n              Saisir desiderata\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                history.push('/planning-visualisation');\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <Calendar size={18} />\r\n              Voir planning\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowChangePassword(true);\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                handleLogout();\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#dc2626',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem',\r\n      }}>\r\n        {/* Carte de bienvenue */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Bienvenue, Dr. {user?.nom}\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Gérez vos gardes et consultez le planning depuis votre tableau de bord\r\n          </p>\r\n        </div>\r\n\r\n        {/* Carte des derniers desiderata */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '800px',\r\n          margin: '0 auto'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Derniers desiderata\r\n          </h2>\r\n          {desiderata.length > 0 ? (\r\n            <ul style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '0.5rem'\r\n            }}>\r\n              {desiderata.map((d, index) => (\r\n                <li key={index} style={{\r\n                  padding: '0.75rem',\r\n                  backgroundColor: '#f9fafb',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem'\r\n                }}>\r\n                  Pour la période du {new Date(d.startDate).toLocaleDateString()} au {new Date(d.endDate).toLocaleDateString()}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p style={{ color: '#6b7280' }}>Aucun desiderata saisi</p>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      {/* Modal de changement de mot de passe */}\r\n      {showChangePassword && (\r\n        <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DashboardMedecin;","// src/components/DashboardAdmin.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser, getMedecins } from '../services/userService';\r\nimport { logoutUser } from '../services/authService';\r\nimport { getPeriodeSaisie, getPublishedPlanning } from '../services/planningService';\r\nimport { \r\n  Users, \r\n  Calendar, \r\n  Clock, \r\n  LogOut, \r\n  Key,\r\n  ClipboardList,\r\n  Settings,\r\n  ChevronRight\r\n} from 'lucide-react';\r\nimport ChangePasswordModal from './ChangePasswordModal';\r\n\r\nfunction DashboardAdmin() {\r\n  const [user, setUser] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [planning, setPlanning] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showChangePassword, setShowChangePassword] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'admin') {\r\n          setError('Utilisateur non autorisé');\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        setUser(userData);\r\n\r\n        // Récupération des données pour les statistiques\r\n        const medecinsList = await getMedecins();\r\n        setMedecins(medecinsList);\r\n\r\n        const periode = await getPeriodeSaisie();\r\n        setPeriodeSaisie(periode);\r\n\r\n        const publishedPlan = await getPublishedPlanning();\r\n        setPlanning(publishedPlan);\r\n\r\n      } catch (error) {\r\n        console.error('Erreur:', error);\r\n        setError('Erreur lors de la récupération des données');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n      history.push('/');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la déconnexion:\", error);\r\n      setError('Erreur lors de la déconnexion');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.25rem'\r\n          }}>\r\n            <Settings size={24} />\r\n            <span>Administration APUM</span>\r\n          </div>\r\n\r\n          {/* Actions utilisateur */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => setShowChangePassword(true)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#dc2626',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem',\r\n      }}>\r\n        {/* Carte de bienvenue */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Bienvenue, {user?.prenom} {user?.nom}\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Gérez les utilisateurs, le planning et les périodes de saisie depuis votre tableau de bord\r\n          </p>\r\n        </div>\r\n\r\n        {/* Actions principales */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: '600',\r\n            color: '#1f2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Actions principales\r\n          </h2>\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))'\r\n          }}>\r\n            {/* Gestion des utilisateurs */}\r\n            <button\r\n              onClick={() => history.push('/gestion-utilisateurs')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#EBF5FF',\r\n                border: '1px solid #2563EB',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#DBEAFE';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#EBF5FF';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#2563EB' }}>\r\n                  <Users size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer les utilisateurs</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Ajouter ou modifier des utilisateurs</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#2563EB\" />\r\n            </button>\r\n\r\n            {/* Gestion du planning */}\r\n            <button\r\n              onClick={() => history.push('/gestion-planning-admin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#F3E8FF',\r\n                border: '1px solid #9333EA',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#EDE9FE';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#F3E8FF';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#9333EA' }}>\r\n                  <Calendar size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer le planning</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Générer et modifier le planning</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#9333EA\" />\r\n            </button>\r\n\r\n            {/* Gestion de la période de saisie */}\r\n            <button\r\n              onClick={() => history.push('/gestion-periode-saisie')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#ECFDF5',\r\n                border: '1px solid #059669',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#D1FAE5';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#ECFDF5';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#059669' }}>\r\n                  <ClipboardList size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Période de saisie</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Définir la période de saisie des desiderata</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#059669\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cartes de statistiques */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\r\n          gap: '1rem'\r\n        }}>\r\n          {/* Nombre de médecins */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n          }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <div style={{\r\n                backgroundColor: '#EBF5FF',\r\n                borderRadius: '0.5rem',\r\n                padding: '0.75rem',\r\n                color: '#2563EB'\r\n              }}>\r\n                <Users size={24} />\r\n              </div>\r\n              <h2 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#1f2937'\r\n              }}>\r\n                Médecins\r\n              </h2>\r\n            </div>\r\n            <p style={{\r\n              fontSize: '2rem',\r\n              fontWeight: 'bold',\r\n              color: '#2563EB'\r\n            }}>\r\n              {medecins.length}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Période de saisie */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n          }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <div style={{\r\n                backgroundColor: '#F0FDF4',\r\n                borderRadius: '0.5rem',\r\n                padding: '0.75rem',\r\n                color: '#16A34A'\r\n              }}>\r\n                <Clock size={24} />\r\n              </div>\r\n              <h2 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#1f2937'\r\n              }}>\r\n                Période de saisie\r\n              </h2>\r\n            </div>\r\n            <p style={{\r\n              fontSize: '0.875rem',\r\n              color: periodeSaisie ? '#16A34A' : '#DC2626',\r\n              fontWeight: '500'\r\n            }}>\r\n              {periodeSaisie ? (\r\n                `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\r\n              ) : (\r\n                'Aucune période définie'\r\n              )}\r\n            </p>\r\n          </div>\r\n\r\n          {/* État du planning */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n         }}>\r\n           <div style={{\r\n             display: 'flex',\r\n             alignItems: 'center',\r\n             gap: '0.75rem',\r\n             marginBottom: '1rem'\r\n           }}>\r\n             <div style={{\r\n               backgroundColor: '#FFF7ED',\r\n               borderRadius: '0.5rem',\r\n               padding: '0.75rem',\r\n               color: '#EA580C'\r\n             }}>\r\n               <Calendar size={24} />\r\n             </div>\r\n             <h2 style={{\r\n               fontSize: '1.125rem',\r\n               fontWeight: '600',\r\n               color: '#1f2937'\r\n             }}>\r\n               Planning\r\n             </h2>\r\n           </div>\r\n           <p style={{\r\n             fontSize: '0.875rem',\r\n             color: planning ? '#16A34A' : '#DC2626',\r\n             fontWeight: '500'\r\n           }}>\r\n             {planning ? 'Planning publié' : 'Aucun planning publié'}\r\n           </p>\r\n         </div>\r\n       </div>\r\n     </main>\r\n\r\n     {/* Modal de changement de mot de passe */}\r\n     {showChangePassword && (\r\n       <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default DashboardAdmin;","// src/components/QuickFill.js\r\nimport React, { useState } from 'react';\r\nimport { Upload, ChevronDown, ChevronUp, Calendar } from 'lucide-react';\r\n\r\nfunction QuickFill({ creneaux, onApply, periodeSaisie }) {\r\n  const [selectedCreneaux, setSelectedCreneaux] = useState({});\r\n  const [selectedJours, setSelectedJours] = useState({});\r\n  const [selectedDispo, setSelectedDispo] = useState('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const jours = [\r\n    { id: '1', label: 'Lundi' },\r\n    { id: '2', label: 'Mardi' },\r\n    { id: '3', label: 'Mercredi' },\r\n    { id: '4', label: 'Jeudi' },\r\n    { id: '5', label: 'Vendredi' },\r\n    { id: '6', label: 'Samedi' },\r\n    { id: '0', label: 'Dimanche' }\r\n  ];\r\n\r\n  const handleSelectFullPeriod = () => {\r\n    if (periodeSaisie) {\r\n      setStartDate(periodeSaisie.startDate.split('T')[0]);\r\n      setEndDate(periodeSaisie.endDate.split('T')[0]);\r\n    }\r\n  };\r\n\r\n  const toggleAllCreneaux = () => {\r\n    const allSelected = creneaux.every(creneau => selectedCreneaux[creneau.id]);\r\n    const newSelectedCreneaux = {};\r\n    creneaux.forEach(creneau => {\r\n      newSelectedCreneaux[creneau.id] = !allSelected;\r\n    });\r\n    setSelectedCreneaux(newSelectedCreneaux);\r\n  };\r\n\r\n  const toggleAllJours = () => {\r\n    const allSelected = jours.every(jour => selectedJours[jour.id]);\r\n    const newSelectedJours = {};\r\n    jours.forEach(jour => {\r\n      newSelectedJours[jour.id] = !allSelected;\r\n    });\r\n    setSelectedJours(newSelectedJours);\r\n  };\r\n\r\n  const handleApply = () => {\r\n    if (!selectedDispo) {\r\n      alert('Veuillez sélectionner une disponibilité');\r\n      return;\r\n    }\r\n\r\n    if (!startDate || !endDate) {\r\n      alert('Veuillez sélectionner une période');\r\n      return;\r\n    }\r\n\r\n    const selectedCreneauxArray = Object.entries(selectedCreneaux)\r\n      .filter(([_, isSelected]) => isSelected)\r\n      .map(([creneauId]) => creneauId);\r\n\r\n    const selectedJoursArray = Object.entries(selectedJours)\r\n      .filter(([_, isSelected]) => isSelected)\r\n      .map(([jourId]) => jourId);\r\n\r\n    if (selectedCreneauxArray.length === 0) {\r\n      alert('Veuillez sélectionner au moins un créneau');\r\n      return;\r\n    }\r\n\r\n    if (selectedJoursArray.length === 0) {\r\n      alert('Veuillez sélectionner au moins un jour');\r\n      return;\r\n    }\r\n\r\n    onApply({\r\n      creneaux: selectedCreneauxArray,\r\n      jours: selectedJoursArray,\r\n      disponibilite: selectedDispo,\r\n      startDate,\r\n      endDate\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      width: '100%'\r\n    }}>\r\n      {/* En-tête avec bouton pour replier/déplier */}\r\n      <button\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        style={{\r\n          width: '100%',\r\n          padding: '1rem 1.5rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          border: 'none',\r\n          background: 'none',\r\n          cursor: 'pointer',\r\n          borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\r\n          transition: 'background-color 0.2s',\r\n          borderRadius: '8px'\r\n        }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n          <h3 style={{\r\n            fontSize: '1.125rem',\r\n            fontWeight: '600',\r\n            color: '#1F2937',\r\n            margin: 0\r\n          }}>\r\n            Remplissage rapide\r\n          </h3>\r\n        </div>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          color: '#6B7280',\r\n          fontSize: '0.875rem',\r\n          gap: '0.5rem'\r\n        }}>\r\n          {isExpanded ? 'Replier' : 'Déplier'}\r\n          {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n        </div>\r\n      </button>\r\n\r\n      {isExpanded && (\r\n        <div style={{ padding: '1.5rem' }}>\r\n          <div style={{ display: 'grid', gap: '1.5rem' }}>\r\n            {/* Sélection de la période */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Période de remplissage\r\n              </label>\r\n              <div style={{ \r\n                display: 'flex', \r\n                flexDirection: 'column',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  flexWrap: 'wrap',\r\n                  gap: '1rem'\r\n                }}>\r\n                  <div style={{ minWidth: '140px', flex: 1 }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '0.875rem',\r\n                      color: '#6B7280',\r\n                      marginBottom: '0.25rem'\r\n                    }}>\r\n                      Du :\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={startDate}\r\n                      onChange={(e) => setStartDate(e.target.value)}\r\n                      style={{\r\n                        padding: '0.5rem',\r\n                        border: '1px solid #D1D5DB',\r\n                        borderRadius: '0.375rem',\r\n                        width: '100%'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div style={{ minWidth: '140px', flex: 1 }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '0.875rem',\r\n                      color: '#6B7280',\r\n                      marginBottom: '0.25rem'\r\n                    }}>\r\n                      Au :\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={endDate}\r\n                      onChange={(e) => setEndDate(e.target.value)}\r\n                      style={{\r\n                        padding: '0.5rem',\r\n                        border: '1px solid #D1D5DB',\r\n                        borderRadius: '0.375rem',\r\n                        width: '100%'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSelectFullPeriod}\r\n                  style={{\r\n                    padding: '0.75rem 1rem',\r\n                    backgroundColor: '#EBF5FF',\r\n                    border: '1px solid #2563EB',\r\n                    borderRadius: '0.375rem',\r\n                    color: '#2563EB',\r\n                    fontSize: '0.875rem',\r\n                    cursor: 'pointer',\r\n                    width: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '0.5rem',\r\n                    fontWeight: '500',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\r\n                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\r\n                >\r\n                  <Calendar size={16} />\r\n                  Toute la période\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection des créneaux */}\r\n            <div>\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                <label style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151'\r\n                }}>\r\n                  Créneaux\r\n                </label>\r\n                <button\r\n                  onClick={toggleAllCreneaux}\r\n                  style={{\r\n                    fontSize: '0.75rem',\r\n                    color: '#2563EB',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    padding: '0.25rem 0.5rem'\r\n                  }}\r\n                >\r\n                  {creneaux.every(creneau => selectedCreneaux[creneau.id]) \r\n                    ? 'Tout désélectionner' \r\n                    : 'Tout sélectionner'}\r\n                </button>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gap: '0.5rem',\r\n                border: '1px solid #E5E7EB',\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem'\r\n              }}>\r\n                {creneaux.map(creneau => (\r\n                  <label\r\n                    key={creneau.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.5rem',\r\n                      cursor: 'pointer',\r\n                      borderRadius: '0.25rem',\r\n                      transition: 'background-color 0.2s'\r\n                    }}\r\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\r\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedCreneaux[creneau.id] || false}\r\n                      onChange={() => {\r\n                        setSelectedCreneaux(prev => ({\r\n                          ...prev,\r\n                          [creneau.id]: !prev[creneau.id]\r\n                        }));\r\n                      }}\r\n                      style={{\r\n                        width: '1rem',\r\n                        height: '1rem',\r\n                        borderRadius: '0.25rem'\r\n                      }}\r\n                    />\r\n                    <div>\r\n                      <div>{creneau.label}</div>\r\n                      <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>\r\n                        {creneau.hours}\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection des jours */}\r\n            <div>\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                <label style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151'\r\n                }}>\r\n                  Jours de la semaine\r\n                </label>\r\n                <button\r\n                  onClick={toggleAllJours}\r\n                  style={{\r\n                    fontSize: '0.75rem',\r\n                    color: '#2563EB',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    padding: '0.25rem 0.5rem'\r\n                  }}\r\n                >\r\n                  {jours.every(jour => selectedJours[jour.id]) \r\n                    ? 'Tout désélectionner' \r\n                    : 'Tout sélectionner'}\r\n                </button>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(140px, 1fr))',\r\n                gap: '0.5rem',\r\n                border: '1px solid #E5E7EB',\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem'\r\n              }}>\r\n                {jours.map(jour => (\r\n                  <label\r\n                    key={jour.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.5rem',\r\n                      cursor: 'pointer',\r\n                      borderRadius: '0.25rem',\r\n                      transition: 'background-color 0.2s'\r\n                    }}\r\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\r\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedJours[jour.id] || false}\r\n                      onChange={() => {\r\n                        setSelectedJours(prev => ({\r\n                          ...prev,\r\n                          [jour.id]: !prev[jour.id]\r\n                        }));\r\n                      }}\r\n                      style={{\r\n                        width: '1rem',\r\n                        height: '1rem',\r\n                        borderRadius: '0.25rem'\r\n                      }}\r\n                    />\r\n                    <span>{jour.label}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection de la disponibilité */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Disponibilité\r\n              </label>\r\n              <select\r\n                value={selectedDispo}\r\n                onChange={(e) => setSelectedDispo(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              >\r\n                <option value=\"\">Sélectionnez une disponibilité</option>\r\n                <option value=\"Oui\">Oui</option>\r\n                <option value=\"Possible\">Possible</option>\r\n                <option value=\"Non\">Non</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Bouton d'application */}\r\n            <button\r\n              onClick={handleApply}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '0.5rem',\r\n                width: '100%',\r\n                padding: '0.75rem',\r\n                backgroundColor: '#2563EB',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.375rem',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Upload size={18} />\r\n              Appliquer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QuickFill;","// src/components/WeeklyPattern.js\r\nimport React, { useState } from 'react';\r\nimport { Calendar, Copy, ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\nfunction WeeklyPattern({ creneaux, onApplyPattern, periodeSaisie }) {\r\n const [startDate, setStartDate] = useState('');\r\n const [endDate, setEndDate] = useState('');\r\n const [pattern, setPattern] = useState({});\r\n const [isExpanded, setIsExpanded] = useState(false);\r\n \r\n const jours = [\r\n   { id: '1', label: 'Lundi' },\r\n   { id: '2', label: 'Mardi' },\r\n   { id: '3', label: 'Mercredi' },\r\n   { id: '4', label: 'Jeudi' },\r\n   { id: '5', label: 'Vendredi' },\r\n   { id: '6', label: 'Samedi' },\r\n   { id: '0', label: 'Dimanche' }\r\n ];\r\n\r\n const handlePatternChange = (jour, creneau, value) => {\r\n   setPattern(prev => ({\r\n     ...prev,\r\n     [jour]: {\r\n       ...(prev[jour] || {}),\r\n       [creneau]: value\r\n     }\r\n   }));\r\n };\r\n\r\n const handleSelectFullPeriod = () => {\r\n   if (periodeSaisie) {\r\n     setStartDate(periodeSaisie.startDate.split('T')[0]);\r\n     setEndDate(periodeSaisie.endDate.split('T')[0]);\r\n   }\r\n };\r\n\r\n const handleApplyPattern = () => {\r\n   if (!startDate || !endDate) {\r\n     alert('Veuillez sélectionner une période');\r\n     return;\r\n   }\r\n\r\n   if (Object.keys(pattern).length === 0) {\r\n     alert('Veuillez définir au moins une préférence dans le pattern');\r\n     return;\r\n   }\r\n\r\n   onApplyPattern(pattern, startDate, endDate);\r\n };\r\n\r\n return (\r\n   <div style={{\r\n     backgroundColor: 'white',\r\n     borderRadius: '8px',\r\n     boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n     width: '100%'\r\n   }}>\r\n     {/* En-tête avec bouton pour replier/déplier */}\r\n     <button\r\n       onClick={() => setIsExpanded(!isExpanded)}\r\n       style={{\r\n         width: '100%',\r\n         padding: '1rem 1.5rem',\r\n         display: 'flex',\r\n         justifyContent: 'space-between',\r\n         alignItems: 'center',\r\n         border: 'none',\r\n         background: 'none',\r\n         cursor: 'pointer',\r\n         borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\r\n         transition: 'background-color 0.2s',\r\n         borderRadius: '8px'\r\n       }}\r\n     >\r\n       <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n         <h3 style={{\r\n           fontSize: '1.125rem',\r\n           fontWeight: '600',\r\n           color: '#1F2937',\r\n           margin: 0\r\n         }}>\r\n           Pattern hebdomadaire\r\n         </h3>\r\n       </div>\r\n       <div style={{\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         color: '#6B7280',\r\n         fontSize: '0.875rem',\r\n         gap: '0.5rem'\r\n       }}>\r\n         {isExpanded ? 'Replier' : 'Déplier'}\r\n         {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n       </div>\r\n     </button>\r\n\r\n     {isExpanded && (\r\n       <div style={{ padding: '1.5rem' }}>\r\n         <div style={{ marginBottom: '1.5rem' }}>\r\n           <p style={{\r\n             fontSize: '0.875rem',\r\n             color: '#6B7280',\r\n             marginBottom: '1rem'\r\n           }}>\r\n             Définissez votre semaine type ci-dessous. Ce pattern sera appliqué automatiquement sur la période sélectionnée.\r\n           </p>\r\n\r\n           {/* Table du pattern */}\r\n           <div style={{ \r\n             overflowX: 'auto',\r\n             marginBottom: '1.5rem',\r\n             maxWidth: '100%'\r\n           }}>\r\n             <table style={{\r\n               width: '100%',\r\n               borderCollapse: 'collapse',\r\n               fontSize: '0.875rem',\r\n               minWidth: '600px'\r\n             }}>\r\n               <thead>\r\n                 <tr>\r\n                   <th style={{\r\n                     padding: '0.75rem',\r\n                     backgroundColor: '#F3F4F6',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     textAlign: 'left',\r\n                     fontWeight: '600',\r\n                     minWidth: '100px'\r\n                   }}>\r\n                     Jour\r\n                   </th>\r\n                   {creneaux.map(creneau => (\r\n                     <th key={creneau.id} style={{\r\n                       padding: '0.75rem',\r\n                       backgroundColor: '#F3F4F6',\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       textAlign: 'left',\r\n                       fontWeight: '600'\r\n                     }}>\r\n                       <div>{creneau.label}</div>\r\n                       <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>{creneau.hours}</div>\r\n                     </th>\r\n                   ))}\r\n                 </tr>\r\n               </thead>\r\n               <tbody>\r\n                 {jours.map(jour => (\r\n                   <tr key={jour.id}>\r\n                     <td style={{\r\n                       padding: '0.75rem',\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       fontWeight: '500'\r\n                     }}>\r\n                       {jour.label}\r\n                     </td>\r\n                     {creneaux.map(creneau => (\r\n                       <td key={creneau.id} style={{\r\n                         padding: '0.75rem',\r\n                         borderBottom: '1px solid #E5E7EB'\r\n                       }}>\r\n                         {(!creneau.samediOnly || jour.id === '6') && (\r\n                           <select\r\n                             value={pattern[jour.id]?.[creneau.id] || ''}\r\n                             onChange={(e) => handlePatternChange(jour.id, creneau.id, e.target.value)}\r\n                             style={{\r\n                               width: '100%',\r\n                               padding: '0.5rem',\r\n                               border: '1px solid #D1D5DB',\r\n                               borderRadius: '0.375rem',\r\n                               backgroundColor: 'white'\r\n                             }}\r\n                           >\r\n                             <option value=\"\">-</option>\r\n                             <option value=\"Oui\">Oui</option>\r\n                             <option value=\"Possible\">Possible</option>\r\n                             <option value=\"Non\">Non</option>\r\n                           </select>\r\n                         )}\r\n                       </td>\r\n                     ))}\r\n                   </tr>\r\n                 ))}\r\n               </tbody>\r\n             </table>\r\n           </div>\r\n\r\n           {/* Sélection de la période */}\r\n           <div style={{\r\n             display: 'flex',\r\n             flexDirection: 'column',\r\n             gap: '1rem',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             <div style={{\r\n               display: 'flex',\r\n               flexWrap: 'wrap',\r\n               gap: '1rem',\r\n               marginBottom: '1rem'\r\n             }}>\r\n               <div style={{ minWidth: '140px', flex: 1 }}>\r\n                 <label style={{\r\n                   display: 'block',\r\n                   fontSize: '0.875rem',\r\n                   fontWeight: '500',\r\n                   color: '#374151',\r\n                   marginBottom: '0.5rem'\r\n                 }}>\r\n                   Du :\r\n                 </label>\r\n                 <input\r\n                   type=\"date\"\r\n                   value={startDate}\r\n                   onChange={(e) => setStartDate(e.target.value)}\r\n                   style={{\r\n                     padding: '0.5rem',\r\n                     border: '1px solid #D1D5DB',\r\n                     borderRadius: '0.375rem',\r\n                     width: '100%'\r\n                   }}\r\n                 />\r\n               </div>\r\n               <div style={{ minWidth: '140px', flex: 1 }}>\r\n                 <label style={{\r\n                   display: 'block',\r\n                   fontSize: '0.875rem',\r\n                   fontWeight: '500',\r\n                   color: '#374151',\r\n                   marginBottom: '0.5rem'\r\n                 }}>\r\n                   Au :\r\n                 </label>\r\n                 <input\r\n                   type=\"date\"\r\n                   value={endDate}\r\n                   onChange={(e) => setEndDate(e.target.value)}\r\n                   style={{\r\n                     padding: '0.5rem',\r\n                     border: '1px solid #D1D5DB',\r\n                     borderRadius: '0.375rem',\r\n                     width: '100%'\r\n                   }}\r\n                 />\r\n               </div>\r\n             </div>\r\n             \r\n             <button\r\n               onClick={handleSelectFullPeriod}\r\n               style={{\r\n                 padding: '0.75rem 1rem',\r\n                 backgroundColor: '#EBF5FF',\r\n                 border: '1px solid #2563EB',\r\n                 borderRadius: '0.375rem',\r\n                 color: '#2563EB',\r\n                 fontSize: '0.875rem',\r\n                 cursor: 'pointer',\r\n                 width: '100%',\r\n                 display: 'flex',\r\n                 alignItems: 'center',\r\n                 justifyContent: 'center',\r\n                 gap: '0.5rem',\r\n                 fontWeight: '500',\r\n                 transition: 'all 0.2s'\r\n               }}\r\n               onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\r\n               onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\r\n             >\r\n               <Calendar size={16} />\r\n               Toute la période\r\n             </button>\r\n           </div>\r\n\r\n           {/* Bouton d'application */}\r\n           <button\r\n             onClick={handleApplyPattern}\r\n             style={{\r\n               display: 'flex',\r\n               alignItems: 'center',\r\n               justifyContent: 'center',\r\n               gap: '0.5rem',\r\n               width: '100%',\r\n               padding: '0.75rem',\r\n               backgroundColor: '#2563EB',\r\n               color: 'white',\r\n               border: 'none',\r\n               borderRadius: '0.375rem',\r\n               fontWeight: '500',\r\n               cursor: 'pointer'\r\n             }}\r\n           >\r\n             <Copy size={18} />\r\n             Appliquer le pattern\r\n           </button>\r\n         </div>\r\n       </div>\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default WeeklyPattern;","// src/components/FormulaireDesirata.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { \r\n  addDesiderata, \r\n  getPeriodeSaisie, \r\n  getDesiderataByUser, \r\n  updateDesiderata \r\n} from '../services/planningService';\r\nimport { \r\n  Calendar,\r\n  ArrowLeft,\r\n  Save\r\n} from 'lucide-react';\r\nimport QuickFill from './QuickFill';\r\nimport WeeklyPattern from './WeeklyPattern';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2 },\r\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3 },\r\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true },\r\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3 },\r\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1 },\r\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3 }\r\n];\r\n\r\nconst options = ['Oui', 'Possible', 'Non'];\r\n\r\nconst joursFeries = [\r\n  '2024-01-01', '2024-04-01', '2024-05-01', '2024-05-08', '2024-05-09',\r\n  '2024-05-20', '2024-07-14', '2024-08-15', '2024-11-01', '2024-11-11', '2024-12-25'\r\n];\r\n\r\nfunction FormulaireDesirata() {\r\n  // États\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [desiderata, setDesiderata] = useState({});\r\n  const [nombreGardesSouhaitees, setNombreGardesSouhaitees] = useState(0);\r\n  const [nombreGardesMaxParSemaine, setNombreGardesMaxParSemaine] = useState(3);\r\n  const [gardesGroupees, setGardesGroupees] = useState(false);\r\n  const [renfortsAssocies, setRenfortsAssocies] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [existingDesiderataId, setExistingDesiderataId] = useState(null);\r\n  \r\n  const history = useHistory();\r\n\r\n  // Génération des dates\r\n  const generateDates = useCallback(() => {\r\n    if (!periodeSaisie) return [];\r\n    const dates = [];\r\n    let currentDate = new Date(periodeSaisie.startDate);\r\n    const end = new Date(periodeSaisie.endDate);\r\n    while (currentDate <= end) {\r\n      dates.push(new Date(currentDate));\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n    return dates;\r\n  }, [periodeSaisie]);\r\n\r\n  // Effet pour charger les données initiales\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (userData && userData.role === 'medecin') {\r\n          setUser(userData);\r\n          const periode = await getPeriodeSaisie();\r\n          if (periode) {\r\n            setPeriodeSaisie(periode);\r\n            const userDesiderata = await getDesiderataByUser(userData.id);\r\n            const relevantDesiderata = userDesiderata.find(d => \r\n              new Date(d.startDate) <= new Date(periode.endDate) && \r\n              new Date(d.endDate) >= new Date(periode.startDate)\r\n            );\r\n            \r\n            if (relevantDesiderata) {\r\n              setExistingDesiderataId(relevantDesiderata.id);\r\n              setDesiderata(relevantDesiderata.desiderata || {});\r\n              setNombreGardesSouhaitees(relevantDesiderata.nombreGardesSouhaitees || 0);\r\n              setNombreGardesMaxParSemaine(relevantDesiderata.nombreGardesMaxParSemaine || 3);\r\n              setGardesGroupees(relevantDesiderata.gardesGroupees || false);\r\n              setRenfortsAssocies(relevantDesiderata.renfortsAssocies || false);\r\n            }\r\n          } else {\r\n            setError('Aucune période de saisie n\\'a été définie par l\\'administrateur.');\r\n          }\r\n        } else {\r\n          setError('Utilisateur non autorisé');\r\n          history.push('/');\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des données:', error);\r\n        setError('Erreur lors de la récupération des données: ' + error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  // Gestion des changements de desiderata\r\n  const handleDesiderataChange = (date, creneau, value) => {\r\n    setDesiderata(prev => ({\r\n      ...prev,\r\n      [date]: {\r\n        ...(prev[date] || {}),\r\n        [creneau]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Gestion du remplissage rapide\r\n  const handleQuickFill = ({ creneaux: selectedCreneaux, jours: selectedJours, disponibilite, startDate, endDate }) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n    \r\n    setDesiderata(prev => {\r\n      const newDesiderata = { ...prev };\r\n      const dates = generateDates().filter(date => \r\n        date >= start && \r\n        date <= end\r\n      );\r\n\r\n      dates.forEach(date => {\r\n        if (selectedJours.includes(date.getDay().toString())) {\r\n          const dateString = date.toISOString().split('T')[0];\r\n          if (!newDesiderata[dateString]) {\r\n            newDesiderata[dateString] = {};\r\n          }\r\n          selectedCreneaux.forEach(creneauId => {\r\n            if (creneauId !== 'RENFORT_1' || date.getDay() === 6) {\r\n              newDesiderata[dateString][creneauId] = disponibilite;\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      return newDesiderata;\r\n    });\r\n  };\r\n\r\n  // Gestion du pattern hebdomadaire\r\n  const handleApplyPattern = (pattern, startDate, endDate) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n\r\n    setDesiderata(prev => {\r\n      const newDesiderata = { ...prev };\r\n      let currentDate = new Date(start);\r\n\r\n      while (currentDate <= end) {\r\n        const dayOfWeek = currentDate.getDay().toString();\r\n        const dateString = currentDate.toISOString().split('T')[0];\r\n\r\n        if (pattern[dayOfWeek]) {\r\n          newDesiderata[dateString] = { ...pattern[dayOfWeek] };\r\n        }\r\n\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n      }\r\n\r\n      return newDesiderata;\r\n    });\r\n  };\r\n\r\n  // Soumission du formulaire\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (user) {\r\n      try {\r\n        if (!periodeSaisie || !periodeSaisie.startDate || !periodeSaisie.endDate) {\r\n          throw new Error('Période de saisie non définie');\r\n        }\r\n\r\n        const desiderataData = {\r\n          startDate: periodeSaisie.startDate,\r\n          endDate: periodeSaisie.endDate,\r\n          desiderata,\r\n          nombreGardesSouhaitees,\r\n          nombreGardesMaxParSemaine,\r\n          gardesGroupees,\r\n          renfortsAssocies\r\n        };\r\n\r\n        if (existingDesiderataId) {\r\n          await updateDesiderata(existingDesiderataId, desiderataData);\r\n          alert('Desiderata mis à jour avec succès!');\r\n        } else {\r\n          await addDesiderata(user.id, desiderataData);\r\n          alert('Desiderata soumis avec succès!');\r\n        }\r\n        history.push('/dashboard-medecin');\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la soumission des desiderata:\", error);\r\n        setError('Une erreur est survenue lors de la soumission des desiderata: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fonctions utilitaires\r\n  const isWeekendOrHoliday = (date) => {\r\n    const day = date.getDay();\r\n    const formattedDate = date.toISOString().split('T')[0];\r\n    return day === 0 || day === 6 || joursFeries.includes(formattedDate);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    const days = ['dim.', 'lun.', 'mar.', 'mer.', 'jeu.', 'ven.', 'sam.'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    \r\n    const dayOfWeek = days[date.getDay()];\r\n    const dayOfMonth = date.getDate().toString().padStart(2, '0');\r\n    const month = months[date.getMonth()];\r\n    \r\n    return `${dayOfWeek} ${dayOfMonth} ${month}`;\r\n  };\r\n\r\n  // États de chargement et d'erreur\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-medecin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const dates = generateDates();\r\n\r\n  return (\r\n    <div style={{ \r\n      backgroundColor: '#f3f4f6', \r\n      minHeight: '100vh',\r\n      width: '100%',\r\n      maxWidth: '100%',\r\n      overflowX: 'hidden' // Empêche le scroll horizontal\r\n    }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40,\r\n        width: '100%'\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-medecin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Saisie des desiderata</span>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSubmit}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            <Save size={18} />\r\n            Enregistrer\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        margin: '0 auto',\r\n        paddingTop: '5rem',\r\n        width: '100%',\r\n        maxWidth: '1280px',\r\n        boxSizing: 'border-box'\r\n      }}>\r\n        {/* En-tête avec période */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1F2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Période de saisie : du {new Date(periodeSaisie.startDate).toLocaleDateString()} au {new Date(periodeSaisie.endDate).toLocaleDateString()}\r\n          </h2>\r\n\r\n          {/* Préférences générales */}\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1.5rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n          }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Nombre de gardes souhaitées par mois\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={nombreGardesSouhaitees}\r\n                onChange={(e) => setNombreGardesSouhaitees(parseInt(e.target.value))}\r\n                min=\"0\"\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Maximum de gardes par semaine\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={nombreGardesMaxParSemaine}\r\n                onChange={(e) => setNombreGardesMaxParSemaine(parseInt(e.target.value))}\r\n                min=\"1\"\r\n                max=\"7\"\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem'\r\n            }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"gardesGroupees\"\r\n                checked={gardesGroupees}\r\n                onChange={(e) => setGardesGroupees(e.target.checked)}\r\n                style={{\r\n                  width: '1rem',\r\n                  height: '1rem',\r\n                  borderRadius: '0.25rem',\r\n                  borderColor: '#D1D5DB'\r\n                }}\r\n              />\r\n              <label\r\n                htmlFor=\"gardesGroupees\"\r\n                style={{\r\n                  fontSize: '0.875rem',\r\n                  color: '#374151'\r\n                }}\r\n              >\r\n                Gardes groupées dans un même week-end\r\n              </label>\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem'\r\n            }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"renfortsAssocies\"\r\n                checked={renfortsAssocies}\r\n                onChange={(e) => setRenfortsAssocies(e.target.checked)}\r\n                style={{\r\n                  width: '1rem',\r\n                  height: '1rem',\r\n                  borderRadius: '0.25rem',\r\n                  borderColor: '#D1D5DB'\r\n                }}\r\n              />\r\n              <label\r\n                htmlFor=\"renfortsAssocies\"\r\n                style={{\r\n                  fontSize: '0.875rem',\r\n                  color: '#374151'\r\n                }}\r\n              >\r\n                Renforts associés à une garde\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Outils de remplissage */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gap: '2rem',\r\n          marginBottom: '2rem',\r\n          gridTemplateColumns: '1fr', // Par défaut en une colonne sur mobile\r\n          padding: '0 1rem', // Padding sur les côtés\r\n          maxWidth: '100%', // S'assure que rien ne déborde\r\n          boxSizing: 'border-box', // Inclut le padding dans la largeur\r\n          margin: '0 auto 2rem', // Centre le contenu\r\n          '@media (min-width: 768px)': { // Sur les écrans plus larges\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n            padding: 0\r\n          }\r\n        }}>\r\n          {/* Section remplissage rapide */}\r\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\r\n            <QuickFill\r\n              creneaux={creneaux}\r\n              onApply={handleQuickFill}\r\n              periodeSaisie={periodeSaisie}\r\n            />\r\n          </div>\r\n\r\n          {/* Section pattern hebdomadaire */}\r\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\r\n            <WeeklyPattern\r\n              creneaux={creneaux}\r\n              onApplyPattern={handleApplyPattern}\r\n              periodeSaisie={periodeSaisie}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n{/* Tableau des desiderata */}\r\n<div style={{\r\n  backgroundColor: 'white',\r\n  borderRadius: '0.5rem',\r\n  padding: '1.5rem',\r\n  boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n  overflowX: 'auto'\r\n}}>\r\n  <table style={{\r\n    width: '100%',\r\n    borderCollapse: 'collapse',\r\n    fontSize: '0.875rem'\r\n  }}>\r\n    <thead>\r\n      <tr>\r\n        <th style={{\r\n          padding: '0.75rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderBottom: '1px solid #E5E7EB',\r\n          textAlign: 'left',\r\n          fontWeight: '600',\r\n          position: 'sticky',\r\n          left: 0,\r\n          backgroundColor: 'white',\r\n          zIndex: 10\r\n        }}>\r\n          Date\r\n        </th>\r\n        {creneaux.map(creneau => (\r\n          <th key={creneau.id} style={{\r\n            padding: '0.75rem',\r\n            backgroundColor: '#F3F4F6',\r\n            borderBottom: '1px solid #E5E7EB',\r\n            textAlign: 'left',\r\n            fontWeight: '600',\r\n            minWidth: '150px'\r\n          }}>\r\n            <div>{creneau.label}</div>\r\n            <div style={{ \r\n              fontSize: '0.75rem', \r\n              color: '#6B7280',\r\n              fontWeight: 'normal'\r\n            }}>\r\n              {creneau.hours}\r\n            </div>\r\n            <div style={{ \r\n              fontSize: '0.75rem', \r\n              color: '#6B7280',\r\n              fontWeight: 'normal'\r\n            }}>\r\n              {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\r\n            </div>\r\n          </th>\r\n        ))}\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {dates.map(date => {\r\n        const isHighlighted = isWeekendOrHoliday(date);\r\n        const dateString = date.toISOString().split('T')[0];\r\n        return (\r\n          <tr key={dateString} style={{\r\n            backgroundColor: isHighlighted ? '#F3F4F6' : 'white'\r\n          }}>\r\n            <td style={{\r\n              padding: '0.75rem',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              fontWeight: '500',\r\n              position: 'sticky',\r\n              left: 0,\r\n              backgroundColor: isHighlighted ? '#F3F4F6' : 'white',\r\n              zIndex: 10\r\n            }}>\r\n              {formatDate(date)}\r\n            </td>\r\n            {creneaux.map(creneau => (\r\n              <td key={`${dateString}-${creneau.id}`} style={{\r\n                padding: '0.75rem',\r\n                borderBottom: '1px solid #E5E7EB'\r\n              }}>\r\n                {(!creneau.samediOnly || date.getDay() === 6) && (\r\n                  <select\r\n                    value={desiderata[dateString]?.[creneau.id] || ''}\r\n                    onChange={(e) => handleDesiderataChange(dateString, creneau.id, e.target.value)}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '0.5rem',\r\n                      border: '1px solid #D1D5DB',\r\n                      borderRadius: '0.375rem',\r\n                      backgroundColor: 'white',\r\n                      color: (() => {\r\n                        const value = desiderata[dateString]?.[creneau.id];\r\n                        switch(value) {\r\n                          case 'Oui': return '#059669';\r\n                          case 'Possible': return '#D97706';\r\n                          case 'Non': return '#DC2626';\r\n                          default: return '#6B7280';\r\n                        }\r\n                      })()\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Sélectionnez</option>\r\n                    {options.map(option => (\r\n                      <option \r\n                        key={option} \r\n                        value={option}\r\n                      >\r\n                        {option}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                )}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        );\r\n      })}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n</main>\r\n</div>\r\n);\r\n}\r\n\r\nexport default FormulaireDesirata;","// src/components/GestionUtilisateurs.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getAllUsers, createUser, deleteUser, getUser } from '../services/userService';\r\nimport { registerUser } from '../services/authService';\r\nimport { \r\n  ArrowLeft, \r\n  Plus, \r\n  Search, \r\n  Trash2, \r\n  Edit2, \r\n  Users,\r\n  Grid,\r\n  List,\r\n  Filter,\r\n  X,\r\n  UserPlus,\r\n  Mail\r\n} from 'lucide-react';\r\n\r\nfunction GestionUtilisateurs() {\r\n  // États de base\r\n  const [users, setUsers] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const history = useHistory();\r\n\r\n  // États pour le formulaire d'ajout\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [newUser, setNewUser] = useState({ \r\n    nom: '', \r\n    prenom: '', \r\n    email: '', \r\n    role: 'medecin' \r\n  });\r\n\r\n  // États pour les filtres et la vue\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('all');\r\n  const [viewMode, setViewMode] = useState('table');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  // État pour la pagination\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [usersPerPage] = useState(12); // Augmenté pour la vue en grille\r\n\r\n  // État pour la confirmation\r\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\r\n  const [userToDelete, setUserToDelete] = useState(null);\r\n\r\n  // Effet pour charger les données\r\n useEffect(() => {\r\n  const fetchData = async () => {\r\n    try {\r\n      const authUser = auth.currentUser;\r\n      if (!authUser) {\r\n        history.push('/');\r\n        return;\r\n      }\r\n\r\n      const userData = await getUser(authUser.uid);\r\n      if (!userData || userData.role !== 'admin') {\r\n        setError('Utilisateur non autorisé');\r\n        history.push('/');\r\n        return;\r\n      }\r\n\r\n      setCurrentUser(userData);\r\n      await fetchUsers();\r\n    } catch (error) {\r\n      console.error(\"Erreur:\", error);\r\n      setError(\"Erreur lors de la récupération des données\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchData();\r\n}, [history]);\r\n\r\n// Fonction pour récupérer les utilisateurs\r\nconst fetchUsers = async () => {\r\n  try {\r\n    const fetchedUsers = await getAllUsers();\r\n    setUsers(fetchedUsers);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la récupération des utilisateurs:\", error);\r\n    setError(\"Erreur lors de la récupération des utilisateurs\");\r\n  }\r\n};\r\n\r\n// Gestion des filtres et de la recherche\r\nconst filteredUsers = users.filter(user => {\r\n  const matchesSearch = (\r\n    user.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    user.prenom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const matchesRole = roleFilter === 'all' || user.role === roleFilter;\r\n\r\n  return matchesSearch && matchesRole;\r\n});\r\n\r\n// Pagination\r\nconst indexOfLastUser = currentPage * usersPerPage;\r\nconst indexOfFirstUser = indexOfLastUser - usersPerPage;\r\nconst currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\r\nconst totalPages = Math.ceil(filteredUsers.length / usersPerPage);\r\n\r\n// Gestion du formulaire d'ajout\r\nconst handleInputChange = (e) => {\r\n  const { name, value } = e.target;\r\n  setNewUser(prev => ({ ...prev, [name]: value }));\r\n};\r\n\r\n// Gestion de l'ajout d'utilisateur\r\nconst handleAddUser = async (e) => {\r\n  e.preventDefault();\r\n  setError(null);\r\n\r\n  try {\r\n    const userCredential = await registerUser(newUser.email);\r\n    await createUser(userCredential.user.uid, {\r\n      nom: newUser.nom,\r\n      prenom: newUser.prenom,\r\n      email: newUser.email,\r\n      role: newUser.role\r\n    });\r\n\r\n    setNewUser({ nom: '', prenom: '', email: '', role: 'medecin' });\r\n    setShowAddForm(false);\r\n    await fetchUsers();\r\n\r\n    // Afficher une notification de succès\r\n    showNotification('Utilisateur ajouté avec succès');\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'ajout de l'utilisateur:\", error);\r\n    let errorMessage = \"Une erreur est survenue lors de l'ajout de l'utilisateur\";\r\n    \r\n    if (error.code === \"auth/email-already-in-use\") {\r\n      errorMessage = \"Cette adresse email est déjà utilisée.\";\r\n    }\r\n\r\n    setError(errorMessage);\r\n  }\r\n};\r\n\r\n// Gestion de la suppression\r\nconst handleDeleteClick = (user) => {\r\n  setUserToDelete(user);\r\n  setShowConfirmDelete(true);\r\n};\r\n\r\nconst handleConfirmDelete = async () => {\r\n  try {\r\n    await deleteUser(userToDelete.id);\r\n    await fetchUsers();\r\n    setShowConfirmDelete(false);\r\n    setUserToDelete(null);\r\n    showNotification('Utilisateur supprimé avec succès');\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression:\", error);\r\n    setError(\"Erreur lors de la suppression de l'utilisateur\");\r\n  }\r\n};\r\n\r\n// Fonction pour afficher les notifications\r\nconst showNotification = (message) => {\r\n  // On pourrait implémenter un système de notifications plus sophistiqué ici\r\n  alert(message);\r\n};\r\n\r\n// Si chargement en cours\r\nif (loading) {\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      backgroundColor: '#f3f4f6'\r\n    }}>\r\n      Chargement...\r\n    </div>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n    {/* Menu fixe en haut */}\r\n    <nav style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      zIndex: 40\r\n    }}>\r\n      <div style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <button\r\n            onClick={() => history.push('/dashboard-admin')}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#4B5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              padding: '0.5rem'\r\n            }}\r\n          >\r\n            <ArrowLeft size={20} />\r\n            Retour\r\n          </button>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            <Users size={24} />\r\n            <span>Gestion des utilisateurs</span>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => setShowAddForm(true)}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '0.5rem 1rem',\r\n            backgroundColor: '#2563EB',\r\n            color: 'white',\r\n            borderRadius: '0.375rem',\r\n            border: 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '0.875rem'\r\n          }}\r\n        >\r\n          <UserPlus size={18} />\r\n          Ajouter un utilisateur\r\n        </button>\r\n      </div>\r\n    </nav>\r\n\r\n    {/* Contenu principal */}\r\n    <main style={{\r\n      maxWidth: '1280px',\r\n      margin: '0 auto',\r\n      padding: '6rem 1rem 2rem',\r\n    }}>\r\n      {/* Barre d'outils */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1rem',\r\n        marginBottom: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        gap: '1rem',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between'\r\n      }}>\r\n        {/* Barre de recherche */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          flex: '1',\r\n          minWidth: '200px',\r\n          maxWidth: '400px',\r\n          position: 'relative'\r\n        }}>\r\n          <Search size={20} style={{\r\n            position: 'absolute',\r\n            left: '0.75rem',\r\n            color: '#6B7280'\r\n          }} />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Rechercher un utilisateur...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem 0.75rem 0.5rem 2.5rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Filtres et vue */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          {/* Filtre par rôle */}\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value)}\r\n            style={{\r\n              padding: '0.5rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              backgroundColor: 'white',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          >\r\n            <option value=\"all\">Tous les rôles</option>\r\n            <option value=\"medecin\">Médecins</option>\r\n            <option value=\"admin\">Administrateurs</option>\r\n          </select>\r\n\r\n          {/* Boutons de vue */}\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            backgroundColor: '#F3F4F6',\r\n            padding: '0.25rem',\r\n            borderRadius: '0.375rem'\r\n          }}>\r\n            <button\r\n              onClick={() => setViewMode('table')}\r\n              style={{\r\n                padding: '0.5rem',\r\n                borderRadius: '0.25rem',\r\n                border: 'none',\r\n                backgroundColor: viewMode === 'table' ? 'white' : 'transparent',\r\n                boxShadow: viewMode === 'table' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <List size={20} color={viewMode === 'table' ? '#2563EB' : '#6B7280'} />\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('grid')}\r\n              style={{\r\n                padding: '0.5rem',\r\n                borderRadius: '0.25rem',\r\n                border: 'none',\r\n                backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\r\n                boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Affichage des erreurs */}\r\n      {error && (\r\n         <div style={{\r\n           backgroundColor: '#FEE2E2',\r\n           color: '#DC2626',\r\n           padding: '1rem',\r\n           borderRadius: '0.5rem',\r\n           marginBottom: '1.5rem',\r\n           display: 'flex',\r\n           alignItems: 'center',\r\n           gap: '0.5rem'\r\n         }}>\r\n           <X size={20} />\r\n           {error}\r\n         </div>\r\n       )}\r\n\r\n       {/* Vue tableau */}\r\n       {viewMode === 'table' && (\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n           overflow: 'hidden'\r\n         }}>\r\n           <div style={{ overflowX: 'auto' }}>\r\n             <table style={{\r\n               width: '100%',\r\n               borderCollapse: 'collapse',\r\n               fontSize: '0.875rem'\r\n             }}>\r\n               <thead>\r\n                 <tr>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Nom\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Prénom\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Email\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Rôle\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'right',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Actions\r\n                   </th>\r\n                 </tr>\r\n               </thead>\r\n               <tbody>\r\n                 {currentUsers.map((user) => (\r\n                   <tr \r\n                     key={user.id}\r\n                     style={{\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       transition: 'background-color 0.2s'\r\n                     }}\r\n                     onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F9FAFB'}\r\n                     onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'white'}\r\n                   >\r\n                     <td style={{ padding: '1rem' }}>{user.nom}</td>\r\n                     <td style={{ padding: '1rem' }}>{user.prenom}</td>\r\n                     <td style={{ padding: '1rem' }}>\r\n                       <div style={{\r\n                         display: 'flex',\r\n                         alignItems: 'center',\r\n                         gap: '0.5rem'\r\n                       }}>\r\n                         <Mail size={16} color=\"#6B7280\" />\r\n                         {user.email}\r\n                       </div>\r\n                     </td>\r\n                     <td style={{ padding: '1rem' }}>\r\n                       <span style={{\r\n                         padding: '0.25rem 0.5rem',\r\n                         borderRadius: '9999px',\r\n                         fontSize: '0.75rem',\r\n                         fontWeight: '500',\r\n                         backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\r\n                         color: user.role === 'admin' ? '#2563EB' : '#16A34A'\r\n                       }}>\r\n                         {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\r\n                       </span>\r\n                     </td>\r\n                     <td style={{\r\n                       padding: '1rem',\r\n                       textAlign: 'right'\r\n                     }}>\r\n                       <div style={{\r\n                         display: 'flex',\r\n                         gap: '0.5rem',\r\n                         justifyContent: 'flex-end'\r\n                       }}>\r\n                         <button\r\n                           onClick={() => handleDeleteClick(user)}\r\n                           style={{\r\n                             padding: '0.5rem',\r\n                             borderRadius: '0.375rem',\r\n                             border: '1px solid #DC2626',\r\n                             backgroundColor: 'white',\r\n                             color: '#DC2626',\r\n                             cursor: 'pointer',\r\n                             display: 'flex',\r\n                             alignItems: 'center',\r\n                             gap: '0.25rem',\r\n                             transition: 'all 0.2s'\r\n                           }}\r\n                           onMouseOver={(e) => {\r\n                             e.currentTarget.style.backgroundColor = '#DC2626';\r\n                             e.currentTarget.style.color = 'white';\r\n                           }}\r\n                           onMouseOut={(e) => {\r\n                             e.currentTarget.style.backgroundColor = 'white';\r\n                             e.currentTarget.style.color = '#DC2626';\r\n                           }}\r\n                         >\r\n                           <Trash2 size={16} />\r\n                           Supprimer\r\n                         </button>\r\n                       </div>\r\n                     </td>\r\n                   </tr>\r\n                 ))}\r\n               </tbody>\r\n             </table>\r\n           </div>\r\n\r\n           {/* Pagination */}\r\n           {totalPages > 1 && (\r\n             <div style={{\r\n               padding: '1rem',\r\n               display: 'flex',\r\n               justifyContent: 'center',\r\n               gap: '0.5rem',\r\n               borderTop: '1px solid #E5E7EB'\r\n             }}>\r\n               {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                 <button\r\n                   key={page}\r\n                   onClick={() => setCurrentPage(page)}\r\n                   style={{\r\n                     padding: '0.5rem 1rem',\r\n                     borderRadius: '0.375rem',\r\n                     border: '1px solid #E5E7EB',\r\n                     backgroundColor: currentPage === page ? '#2563EB' : 'white',\r\n                     color: currentPage === page ? 'white' : '#374151',\r\n                     cursor: 'pointer',\r\n                     transition: 'all 0.2s'\r\n                   }}\r\n                 >\r\n                   {page}\r\n                 </button>\r\n               ))}\r\n             </div>\r\n           )}\r\n         </div>\r\n       )}\r\n\r\n{/* Vue grille */}\r\n{viewMode === 'grid' && (\r\n  <div>\r\n    <div style={{\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n      gap: '1rem'\r\n    }}>\r\n      {currentUsers.map((user) => (\r\n        <div\r\n          key={user.id}\r\n          style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            padding: '1.5rem',\r\n            position: 'relative',\r\n            transition: 'transform 0.2s, box-shadow 0.2s'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.currentTarget.style.transform = 'translateY(-2px)';\r\n            e.currentTarget.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.currentTarget.style.transform = 'translateY(0)';\r\n            e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)';\r\n          }}\r\n        >\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'start',\r\n            justifyContent: 'space-between',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            <div>\r\n              <h3 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#111827',\r\n                marginBottom: '0.25rem'\r\n              }}>\r\n                {user.prenom} {user.nom}\r\n              </h3>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#6B7280',\r\n                fontSize: '0.875rem'\r\n              }}>\r\n                <Mail size={16} />\r\n                {user.email}\r\n              </div>\r\n            </div>\r\n            <span style={{\r\n              padding: '0.25rem 0.75rem',\r\n              borderRadius: '9999px',\r\n              fontSize: '0.75rem',\r\n              fontWeight: '500',\r\n              backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\r\n              color: user.role === 'admin' ? '#2563EB' : '#16A34A'\r\n            }}>\r\n              {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\r\n            </span>\r\n          </div>\r\n\r\n          <div style={{\r\n            borderTop: '1px solid #E5E7EB',\r\n            paddingTop: '1rem',\r\n            display: 'flex',\r\n            justifyContent: 'flex-end'\r\n          }}>\r\n            <button\r\n              onClick={() => handleDeleteClick(user)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #DC2626',\r\n                backgroundColor: 'white',\r\n                color: '#DC2626',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#DC2626';\r\n                e.currentTarget.style.color = 'white';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'white';\r\n                e.currentTarget.style.color = '#DC2626';\r\n              }}\r\n            >\r\n              <Trash2 size={16} />\r\n              Supprimer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n\r\n    {/* Pagination */}\r\n    {totalPages > 1 && (\r\n      <div style={{\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        gap: '0.5rem',\r\n        marginTop: '2rem'\r\n      }}>\r\n        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n          <button\r\n            key={page}\r\n            onClick={() => setCurrentPage(page)}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #E5E7EB',\r\n              backgroundColor: currentPage === page ? '#2563EB' : 'white',\r\n              color: currentPage === page ? 'white' : '#374151',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s',\r\n              minWidth: '2.5rem',\r\n              fontWeight: currentPage === page ? '600' : '400'\r\n            }}\r\n            onMouseOver={(e) => {\r\n              if (currentPage !== page) {\r\n                e.currentTarget.style.backgroundColor = '#F3F4F6';\r\n              }\r\n            }}\r\n            onMouseOut={(e) => {\r\n              if (currentPage !== page) {\r\n                e.currentTarget.style.backgroundColor = 'white';\r\n              }\r\n            }}\r\n          >\r\n            {page}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    )}\r\n  </div>\r\n)}\r\n     </main>\r\n\r\n     {/* Modal d'ajout d'utilisateur */}\r\n     {showAddForm && (\r\n       <div style={{\r\n         position: 'fixed',\r\n         top: 0,\r\n         left: 0,\r\n         right: 0,\r\n         bottom: 0,\r\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         justifyContent: 'center',\r\n         zIndex: 50\r\n       }}>\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           padding: '2rem',\r\n           width: '90%',\r\n           maxWidth: '500px',\r\n           position: 'relative'\r\n         }}>\r\n           <button\r\n             onClick={() => setShowAddForm(false)}\r\n             style={{\r\n               position: 'absolute',\r\n               top: '1rem',\r\n               right: '1rem',\r\n               padding: '0.5rem',\r\n               border: 'none',\r\n               backgroundColor: 'transparent',\r\n               cursor: 'pointer'\r\n             }}\r\n           >\r\n             <X size={20} color=\"#6B7280\" />\r\n           </button>\r\n\r\n           <h2 style={{\r\n             fontSize: '1.5rem',\r\n             fontWeight: 'bold',\r\n             color: '#111827',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             Ajouter un utilisateur\r\n           </h2>\r\n\r\n           <form onSubmit={handleAddUser}>\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Nom\r\n               </label>\r\n               <input\r\n                 type=\"text\"\r\n                 name=\"nom\"\r\n                 value={newUser.nom}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Prénom\r\n               </label>\r\n               <input\r\n                 type=\"text\"\r\n                 name=\"prenom\"\r\n                 value={newUser.prenom}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Email\r\n               </label>\r\n               <input\r\n                 type=\"email\"\r\n                 name=\"email\"\r\n                 value={newUser.email}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1.5rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Rôle\r\n               </label>\r\n               <select\r\n                 name=\"role\"\r\n                 value={newUser.role}\r\n                 onChange={handleInputChange}\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB',\r\n                   backgroundColor: 'white'\r\n                 }}\r\n               >\r\n                 <option value=\"medecin\">Médecin</option>\r\n                 <option value=\"admin\">Administrateur</option>\r\n               </select>\r\n             </div>\r\n\r\n             <div style={{\r\n               display: 'flex',\r\n               gap: '1rem',\r\n               justifyContent: 'flex-end'\r\n             }}>\r\n               <button\r\n                 type=\"button\"\r\n                 onClick={() => setShowAddForm(false)}\r\n                 style={{\r\n                   padding: '0.5rem 1rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB',\r\n                   backgroundColor: 'white',\r\n                   color: '#374151',\r\n                   cursor: 'pointer'\r\n                 }}\r\n               >\r\n                 Annuler\r\n               </button>\r\n               <button\r\n                 type=\"submit\"\r\n                 style={{\r\n                   padding: '0.5rem 1rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: 'none',\r\n                   backgroundColor: '#2563EB',\r\n                   color: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n               >\r\n                 Ajouter\r\n               </button>\r\n             </div>\r\n           </form>\r\n         </div>\r\n       </div>\r\n     )}\r\n\r\n     {/* Modal de confirmation de suppression */}\r\n     {showConfirmDelete && (\r\n       <div style={{\r\n         position: 'fixed',\r\n         top: 0,\r\n         left: 0,\r\n         right: 0,\r\n         bottom: 0,\r\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         justifyContent: 'center',\r\n         zIndex: 50\r\n       }}>\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           padding: '2rem',\r\n           width: '90%',\r\n           maxWidth: '400px',\r\n           textAlign: 'center'\r\n         }}>\r\n           <div style={{\r\n             width: '3rem',\r\n             height: '3rem',\r\n             backgroundColor: '#FEE2E2',\r\n             borderRadius: '50%',\r\n             display: 'flex',\r\n             alignItems: 'center',\r\n             justifyContent: 'center',\r\n             margin: '0 auto 1rem'\r\n           }}>\r\n             <Trash2 size={24} color=\"#DC2626\" />\r\n           </div>\r\n\r\n           <h2 style={{\r\n             fontSize: '1.25rem',\r\n             fontWeight: 'bold',\r\n             color: '#111827',\r\n             marginBottom: '0.5rem'\r\n           }}>\r\n             Confirmer la suppression\r\n           </h2>\r\n\r\n           <p style={{\r\n             color: '#6B7280',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             Êtes-vous sûr de vouloir supprimer l'utilisateur{' '}\r\n             <span style={{ fontWeight: '600' }}>\r\n               {userToDelete?.prenom} {userToDelete?.nom}\r\n             </span>\r\n             ? Cette action est irréversible.\r\n           </p>\r\n\r\n           <div style={{\r\n             display: 'flex',\r\n             gap: '1rem',\r\n             justifyContent: 'center'\r\n           }}>\r\n             <button\r\n               onClick={() => {\r\n                 setShowConfirmDelete(false);\r\n                 setUserToDelete(null);\r\n               }}\r\n               style={{\r\n                 padding: '0.5rem 1rem',\r\n                 borderRadius: '0.375rem',\r\n                 border: '1px solid #D1D5DB',\r\n                 backgroundColor: 'white',\r\n                 color: '#374151',\r\n                 cursor: 'pointer',\r\n                 minWidth: '100px'\r\n               }}\r\n             >\r\n               Annuler\r\n             </button>\r\n             <button\r\n               onClick={handleConfirmDelete}\r\n               style={{\r\n                 padding: '0.5rem 1rem',\r\n                 borderRadius: '0.375rem',\r\n                 border: 'none',\r\n                 backgroundColor: '#DC2626',\r\n                 color: 'white',\r\n                 cursor: 'pointer',\r\n                 minWidth: '100px'\r\n               }}\r\n             >\r\n               Supprimer\r\n             </button>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default GestionUtilisateurs;","// src/utils/planningGenerator.js\r\nimport { getDesiderataForPeriod } from '../services/planningService';\r\nimport { getAllUsers } from '../services/userService';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART (1h - 7h)', medecins: 2 },\r\n  { id: 'QUART_2', label: '2ème QUART (7h - 13h)', medecins: 3 },\r\n  { id: 'RENFORT_1', label: 'RENFORT 10h / 13h', medecins: 1, samediOnly: true },\r\n  { id: 'QUART_3', label: '3ème QUART (13h - 19h)', medecins: 3 },\r\n  { id: 'RENFORT_2', label: 'RENFORT 20H / 00H', medecins: 1 },\r\n  { id: 'QUART_4', label: '4ème QUART (19h - 1h)', medecins: 3 },\r\n];\r\n\r\nconst creneauxChevauchants = {\r\n  'QUART_2': ['RENFORT_1'],\r\n  'RENFORT_1': ['QUART_2'],\r\n  'QUART_4': ['RENFORT_2'],\r\n  'RENFORT_2': ['QUART_4']\r\n};\r\n\r\nconst aCreneauxChevauchants = (medecinId, date, creneauId, planning) => {\r\n  if (!creneauxChevauchants[creneauId]) return false;\r\n  \r\n  const creneauxDuJour = planning[date];\r\n  return creneauxChevauchants[creneauId].some(creneauChevauchant => \r\n    creneauxDuJour[creneauChevauchant]?.includes(medecinId)\r\n  );\r\n};\r\n\r\nconst genererPlanning = async (debut, fin) => {\r\n  try {\r\n    const desiderataData = await getDesiderataForPeriod(debut, fin);\r\n    const users = await getAllUsers();\r\n    const medecins = users.filter(user => user.role === 'medecin').map(user => user.id);\r\n\r\n    const desiderata = {};\r\n    desiderataData.forEach(d => {\r\n      if (!desiderata[d.userId]) {\r\n        desiderata[d.userId] = {\r\n          preferences: {},\r\n          nombreGardesSouhaitees: d.nombreGardesSouhaitees,\r\n          nombreGardesMaxParSemaine: d.nombreGardesMaxParSemaine || 7,\r\n          gardesGroupees: d.gardesGroupees,\r\n          renfortsAssocies: d.renfortsAssocies\r\n        };\r\n      }\r\n      Object.entries(d.desiderata).forEach(([date, creneaux]) => {\r\n        const formattedDate = new Date(date).toISOString().split('T')[0];\r\n        if (!desiderata[d.userId].preferences[formattedDate]) {\r\n          desiderata[d.userId].preferences[formattedDate] = {};\r\n        }\r\n        Object.assign(desiderata[d.userId].preferences[formattedDate], creneaux);\r\n      });\r\n    });\r\n\r\n    let planning = genererPlanningSolution(debut, fin, desiderata, medecins);\r\n    planning = rechercheTabou(planning, debut, fin, desiderata, medecins);\r\n    return planning;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la génération du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst genererPlanningSolution = (debut, fin, desiderata, medecins) => {\r\n  const planning = {};\r\n  let currentDate = new Date(debut);\r\n  const endDate = new Date(fin);\r\n\r\n  while (currentDate <= endDate) {\r\n    const dateString = currentDate.toISOString().split('T')[0];\r\n    planning[dateString] = {};\r\n\r\n    // Générer les créneaux dans un ordre spécifique pour mieux gérer les chevauchements\r\n    const ordreCreneaux = [\r\n      'QUART_1',\r\n      'QUART_2',\r\n      'RENFORT_1',\r\n      'QUART_3',\r\n      'QUART_4',\r\n      'RENFORT_2'\r\n    ];\r\n\r\n    ordreCreneaux.forEach(creneauId => {\r\n      const creneau = creneaux.find(c => c.id === creneauId);\r\n      if (creneau && (!creneau.samediOnly || currentDate.getDay() === 6)) {\r\n        planning[dateString][creneauId] = assignerMedecins(dateString, creneau, desiderata, medecins, planning);\r\n      }\r\n    });\r\n\r\n    currentDate.setDate(currentDate.getDate() + 1);\r\n  }\r\n\r\n  return planning;\r\n};\r\n\r\nconst getWeekNumber = (date) => {\r\n  const d = new Date(date);\r\n  d.setHours(0, 0, 0, 0);\r\n  d.setDate(d.getDate() + 4 - (d.getDay() || 7));\r\n  const yearStart = new Date(d.getFullYear(), 0, 1);\r\n  return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\r\n};\r\n\r\nconst compterGardesParSemaine = (medecinId, date, planning) => {\r\n  const weekNumber = getWeekNumber(date);\r\n  let count = 0;\r\n\r\n  Object.entries(planning).forEach(([planningDate, creneaux]) => {\r\n    if (getWeekNumber(planningDate) === weekNumber) {\r\n      Object.values(creneaux).forEach(medecins => {\r\n        if (medecins && medecins.includes(medecinId)) {\r\n          count++;\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return count;\r\n};\r\n\r\nconst assignerMedecins = (date, creneau, desiderata, medecins, planning) => {\r\n  const medecinsDispo = medecins.filter(medecinId => {\r\n    const choix = desiderata[medecinId]?.preferences[date]?.[creneau.id];\r\n    const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\r\n    const maxGardesParSemaine = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\r\n    const aChevauchement = aCreneauxChevauchants(medecinId, date, creneau.id, planning);\r\n\r\n    return (choix === 'Oui' || choix === 'Possible') && \r\n           gardesParSemaine < maxGardesParSemaine &&\r\n           !aChevauchement;\r\n  });\r\n\r\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\r\n    const choixA = desiderata[a]?.preferences[date]?.[creneau.id];\r\n    const choixB = desiderata[b]?.preferences[date]?.[creneau.id];\r\n    if (choixA === 'Oui' && choixB !== 'Oui') return -1;\r\n    if (choixB === 'Oui' && choixA !== 'Oui') return 1;\r\n    return 0;\r\n  });\r\n\r\n  const assignes = [];\r\n  for (let i = 0; i < creneau.medecins; i++) {\r\n    if (medecinsPriorises.length > 0) {\r\n      const medecinChoisi = choisirMedecin(medecinsPriorises, date, creneau, desiderata, planning);\r\n      if (medecinChoisi) {\r\n        assignes.push(medecinChoisi);\r\n        medecinsPriorises.splice(medecinsPriorises.indexOf(medecinChoisi), 1);\r\n      } else {\r\n        assignes.push(null);\r\n      }\r\n    } else {\r\n      assignes.push(null);\r\n    }\r\n  }\r\n\r\n  return assignes;\r\n};\r\n\r\nconst choisirMedecin = (medecinsDispo, date, creneau, desiderata, planning) => {\r\n  const mois = new Date(date).getMonth();\r\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\r\n    const scoreA = calculerScoreMedecin(a, date, creneau, desiderata, planning, mois);\r\n    const scoreB = calculerScoreMedecin(b, date, creneau, desiderata, planning, mois);\r\n    return scoreB - scoreA;\r\n  });\r\n\r\n  return medecinsPriorises[0];\r\n};\r\n\r\nconst calculerScoreMedecin = (medecinId, date, creneau, desiderata, planning, mois) => {\r\n  let score = 0;\r\n  const prefMedecin = desiderata[medecinId];\r\n  const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\r\n  const maxGardesParSemaine = prefMedecin?.nombreGardesMaxParSemaine || 7;\r\n\r\n  // Pénalité forte pour les chevauchements\r\n  if (aCreneauxChevauchants(medecinId, date, creneau.id, planning)) {\r\n    score -= 50;\r\n  }\r\n\r\n  // Pénalité forte si proche du max de gardes par semaine\r\n  if (gardesParSemaine >= maxGardesParSemaine - 1) {\r\n    score -= 10;\r\n  }\r\n\r\n  // Respect des préférences\r\n  if (prefMedecin.preferences[date]?.[creneau.id] === 'Oui') score += 3;\r\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Possible') score += 1;\r\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Non') score -= 5;\r\n\r\n  // Nombre de gardes souhaitées\r\n  const gardesDuMois = compterGardesMois(medecinId, planning, mois);\r\n  if (gardesDuMois < prefMedecin.nombreGardesSouhaitees) score += 2;\r\n  else score -= (gardesDuMois - prefMedecin.nombreGardesSouhaitees) * 2;\r\n\r\n  // Gardes groupées\r\n  if (prefMedecin.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\r\n    score += 2;\r\n  }\r\n\r\n  // Renforts associés\r\n  if (prefMedecin.renfortsAssocies) {\r\n    if (creneau.id.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\r\n    if (!creneau.id.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\r\n  }\r\n\r\n  return score;\r\n};\r\n\r\nconst compterGardesMois = (medecinId, planning, mois) => {\r\n  return Object.entries(planning).reduce((count, [date, creneaux]) => {\r\n    if (new Date(date).getMonth() === mois) {\r\n      return count + Object.values(creneaux).flat().filter(m => m === medecinId).length;\r\n    }\r\n    return count;\r\n  }, 0);\r\n};\r\n\r\nconst estWeekEnd = (date) => {\r\n  const jour = new Date(date).getDay();\r\n  return jour === 0 || jour === 6;\r\n};\r\n\r\nconst aGardeWeekEnd = (medecinId, date, planning) => {\r\n  const dateObj = new Date(date);\r\n  const debutWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay()));\r\n  const finWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay() + 6));\r\n\r\n  for (let d = new Date(debutWeekEnd); d <= finWeekEnd; d.setDate(d.getDate() + 1)) {\r\n    const dateString = d.toISOString().split('T')[0];\r\n    if (planning[dateString] && Object.values(planning[dateString]).flat().includes(medecinId)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst aGardeJour = (medecinId, date, planning) => {\r\n  return planning[date] && Object.values(planning[date]).flat().includes(medecinId);\r\n};\r\n\r\nconst aRenfortJour = (medecinId, date, planning) => {\r\n  return planning[date] && (\r\n    planning[date]['RENFORT_1']?.includes(medecinId) || \r\n    planning[date]['RENFORT_2']?.includes(medecinId)\r\n  );\r\n};\r\n\r\nconst rechercheTabou = (planning, debut, fin, desiderata, medecins, maxIterations = 1000) => {\r\n  let meilleurPlanning = planning;\r\n  let meilleurScore = evaluerPlanning(planning, desiderata);\r\n  const listeTabou = new Set();\r\n\r\n  for (let i = 0; i < maxIterations; i++) {\r\n    const voisins = genererVoisins(meilleurPlanning, medecins, desiderata);\r\n    let meilleurVoisin = null;\r\n    let meilleurScoreVoisin = -Infinity;\r\n\r\n    for (const voisin of voisins) {\r\n      const scoreVoisin = evaluerPlanning(voisin, desiderata);\r\n      if (scoreVoisin > meilleurScoreVoisin && !listeTabou.has(JSON.stringify(voisin))) {\r\n        meilleurVoisin = voisin;\r\n        meilleurScoreVoisin = scoreVoisin;\r\n      }\r\n    }\r\n\r\n    if (meilleurScoreVoisin > meilleurScore) {\r\n      meilleurPlanning = meilleurVoisin;\r\n      meilleurScore = meilleurScoreVoisin;\r\n      listeTabou.add(JSON.stringify(meilleurVoisin));\r\n      if (listeTabou.size > 50) {\r\n        listeTabou.delete(listeTabou.values().next().value);\r\n      }\r\n    }\r\n  }\r\n\r\n  return meilleurPlanning;\r\n};\r\n\r\nconst genererVoisins = (planning, medecins, desiderata) => {\r\n  const voisins = [];\r\n  const dates = Object.keys(planning);\r\n  const date = dates[Math.floor(Math.random() * dates.length)];\r\n  const creneauId = Object.keys(planning[date])[Math.floor(Math.random() * Object.keys(planning[date]).length)];\r\n  const index = Math.floor(Math.random() * planning[date][creneauId].length);\r\n\r\n  for (const medecin of medecins) {\r\n    if (!planning[date][creneauId].includes(medecin)) {\r\n      const nouveauPlanning = JSON.parse(JSON.stringify(planning));\r\n      nouveauPlanning[date][creneauId][index] = medecin;\r\n      \r\n      // Vérifier si le changement respecte toutes les contraintes\r\n      const gardesParSemaine = compterGardesParSemaine(medecin, date, nouveauPlanning);\r\n      const maxGardes = desiderata[medecin]?.nombreGardesMaxParSemaine || 7;\r\n      const aChevauchement = aCreneauxChevauchants(medecin, date, creneauId, nouveauPlanning);\r\n      if (gardesParSemaine <= maxGardes && !aChevauchement && verifierContraintes(nouveauPlanning)) {\r\n        voisins.push(nouveauPlanning);\r\n      }\r\n    }\r\n  }\r\n\r\n  const planningRetrait = JSON.parse(JSON.stringify(planning));\r\n  planningRetrait[date][creneauId][index] = null;\r\n  if (verifierContraintes(planningRetrait)) {\r\n    voisins.push(planningRetrait);\r\n  }\r\n\r\n  return voisins;\r\n};\r\n\r\nconst evaluerPlanning = (planning, desiderata) => {\r\n  let score = 0;\r\n  const gardesParMedecin = {};\r\n  const gardesParMedecinParSemaine = {};\r\n\r\n  for (const date in planning) {\r\n    for (const creneauId in planning[date]) {\r\n      for (const medecinId of planning[date][creneauId]) {\r\n        if (medecinId === null) continue;\r\n\r\n        // Compter les gardes par semaine\r\n        const semaine = getWeekNumber(date);\r\n        if (!gardesParMedecinParSemaine[medecinId]) {\r\n          gardesParMedecinParSemaine[medecinId] = {};\r\n        }\r\n        if (!gardesParMedecinParSemaine[medecinId][semaine]) {\r\n          gardesParMedecinParSemaine[medecinId][semaine] = 0;\r\n        }\r\n        gardesParMedecinParSemaine[medecinId][semaine]++;\r\n\r\n        // Pénalité pour dépassement du maximum de gardes par semaine\r\n        const maxGardes = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\r\n        if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardes) {\r\n          score -= 20;\r\n        }\r\n\r\n        // Pénalité pour les chevauchements\r\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\r\n          score -= 50;\r\n        }\r\n\r\n        if (!gardesParMedecin[medecinId]) gardesParMedecin[medecinId] = 0;\r\n        gardesParMedecin[medecinId]++;\r\n\r\n        const choix = desiderata[medecinId]?.preferences[date]?.[creneauId];\r\n        if (choix === 'Oui') score += 3;\r\n        else if (choix === 'Possible') score += 1;\r\n        else if (choix === 'Non') score -= 5;\r\n\r\n        // Gardes groupées\r\n        if (desiderata[medecinId]?.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\r\n          score += 2;\r\n        }\r\n\r\n        // Renforts associés\r\n        if (desiderata[medecinId]?.renfortsAssocies) {\r\n          if (creneauId.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\r\n          if (!creneauId.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Évaluation du nombre de gardes souhaitées par mois\r\n  for (const medecinId in gardesParMedecin) {\r\n    const diff = Math.abs(gardesParMedecin[medecinId] - desiderata[medecinId]?.nombreGardesSouhaitees);\r\n    score -= diff * 2;\r\n  }\r\n\r\n  return score;\r\n};\r\n\r\nconst verifierContraintes = (planning) => {\r\n  const dates = Object.keys(planning).sort();\r\n  const gardesParMedecinParSemaine = {};\r\n\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    const medecinsDuJour = new Set();\r\n\r\n    // Vérifier les chevauchements de créneaux\r\n    for (const creneauId in planning[date]) {\r\n      const medecins = planning[date][creneauId];\r\n      for (const medecinId of medecins) {\r\n        if (medecinId === null) continue;\r\n\r\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\r\n          return false;\r\n        }\r\n\r\n        medecinsDuJour.add(medecinId);\r\n      }\r\n    }\r\n\r\n    // Vérifier les gardes consécutives\r\n    for (const medecinId of medecinsDuJour) {\r\n      if (i >= 2) {\r\n        const hierMedecins = new Set();\r\n        const avantHierMedecins = new Set();\r\n\r\n        Object.values(planning[dates[i - 1]]).forEach(medecins => {\r\n          medecins.forEach(m => { if (m !== null) hierMedecins.add(m); });\r\n        });\r\n\r\n        Object.values(planning[dates[i - 2]]).forEach(medecins => {\r\n          medecins.forEach(m => { if (m !== null) avantHierMedecins.add(m); });\r\n        });\r\n\r\n        if (hierMedecins.has(medecinId) && avantHierMedecins.has(medecinId)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Vérifier le nombre de gardes par semaine\r\n      const semaine = getWeekNumber(date);\r\n      if (!gardesParMedecinParSemaine[medecinId]) {\r\n        gardesParMedecinParSemaine[medecinId] = {};\r\n      }\r\n      if (!gardesParMedecinParSemaine[medecinId][semaine]) {\r\n        gardesParMedecinParSemaine[medecinId][semaine] = 0;\r\n      }\r\n      gardesParMedecinParSemaine[medecinId][semaine]++;\r\n    }\r\n  }\r\n\r\n  // Vérifier le respect du nombre maximum de gardes par semaine\r\n  for (const medecinId in gardesParMedecinParSemaine) {\r\n    for (const semaine in gardesParMedecinParSemaine[medecinId]) {\r\n      const maxGardesParSemaine = 7;  // Valeur par défaut\r\n      if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardesParSemaine) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport { genererPlanning, creneaux };","// src/components/planning/PlanningHeader.js\r\nimport React from 'react';\r\nimport { \r\n  ArrowLeft, \r\n  Calendar, \r\n  Save, \r\n  Upload, \r\n  RefreshCcw, \r\n  Edit2, \r\n  X \r\n} from 'lucide-react';\r\n\r\nconst PlanningHeader = ({\r\n  editMode,\r\n  modified,\r\n  onEditToggle,\r\n  onGenerateClick,\r\n  onPublishClick,\r\n  onSaveChanges,\r\n  onBackClick,\r\n  planning\r\n}) => {\r\n  return (\r\n    <nav style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      zIndex: 40\r\n    }}>\r\n      <div style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <button\r\n            onClick={onBackClick}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#4B5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              padding: '0.5rem'\r\n            }}\r\n          >\r\n            <ArrowLeft size={20} />\r\n            Retour\r\n          </button>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            <Calendar size={24} />\r\n            <span>Gestion du planning</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem'\r\n        }}>\r\n          {!editMode ? (\r\n            <>\r\n              <button\r\n                onClick={onGenerateClick}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#F3E8FF',\r\n                  border: '1px solid #9333EA',\r\n                  color: '#9333EA',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <RefreshCcw size={18} />\r\n                {planning ? 'Regénérer' : 'Générer'}\r\n              </button>\r\n              <button\r\n                onClick={onEditToggle}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#EBF5FF',\r\n                  border: '1px solid #2563EB',\r\n                  color: '#2563EB',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <Edit2 size={18} />\r\n                Modifier\r\n              </button>\r\n              {planning && (\r\n                <button\r\n                  onClick={onPublishClick}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.5rem 1rem',\r\n                    backgroundColor: '#ECFDF5',\r\n                    border: '1px solid #059669',\r\n                    color: '#059669',\r\n                    borderRadius: '0.375rem',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <Upload size={18} />\r\n                  Publier\r\n                </button>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={onSaveChanges}\r\n                disabled={!modified}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: modified ? '#2563EB' : '#93C5FD',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: modified ? 'pointer' : 'not-allowed'\r\n                }}\r\n              >\r\n                <Save size={18} />\r\n                Sauvegarder\r\n              </button>\r\n              <button\r\n                onClick={onEditToggle}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#F3F4F6',\r\n                  border: '1px solid #D1D5DB',\r\n                  color: '#374151',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <X size={18} />\r\n                Annuler\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default PlanningHeader;","// src/components/planning/components/MedecinSearchSelect.js\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Search, X, ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\nconst MedecinSearchSelect = ({ \r\n  medecins, \r\n  value, \r\n  onChange,\r\n  placeholder = \"Rechercher un médecin...\" \r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const wrapperRef = useRef(null);\r\n\r\n  // Ferme la liste déroulante lors d'un clic à l'extérieur\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Filtrer les médecins selon le terme de recherche\r\n  const filteredMedecins = medecins.filter(medecin => {\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n    return (\r\n      medecin.nom.toLowerCase().includes(searchTermLower) ||\r\n      medecin.prenom.toLowerCase().includes(searchTermLower)\r\n    );\r\n  });\r\n\r\n  // Récupérer le médecin sélectionné\r\n  const selectedMedecin = medecins.find(m => m.id === value);\r\n\r\n  return (\r\n    <div \r\n      ref={wrapperRef}\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%'\r\n      }}\r\n    >\r\n      {/* Input de recherche */}\r\n      <div style={{\r\n        position: 'relative',\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Search \r\n          size={18}\r\n          style={{\r\n            position: 'absolute',\r\n            left: '0.75rem',\r\n            color: '#6B7280'\r\n          }}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={(e) => {\r\n            setSearchTerm(e.target.value);\r\n            setIsOpen(true);\r\n          }}\r\n          onFocus={() => setIsOpen(true)}\r\n          placeholder={placeholder}\r\n          style={{\r\n            width: '100%',\r\n            padding: '0.5rem 2.5rem',\r\n            borderRadius: '0.375rem',\r\n            border: '1px solid #D1D5DB',\r\n            fontSize: '0.875rem'\r\n          }}\r\n        />\r\n        <div style={{\r\n          position: 'absolute',\r\n          right: '0.75rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          {searchTerm && (\r\n            <button\r\n              onClick={() => {\r\n                setSearchTerm('');\r\n                setIsOpen(true);\r\n              }}\r\n              style={{\r\n                padding: '0.25rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                color: '#6B7280'\r\n              }}\r\n            >\r\n              <X size={16} />\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={() => setIsOpen(!isOpen)}\r\n            style={{\r\n              padding: '0.25rem',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              color: '#6B7280'\r\n            }}\r\n          >\r\n            {isOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Liste déroulante */}\r\n      {isOpen && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: 'calc(100% + 0.25rem)',\r\n          left: 0,\r\n          right: 0,\r\n          maxHeight: '15rem',\r\n          overflowY: 'auto',\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.375rem',\r\n          border: '1px solid #D1D5DB',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          zIndex: 30\r\n        }}>\r\n          <div style={{\r\n            padding: '0.25rem'\r\n          }}>\r\n            {/* Option \"Tous les médecins\" */}\r\n            <button\r\n              onClick={() => {\r\n                onChange('all');\r\n                setIsOpen(false);\r\n                setSearchTerm('');\r\n              }}\r\n              style={{\r\n                width: '100%',\r\n                padding: '0.5rem 0.75rem',\r\n                textAlign: 'left',\r\n                border: 'none',\r\n                borderRadius: '0.25rem',\r\n                backgroundColor: value === 'all' ? '#EBF5FF' : 'transparent',\r\n                color: value === 'all' ? '#2563EB' : '#374151',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem',\r\n                fontWeight: value === 'all' ? '600' : 'normal'\r\n              }}\r\n            >\r\n              Tous les médecins\r\n            </button>\r\n\r\n            {/* Liste des médecins filtrés */}\r\n            {filteredMedecins.map(medecin => (\r\n              <button\r\n                key={medecin.id}\r\n                onClick={() => {\r\n                  onChange(medecin.id);\r\n                  setIsOpen(false);\r\n                  setSearchTerm('');\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem 0.75rem',\r\n                  textAlign: 'left',\r\n                  border: 'none',\r\n                  borderRadius: '0.25rem',\r\n                  backgroundColor: value === medecin.id ? '#EBF5FF' : 'transparent',\r\n                  color: value === medecin.id ? '#2563EB' : '#374151',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: value === medecin.id ? '600' : 'normal'\r\n                }}\r\n              >\r\n                Dr. {medecin.prenom} {medecin.nom}\r\n              </button>\r\n            ))}\r\n\r\n            {/* Message si aucun résultat */}\r\n            {filteredMedecins.length === 0 && (\r\n              <div style={{\r\n                padding: '0.5rem 0.75rem',\r\n                color: '#6B7280',\r\n                fontSize: '0.875rem',\r\n                textAlign: 'center'\r\n              }}>\r\n                Aucun médecin trouvé\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Affichage du médecin sélectionné sous l'input */}\r\n      {value !== 'all' && selectedMedecin && !isOpen && (\r\n        <div style={{\r\n          marginTop: '0.25rem',\r\n          fontSize: '0.75rem',\r\n          color: '#2563EB',\r\n          fontWeight: '500'\r\n        }}>\r\n          Médecin sélectionné : Dr. {selectedMedecin.prenom} {selectedMedecin.nom}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedecinSearchSelect;","// src/components/planning/PlanningFilters.js\r\nimport React from 'react';\r\nimport { Filter, ChevronDown, ChevronUp, Search, List, Grid } from 'lucide-react';\r\nimport MedecinSearchSelect from './components/MedecinSearchSelect';\r\n\r\nconst PlanningFilters = ({\r\n  showFilters,\r\n  onToggleFilters,\r\n  dateFilter,\r\n  onDateFilterChange,\r\n  creneauFilter,\r\n  onCreneauFilterChange,\r\n  selectedMedecin,\r\n  onMedecinFilterChange,\r\n  viewMode,\r\n  onViewModeChange,\r\n  medecins,\r\n  creneaux\r\n}) => {\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '0.5rem',\r\n      marginBottom: '1.5rem',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n    }}>\r\n      <button\r\n        onClick={onToggleFilters}\r\n        style={{\r\n          width: '100%',\r\n          padding: '1rem 1.5rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          border: 'none',\r\n          background: 'none',\r\n          cursor: 'pointer',\r\n          borderRadius: '0.5rem'\r\n        }}\r\n      >\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          color: '#374151'\r\n        }}>\r\n          <Filter size={20} />\r\n          <span style={{ fontWeight: '500' }}>Filtres et recherche</span>\r\n        </div>\r\n        {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n      </button>\r\n\r\n      {showFilters && (\r\n        <div style={{\r\n          padding: '1rem 1.5rem',\r\n          borderTop: '1px solid #E5E7EB'\r\n        }}>\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n          }}>\r\n            {/* Filtre par période */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Période\r\n              </label>\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '0.5rem'\r\n              }}>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFilter.start}\r\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, start: e.target.value })}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFilter.end}\r\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, end: e.target.value })}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Filtre par créneau */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Créneau\r\n              </label>\r\n              <select\r\n                value={creneauFilter}\r\n                onChange={(e) => onCreneauFilterChange(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  borderRadius: '0.375rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  backgroundColor: 'white',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              >\r\n                <option value=\"all\">Tous les créneaux</option>\r\n                {creneaux.map(creneau => (\r\n                  <option key={creneau.id} value={creneau.id}>\r\n                    {creneau.label} ({creneau.hours})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Filtre par médecin */}\r\n            <div>\r\n  <label style={{\r\n    display: 'block',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500',\r\n    color: '#374151',\r\n    marginBottom: '0.5rem'\r\n  }}>\r\n    Médecin\r\n  </label>\r\n  <MedecinSearchSelect\r\n    medecins={medecins}\r\n    value={selectedMedecin}\r\n    onChange={onMedecinFilterChange}\r\n    placeholder=\"Rechercher un médecin...\"\r\n  />\r\n</div>\r\n\r\n            {/* Sélecteur de vue */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Mode d'affichage\r\n              </label>\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '0.5rem',\r\n                backgroundColor: '#F3F4F6',\r\n                padding: '0.25rem',\r\n                borderRadius: '0.375rem',\r\n                width: 'fit-content'\r\n              }}>\r\n                <button\r\n                  onClick={() => onViewModeChange('list')}\r\n                  style={{\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.25rem',\r\n                    border: 'none',\r\n                    backgroundColor: viewMode === 'list' ? 'white' : 'transparent',\r\n                    boxShadow: viewMode === 'list' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <List size={20} color={viewMode === 'list' ? '#2563EB' : '#6B7280'} />\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewModeChange('grid')}\r\n                  style={{\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.25rem',\r\n                    border: 'none',\r\n                    backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\r\n                    boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningFilters;","// src/components/planning/PlanningStatistics.js\r\nimport React from 'react';\r\nimport { Users, Calendar, Clock } from 'lucide-react';\r\n\r\nconst PlanningStatistics = ({\r\n  medecins,\r\n  periodeSaisie,\r\n  planning,\r\n  publishedPlanning\r\n}) => {\r\n  return (\r\n    <div style={{\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\r\n      gap: '1rem',\r\n      marginBottom: '2rem'\r\n    }}>\r\n      {/* Nombre de médecins */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#EBF5FF',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#2563EB'\r\n          }}>\r\n            <Users size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            Médecins disponibles\r\n          </h2>\r\n        </div>\r\n        <p style={{\r\n          fontSize: '1.5rem',\r\n          fontWeight: 'bold',\r\n          color: '#2563EB'\r\n        }}>\r\n          {medecins.length}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Période de saisie */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#F0FDF4',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#16A34A'\r\n          }}>\r\n            <Clock size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            Période de saisie\r\n          </h2>\r\n        </div>\r\n        <p style={{\r\n          fontSize: '0.875rem',\r\n          color: periodeSaisie ? '#16A34A' : '#DC2626',\r\n          fontWeight: '500'\r\n        }}>\r\n          {periodeSaisie ? (\r\n            `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\r\n          ) : (\r\n            'Aucune période définie'\r\n          )}\r\n        </p>\r\n      </div>\r\n\r\n      {/* État du planning */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#FFF7ED',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#EA580C'\r\n          }}>\r\n            <Calendar size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            État du planning\r\n          </h2>\r\n        </div>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: '0.25rem'\r\n        }}>\r\n          <p style={{\r\n            fontSize: '0.875rem',\r\n            color: planning ? '#16A34A' : '#DC2626',\r\n            fontWeight: '500'\r\n          }}>\r\n            {planning ? 'Planning généré' : 'Aucun planning généré'}\r\n          </p>\r\n          <p style={{\r\n            fontSize: '0.875rem',\r\n            color: publishedPlanning ? '#16A34A' : '#DC2626',\r\n            fontWeight: '500'\r\n          }}>\r\n            {publishedPlanning ? 'Planning publié' : 'Non publié'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningStatistics;","// src/utils/planningUtils.js\r\n\r\nexport const sortMedecinsByPreference = (medecins, desiderata, date, creneauId) => {\r\n    // Organise les médecins par leurs préférences pour un créneau donné\r\n    const sorted = {\r\n      oui: [],\r\n      possible: [],\r\n      nonSpecifie: [],\r\n      non: []\r\n    };\r\n  \r\n    medecins.forEach(medecin => {\r\n      const preference = desiderata\r\n        .find(d => d.userId === medecin.id)?.desiderata[date]?.[creneauId];\r\n  \r\n      switch(preference) {\r\n        case 'Oui':\r\n          sorted.oui.push(medecin);\r\n          break;\r\n        case 'Possible':\r\n          sorted.possible.push(medecin);\r\n          break;\r\n        case 'Non':\r\n          sorted.non.push(medecin);\r\n          break;\r\n        default:\r\n          sorted.nonSpecifie.push(medecin);\r\n      }\r\n    });\r\n  \r\n    return {\r\n      ...sorted,\r\n      all: [\r\n        ...sorted.oui,\r\n        ...sorted.possible,\r\n        ...sorted.nonSpecifie,\r\n        ...sorted.non\r\n      ]\r\n    };\r\n  };\r\n  \r\n  export const getPreferenceStyle = (preference) => {\r\n    switch(preference) {\r\n      case 'Oui':\r\n        return { color: '#059669', backgroundColor: '#ECFDF5' };\r\n      case 'Possible':\r\n        return { color: '#D97706', backgroundColor: '#FFFBEB' };\r\n      case 'Non':\r\n        return { color: '#DC2626', backgroundColor: '#FEF2F2' };\r\n      default:\r\n        return { color: '#6B7280', backgroundColor: 'transparent' };\r\n    }\r\n  };\r\n  \r\n  export const compterGardesParMedecin = (planning, medecinId) => {\r\n    let count = 0;\r\n    \r\n    if (!planning || !planning.planning) return 0;\r\n    \r\n    Object.values(planning.planning).forEach(joursCreneaux => {\r\n      Object.values(joursCreneaux).forEach(medecins => {\r\n        if (medecins.includes(medecinId)) count++;\r\n      });\r\n    });\r\n    \r\n    return count;\r\n  };\r\n  \r\n  export const getMedecinPreference = (desiderata, medecinId, date, creneauId) => {\r\n    return desiderata\r\n      .find(d => d.userId === medecinId)?.desiderata[date]?.[creneauId] || '';\r\n  };\r\n  \r\n  export const getNombreGardesSouhaitees = (desiderata, medecinId) => {\r\n    const medecinDesiderata = desiderata.find(d => d.userId === medecinId);\r\n    return medecinDesiderata?.nombreGardesSouhaitees || 0;\r\n  };","// src/components/planning/PlanningTable.js\r\nimport React from 'react';\r\nimport { \r\n  sortMedecinsByPreference, \r\n  getPreferenceStyle, \r\n  getMedecinPreference \r\n} from '../../utils/planningUtils';\r\n\r\n// Composant pour le sélecteur de médecin\r\n// Modifiez la partie MedecinSelect comme suit :\r\nconst MedecinSelect = ({ \r\n    date, \r\n    creneauId, \r\n    index, \r\n    currentValue, \r\n    medecins, \r\n    desiderata, \r\n    selectedMedecin, // On garde ce paramètre pour l'affichage des infos mais pas pour le filtrage\r\n    onChange \r\n  }) => {\r\n    // Trier les médecins selon leurs préférences\r\n    const sortedMedecins = sortMedecinsByPreference(medecins, desiderata, date, creneauId);\r\n  \r\n    return (\r\n      <select\r\n        value={currentValue || ''}\r\n        onChange={(e) => onChange(date, creneauId, index, e.target.value)}\r\n        style={{\r\n          width: '100%',\r\n          padding: '0.5rem',\r\n          borderRadius: '0.375rem',\r\n          border: '1px solid #D1D5DB',\r\n          backgroundColor: 'white',\r\n          fontSize: '0.875rem'\r\n        }}\r\n      >\r\n        <option value=\"\">Non assigné</option>\r\n        {sortedMedecins.all.map(medecin => {\r\n          const preference = getMedecinPreference(desiderata, medecin.id, date, creneauId);\r\n          const style = getPreferenceStyle(preference);\r\n          const isSelected = medecin.id === selectedMedecin;\r\n            \r\n          return (\r\n            <option\r\n              key={medecin.id}\r\n              value={medecin.id}\r\n              style={{\r\n                ...style,\r\n                fontWeight: isSelected ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              Dr. {medecin.prenom} {medecin.nom}\r\n              {preference ? ` (${preference})` : ''}\r\n              {isSelected ? ' ★' : ''}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n    );\r\n  };\r\n\r\n// Composant pour l'affichage des préférences\r\nconst PreferenceIndicator = ({ preference }) => {\r\n  if (!preference) return null;\r\n  \r\n  const style = getPreferenceStyle(preference);\r\n  return (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: '0.25rem',\r\n      right: '0.25rem',\r\n      padding: '0.25rem 0.5rem',\r\n      borderRadius: '0.25rem',\r\n      fontSize: '0.75rem',\r\n      ...style\r\n    }}>\r\n      {preference}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Composant principal PlanningTable\r\nconst PlanningTable = ({\r\n  planning,\r\n  creneaux,\r\n  medecins,\r\n  desiderata,\r\n  selectedMedecin,\r\n  editMode,\r\n  onMedecinChange,\r\n  dateFilter,\r\n  creneauFilter\r\n}) => {\r\n  // Fonction pour formatter la date\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\r\n  };\r\n\r\n  // Fonction pour vérifier si c'est un week-end\r\n  const isWeekend = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.getDay() === 0 || date.getDay() === 6;\r\n  };\r\n\r\n  // Filtrer les dates selon les critères\r\n  const getFilteredDates = () => {\r\n    if (!planning || !planning.planning) return [];\r\n\r\n    return Object.keys(planning.planning)\r\n      .filter(date => \r\n        (!dateFilter.start || date >= dateFilter.start) &&\r\n        (!dateFilter.end || date <= dateFilter.end)\r\n      )\r\n      .sort();\r\n  };\r\n\r\n  // Filtrer les créneaux selon les critères\r\n  const getFilteredCreneaux = () => {\r\n    return creneauFilter === 'all' \r\n      ? creneaux \r\n      : creneaux.filter(c => c.id === creneauFilter);\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '0.5rem',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      overflowX: 'auto',\r\n      width: '100%',        // Ajout de width 100%\r\n      maxWidth: '100vw',    // Utilisation de la largeur de la vue\r\n      margin: '0 auto'      // Centrage\r\n    }}>\r\n      <table style={{\r\n        width: '100%',\r\n        borderCollapse: 'collapse',\r\n        fontSize: '0.875rem',\r\n        tableLayout: 'fixed'    // Ajout de table-layout fixed\r\n      }}>\r\n        <colgroup>\r\n          <col style={{ width: '120px' }} />  {/* Largeur fixe pour la colonne date */}\r\n          {getFilteredCreneaux().map((creneau, index) => (\r\n            <col key={index} style={{ width: `${100 / getFilteredCreneaux().length}%` }} />\r\n          ))}\r\n        </colgroup>\r\n        <thead>\r\n          <tr>\r\n            <th style={{\r\n              padding: '1rem',\r\n              backgroundColor: '#F9FAFB',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              textAlign: 'left',\r\n              fontWeight: '600',\r\n              position: 'sticky',\r\n              left: 0,\r\n              zIndex: 10,\r\n              backgroundColor: 'white'\r\n            }}>\r\n              Date\r\n            </th>\r\n            {getFilteredCreneaux().map(creneau => (\r\n              <th key={creneau.id} style={{\r\n                padding: '1rem',\r\n                backgroundColor: '#F9FAFB',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                textAlign: 'left',\r\n                fontWeight: '600',\r\n                minWidth: '200px'\r\n              }}>\r\n                <div>{creneau.label}</div>\r\n                <div style={{\r\n                  fontSize: '0.75rem',\r\n                  color: '#6B7280',\r\n                  fontWeight: 'normal'\r\n                }}>\r\n                  {creneau.hours}\r\n                </div>\r\n                <div style={{\r\n                  fontSize: '0.75rem',\r\n                  color: '#6B7280',\r\n                  fontWeight: 'normal'\r\n                }}>\r\n                  {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\r\n                </div>\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {getFilteredDates().map(date => (\r\n            <tr key={date} style={{\r\n              backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\r\n            }}>\r\n              <td style={{\r\n                padding: '1rem',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                fontWeight: '500',\r\n                position: 'sticky',\r\n                left: 0,\r\n                backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\r\n                zIndex: 10\r\n              }}>\r\n                {formatDate(date)}\r\n              </td>\r\n              {getFilteredCreneaux().map(creneau => (\r\n                <td key={`${date}-${creneau.id}`} style={{\r\n                    padding: '1rem',\r\n                    borderBottom: '1px solid #E5E7EB',\r\n                    position: 'relative',\r\n                    backgroundColor: selectedMedecin !== 'all' ? \r\n                      (() => {\r\n                        const preference = getMedecinPreference(\r\n                          desiderata,\r\n                          selectedMedecin,\r\n                          date,\r\n                          creneau.id\r\n                        );\r\n                        return preference ? getPreferenceStyle(preference).backgroundColor : 'transparent';\r\n                      })() : 'transparent'\r\n                  }}>\r\n                    {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\r\n                      <>\r\n                        {selectedMedecin !== 'all' && (\r\n                          <PreferenceIndicator \r\n                            preference={getMedecinPreference(\r\n                              desiderata,\r\n                              selectedMedecin,\r\n                              date,\r\n                              creneau.id\r\n                            )}\r\n                          />\r\n                        )}\r\n                        <div style={{\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          gap: '0.5rem'\r\n                        }}>\r\n                          {Array.from({ length: creneau.medecins }).map((_, index) => (\r\n                            <div key={index}>\r\n                              {editMode ? (\r\n                                <MedecinSelect\r\n                                  date={date}\r\n                                  creneauId={creneau.id}\r\n                                  index={index}\r\n                                  currentValue={planning.planning[date]?.[creneau.id]?.[index]}\r\n                                  medecins={medecins}\r\n                                  desiderata={desiderata}\r\n                                  selectedMedecin={selectedMedecin}\r\n                                  onChange={onMedecinChange}\r\n                                />\r\n                              ) : (\r\n                                <div style={{\r\n                                  padding: '0.5rem',\r\n                                  backgroundColor: '#F3F4F6',\r\n                                  borderRadius: '0.375rem',\r\n                                  fontSize: '0.875rem'\r\n                                }}>\r\n                                  {planning.planning[date]?.[creneau.id]?.[index] ? (\r\n                                    (() => {\r\n                                      const medecinId = planning.planning[date][creneau.id][index];\r\n                                      const medecin = medecins.find(m => m.id === medecinId);\r\n                                      const preference = getMedecinPreference(\r\n                                        desiderata,\r\n                                        medecinId,\r\n                                        date,\r\n                                        creneau.id\r\n                                      );\r\n                                      const style = getPreferenceStyle(preference);\r\n                                      const isSelected = medecinId === selectedMedecin;\r\n                                      \r\n                                      return (\r\n                                        <span style={{\r\n                                          ...style,\r\n                                          fontWeight: isSelected ? 'bold' : 'normal'\r\n                                        }}>\r\n                                          Dr. {medecin ? \r\n                                            `${medecin.prenom} ${medecin.nom}` : \r\n                                            'Médecin non trouvé'}\r\n                                          {isSelected ? ' ★' : ''}\r\n                                        </span>\r\n                                      );\r\n                                    })()\r\n                                  ) : (\r\n                                    'Non assigné'\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </td>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningTable;","// src/components/planning/MedecinInfoPanel.js\r\nimport React from 'react';\r\nimport { User, Calendar } from 'lucide-react';\r\nimport { compterGardesParMedecin, getNombreGardesSouhaitees } from '../../utils/planningUtils';\r\n\r\nconst MedecinInfoPanel = ({ medecin, planning, desiderata }) => {\r\n  if (!medecin) return null;\r\n\r\n  const gardesAttribuees = compterGardesParMedecin(planning, medecin.id);\r\n  const gardesSouhaitees = getNombreGardesSouhaitees(desiderata, medecin.id);\r\n  \r\n  // Rechercher les desiderata les plus récents pour ce médecin\r\n  const medecinDesiderata = desiderata\r\n    .filter(d => d.userId === medecin.id)\r\n    .sort((a, b) => new Date(b.startDate) - new Date(a.startDate))[0];\r\n\r\n  // Si aucun desiderata n'est trouvé, on affiche \"Non défini\"\r\n  const gardesMaxParSemaine = medecinDesiderata?.nombreGardesMaxParSemaine !== undefined \r\n    ? medecinDesiderata.nombreGardesMaxParSemaine \r\n    : 'Non défini';\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      padding: '1.5rem',\r\n      marginBottom: '1.5rem'\r\n    }}>\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem',\r\n        marginBottom: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: '#EBF5FF',\r\n          borderRadius: '50%',\r\n          padding: '0.75rem'\r\n        }}>\r\n          <User size={24} color=\"#2563EB\" />\r\n        </div>\r\n        <div>\r\n          <h3 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1F2937',\r\n            margin: 0\r\n          }}>\r\n            Dr. {medecin.prenom} {medecin.nom}\r\n          </h3>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(160px, 1fr))',\r\n        gap: '1rem'\r\n      }}>\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes souhaitées / mois\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: '#2563EB'\r\n          }}>\r\n            {gardesSouhaitees || 'Non défini'}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes max. / semaine\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: '#059669'\r\n          }}>\r\n            {typeof gardesMaxParSemaine === 'number' ? gardesMaxParSemaine : 'Non défini'}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes attribuées\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: gardesAttribuees > gardesSouhaitees ? '#DC2626' : '#059669'\r\n          }}>\r\n            {gardesAttribuees}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedecinInfoPanel;","// src/components/planning/modals/ConfirmationModal.js\r\nimport React from 'react';\r\nimport { AlertTriangle, Check } from 'lucide-react';\r\n\r\nconst ConfirmationModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmLabel = 'Confirmer',\r\n  cancelLabel = 'Annuler',\r\n  icon: Icon = AlertTriangle,\r\n  iconColor = '#DC2626',\r\n  iconBgColor = '#FEE2E2',\r\n  confirmButtonColor = '#DC2626'\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 50\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '2rem',\r\n        maxWidth: '28rem',\r\n        width: '90%',\r\n        textAlign: 'center'\r\n      }}>\r\n        <div style={{\r\n          width: '3rem',\r\n          height: '3rem',\r\n          backgroundColor: iconBgColor,\r\n          borderRadius: '50%',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          margin: '0 auto 1rem'\r\n        }}>\r\n          <Icon size={24} color={iconColor} />\r\n        </div>\r\n\r\n        <h2 style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 'bold',\r\n          color: '#111827',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          {title}\r\n        </h2>\r\n\r\n        <p style={{\r\n          color: '#6B7280',\r\n          marginBottom: '1.5rem'\r\n        }}>\r\n          {message}\r\n        </p>\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '1rem',\r\n          justifyContent: 'center'\r\n        }}>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              backgroundColor: 'white',\r\n              color: '#374151',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            {cancelLabel}\r\n          </button>\r\n          <button\r\n            onClick={onConfirm}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              backgroundColor: confirmButtonColor,\r\n              color: 'white',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            {confirmLabel}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmationModal;","// src/components/planning/modals/GeneratePlanningModal.js\r\nimport React from 'react';\r\nimport { RefreshCcw } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst GeneratePlanningModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  planning\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title={planning ? 'Regénérer le planning' : 'Générer le planning'}\r\n      message={planning\r\n        ? 'Êtes-vous sûr de vouloir regénérer le planning ? Cette action remplacera le planning actuel.'\r\n        : 'Êtes-vous sûr de vouloir générer un nouveau planning ?'}\r\n      icon={RefreshCcw}\r\n      iconColor=\"#9333EA\"\r\n      iconBgColor=\"#F3E8FF\"\r\n      confirmButtonColor=\"#9333EA\"\r\n      confirmLabel=\"Générer\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default GeneratePlanningModal;","// src/components/planning/modals/PublishPlanningModal.js\r\nimport React from 'react';\r\nimport { Upload } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst PublishPlanningModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  publishedPlanning\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title=\"Publier le planning\"\r\n      message={publishedPlanning\r\n        ? 'Cette action mettra à jour le planning publié. Les médecins verront les changements immédiatement.'\r\n        : 'Cette action publiera le planning et le rendra visible pour tous les médecins.'}\r\n      icon={Upload}\r\n      iconColor=\"#059669\"\r\n      iconBgColor=\"#ECFDF5\"\r\n      confirmButtonColor=\"#059669\"\r\n      confirmLabel=\"Confirmer la publication\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default PublishPlanningModal;","// src/components/planning/modals/DiscardChangesModal.js\r\nimport React from 'react';\r\nimport { AlertTriangle } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst DiscardChangesModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title=\"Changements non sauvegardés\"\r\n      message=\"Vous avez des modifications non sauvegardées. Voulez-vous vraiment quitter le mode édition ? Les changements seront perdus.\"\r\n      icon={AlertTriangle}\r\n      iconColor=\"#DC2626\"\r\n      iconBgColor=\"#FEE2E2\"\r\n      confirmButtonColor=\"#DC2626\"\r\n      confirmLabel=\"Abandonner les changements\"\r\n      cancelLabel=\"Continuer l'édition\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default DiscardChangesModal;","// src/components/planning/GestionPlanning.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../../firebase';\r\nimport { getUser, getMedecins } from '../../services/userService';\r\nimport { \r\n  getLatestPlanning, \r\n  savePlanning, \r\n  updatePlanning, \r\n  getDesiderataForPeriod, \r\n  publishPlanning, \r\n  getPublishedPlanning, \r\n  getPeriodeSaisie \r\n} from '../../services/planningService';\r\nimport { genererPlanning, creneaux } from '../../utils/planningGenerator';\r\nimport { AlertTriangle, Check } from 'lucide-react';\r\n\r\n// Import des sous-composants\r\nimport PlanningHeader from './PlanningHeader';\r\nimport PlanningFilters from './PlanningFilters';\r\nimport PlanningStatistics from './PlanningStatistics';\r\nimport PlanningTable from './PlanningTable';\r\nimport MedecinInfoPanel from './MedecinInfoPanel';\r\nimport GeneratePlanningModal from './modals/GeneratePlanningModal';\r\nimport PublishPlanningModal from './modals/PublishPlanningModal';\r\nimport DiscardChangesModal from './modals/DiscardChangesModal';\r\n\r\nfunction GestionPlanning({ isAdmin = true }) {\r\n  // États pour les données\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [planning, setPlanning] = useState(null);\r\n  const [publishedPlanning, setPublishedPlanning] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [desiderata, setDesiderata] = useState([]);\r\n\r\n  // États pour l'interface utilisateur\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [modified, setModified] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // États pour les filtres\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' });\r\n  const [creneauFilter, setCreneauFilter] = useState('all');\r\n  const [selectedMedecin, setSelectedMedecin] = useState('all');\r\n  const [viewMode, setViewMode] = useState('list');\r\n\r\n  // États pour les modales\r\n  const [showGenerateConfirm, setShowGenerateConfirm] = useState(false);\r\n  const [showPublishConfirm, setShowPublishConfirm] = useState(false);\r\n  const [showDiscardChanges, setShowDiscardChanges] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  // Effet pour charger les données initiales\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'admin') {\r\n          setError('Accès non autorisé');\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        // Chargement des données de base\r\n        const [periode, medecinsList, latestPlan, publishedPlan] = await Promise.all([\r\n          getPeriodeSaisie(),\r\n          getMedecins(),\r\n          getLatestPlanning(),\r\n          getPublishedPlanning()\r\n        ]);\r\n\r\n        setPeriodeSaisie(periode);\r\n        setMedecins(medecinsList);\r\n\r\n        if (latestPlan) {\r\n          setPlanning(latestPlan);\r\n          setDateFilter({\r\n            start: latestPlan.startDate.split('T')[0],\r\n            end: latestPlan.endDate.split('T')[0]\r\n          });\r\n        }\r\n\r\n        setPublishedPlanning(publishedPlan);\r\n\r\n        // Charger les desiderata si une période est définie\r\n        if (periode) {\r\n          const desiderataData = await getDesiderataForPeriod(\r\n            periode.startDate,\r\n            periode.endDate\r\n          );\r\n          setDesiderata(desiderataData);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Erreur:', error);\r\n        setError('Erreur lors du chargement des données');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  // Gestion des notifications\r\n  const showNotification = (message, isError = false) => {\r\n    if (isError) {\r\n      setError(message);\r\n      setTimeout(() => setError(null), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(null), 5000);\r\n    }\r\n  };\r\n\r\n  // Handlers pour les actions principales\r\n  const handleGeneratePlanning = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!periodeSaisie) {\r\n        throw new Error('Période de saisie non définie');\r\n      }\r\n\r\n      const newPlanningData = await genererPlanning(\r\n        periodeSaisie.startDate, \r\n        periodeSaisie.endDate\r\n      );\r\n\r\n      if (planning && planning.id) {\r\n        const updatedPlanning = { \r\n          ...planning, \r\n          planning: newPlanningData \r\n        };\r\n        await updatePlanning(planning.id, updatedPlanning);\r\n        setPlanning(updatedPlanning);\r\n      } else {\r\n        const savedPlanningId = await savePlanning({\r\n          planning: newPlanningData,\r\n          startDate: periodeSaisie.startDate,\r\n          endDate: periodeSaisie.endDate\r\n        });\r\n        setPlanning({ \r\n          id: savedPlanningId, \r\n          planning: newPlanningData \r\n        });\r\n      }\r\n\r\n      showNotification('Planning généré avec succès');\r\n      setModified(false);\r\n      setShowGenerateConfirm(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la génération du planning:\", error);\r\n      showNotification(\"Erreur lors de la génération du planning\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePublishPlanning = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!planning || !planning.id) {\r\n        throw new Error('Aucun planning à publier');\r\n      }\r\n\r\n      await publishPlanning(planning.id);\r\n      const updatedPublishedPlanning = await getPublishedPlanning();\r\n      setPublishedPlanning(updatedPublishedPlanning);\r\n      \r\n      showNotification('Planning publié avec succès');\r\n      setShowPublishConfirm(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la publication:\", error);\r\n      showNotification(\"Erreur lors de la publication du planning\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveChanges = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!planning || !planning.id) {\r\n        throw new Error('Aucun planning à sauvegarder');\r\n      }\r\n\r\n      await updatePlanning(planning.id, planning);\r\n      showNotification('Modifications sauvegardées avec succès');\r\n      setModified(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la sauvegarde:\", error);\r\n      showNotification(\"Erreur lors de la sauvegarde des modifications\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMedecinChange = (date, creneau, index, medecinId) => {\r\n    if (!editMode) return;\r\n\r\n    setPlanning(prev => {\r\n      const newPlanning = { ...prev };\r\n      if (!newPlanning.planning[date]) {\r\n        newPlanning.planning[date] = {};\r\n      }\r\n      if (!newPlanning.planning[date][creneau]) {\r\n        newPlanning.planning[date][creneau] = Array(\r\n          creneaux.find(c => c.id === creneau)?.medecins || 0\r\n        ).fill(null);\r\n      }\r\n      newPlanning.planning[date][creneau][index] = medecinId || null;\r\n      return newPlanning;\r\n    });\r\n    setModified(true);\r\n  };\r\n\r\n  const toggleEditMode = () => {\r\n    if (editMode && modified) {\r\n      setShowDiscardChanges(true);\r\n      return;\r\n    }\r\n    setEditMode(!editMode);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <div style={{\r\n            width: '2rem',\r\n            height: '2rem',\r\n            border: '2px solid #E5E7EB',\r\n            borderTop: '2px solid #2563EB',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }} />\r\n          <p style={{ color: '#6B7280' }}>Chargement...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* En-tête */}\r\n      <PlanningHeader\r\n        editMode={editMode}\r\n        modified={modified}\r\n        onEditToggle={toggleEditMode}\r\n        onGenerateClick={() => setShowGenerateConfirm(true)}\r\n        onPublishClick={() => setShowPublishConfirm(true)}\r\n        onSaveChanges={handleSaveChanges}\r\n        onBackClick={() => history.push('/dashboard-admin')}\r\n        planning={planning}\r\n      />\r\n\r\n      {/* Notifications */}\r\n      {error && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#FEE2E2',\r\n          color: '#DC2626',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <AlertTriangle size={20} />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#DCFCE7',\r\n          color: '#16A34A',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <Check size={20} />\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem'\r\n      }}>\r\n        {/* Statistiques */}\r\n        <PlanningStatistics\r\n          medecins={medecins}\r\n          periodeSaisie={periodeSaisie}\r\n          planning={planning}\r\n          publishedPlanning={publishedPlanning}\r\n        />\r\n\r\n        {/* Filtres */}\r\n        <PlanningFilters\r\n          showFilters={showFilters}\r\n          onToggleFilters={() => setShowFilters(!showFilters)}\r\n          dateFilter={dateFilter}\r\n          onDateFilterChange={setDateFilter}\r\n          creneauFilter={creneauFilter}\r\n          onCreneauFilterChange={setCreneauFilter}\r\n          selectedMedecin={selectedMedecin}\r\n          onMedecinFilterChange={setSelectedMedecin}\r\n          viewMode={viewMode}\r\n          onViewModeChange={setViewMode}\r\n          medecins={medecins}\r\n          creneaux={creneaux}\r\n        />\r\n\r\n        {/* Panneau d'information médecin */}\r\n        {selectedMedecin !== 'all' && (\r\n          <MedecinInfoPanel\r\n            medecin={medecins.find(m => m.id === selectedMedecin)}\r\n            planning={planning}\r\n            desiderata={desiderata}\r\n          />\r\n        )}\r\n\r\n        {/* Table du planning */}\r\n        {planning && (\r\n          <PlanningTable\r\n            planning={planning}\r\n            creneaux={creneaux}\r\n            medecins={medecins}\r\n            desiderata={desiderata}\r\n            selectedMedecin={selectedMedecin}\r\n            editMode={editMode}\r\n            onMedecinChange={handleMedecinChange}\r\n            dateFilter={dateFilter}\r\n            creneauFilter={creneauFilter}\r\n          />\r\n        )}\r\n      </main>\r\n\r\n      {/* Modales */}\r\n      <GeneratePlanningModal\r\n        isOpen={showGenerateConfirm}\r\n        onClose={() => setShowGenerateConfirm(false)}\r\n        onConfirm={handleGeneratePlanning}\r\n        planning={planning}\r\n      />\r\n\r\n      <PublishPlanningModal\r\n        isOpen={showPublishConfirm}\r\n        onClose={() => setShowPublishConfirm(false)}\r\n        onConfirm={handlePublishPlanning}\r\n        publishedPlanning={publishedPlanning}\r\n      />\r\n\r\n      <DiscardChangesModal\r\n        isOpen={showDiscardChanges}\r\n        onClose={() => setShowDiscardChanges(false)}\r\n        onConfirm={() => {\r\n          setShowDiscardChanges(false);\r\n          setModified(false);\r\n          setEditMode(false);\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionPlanning;","// src/components/GestionPeriodeSaisie.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { setPeriodeSaisie, getPeriodeSaisie } from '../services/planningService';\r\nimport { ArrowLeft, Calendar, Save, AlertTriangle, Check } from 'lucide-react';\r\n\r\nfunction GestionPeriodeSaisie() {\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\r\n      if (authUser) {\r\n        try {\r\n          const userData = await getUser(authUser.uid);\r\n          if (userData.role !== 'admin') {\r\n            setError(\"Accès non autorisé\");\r\n            history.push('/');\r\n          } else {\r\n            setCurrentUser(userData);\r\n            const periode = await getPeriodeSaisie();\r\n            if (periode) {\r\n              setStartDate(periode.startDate.split('T')[0]);\r\n              setEndDate(periode.endDate.split('T')[0]);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Erreur lors de la récupération des données utilisateur:\", error);\r\n          setError(\"Erreur lors de la récupération des données utilisateur\");\r\n        }\r\n      } else {\r\n        history.push('/');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [history]);\r\n\r\n  const showNotification = (message, isError = false) => {\r\n    if (isError) {\r\n      setError(message);\r\n      setTimeout(() => setError(null), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(null), 5000);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await setPeriodeSaisie(startDate, endDate);\r\n      showNotification('Période de saisie mise à jour avec succès! Les desiderata obsolètes ont été supprimés.');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la mise à jour de la période de saisie:\", error);\r\n      showNotification(\"Une erreur est survenue lors de la mise à jour de la période de saisie\", true);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !currentUser) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-admin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-admin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Période de saisie</span>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSubmit}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            <Save size={18} />\r\n            Enregistrer\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Notifications */}\r\n      {error && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#FEE2E2',\r\n          color: '#DC2626',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <AlertTriangle size={20} />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#DCFCE7',\r\n          color: '#16A34A',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <Check size={20} />\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem'\r\n      }}>\r\n        {/* Carte explicative */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Définir la période de saisie\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Configurez la période pendant laquelle les médecins pourront saisir leurs desiderata. \r\n            Les desiderata en dehors de cette période seront automatiquement supprimés.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Formulaire de sélection des dates */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={{\r\n              display: 'grid',\r\n              gap: '1.5rem',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n            }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Date de début\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate}\r\n                  onChange={(e) => setStartDate(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Date de fin\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate}\r\n                  onChange={(e) => setEndDate(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Message d'information */}\r\n            <div style={{\r\n              backgroundColor: '#FFF7ED',\r\n              border: '1px solid #FB923C',\r\n              borderRadius: '0.375rem',\r\n              padding: '1rem',\r\n              marginTop: '1.5rem',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem'\r\n            }}>\r\n              <AlertTriangle size={20} color=\"#FB923C\" />\r\n              <p style={{\r\n                fontSize: '0.875rem',\r\n                color: '#9A3412',\r\n                margin: 0\r\n              }}>\r\n                Attention : La modification de la période de saisie entrainera la suppression des desiderata obsolètes.\r\n              </p>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionPeriodeSaisie;","// src/components/PlanningVisualisation.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser, getMedecins } from '../services/userService';\r\nimport { \r\n  getPublishedPlanning, \r\n  getPeriodeSaisie \r\n} from '../services/planningService';\r\nimport { \r\n  Calendar, \r\n  ArrowLeft, \r\n  Download,\r\n  Filter,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Eye,\r\n  EyeOff\r\n} from 'lucide-react';\r\nimport { createEvents } from 'ics';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2, color: '#E3F2FD', textColor: '#1E88E5' },\r\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3, color: '#E8F5E9', textColor: '#43A047' },\r\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true, color: '#FFF3E0', textColor: '#FB8C00' },\r\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3, color: '#F3E5F5', textColor: '#8E24AA' },\r\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1, color: '#FFF3E0', textColor: '#FB8C00' },\r\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3, color: '#E1F5FE', textColor: '#039BE5' }\r\n];\r\n\r\nfunction PlanningVisualisation() {\r\n  // États\r\n  const [planning, setPlanning] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [viewMode, setViewMode] = useState('all'); // 'all' ou 'personal'\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  // Effets\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n \r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'medecin') {\r\n          setError(\"Accès non autorisé\");\r\n          history.push('/');\r\n          return;\r\n        }\r\n \r\n        // Charger tous les médecins\r\n        const allMedecins = await getMedecins();\r\n        setMedecins(allMedecins);\r\n        setUser(userData);\r\n \r\n        const periode = await getPeriodeSaisie();\r\n        if (!periode) {\r\n          setError(\"Aucune période de saisie n'a été définie\");\r\n          return;\r\n        }\r\n        setPeriodeSaisie(periode);\r\n        setStartDate(periode.startDate.split('T')[0]);\r\n        setEndDate(periode.endDate.split('T')[0]);\r\n \r\n        const publishedPlan = await getPublishedPlanning();\r\n        if (publishedPlan) {\r\n          setPlanning(publishedPlan);\r\n        } else {\r\n          setError(\"Aucun planning n'a été publié\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur:\", error);\r\n        setError(\"Une erreur est survenue lors du chargement des données\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n \r\n    fetchData();\r\n  }, [history]);\r\n\r\n  const exportToICS = () => {\r\n    if (!planning || !planning.planning) return;\r\n\r\n    const events = [];\r\n    const sortedDates = Object.keys(planning.planning).sort((a, b) => new Date(a) - new Date(b));\r\n\r\n    sortedDates.forEach(date => {\r\n      creneaux.forEach(creneau => {\r\n        if (planning.planning[date][creneau.id]) {\r\n          planning.planning[date][creneau.id].forEach((medecinId, index) => {\r\n            if (medecinId === user.id) {\r\n              const startDate = new Date(date);\r\n              const endDate = new Date(date);\r\n              let startHour, endHour;\r\n\r\n              switch (creneau.id) {\r\n                case 'QUART_1': startHour = 1; endHour = 7; break;\r\n                case 'QUART_2': startHour = 7; endHour = 13; break;\r\n                case 'RENFORT_1': startHour = 10; endHour = 13; break;\r\n                case 'QUART_3': startHour = 13; endHour = 19; break;\r\n                case 'RENFORT_2': startHour = 20; endHour = 24; break;\r\n                case 'QUART_4': startHour = 19; endHour = 25; break;\r\n                default: startHour = 0; endHour = 0; break;\r\n              }\r\n\r\n              startDate.setHours(startHour, 0, 0);\r\n              endDate.setHours(endHour, 0, 0);\r\n\r\n              if (endHour === 25) {\r\n                endDate.setDate(endDate.getDate() + 1);\r\n                endDate.setHours(1, 0, 0);\r\n              }\r\n\r\n              events.push({\r\n                start: [startDate.getFullYear(), startDate.getMonth() + 1, startDate.getDate(), startDate.getHours(), startDate.getMinutes()],\r\n                end: [endDate.getFullYear(), endDate.getMonth() + 1, endDate.getDate(), endDate.getHours(), endDate.getMinutes()],\r\n                title: `Garde - ${creneau.label}`,\r\n                description: `Garde médicale - ${creneau.label}`,\r\n                location: 'Hôpital'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    createEvents(events, (error, value) => {\r\n      if (error) {\r\n        console.error(error);\r\n        alert('Une erreur est survenue lors de la création du fichier ICS');\r\n        return;\r\n      }\r\n      const blob = new Blob([value], { type: 'text/calendar;charset=utf-8' });\r\n      const link = document.createElement('a');\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = 'gardes.ics';\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    });\r\n  };\r\n\r\n  // Fonctions utilitaires\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\r\n  };\r\n\r\n  const isWeekend = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.getDay() === 0 || date.getDay() === 6;\r\n  };\r\n\r\n  const getMedecinName = (medecinId) => {\r\n    if (medecinId === user.id) {\r\n      return `Dr. ${user.prenom} ${user.nom}`;\r\n    }\r\n    const medecin = medecins.find(m => m.id === medecinId);\r\n    return medecin ? `Dr. ${medecin.prenom} ${medecin.nom}` : 'Médecin non trouvé';\r\n  };\r\n\r\n  // Rendu conditionnel pour chargement et erreurs\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-medecin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!planning || !planning.planning) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Aucun planning disponible\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filtrage des dates en fonction de la période sélectionnée\r\n  const filteredDates = Object.keys(planning.planning)\r\n    .filter(date => date >= startDate && date <= endDate)\r\n    .sort((a, b) => new Date(a) - new Date(b));\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40,\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-medecin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Planning des gardes</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={exportToICS}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                padding: '0.5rem 1rem',\r\n                backgroundColor: '#2563EB',\r\n                color: 'white',\r\n                borderRadius: '0.375rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <Download size={18} />\r\n              Exporter (ICS)\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '100%',\r\n        margin: '0 auto',\r\n        padding: '2rem',\r\n        marginTop: '80px', // Espace spécifique après le bandeau\r\n        height: 'calc(100vh - 80px)', // Ajusté pour la nouvelle marge\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '1.5rem'\r\n      }}>\r\n\r\n{/* Section des filtres */}\r\n<div style={{\r\n  backgroundColor: 'white',\r\n  borderRadius: '12px',\r\n  boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n  marginBottom: '2rem',\r\n  border: '1px solid #E5E7EB'\r\n}}>\r\n  {/* En-tête des filtres */}\r\n  <button\r\n    onClick={() => setShowFilters(!showFilters)}\r\n    style={{\r\n      width: '100%',\r\n      padding: '1rem 1.5rem',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      border: 'none',\r\n      background: 'none',\r\n      cursor: 'pointer',\r\n      borderBottom: showFilters ? '1px solid #E5E7EB' : 'none'\r\n    }}\r\n  >\r\n    <div style={{ \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      gap: '0.5rem',\r\n      color: '#374151'\r\n    }}>\r\n      <Filter size={20} />\r\n      <span style={{ fontWeight: '500' }}>Filtres</span>\r\n    </div>\r\n    {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n  </button>\r\n\r\n  {showFilters && (\r\n    <div style={{ padding: '1.5rem' }}>\r\n      <div style={{\r\n        display: 'grid',\r\n        gap: '1.5rem'\r\n      }}>\r\n        {/* Sélection du mode de vue */}\r\n        <div>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '0.875rem',\r\n            fontWeight: '500',\r\n            color: '#374151',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Mode d'affichage\r\n          </label>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            backgroundColor: '#F3F4F6',\r\n            padding: '0.25rem',\r\n            borderRadius: '0.375rem',\r\n            width: 'fit-content'\r\n          }}>\r\n            <button\r\n  onClick={() => setViewMode('all')}\r\n  style={{\r\n    padding: '0.5rem 1rem',\r\n    borderRadius: '0.25rem',\r\n    border: 'none',\r\n    backgroundColor: viewMode === 'all' ? '#2563EB' : '#F3F4F6',\r\n    color: viewMode === 'all' ? 'white' : '#374151',\r\n    boxShadow: viewMode === 'all' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '0.5rem',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500'\r\n  }}\r\n>\r\n  <Eye size={16} />\r\n  Voir tout\r\n</button>\r\n<button\r\n  onClick={() => setViewMode('personal')}\r\n  style={{\r\n    padding: '0.5rem 1rem',\r\n    borderRadius: '0.25rem',\r\n    border: 'none',\r\n    backgroundColor: viewMode === 'personal' ? '#2563EB' : '#F3F4F6',\r\n    color: viewMode === 'personal' ? 'white' : '#374151',\r\n    boxShadow: viewMode === 'personal' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '0.5rem',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500'\r\n  }}\r\n>\r\n  <EyeOff size={16} />\r\n  Mes gardes\r\n</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sélection de la période */}\r\n        <div>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '0.875rem',\r\n            fontWeight: '500',\r\n            color: '#374151',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Période\r\n          </label>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <input\r\n              type=\"date\"\r\n              value={startDate}\r\n              onChange={(e) => setStartDate(e.target.value)}\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #D1D5DB',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              value={endDate}\r\n              onChange={(e) => setEndDate(e.target.value)}\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #D1D5DB',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )}\r\n</div>\r\n\r\n{/* Tableau du planning */}\r\n<div style={{\r\n    backgroundColor: 'white',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n    overflowX: 'auto',\r\n    flexGrow: 1, // Pour prendre l'espace disponible\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    border: '1px solid #E5E7EB'\r\n  }}>\r\n    <table style={{\r\n      width: '100%',\r\n      borderCollapse: 'collapse',\r\n      fontSize: '0.875rem',\r\n      tableLayout: 'fixed' // Forcer une largeur fixe pour les colonnes\r\n    }}>\r\n      <colgroup>\r\n        <col style={{ width: '120px' }} /> {/* Largeur fixe pour la colonne de date */}\r\n        {creneaux.map(creneau => (\r\n          <col key={creneau.id} style={{ width: `${100 / creneaux.length}%` }} />\r\n        ))}\r\n      </colgroup>\r\n      <thead>\r\n        <tr>\r\n          <th style={{\r\n            padding: '0.75rem',\r\n            backgroundColor: '#F9FAFB',\r\n            borderBottom: '1px solid #E5E7EB',\r\n            textAlign: 'left',\r\n            fontWeight: '600',\r\n            position: 'sticky',\r\n            left: 0,\r\n            top: 0,\r\n            zIndex: 20,\r\n            backgroundColor: 'white',\r\n            width: '120px'\r\n          }}>\r\n            Date\r\n          </th>\r\n          {creneaux.map(creneau => (\r\n            <th key={creneau.id} style={{\r\n              padding: '0.75rem',\r\n              backgroundColor: '#F9FAFB',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              textAlign: 'left',\r\n              fontWeight: '600',\r\n              position: 'sticky',\r\n              top: 0,\r\n              zIndex: 10\r\n            }}>\r\n              <div>{creneau.label}</div>\r\n              <div style={{\r\n                fontSize: '0.75rem',\r\n                color: '#6B7280'\r\n              }}>\r\n                {creneau.hours}\r\n              </div>\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {filteredDates.map(date => (\r\n          <tr key={date} style={{\r\n            backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\r\n          }}>\r\n            <td style={{\r\n              padding: '0.75rem',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              fontWeight: '500',\r\n              position: 'sticky',\r\n              left: 0,\r\n              backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\r\n              zIndex: 10,\r\n              width: '120px'\r\n            }}>\r\n              {formatDate(date)}\r\n            </td>\r\n            {creneaux.map(creneau => (\r\n              <td key={`${date}-${creneau.id}`} style={{\r\n                padding: '0.75rem',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                verticalAlign: 'top'\r\n              }}>\r\n                {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '0.25rem'\r\n                  }}>\r\n                    {planning.planning[date]?.[creneau.id]?.map((medecinId, index) => (\r\n                      <div key={index} style={{\r\n                        padding: '0.5rem',\r\n                        backgroundColor: medecinId ? creneau.color : '#F3F4F6',\r\n                        color: medecinId ? creneau.textColor : '#6B7280',\r\n                        borderRadius: '0.375rem',\r\n                        fontSize: '0.75rem',\r\n                        whiteSpace: 'nowrap',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis'\r\n                      }}>\r\n                        {medecinId ? getMedecinName(medecinId) : 'Non assigné'}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</main>\r\n</div>\r\n);\r\n}\r\n\r\nexport default PlanningVisualisation;","// src/App.js\r\nimport React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport DashboardMedecin from './components/DashboardMedecin';\r\nimport DashboardAdmin from './components/DashboardAdmin';\r\nimport FormulaireDesirata from './components/FormulaireDesirata';\r\nimport GestionUtilisateurs from './components/GestionUtilisateurs';\r\nimport GestionPlanning from './components/planning/GestionPlanning';\r\nimport GestionPeriodeSaisie from './components/GestionPeriodeSaisie';\r\nimport PlanningVisualisation from './components/PlanningVisualisation'; // Ajout de l'import\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Login} />\r\n          <Route path=\"/dashboard-medecin\" component={DashboardMedecin} />\r\n          <Route path=\"/dashboard-admin\" component={DashboardAdmin} />\r\n          <Route path=\"/formulaire-desirata\" component={FormulaireDesirata} />\r\n          <Route path=\"/gestion-utilisateurs\" component={GestionUtilisateurs} />\r\n          <Route path=\"/gestion-planning-admin\" render={() => <GestionPlanning isAdmin={true} />} />\r\n          <Route path=\"/planning-visualisation\" component={PlanningVisualisation} />\r\n          <Route path=\"/gestion-periode-saisie\" component={GestionPeriodeSaisie} />\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;","// src/index.js\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}