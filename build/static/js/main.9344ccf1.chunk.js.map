{"version":3,"sources":["firebase.js","services/userService.js","services/authService.js","components/Login.js","services/planningService.js","components/ChangePasswordModal.js","components/DashboardMedecin.js","components/DashboardAdmin.js","components/QuickFill.js","components/WeeklyPattern.js","components/FormulaireDesirata.js","components/GestionUtilisateurs.js","utils/planningGenerator.js","components/planning/PlanningHeader.js","components/planning/components/MedecinSearchSelect.js","components/planning/PlanningFilters.js","components/planning/PlanningStatistics.js","utils/planningUtils.js","components/planning/PlanningTable.js","components/planning/MedecinInfoPanel.js","components/planning/modals/ConfirmationModal.js","components/planning/modals/GeneratePlanningModal.js","components/planning/modals/PublishPlanningModal.js","components/planning/modals/DiscardChangesModal.js","components/planning/GestionPlanning.js","components/GestionPeriodeSaisie.js","components/PlanningVisualisation.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","USERS_COLLECTION","getUser","async","userDoc","getDoc","doc","uid","exists","console","log","data","id","error","getAllUsers","user","currentUser","Error","getDocs","collection","docs","map","getMedecins","q","query","where","logoutUser","signOut","Login","email","setEmail","useState","password","setPassword","setError","isLoading","setIsLoading","history","useHistory","_jsx","style","backgroundColor","minHeight","display","alignItems","justifyContent","padding","children","_jsxs","width","borderRadius","boxShadow","margin","borderTopLeftRadius","borderTopRightRadius","borderBottom","height","Calendar","color","textAlign","fontSize","fontWeight","marginBottom","onSubmit","e","preventDefault","userCredential","signInWithEmailAndPassword","userDetails","role","loginUser","push","type","required","value","onChange","target","border","disabled","cursor","DESIDERATA_COLLECTION","PLANNING_COLLECTION","PERIODE_SAISIE_DOC","convertToTimestamp","dateString","Timestamp","date","Date","fromDate","convertFromTimestamp","timestamp","toDate","toISOString","deleteObsoleteDesiderata","newStartDate","newEndDate","desiderataRef","querySnapshot","batch","writeBatch","forEach","desiderata","isDesiderataObsolete","delete","ref","commit","desiderataStart","startDate","desiderataEnd","endDate","newStart","newEnd","getPeriodeSaisie","periodeDoc","getDesiderataByUser","userId","getDesiderataForPeriod","debut","fin","debutTimestamp","finTimestamp","nombreGardesSouhaitees","gardesGroupees","renfortsAssocies","updatePlanning","planningId","planning","planningRef","updateDoc","getLatestPlanning","orderBy","limit","empty","latestDoc","getPublishedPlanning","publishedDoc","publishedAt","ChangePasswordModal","_ref","onClose","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","success","setSuccess","position","top","left","right","bottom","zIndex","maxWidth","boxSizing","onClick","background","marginLeft","X","size","updatePassword","updateUserPassword","setTimeout","message","DashboardMedecin","setUser","setDesiderata","loading","setLoading","showChangePassword","setShowChangePassword","isMenuOpen","setIsMenuOpen","useEffect","unsubscribe","onAuthStateChanged","authUser","userData","userDesiderata","handleLogout","gap","ClipboardList","Key","LogOut","Menu","borderTop","flexDirection","nom","length","d","index","toLocaleDateString","DashboardAdmin","medecins","setMedecins","periodeSaisie","setPeriodeSaisie","setPlanning","medecinsList","periode","publishedPlan","fetchData","Settings","prenom","gridTemplateColumns","transition","onMouseOver","currentTarget","onMouseOut","Users","ChevronRight","Clock","QuickFill","creneaux","onApply","selectedCreneaux","setSelectedCreneaux","selectedJours","setSelectedJours","selectedDispo","setSelectedDispo","setStartDate","setEndDate","isExpanded","setIsExpanded","jours","label","ChevronUp","ChevronDown","flexWrap","minWidth","flex","handleSelectFullPeriod","split","toggleAllCreneaux","allSelected","every","creneau","newSelectedCreneaux","checked","prev","hours","toggleAllJours","jour","newSelectedJours","handleApply","alert","selectedCreneauxArray","Object","entries","filter","_ref2","_","isSelected","_ref3","creneauId","selectedJoursArray","_ref4","_ref5","jourId","disponibilite","Upload","WeeklyPattern","onApplyPattern","pattern","setPattern","overflowX","borderCollapse","_pattern$jour$id","samediOnly","handlePatternChange","handleApplyPattern","keys","Copy","options","joursFeries","FormulaireDesirata","setNombreGardesSouhaitees","nombreGardesMaxParSemaine","setNombreGardesMaxParSemaine","setGardesGroupees","setRenfortsAssocies","existingDesiderataId","setExistingDesiderataId","generateDates","useCallback","dates","currentDate","end","setDate","getDate","relevantDesiderata","find","formatDate","getDay","toString","padStart","getMonth","ArrowLeft","desiderataData","desiderataId","updateDesiderata","addDoc","addDesiderata","Save","paddingTop","parseInt","min","max","borderColor","htmlFor","overflow","start","newDesiderata","includes","dayOfWeek","isHighlighted","day","formattedDate","isWeekendOrHoliday","_desiderata$dateStrin","handleDesiderataChange","_desiderata$dateStrin2","option","GestionUtilisateurs","users","setUsers","setCurrentUser","showAddForm","setShowAddForm","newUser","setNewUser","searchTerm","setSearchTerm","roleFilter","setRoleFilter","viewMode","setViewMode","showFilters","setShowFilters","currentPage","setCurrentPage","usersPerPage","showConfirmDelete","setShowConfirmDelete","userToDelete","setUserToDelete","fetchUsers","fetchedUsers","filteredUsers","matchesSearch","toLowerCase","matchesRole","indexOfLastUser","indexOfFirstUser","currentUsers","slice","totalPages","Math","ceil","handleInputChange","name","handleDeleteClick","showNotification","UserPlus","Search","placeholder","List","Grid","Mail","Trash2","Array","from","i","page","transform","marginTop","createUserWithEmailAndPassword","registerUser","setDoc","createUser","errorMessage","code","deleteDoc","deleteUser","creneauxChevauchants","aCreneauxChevauchants","medecinId","creneauxDuJour","some","creneauChevauchant","_creneauxDuJour$crene","genererPlanningSolution","c","assignerMedecins","getWeekNumber","setHours","yearStart","getFullYear","compterGardesParSemaine","weekNumber","count","planningDate","values","medecinsPriorises","_desiderata$medecinId","_desiderata$medecinId2","_desiderata$medecinId3","choix","preferences","gardesParSemaine","maxGardesParSemaine","aChevauchement","sort","a","b","_desiderata$a","_desiderata$a$prefere","_desiderata$b","_desiderata$b$prefere","choixA","choixB","assignes","medecinChoisi","choisirMedecin","splice","indexOf","medecinsDispo","mois","scoreA","calculerScoreMedecin","_prefMedecin$preferen","_prefMedecin$preferen2","_prefMedecin$preferen3","score","prefMedecin","gardesDuMois","compterGardesMois","estWeekEnd","aGardeWeekEnd","startsWith","aGardeJour","aRenfortJour","reduce","flat","m","dateObj","debutWeekEnd","finWeekEnd","_planning$date$RENFOR","_planning$date$RENFOR2","rechercheTabou","maxIterations","arguments","undefined","meilleurPlanning","meilleurScore","evaluerPlanning","listeTabou","Set","voisins","genererVoisins","meilleurVoisin","meilleurScoreVoisin","Infinity","voisin","scoreVoisin","has","JSON","stringify","add","next","floor","random","medecin","_desiderata$medecin","nouveauPlanning","parse","maxGardes","verifierContraintes","planningRetrait","gardesParMedecin","gardesParMedecinParSemaine","_desiderata$medecinId4","_desiderata$medecinId5","_desiderata$medecinId6","_desiderata$medecinId7","_desiderata$medecinId8","semaine","_desiderata$medecinId9","abs","medecinsDuJour","hierMedecins","avantHierMedecins","PlanningHeader","editMode","modified","onEditToggle","onGenerateClick","onPublishClick","onSaveChanges","onBackClick","_Fragment","RefreshCcw","Edit2","MedecinSearchSelect","isOpen","setIsOpen","wrapperRef","useRef","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","filteredMedecins","searchTermLower","selectedMedecin","onFocus","maxHeight","overflowY","PlanningFilters","onToggleFilters","dateFilter","onDateFilterChange","creneauFilter","onCreneauFilterChange","onMedecinFilterChange","onViewModeChange","Filter","PlanningStatistics","publishedPlanning","getPreferenceStyle","preference","getMedecinPreference","_desiderata$find2","_desiderata$find2$des","MedecinSelect","currentValue","sortedMedecins","sortMedecinsByPreference","sorted","oui","possible","nonSpecifie","non","_desiderata$find","_desiderata$find$desi","all","PreferenceIndicator","PlanningTable","onMedecinChange","isWeekend","getFilteredCreneaux","_planning$planning$da","_planning$planning$da2","_planning$planning$da3","_planning$planning$da4","MedecinInfoPanel","gardesAttribuees","compterGardesParMedecin","joursCreneaux","gardesSouhaitees","getNombreGardesSouhaitees","medecinDesiderata","User","ConfirmationModal","onConfirm","title","confirmLabel","cancelLabel","icon","Icon","AlertTriangle","iconColor","iconBgColor","confirmButtonColor","GeneratePlanningModal","PublishPlanningModal","DiscardChangesModal","GestionPlanning","isAdmin","setPublishedPlanning","setEditMode","setModified","setDateFilter","setCreneauFilter","setSelectedMedecin","showGenerateConfirm","setShowGenerateConfirm","showPublishConfirm","setShowPublishConfirm","showDiscardChanges","setShowDiscardChanges","latestPlan","Promise","animation","toggleEditMode","Check","handleMedecinChange","newPlanning","_creneaux$find","fill","newPlanningData","assign","genererPlanning","updatedPlanning","savedPlanningId","savePlanning","now","publishPlanning","updatedPublishedPlanning","GestionPeriodeSaisie","handleSubmit","textColor","PlanningVisualisation","filteredDates","exportToICS","events","startHour","endHour","getHours","getMinutes","description","location","createEvents","blob","Blob","link","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","Download","Eye","EyeOff","App","Router","className","Switch","Route","exact","path","component","render","ReactDOM","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.9344ccf1.chunk.js","sourcesContent":["// src/firebase.js\nimport { initializeApp } from 'firebase/app';\nimport { getFirestore } from 'firebase/firestore';\nimport { getAuth } from 'firebase/auth';\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyDesXYDyPsrG5HxkkPbj9XuqFQV91j2ixY\",\n  authDomain: \"apum-8cfa4.firebaseapp.com\",\n  databaseURL: \"https://apum-8cfa4-default-rtdb.europe-west1.firebasedatabase.app\",\n  projectId: \"apum-8cfa4\",\n  storageBucket: \"apum-8cfa4.appspot.com\",\n  messagingSenderId: \"965430779165\",\n  appId: \"1:965430779165:web:2b1d142cc5937744d5d5f4\"\n};\n\nconst app = initializeApp(firebaseConfig);\nconst db = getFirestore(app);\nconst auth = getAuth(app);\n\nexport { db, auth };","import { db, auth } from '../firebase';\nimport { doc, getDoc, setDoc, updateDoc, deleteDoc, getDocs, collection, query, where } from 'firebase/firestore';\n\nconst USERS_COLLECTION = 'users';\n\nexport const createUser = async (uid, userData) => {\n  try {\n    await setDoc(doc(db, USERS_COLLECTION, uid), userData);\n    console.log('Utilisateur créé avec succès');\n  } catch (error) {\n    console.error('Erreur lors de la création de l\\'utilisateur:', error);\n    throw error;\n  }\n};\n\nexport const getUser = async (uid) => {\n  try {\n    const userDoc = await getDoc(doc(db, USERS_COLLECTION, uid));\n    if (userDoc.exists()) {\n      console.log('Utilisateur trouvé:', userDoc.data());\n      return { id: userDoc.id, ...userDoc.data() };\n    } else {\n      console.log('Aucun utilisateur trouvé avec cet UID');\n      return null;\n    }\n  } catch (error) {\n    console.error('Erreur lors de la récupération de l\\'utilisateur:', error);\n    throw error;\n  }\n};\n\nexport const updateUser = async (uid, userData) => {\n  try {\n    await updateDoc(doc(db, USERS_COLLECTION, uid), userData);\n    console.log('Utilisateur mis à jour avec succès');\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour de l\\'utilisateur:', error);\n    throw error;\n  }\n};\n\nexport const deleteUser = async (uid) => {\n  try {\n    await deleteDoc(doc(db, USERS_COLLECTION, uid));\n    console.log('Utilisateur supprimé avec succès');\n  } catch (error) {\n    console.error('Erreur lors de la suppression de l\\'utilisateur:', error);\n    throw error;\n  }\n};\n\nexport const getAllUsers = async () => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n\n    const currentUserDoc = await getDoc(doc(db, USERS_COLLECTION, user.uid));\n    if (!currentUserDoc.exists()) {\n      throw new Error('Utilisateur non trouvé');\n    }\n\n    const querySnapshot = await getDocs(collection(db, USERS_COLLECTION));\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  } catch (error) {\n    console.error('Erreur lors de la récupération de tous les utilisateurs:', error);\n    throw error;\n  }\n};\n\nexport const getMedecins = async () => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n\n    const q = query(collection(db, USERS_COLLECTION), where(\"role\", \"==\", \"medecin\"));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n  } catch (error) {\n    console.error('Erreur lors de la récupération des médecins:', error);\n    throw error;\n  }\n};","import { auth } from '../firebase';\nimport { \n  createUserWithEmailAndPassword, \n  signInWithEmailAndPassword, \n  signOut,\n  updatePassword\n} from 'firebase/auth';\nimport { getUser } from './userService';\n\nexport const registerUser = async (email, password) => {\n  try {\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    console.log('Utilisateur enregistré:', userCredential);\n    return userCredential;\n  } catch (error) {\n    console.error('Erreur lors de l\\'enregistrement:', error);\n    throw error;\n  }\n};\n\nexport const loginUser = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    console.log('Utilisateur connecté:', userCredential);\n    const userDetails = await getUser(userCredential.user.uid);\n    return { ...userCredential, role: userDetails.role };\n  } catch (error) {\n    console.error('Erreur lors de la connexion:', error);\n    throw error;\n  }\n};\n\nexport const logoutUser = async () => {\n  try {\n    await signOut(auth);\n    console.log('Utilisateur déconnecté');\n  } catch (error) {\n    console.error('Erreur lors de la déconnexion:', error);\n    throw error;\n  }\n};\n\nexport const checkUserRole = async (uid, allowedRoles) => {\n  try {\n    const user = await getUser(uid);\n    if (user && allowedRoles.includes(user.role)) {\n      return true;\n    }\n    return false;\n  } catch (error) {\n    console.error('Erreur lors de la vérification du rôle:', error);\n    return false;\n  }\n};\n\nexport const updateUserPassword = async (newPassword) => {\n  try {\n    const user = auth.currentUser;\n    if (user) {\n      await updatePassword(user, newPassword);\n      console.log('Mot de passe mis à jour avec succès');\n    } else {\n      throw new Error('Aucun utilisateur connecté');\n    }\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour du mot de passe:', error);\n    throw error;\n  }\n};","import React, { useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { loginUser } from '../services/authService';\nimport { getUser } from '../services/userService';\nimport { Calendar } from 'lucide-react';\n\nfunction Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n  const history = useHistory();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setIsLoading(true);\n\n    try {\n      const userCredential = await loginUser(email, password);\n      if (!userCredential || !userCredential.user) {\n        throw new Error('Échec de l\\'authentification');\n      }\n\n      const user = await getUser(userCredential.user.uid);\n      if (!user) {\n        throw new Error('Utilisateur non trouvé dans Firestore');\n      }\n\n      if (user.role === 'medecin') {\n        history.push('/dashboard-medecin');\n      } else if (user.role === 'admin') {\n        history.push('/dashboard-admin');\n      } else {\n        setError('Rôle utilisateur non reconnu');\n      }\n    } catch (error) {\n      console.error(\"Erreur de connexion:\", error);\n      setError('Identifiants incorrects ou erreur de connexion');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div style={{ \n      backgroundColor: '#f3f4f6', \n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      padding: '24px'\n    }}>\n      <div style={{ \n        width: '400px',\n        backgroundColor: 'white', \n        borderRadius: '8px', \n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\n        margin: 'auto' // Ajout de margin: auto pour un centrage parfait\n      }}>\n        <div style={{ \n          padding: '24px', \n          backgroundColor: '#EBF5FF', \n          borderTopLeftRadius: '8px', \n          borderTopRightRadius: '8px', \n          borderBottom: '1px solid #E5E7EB'\n        }}>\n          <div style={{ \n            width: '64px', \n            height: '64px', \n            margin: '0 auto 16px', \n            backgroundColor: '#BFDBFE', \n            borderRadius: '50%', \n            display: 'flex', \n            alignItems: 'center', \n            justifyContent: 'center' \n          }}>\n            <Calendar style={{ width: '32px', height: '32px', color: '#2563EB' }} />\n          </div>\n          <h2 style={{ textAlign: 'center', fontSize: '24px', fontWeight: 'bold', color: '#2563EB', marginBottom: '8px' }}>\n            Planning APUM\n          </h2>\n          <p style={{ textAlign: 'center', fontSize: '14px', color: '#6B7280' }}>\n            Connectez-vous pour accéder à votre espace\n          </p>\n        </div>\n\n        <div style={{ padding: '24px' }}>\n          <form onSubmit={handleSubmit}>\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{ \n                display: 'block', \n                fontSize: '14px', \n                fontWeight: '500', \n                color: '#374151', \n                marginBottom: '4px' \n              }}>\n                Email\n              </label>\n              <input\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  borderRadius: '4px',\n                  border: '1px solid #D1D5DB',\n                  fontSize: '14px'\n                }}\n              />\n            </div>\n\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{ \n                display: 'block', \n                fontSize: '14px', \n                fontWeight: '500', \n                color: '#374151', \n                marginBottom: '4px' \n              }}>\n                Mot de passe\n              </label>\n              <input\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  borderRadius: '4px',\n                  border: '1px solid #D1D5DB',\n                  fontSize: '14px'\n                }}\n              />\n            </div>\n\n            {error && (\n              <div style={{ \n                backgroundColor: '#FEE2E2', \n                padding: '12px', \n                borderRadius: '4px', \n                marginBottom: '16px',\n                border: '1px solid #FECACA'\n              }}>\n                <p style={{ color: '#DC2626', fontSize: '14px' }}>{error}</p>\n              </div>\n            )}\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              style={{\n                width: '100%',\n                padding: '8px 16px',\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\n                color: 'white',\n                borderRadius: '4px',\n                fontSize: '14px',\n                fontWeight: '500',\n                cursor: isLoading ? 'not-allowed' : 'pointer'\n              }}\n            >\n              {isLoading ? 'Connexion...' : 'Se connecter'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Login;","import { db, auth } from '../firebase';\nimport { \n  collection, \n  addDoc, \n  updateDoc, \n  doc, \n  deleteDoc, \n  getDocs, \n  query, \n  where,\n  orderBy,\n  limit,\n  getDoc,\n  setDoc,\n  Timestamp,\n  writeBatch\n} from 'firebase/firestore';\n\nconst DESIDERATA_COLLECTION = 'desiderata';\nconst PLANNING_COLLECTION = 'planning';\nconst PERIODE_SAISIE_DOC = 'periode_saisie';\n\nconst convertToTimestamp = (dateString) => {\n  if (dateString instanceof Timestamp) {\n    return dateString;\n  }\n  const date = new Date(dateString);\n  return Timestamp.fromDate(date);\n};\n\nconst convertFromTimestamp = (timestamp) => {\n  if (timestamp instanceof Timestamp) {\n    return timestamp.toDate().toISOString();\n  }\n  if (typeof timestamp === 'string') {\n    return timestamp;\n  }\n  console.error('Format de date non reconnu:', timestamp);\n  return null;\n};\n\nexport const setPeriodeSaisie = async (startDate, endDate) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    \n    await setDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC), { \n      startDate: convertToTimestamp(startDate),\n      endDate: convertToTimestamp(endDate)\n    });\n\n    await deleteObsoleteDesiderata(startDate, endDate);\n\n    console.log('Période de saisie mise à jour et desiderata obsolètes supprimés');\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour de la période de saisie:', error);\n    throw error;\n  }\n};\n\nconst deleteObsoleteDesiderata = async (newStartDate, newEndDate) => {\n  try {\n    const desiderataRef = collection(db, DESIDERATA_COLLECTION);\n    const q = query(desiderataRef);\n    const querySnapshot = await getDocs(q);\n\n    const batch = writeBatch(db);\n    querySnapshot.forEach((doc) => {\n      const desiderata = doc.data();\n      if (isDesiderataObsolete(desiderata, newStartDate, newEndDate)) {\n        batch.delete(doc.ref);\n      }\n    });\n\n    await batch.commit();\n    console.log('Desiderata obsolètes supprimés');\n  } catch (error) {\n    console.error('Erreur lors de la suppression des desiderata obsolètes:', error);\n    throw error;\n  }\n};\n\nconst isDesiderataObsolete = (desiderata, newStartDate, newEndDate) => {\n  const desiderataStart = desiderata.startDate.toDate();\n  const desiderataEnd = desiderata.endDate.toDate();\n  const newStart = new Date(newStartDate);\n  const newEnd = new Date(newEndDate);\n\n  return desiderataEnd < newStart || desiderataStart > newEnd;\n};\n\nexport const getPeriodeSaisie = async () => {\n  try {\n    const periodeDoc = await getDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC));\n    if (periodeDoc.exists()) {\n      const data = periodeDoc.data();\n      return {\n        startDate: convertFromTimestamp(data.startDate),\n        endDate: convertFromTimestamp(data.endDate)\n      };\n    }\n    return null;\n  } catch (error) {\n    console.error('Erreur lors de la récupération de la période de saisie:', error);\n    throw error;\n  }\n};\n\nexport const addDesiderata = async (userId, desiderata) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n\n    const docRef = await addDoc(collection(db, DESIDERATA_COLLECTION), {\n      userId,\n      startDate: convertToTimestamp(desiderata.startDate),\n      endDate: convertToTimestamp(desiderata.endDate),\n      desiderata: desiderata.desiderata,\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\n      gardesGroupees: desiderata.gardesGroupees,\n      renfortsAssocies: desiderata.renfortsAssocies\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('Erreur lors de l\\'ajout des desiderata:', error);\n    throw error;\n  }\n};\n\nexport const updateDesiderata = async (desiderataId, desiderata) => {\n  try {\n    const desiderataRef = doc(db, DESIDERATA_COLLECTION, desiderataId);\n    await updateDoc(desiderataRef, {\n      startDate: convertToTimestamp(desiderata.startDate),\n      endDate: convertToTimestamp(desiderata.endDate),\n      desiderata: desiderata.desiderata,\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\n      gardesGroupees: desiderata.gardesGroupees,\n      renfortsAssocies: desiderata.renfortsAssocies\n    });\n    console.log('Desiderata mis à jour avec succès');\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour des desiderata:', error);\n    throw error;\n  }\n};\n\nexport const getDesiderataByUser = async (userId) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const q = query(collection(db, DESIDERATA_COLLECTION), where(\"userId\", \"==\", userId));\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => {\n      const data = doc.data();\n      return { \n        id: doc.id, \n        ...data,\n        startDate: convertFromTimestamp(data.startDate),\n        endDate: convertFromTimestamp(data.endDate)\n      };\n    });\n  } catch (error) {\n    console.error('Erreur lors de la récupération des desiderata:', error);\n    throw error;\n  }\n};\n\nexport const getDesiderataForPeriod = async (debut, fin) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n\n    const debutTimestamp = convertToTimestamp(debut);\n    const finTimestamp = convertToTimestamp(fin);\n\n    const q = query(\n      collection(db, DESIDERATA_COLLECTION),\n      where(\"startDate\", \"<=\", finTimestamp),\n      where(\"endDate\", \">=\", debutTimestamp)\n    );\n    const querySnapshot = await getDocs(q);\n    return querySnapshot.docs.map(doc => {\n      const data = doc.data();\n      return {\n        id: doc.id,\n        userId: data.userId,\n        startDate: convertFromTimestamp(data.startDate),\n        endDate: convertFromTimestamp(data.endDate),\n        desiderata: data.desiderata,\n        nombreGardesSouhaitees: data.nombreGardesSouhaitees,\n        gardesGroupees: data.gardesGroupees,\n        renfortsAssocies: data.renfortsAssocies\n      };\n    });\n  } catch (error) {\n    console.error('Erreur lors de la récupération des desiderata pour la période:', error);\n    throw error;\n  }\n};\n\nexport const savePlanning = async (planning) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const docRef = await addDoc(collection(db, PLANNING_COLLECTION), {\n      ...planning,\n      startDate: convertToTimestamp(planning.startDate),\n      endDate: convertToTimestamp(planning.endDate),\n    });\n    return docRef.id;\n  } catch (error) {\n    console.error('Erreur lors de la sauvegarde du planning:', error);\n    throw error;\n  }\n};\n\nexport const updatePlanning = async (planningId, planning) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\n    await updateDoc(planningRef, {\n      ...planning,\n      startDate: convertToTimestamp(planning.startDate),\n      endDate: convertToTimestamp(planning.endDate),\n    });\n  } catch (error) {\n    console.error('Erreur lors de la mise à jour du planning:', error);\n    throw error;\n  }\n};\n\nexport const getLatestPlanning = async () => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const q = query(collection(db, PLANNING_COLLECTION), orderBy('startDate', 'desc'), limit(1));\n    const querySnapshot = await getDocs(q);\n    if (querySnapshot.empty) {\n      return null;\n    }\n    const latestDoc = querySnapshot.docs[0];\n    const data = latestDoc.data();\n    return { \n      id: latestDoc.id, \n      ...data,\n      startDate: convertFromTimestamp(data.startDate),\n      endDate: convertFromTimestamp(data.endDate)\n    };\n  } catch (error) {\n    console.error('Erreur lors de la récupération du dernier planning:', error);\n    throw error;\n  }\n};\n\nexport const deletePlanning = async (planningId) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    await deleteDoc(doc(db, PLANNING_COLLECTION, planningId));\n  } catch (error) {\n    console.error('Erreur lors de la suppression du planning:', error);\n    throw error;\n  }\n};\n\nexport const publishPlanning = async (planningId) => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\n    await updateDoc(planningRef, {\n      publishedAt: Timestamp.now()\n    });\n  } catch (error) {\n    console.error('Erreur lors de la publication du planning:', error);\n    throw error;\n  }\n};\n\nexport const getPublishedPlanning = async () => {\n  try {\n    const user = auth.currentUser;\n    if (!user) {\n      throw new Error('Utilisateur non authentifié');\n    }\n    const q = query(\n      collection(db, PLANNING_COLLECTION), \n      where(\"publishedAt\", \"!=\", null),\n      orderBy(\"publishedAt\", \"desc\"),\n      limit(1)\n    );\n    const querySnapshot = await getDocs(q);\n    if (querySnapshot.empty) {\n      return null;\n    }\n    const publishedDoc = querySnapshot.docs[0];\n    const data = publishedDoc.data();\n    return { \n      id: publishedDoc.id, \n      ...data,\n      startDate: convertFromTimestamp(data.startDate),\n      endDate: convertFromTimestamp(data.endDate),\n      publishedAt: convertFromTimestamp(data.publishedAt)\n    };\n  } catch (error) {\n    console.error('Erreur lors de la récupération du planning publié:', error);\n    throw error;\n  }\n};","// src/components/ChangePasswordModal.js\nimport React, { useState } from 'react';\nimport { X } from 'lucide-react';\nimport { updateUserPassword } from '../services/authService';\n\nfunction ChangePasswordModal({ onClose }) {\n  const [currentPassword, setCurrentPassword] = useState('');\n  const [newPassword, setNewPassword] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState('');\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setError('');\n    setSuccess('');\n    setIsLoading(true);\n\n    if (newPassword !== confirmPassword) {\n      setError('Les nouveaux mots de passe ne correspondent pas.');\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      await updateUserPassword(newPassword);\n      setSuccess('Mot de passe mis à jour avec succès.');\n      setCurrentPassword('');\n      setNewPassword('');\n      setConfirmPassword('');\n      setTimeout(onClose, 2000);\n    } catch (error) {\n      setError('Erreur lors de la mise à jour du mot de passe: ' + error.message);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 50,\n      padding: '16px'\n    }}>\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '8px',\n        width: '100%',\n        maxWidth: '400px',\n        position: 'relative',\n        boxSizing: 'border-box'\n      }}>\n        {/* En-tête du modal avec titre et bouton de fermeture alignés */}\n        <div style={{\n          padding: '16px 24px',\n          borderBottom: '1px solid #E5E7EB',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <h2 style={{\n            fontSize: '20px',\n            fontWeight: 'bold',\n            color: '#2563EB',\n            margin: 0 // Supprime les marges par défaut\n          }}>\n            Changer le mot de passe\n          </h2>\n          <button\n            onClick={onClose}\n            style={{\n              background: 'none',\n              border: 'none',\n              cursor: 'pointer',\n              padding: '4px',\n              display: 'flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              marginLeft: '8px'\n            }}\n          >\n            <X size={20} color=\"#6B7280\" />\n          </button>\n        </div>\n\n        {/* Corps du modal */}\n        <div style={{ padding: '24px' }}>\n          {error && (\n            <div style={{\n              backgroundColor: '#FEE2E2',\n              padding: '12px',\n              borderRadius: '4px',\n              marginBottom: '16px',\n              color: '#DC2626',\n              fontSize: '14px'\n            }}>\n              {error}\n            </div>\n          )}\n\n          {success && (\n            <div style={{\n              backgroundColor: '#DCFCE7',\n              padding: '12px',\n              borderRadius: '4px',\n              marginBottom: '16px',\n              color: '#16A34A',\n              fontSize: '14px'\n            }}>\n              {success}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} style={{ marginBottom: '0' }}>\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{\n                display: 'block',\n                marginBottom: '4px',\n                fontSize: '14px',\n                fontWeight: '500',\n                color: '#374151'\n              }}>\n                Mot de passe actuel\n              </label>\n              <input\n                type=\"password\"\n                value={currentPassword}\n                onChange={(e) => setCurrentPassword(e.target.value)}\n                required\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  borderRadius: '4px',\n                  border: '1px solid #D1D5DB',\n                  fontSize: '14px',\n                  boxSizing: 'border-box'\n                }}\n              />\n            </div>\n\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{\n                display: 'block',\n                marginBottom: '4px',\n                fontSize: '14px',\n                fontWeight: '500',\n                color: '#374151'\n              }}>\n                Nouveau mot de passe\n              </label>\n              <input\n                type=\"password\"\n                value={newPassword}\n                onChange={(e) => setNewPassword(e.target.value)}\n                required\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  borderRadius: '4px',\n                  border: '1px solid #D1D5DB',\n                  fontSize: '14px',\n                  boxSizing: 'border-box'\n                }}\n              />\n            </div>\n\n            <div style={{ marginBottom: '16px' }}>\n              <label style={{\n                display: 'block',\n                marginBottom: '4px',\n                fontSize: '14px',\n                fontWeight: '500',\n                color: '#374151'\n              }}>\n                Confirmer le nouveau mot de passe\n              </label>\n              <input\n                type=\"password\"\n                value={confirmPassword}\n                onChange={(e) => setConfirmPassword(e.target.value)}\n                required\n                style={{\n                  width: '100%',\n                  padding: '8px 12px',\n                  borderRadius: '4px',\n                  border: '1px solid #D1D5DB',\n                  fontSize: '14px',\n                  boxSizing: 'border-box'\n                }}\n              />\n            </div>\n\n            <button\n              type=\"submit\"\n              disabled={isLoading}\n              style={{\n                width: '100%',\n                padding: '8px 16px',\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\n                color: 'white',\n                border: 'none',\n                borderRadius: '4px',\n                cursor: isLoading ? 'not-allowed' : 'pointer',\n                fontSize: '14px',\n                fontWeight: '500',\n                boxSizing: 'border-box'\n              }}\n            >\n              {isLoading ? 'Mise à jour...' : 'Changer le mot de passe'}\n            </button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default ChangePasswordModal;","// src/components/DashboardMedecin.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getUser } from '../services/userService';\nimport { getDesiderataByUser } from '../services/planningService';\nimport { logoutUser } from '../services/authService';\nimport { Calendar, ClipboardList, LogOut, Key, Menu, X } from 'lucide-react';\nimport ChangePasswordModal from './ChangePasswordModal';\n\nfunction DashboardMedecin() {\n  const [user, setUser] = useState(null);\n  const [desiderata, setDesiderata] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showChangePassword, setShowChangePassword] = useState(false);\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\n      if (authUser) {\n        try {\n          const userData = await getUser(authUser.uid);\n          if (userData && userData.role === 'medecin') {\n            setUser(userData);\n            try {\n              const userDesiderata = await getDesiderataByUser(userData.id);\n              setDesiderata(userDesiderata);\n            } catch (error) {\n              console.error('Erreur lors de la récupération des desiderata:', error);\n            }\n          } else {\n            setError('Utilisateur non autorisé');\n            history.push('/');\n          }\n        } catch (error) {\n          console.error('Erreur:', error);\n          setError('Erreur lors de la récupération des données');\n        }\n      } else {\n        history.push('/');\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [history]);\n\n  const handleLogout = async () => {\n    try {\n      await logoutUser();\n      history.push('/');\n    } catch (error) {\n      console.error(\"Erreur lors de la déconnexion:\", error);\n      setError('Erreur lors de la déconnexion');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Chargement...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Erreur: {error}\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n      {/* Menu fixe en haut */}\n      <nav style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n        borderBottom: '1px solid #e5e7eb',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        zIndex: 40\n      }}>\n        <div style={{\n          maxWidth: '1280px',\n          margin: '0 auto',\n          padding: '1rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          {/* Logo et titre */}\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            color: '#2563eb',\n            fontWeight: 'bold',\n            fontSize: '1.25rem'\n          }}>\n            <Calendar size={24} />\n            <span>Planning APUM</span>\n          </div>\n\n          {/* Navigation principale - Desktop */}\n          <div style={{\n            display: 'none',\n            gap: '1rem',\n            '@media (min-width: 768px)': {\n              display: 'flex'\n            }\n          }}>\n            <button\n              onClick={() => history.push('/formulaire-desirata')}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#4b5563',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <ClipboardList size={18} />\n              Saisir desiderata\n            </button>\n            <button\n              onClick={() => history.push('/planning-visualisation')}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#4b5563',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <Calendar size={18} />\n              Voir planning\n            </button>\n            <button\n              onClick={() => setShowChangePassword(true)}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#4b5563',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <Key size={18} />\n              Mot de passe\n            </button>\n            <button\n              onClick={handleLogout}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#dc2626',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <LogOut size={18} />\n              Déconnexion\n            </button>\n          </div>\n\n          {/* Bouton menu mobile */}\n          <button\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\n            style={{\n              display: 'flex',\n              padding: '0.5rem',\n              color: '#4b5563',\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer',\n              '@media (min-width: 768px)': {\n                display: 'none'\n              }\n            }}\n          >\n            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\n          </button>\n        </div>\n\n        {/* Menu mobile */}\n        <div style={{\n          display: isMenuOpen ? 'block' : 'none',\n          backgroundColor: 'white',\n          borderTop: '1px solid #e5e7eb',\n          '@media (min-width: 768px)': {\n            display: 'none'\n          }\n        }}>\n          <div style={{\n            display: 'flex',\n            flexDirection: 'column',\n            padding: '0.5rem'\n          }}>\n            <button\n              onClick={() => {\n                history.push('/formulaire-desirata');\n                setIsMenuOpen(false);\n              }}\n              style={{\n                padding: '1rem',\n                color: '#4b5563',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                width: '100%',\n                justifyContent: 'flex-start'\n              }}\n            >\n              <ClipboardList size={18} />\n              Saisir desiderata\n            </button>\n            <button\n              onClick={() => {\n                history.push('/planning-visualisation');\n                setIsMenuOpen(false);\n              }}\n              style={{\n                padding: '1rem',\n                color: '#4b5563',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                width: '100%',\n                justifyContent: 'flex-start'\n              }}\n            >\n              <Calendar size={18} />\n              Voir planning\n            </button>\n            <button\n              onClick={() => {\n                setShowChangePassword(true);\n                setIsMenuOpen(false);\n              }}\n              style={{\n                padding: '1rem',\n                color: '#4b5563',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                width: '100%',\n                justifyContent: 'flex-start'\n              }}\n            >\n              <Key size={18} />\n              Mot de passe\n            </button>\n            <button\n              onClick={() => {\n                handleLogout();\n                setIsMenuOpen(false);\n              }}\n              style={{\n                padding: '1rem',\n                color: '#dc2626',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                width: '100%',\n                justifyContent: 'flex-start'\n              }}\n            >\n              <LogOut size={18} />\n              Déconnexion\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Contenu principal */}\n      <main style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '6rem 1rem 2rem',\n      }}>\n        {/* Carte de bienvenue */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        }}>\n          <h1 style={{\n            fontSize: '1.875rem',\n            fontWeight: 'bold',\n            color: '#1f2937',\n            marginBottom: '0.5rem'\n          }}>\n            Bienvenue, Dr. {user?.nom}\n          </h1>\n          <p style={{ color: '#6b7280' }}>\n            Gérez vos gardes et consultez le planning depuis votre tableau de bord\n          </p>\n        </div>\n\n        {/* Carte des derniers desiderata */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          maxWidth: '800px',\n          margin: '0 auto'\n        }}>\n          <h2 style={{\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n            color: '#1f2937',\n            marginBottom: '1rem'\n          }}>\n            Derniers desiderata\n          </h2>\n          {desiderata.length > 0 ? (\n            <ul style={{\n              display: 'flex',\n              flexDirection: 'column',\n              gap: '0.5rem'\n            }}>\n              {desiderata.map((d, index) => (\n                <li key={index} style={{\n                  padding: '0.75rem',\n                  backgroundColor: '#f9fafb',\n                  borderRadius: '0.375rem',\n                  fontSize: '0.875rem'\n                }}>\n                  Pour la période du {new Date(d.startDate).toLocaleDateString()} au {new Date(d.endDate).toLocaleDateString()}\n                </li>\n              ))}\n            </ul>\n          ) : (\n            <p style={{ color: '#6b7280' }}>Aucun desiderata saisi</p>\n          )}\n        </div>\n      </main>\n\n      {/* Modal de changement de mot de passe */}\n      {showChangePassword && (\n        <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\n      )}\n    </div>\n  );\n}\n\nexport default DashboardMedecin;","// src/components/DashboardAdmin.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getUser, getMedecins } from '../services/userService';\nimport { logoutUser } from '../services/authService';\nimport { getPeriodeSaisie, getPublishedPlanning } from '../services/planningService';\nimport { \n  Users, \n  Calendar, \n  Clock, \n  LogOut, \n  Key,\n  ClipboardList,\n  Settings,\n  ChevronRight\n} from 'lucide-react';\nimport ChangePasswordModal from './ChangePasswordModal';\n\nfunction DashboardAdmin() {\n  const [user, setUser] = useState(null);\n  const [medecins, setMedecins] = useState([]);\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\n  const [planning, setPlanning] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [showChangePassword, setShowChangePassword] = useState(false);\n  const history = useHistory();\n\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const authUser = auth.currentUser;\n        if (!authUser) {\n          history.push('/');\n          return;\n        }\n\n        const userData = await getUser(authUser.uid);\n        if (!userData || userData.role !== 'admin') {\n          setError('Utilisateur non autorisé');\n          history.push('/');\n          return;\n        }\n\n        setUser(userData);\n\n        // Récupération des données pour les statistiques\n        const medecinsList = await getMedecins();\n        setMedecins(medecinsList);\n\n        const periode = await getPeriodeSaisie();\n        setPeriodeSaisie(periode);\n\n        const publishedPlan = await getPublishedPlanning();\n        setPlanning(publishedPlan);\n\n      } catch (error) {\n        console.error('Erreur:', error);\n        setError('Erreur lors de la récupération des données');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [history]);\n\n  const handleLogout = async () => {\n    try {\n      await logoutUser();\n      history.push('/');\n    } catch (error) {\n      console.error(\"Erreur lors de la déconnexion:\", error);\n      setError('Erreur lors de la déconnexion');\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Chargement...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6',\n        padding: '1rem'\n      }}>\n        <div style={{\n          backgroundColor: 'white',\n          padding: '2rem',\n          borderRadius: '0.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          maxWidth: '500px',\n          width: '100%',\n          textAlign: 'center'\n        }}>\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n      {/* Menu fixe en haut */}\n      <nav style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n        borderBottom: '1px solid #e5e7eb',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        zIndex: 40\n      }}>\n        <div style={{\n          maxWidth: '1280px',\n          margin: '0 auto',\n          padding: '1rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            color: '#2563EB',\n            fontWeight: 'bold',\n            fontSize: '1.25rem'\n          }}>\n            <Settings size={24} />\n            <span>Administration APUM</span>\n          </div>\n\n          {/* Actions utilisateur */}\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          }}>\n            <button\n              onClick={() => setShowChangePassword(true)}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#4b5563',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <Key size={18} />\n              Mot de passe\n            </button>\n            <button\n              onClick={handleLogout}\n              style={{\n                padding: '0.5rem 1rem',\n                color: '#dc2626',\n                borderRadius: '0.375rem',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <LogOut size={18} />\n              Déconnexion\n            </button>\n          </div>\n        </div>\n      </nav>\n\n      {/* Contenu principal */}\n      <main style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '6rem 1rem 2rem',\n      }}>\n        {/* Carte de bienvenue */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        }}>\n          <h1 style={{\n            fontSize: '1.875rem',\n            fontWeight: 'bold',\n            color: '#1f2937',\n            marginBottom: '0.5rem'\n          }}>\n            Bienvenue, {user?.prenom} {user?.nom}\n          </h1>\n          <p style={{ color: '#6b7280' }}>\n            Gérez les utilisateurs, le planning et les périodes de saisie depuis votre tableau de bord\n          </p>\n        </div>\n\n        {/* Actions principales */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          marginBottom: '2rem'\n        }}>\n          <h2 style={{\n            fontSize: '1.25rem',\n            fontWeight: '600',\n            color: '#1f2937',\n            marginBottom: '1rem'\n          }}>\n            Actions principales\n          </h2>\n          <div style={{\n            display: 'grid',\n            gap: '1rem',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))'\n          }}>\n            {/* Gestion des utilisateurs */}\n            <button\n              onClick={() => history.push('/gestion-utilisateurs')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                padding: '1rem',\n                backgroundColor: '#EBF5FF',\n                border: '1px solid #2563EB',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n                textAlign: 'left'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.backgroundColor = '#DBEAFE';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.backgroundColor = '#EBF5FF';\n              }}\n            >\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '1rem'\n              }}>\n                <div style={{ color: '#2563EB' }}>\n                  <Users size={24} />\n                </div>\n                <div>\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer les utilisateurs</div>\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Ajouter ou modifier des utilisateurs</div>\n                </div>\n              </div>\n              <ChevronRight size={20} color=\"#2563EB\" />\n            </button>\n\n            {/* Gestion du planning */}\n            <button\n              onClick={() => history.push('/gestion-planning-admin')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                padding: '1rem',\n                backgroundColor: '#F3E8FF',\n                border: '1px solid #9333EA',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n                textAlign: 'left'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.backgroundColor = '#EDE9FE';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.backgroundColor = '#F3E8FF';\n              }}\n            >\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '1rem'\n              }}>\n                <div style={{ color: '#9333EA' }}>\n                  <Calendar size={24} />\n                </div>\n                <div>\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer le planning</div>\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Générer et modifier le planning</div>\n                </div>\n              </div>\n              <ChevronRight size={20} color=\"#9333EA\" />\n            </button>\n\n            {/* Gestion de la période de saisie */}\n            <button\n              onClick={() => history.push('/gestion-periode-saisie')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'space-between',\n                padding: '1rem',\n                backgroundColor: '#ECFDF5',\n                border: '1px solid #059669',\n                borderRadius: '0.5rem',\n                cursor: 'pointer',\n                transition: 'all 0.2s',\n                textAlign: 'left'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.backgroundColor = '#D1FAE5';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.backgroundColor = '#ECFDF5';\n              }}\n            >\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '1rem'\n              }}>\n                <div style={{ color: '#059669' }}>\n                  <ClipboardList size={24} />\n                </div>\n                <div>\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Période de saisie</div>\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Définir la période de saisie des desiderata</div>\n                </div>\n              </div>\n              <ChevronRight size={20} color=\"#059669\" />\n            </button>\n          </div>\n        </div>\n\n        {/* Cartes de statistiques */}\n        <div style={{\n          display: 'grid',\n          gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\n          gap: '1rem'\n        }}>\n          {/* Nombre de médecins */}\n          <div style={{\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            padding: '1.5rem',\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n          }}>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.75rem',\n              marginBottom: '1rem'\n            }}>\n              <div style={{\n                backgroundColor: '#EBF5FF',\n                borderRadius: '0.5rem',\n                padding: '0.75rem',\n                color: '#2563EB'\n              }}>\n                <Users size={24} />\n              </div>\n              <h2 style={{\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#1f2937'\n              }}>\n                Médecins\n              </h2>\n            </div>\n            <p style={{\n              fontSize: '2rem',\n              fontWeight: 'bold',\n              color: '#2563EB'\n            }}>\n              {medecins.length}\n            </p>\n          </div>\n\n          {/* Période de saisie */}\n          <div style={{\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            padding: '1.5rem',\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n          }}>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.75rem',\n              marginBottom: '1rem'\n            }}>\n              <div style={{\n                backgroundColor: '#F0FDF4',\n                borderRadius: '0.5rem',\n                padding: '0.75rem',\n                color: '#16A34A'\n              }}>\n                <Clock size={24} />\n              </div>\n              <h2 style={{\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#1f2937'\n              }}>\n                Période de saisie\n              </h2>\n            </div>\n            <p style={{\n              fontSize: '0.875rem',\n              color: periodeSaisie ? '#16A34A' : '#DC2626',\n              fontWeight: '500'\n            }}>\n              {periodeSaisie ? (\n                `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\n              ) : (\n                'Aucune période définie'\n              )}\n            </p>\n          </div>\n\n          {/* État du planning */}\n          <div style={{\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            padding: '1.5rem',\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n         }}>\n           <div style={{\n             display: 'flex',\n             alignItems: 'center',\n             gap: '0.75rem',\n             marginBottom: '1rem'\n           }}>\n             <div style={{\n               backgroundColor: '#FFF7ED',\n               borderRadius: '0.5rem',\n               padding: '0.75rem',\n               color: '#EA580C'\n             }}>\n               <Calendar size={24} />\n             </div>\n             <h2 style={{\n               fontSize: '1.125rem',\n               fontWeight: '600',\n               color: '#1f2937'\n             }}>\n               Planning\n             </h2>\n           </div>\n           <p style={{\n             fontSize: '0.875rem',\n             color: planning ? '#16A34A' : '#DC2626',\n             fontWeight: '500'\n           }}>\n             {planning ? 'Planning publié' : 'Aucun planning publié'}\n           </p>\n         </div>\n       </div>\n     </main>\n\n     {/* Modal de changement de mot de passe */}\n     {showChangePassword && (\n       <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\n     )}\n   </div>\n );\n}\n\nexport default DashboardAdmin;","// src/components/QuickFill.js\nimport React, { useState } from 'react';\nimport { Upload, ChevronDown, ChevronUp, Calendar } from 'lucide-react';\n\nfunction QuickFill({ creneaux, onApply, periodeSaisie }) {\n  const [selectedCreneaux, setSelectedCreneaux] = useState({});\n  const [selectedJours, setSelectedJours] = useState({});\n  const [selectedDispo, setSelectedDispo] = useState('');\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [isExpanded, setIsExpanded] = useState(false);\n\n  const jours = [\n    { id: '1', label: 'Lundi' },\n    { id: '2', label: 'Mardi' },\n    { id: '3', label: 'Mercredi' },\n    { id: '4', label: 'Jeudi' },\n    { id: '5', label: 'Vendredi' },\n    { id: '6', label: 'Samedi' },\n    { id: '0', label: 'Dimanche' }\n  ];\n\n  const handleSelectFullPeriod = () => {\n    if (periodeSaisie) {\n      setStartDate(periodeSaisie.startDate.split('T')[0]);\n      setEndDate(periodeSaisie.endDate.split('T')[0]);\n    }\n  };\n\n  const toggleAllCreneaux = () => {\n    const allSelected = creneaux.every(creneau => selectedCreneaux[creneau.id]);\n    const newSelectedCreneaux = {};\n    creneaux.forEach(creneau => {\n      newSelectedCreneaux[creneau.id] = !allSelected;\n    });\n    setSelectedCreneaux(newSelectedCreneaux);\n  };\n\n  const toggleAllJours = () => {\n    const allSelected = jours.every(jour => selectedJours[jour.id]);\n    const newSelectedJours = {};\n    jours.forEach(jour => {\n      newSelectedJours[jour.id] = !allSelected;\n    });\n    setSelectedJours(newSelectedJours);\n  };\n\n  const handleApply = () => {\n    if (!selectedDispo) {\n      alert('Veuillez sélectionner une disponibilité');\n      return;\n    }\n\n    if (!startDate || !endDate) {\n      alert('Veuillez sélectionner une période');\n      return;\n    }\n\n    const selectedCreneauxArray = Object.entries(selectedCreneaux)\n      .filter(([_, isSelected]) => isSelected)\n      .map(([creneauId]) => creneauId);\n\n    const selectedJoursArray = Object.entries(selectedJours)\n      .filter(([_, isSelected]) => isSelected)\n      .map(([jourId]) => jourId);\n\n    if (selectedCreneauxArray.length === 0) {\n      alert('Veuillez sélectionner au moins un créneau');\n      return;\n    }\n\n    if (selectedJoursArray.length === 0) {\n      alert('Veuillez sélectionner au moins un jour');\n      return;\n    }\n\n    onApply({\n      creneaux: selectedCreneauxArray,\n      jours: selectedJoursArray,\n      disponibilite: selectedDispo,\n      startDate,\n      endDate\n    });\n  };\n\n  return (\n    <div style={{\n      backgroundColor: 'white',\n      borderRadius: '8px',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      width: '100%'\n    }}>\n      {/* En-tête avec bouton pour replier/déplier */}\n      <button\n        onClick={() => setIsExpanded(!isExpanded)}\n        style={{\n          width: '100%',\n          padding: '1rem 1.5rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          border: 'none',\n          background: 'none',\n          cursor: 'pointer',\n          borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\n          transition: 'background-color 0.2s',\n          borderRadius: '8px'\n        }}\n      >\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n          <h3 style={{\n            fontSize: '1.125rem',\n            fontWeight: '600',\n            color: '#1F2937',\n            margin: 0\n          }}>\n            Remplissage rapide\n          </h3>\n        </div>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          color: '#6B7280',\n          fontSize: '0.875rem',\n          gap: '0.5rem'\n        }}>\n          {isExpanded ? 'Replier' : 'Déplier'}\n          {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n        </div>\n      </button>\n\n      {isExpanded && (\n        <div style={{ padding: '1.5rem' }}>\n          <div style={{ display: 'grid', gap: '1.5rem' }}>\n            {/* Sélection de la période */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Période de remplissage\n              </label>\n              <div style={{ \n                display: 'flex', \n                flexDirection: 'column',\n                gap: '1rem'\n              }}>\n                <div style={{\n                  display: 'flex',\n                  flexWrap: 'wrap',\n                  gap: '1rem'\n                }}>\n                  <div style={{ minWidth: '140px', flex: 1 }}>\n                    <label style={{\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      color: '#6B7280',\n                      marginBottom: '0.25rem'\n                    }}>\n                      Du :\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={startDate}\n                      onChange={(e) => setStartDate(e.target.value)}\n                      style={{\n                        padding: '0.5rem',\n                        border: '1px solid #D1D5DB',\n                        borderRadius: '0.375rem',\n                        width: '100%'\n                      }}\n                    />\n                  </div>\n                  <div style={{ minWidth: '140px', flex: 1 }}>\n                    <label style={{\n                      display: 'block',\n                      fontSize: '0.875rem',\n                      color: '#6B7280',\n                      marginBottom: '0.25rem'\n                    }}>\n                      Au :\n                    </label>\n                    <input\n                      type=\"date\"\n                      value={endDate}\n                      onChange={(e) => setEndDate(e.target.value)}\n                      style={{\n                        padding: '0.5rem',\n                        border: '1px solid #D1D5DB',\n                        borderRadius: '0.375rem',\n                        width: '100%'\n                      }}\n                    />\n                  </div>\n                </div>\n                <button\n                  onClick={handleSelectFullPeriod}\n                  style={{\n                    padding: '0.75rem 1rem',\n                    backgroundColor: '#EBF5FF',\n                    border: '1px solid #2563EB',\n                    borderRadius: '0.375rem',\n                    color: '#2563EB',\n                    fontSize: '0.875rem',\n                    cursor: 'pointer',\n                    width: '100%',\n                    display: 'flex',\n                    alignItems: 'center',\n                    justifyContent: 'center',\n                    gap: '0.5rem',\n                    fontWeight: '500',\n                    transition: 'all 0.2s'\n                  }}\n                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\n                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\n                >\n                  <Calendar size={16} />\n                  Toute la période\n                </button>\n              </div>\n            </div>\n\n            {/* Sélection des créneaux */}\n            <div>\n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '0.5rem'\n              }}>\n                <label style={{\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151'\n                }}>\n                  Créneaux\n                </label>\n                <button\n                  onClick={toggleAllCreneaux}\n                  style={{\n                    fontSize: '0.75rem',\n                    color: '#2563EB',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    padding: '0.25rem 0.5rem'\n                  }}\n                >\n                  {creneaux.every(creneau => selectedCreneaux[creneau.id]) \n                    ? 'Tout désélectionner' \n                    : 'Tout sélectionner'}\n                </button>\n              </div>\n              <div style={{\n                display: 'grid',\n                gap: '0.5rem',\n                border: '1px solid #E5E7EB',\n                padding: '0.5rem',\n                borderRadius: '0.375rem'\n              }}>\n                {creneaux.map(creneau => (\n                  <label\n                    key={creneau.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      padding: '0.5rem',\n                      cursor: 'pointer',\n                      borderRadius: '0.25rem',\n                      transition: 'background-color 0.2s'\n                    }}\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedCreneaux[creneau.id] || false}\n                      onChange={() => {\n                        setSelectedCreneaux(prev => ({\n                          ...prev,\n                          [creneau.id]: !prev[creneau.id]\n                        }));\n                      }}\n                      style={{\n                        width: '1rem',\n                        height: '1rem',\n                        borderRadius: '0.25rem'\n                      }}\n                    />\n                    <div>\n                      <div>{creneau.label}</div>\n                      <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>\n                        {creneau.hours}\n                      </div>\n                    </div>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Sélection des jours */}\n            <div>\n              <div style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                alignItems: 'center',\n                marginBottom: '0.5rem'\n              }}>\n                <label style={{\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151'\n                }}>\n                  Jours de la semaine\n                </label>\n                <button\n                  onClick={toggleAllJours}\n                  style={{\n                    fontSize: '0.75rem',\n                    color: '#2563EB',\n                    background: 'none',\n                    border: 'none',\n                    cursor: 'pointer',\n                    padding: '0.25rem 0.5rem'\n                  }}\n                >\n                  {jours.every(jour => selectedJours[jour.id]) \n                    ? 'Tout désélectionner' \n                    : 'Tout sélectionner'}\n                </button>\n              </div>\n              <div style={{\n                display: 'grid',\n                gridTemplateColumns: 'repeat(auto-fill, minmax(140px, 1fr))',\n                gap: '0.5rem',\n                border: '1px solid #E5E7EB',\n                padding: '0.5rem',\n                borderRadius: '0.375rem'\n              }}>\n                {jours.map(jour => (\n                  <label\n                    key={jour.id}\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center',\n                      gap: '0.5rem',\n                      padding: '0.5rem',\n                      cursor: 'pointer',\n                      borderRadius: '0.25rem',\n                      transition: 'background-color 0.2s'\n                    }}\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\n                  >\n                    <input\n                      type=\"checkbox\"\n                      checked={selectedJours[jour.id] || false}\n                      onChange={() => {\n                        setSelectedJours(prev => ({\n                          ...prev,\n                          [jour.id]: !prev[jour.id]\n                        }));\n                      }}\n                      style={{\n                        width: '1rem',\n                        height: '1rem',\n                        borderRadius: '0.25rem'\n                      }}\n                    />\n                    <span>{jour.label}</span>\n                  </label>\n                ))}\n              </div>\n            </div>\n\n            {/* Sélection de la disponibilité */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Disponibilité\n              </label>\n              <select\n                value={selectedDispo}\n                onChange={(e) => setSelectedDispo(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              >\n                <option value=\"\">Sélectionnez une disponibilité</option>\n                <option value=\"Oui\">Oui</option>\n                <option value=\"Possible\">Possible</option>\n                <option value=\"Non\">Non</option>\n              </select>\n            </div>\n\n            {/* Bouton d'application */}\n            <button\n              onClick={handleApply}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                gap: '0.5rem',\n                width: '100%',\n                padding: '0.75rem',\n                backgroundColor: '#2563EB',\n                color: 'white',\n                border: 'none',\n                borderRadius: '0.375rem',\n                fontWeight: '500',\n                cursor: 'pointer'\n              }}\n            >\n              <Upload size={18} />\n              Appliquer\n            </button>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default QuickFill;","// src/components/WeeklyPattern.js\nimport React, { useState } from 'react';\nimport { Calendar, Copy, ChevronDown, ChevronUp } from 'lucide-react';\n\nfunction WeeklyPattern({ creneaux, onApplyPattern, periodeSaisie }) {\n const [startDate, setStartDate] = useState('');\n const [endDate, setEndDate] = useState('');\n const [pattern, setPattern] = useState({});\n const [isExpanded, setIsExpanded] = useState(false);\n \n const jours = [\n   { id: '1', label: 'Lundi' },\n   { id: '2', label: 'Mardi' },\n   { id: '3', label: 'Mercredi' },\n   { id: '4', label: 'Jeudi' },\n   { id: '5', label: 'Vendredi' },\n   { id: '6', label: 'Samedi' },\n   { id: '0', label: 'Dimanche' }\n ];\n\n const handlePatternChange = (jour, creneau, value) => {\n   setPattern(prev => ({\n     ...prev,\n     [jour]: {\n       ...(prev[jour] || {}),\n       [creneau]: value\n     }\n   }));\n };\n\n const handleSelectFullPeriod = () => {\n   if (periodeSaisie) {\n     setStartDate(periodeSaisie.startDate.split('T')[0]);\n     setEndDate(periodeSaisie.endDate.split('T')[0]);\n   }\n };\n\n const handleApplyPattern = () => {\n   if (!startDate || !endDate) {\n     alert('Veuillez sélectionner une période');\n     return;\n   }\n\n   if (Object.keys(pattern).length === 0) {\n     alert('Veuillez définir au moins une préférence dans le pattern');\n     return;\n   }\n\n   onApplyPattern(pattern, startDate, endDate);\n };\n\n return (\n   <div style={{\n     backgroundColor: 'white',\n     borderRadius: '8px',\n     boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n     width: '100%'\n   }}>\n     {/* En-tête avec bouton pour replier/déplier */}\n     <button\n       onClick={() => setIsExpanded(!isExpanded)}\n       style={{\n         width: '100%',\n         padding: '1rem 1.5rem',\n         display: 'flex',\n         justifyContent: 'space-between',\n         alignItems: 'center',\n         border: 'none',\n         background: 'none',\n         cursor: 'pointer',\n         borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\n         transition: 'background-color 0.2s',\n         borderRadius: '8px'\n       }}\n     >\n       <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\n         <h3 style={{\n           fontSize: '1.125rem',\n           fontWeight: '600',\n           color: '#1F2937',\n           margin: 0\n         }}>\n           Pattern hebdomadaire\n         </h3>\n       </div>\n       <div style={{\n         display: 'flex',\n         alignItems: 'center',\n         color: '#6B7280',\n         fontSize: '0.875rem',\n         gap: '0.5rem'\n       }}>\n         {isExpanded ? 'Replier' : 'Déplier'}\n         {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n       </div>\n     </button>\n\n     {isExpanded && (\n       <div style={{ padding: '1.5rem' }}>\n         <div style={{ marginBottom: '1.5rem' }}>\n           <p style={{\n             fontSize: '0.875rem',\n             color: '#6B7280',\n             marginBottom: '1rem'\n           }}>\n             Définissez votre semaine type ci-dessous. Ce pattern sera appliqué automatiquement sur la période sélectionnée.\n           </p>\n\n           {/* Table du pattern */}\n           <div style={{ \n             overflowX: 'auto',\n             marginBottom: '1.5rem',\n             maxWidth: '100%'\n           }}>\n             <table style={{\n               width: '100%',\n               borderCollapse: 'collapse',\n               fontSize: '0.875rem',\n               minWidth: '600px'\n             }}>\n               <thead>\n                 <tr>\n                   <th style={{\n                     padding: '0.75rem',\n                     backgroundColor: '#F3F4F6',\n                     borderBottom: '1px solid #E5E7EB',\n                     textAlign: 'left',\n                     fontWeight: '600',\n                     minWidth: '100px'\n                   }}>\n                     Jour\n                   </th>\n                   {creneaux.map(creneau => (\n                     <th key={creneau.id} style={{\n                       padding: '0.75rem',\n                       backgroundColor: '#F3F4F6',\n                       borderBottom: '1px solid #E5E7EB',\n                       textAlign: 'left',\n                       fontWeight: '600'\n                     }}>\n                       <div>{creneau.label}</div>\n                       <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>{creneau.hours}</div>\n                     </th>\n                   ))}\n                 </tr>\n               </thead>\n               <tbody>\n                 {jours.map(jour => (\n                   <tr key={jour.id}>\n                     <td style={{\n                       padding: '0.75rem',\n                       borderBottom: '1px solid #E5E7EB',\n                       fontWeight: '500'\n                     }}>\n                       {jour.label}\n                     </td>\n                     {creneaux.map(creneau => (\n                       <td key={creneau.id} style={{\n                         padding: '0.75rem',\n                         borderBottom: '1px solid #E5E7EB'\n                       }}>\n                         {(!creneau.samediOnly || jour.id === '6') && (\n                           <select\n                             value={pattern[jour.id]?.[creneau.id] || ''}\n                             onChange={(e) => handlePatternChange(jour.id, creneau.id, e.target.value)}\n                             style={{\n                               width: '100%',\n                               padding: '0.5rem',\n                               border: '1px solid #D1D5DB',\n                               borderRadius: '0.375rem',\n                               backgroundColor: 'white'\n                             }}\n                           >\n                             <option value=\"\">-</option>\n                             <option value=\"Oui\">Oui</option>\n                             <option value=\"Possible\">Possible</option>\n                             <option value=\"Non\">Non</option>\n                           </select>\n                         )}\n                       </td>\n                     ))}\n                   </tr>\n                 ))}\n               </tbody>\n             </table>\n           </div>\n\n           {/* Sélection de la période */}\n           <div style={{\n             display: 'flex',\n             flexDirection: 'column',\n             gap: '1rem',\n             marginBottom: '1.5rem'\n           }}>\n             <div style={{\n               display: 'flex',\n               flexWrap: 'wrap',\n               gap: '1rem',\n               marginBottom: '1rem'\n             }}>\n               <div style={{ minWidth: '140px', flex: 1 }}>\n                 <label style={{\n                   display: 'block',\n                   fontSize: '0.875rem',\n                   fontWeight: '500',\n                   color: '#374151',\n                   marginBottom: '0.5rem'\n                 }}>\n                   Du :\n                 </label>\n                 <input\n                   type=\"date\"\n                   value={startDate}\n                   onChange={(e) => setStartDate(e.target.value)}\n                   style={{\n                     padding: '0.5rem',\n                     border: '1px solid #D1D5DB',\n                     borderRadius: '0.375rem',\n                     width: '100%'\n                   }}\n                 />\n               </div>\n               <div style={{ minWidth: '140px', flex: 1 }}>\n                 <label style={{\n                   display: 'block',\n                   fontSize: '0.875rem',\n                   fontWeight: '500',\n                   color: '#374151',\n                   marginBottom: '0.5rem'\n                 }}>\n                   Au :\n                 </label>\n                 <input\n                   type=\"date\"\n                   value={endDate}\n                   onChange={(e) => setEndDate(e.target.value)}\n                   style={{\n                     padding: '0.5rem',\n                     border: '1px solid #D1D5DB',\n                     borderRadius: '0.375rem',\n                     width: '100%'\n                   }}\n                 />\n               </div>\n             </div>\n             \n             <button\n               onClick={handleSelectFullPeriod}\n               style={{\n                 padding: '0.75rem 1rem',\n                 backgroundColor: '#EBF5FF',\n                 border: '1px solid #2563EB',\n                 borderRadius: '0.375rem',\n                 color: '#2563EB',\n                 fontSize: '0.875rem',\n                 cursor: 'pointer',\n                 width: '100%',\n                 display: 'flex',\n                 alignItems: 'center',\n                 justifyContent: 'center',\n                 gap: '0.5rem',\n                 fontWeight: '500',\n                 transition: 'all 0.2s'\n               }}\n               onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\n               onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\n             >\n               <Calendar size={16} />\n               Toute la période\n             </button>\n           </div>\n\n           {/* Bouton d'application */}\n           <button\n             onClick={handleApplyPattern}\n             style={{\n               display: 'flex',\n               alignItems: 'center',\n               justifyContent: 'center',\n               gap: '0.5rem',\n               width: '100%',\n               padding: '0.75rem',\n               backgroundColor: '#2563EB',\n               color: 'white',\n               border: 'none',\n               borderRadius: '0.375rem',\n               fontWeight: '500',\n               cursor: 'pointer'\n             }}\n           >\n             <Copy size={18} />\n             Appliquer le pattern\n           </button>\n         </div>\n       </div>\n     )}\n   </div>\n );\n}\n\nexport default WeeklyPattern;","// src/components/FormulaireDesirata.js\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getUser } from '../services/userService';\nimport { \n  addDesiderata, \n  getPeriodeSaisie, \n  getDesiderataByUser, \n  updateDesiderata \n} from '../services/planningService';\nimport { \n  Calendar,\n  ArrowLeft,\n  Save\n} from 'lucide-react';\nimport QuickFill from './QuickFill';\nimport WeeklyPattern from './WeeklyPattern';\n\nconst creneaux = [\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2 },\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3 },\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true },\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3 },\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1 },\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3 }\n];\n\nconst options = ['Oui', 'Possible', 'Non'];\n\nconst joursFeries = [\n  '2024-01-01', '2024-04-01', '2024-05-01', '2024-05-08', '2024-05-09',\n  '2024-05-20', '2024-07-14', '2024-08-15', '2024-11-01', '2024-11-11', '2024-12-25'\n];\n\nfunction FormulaireDesirata() {\n  // États\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\n  const [desiderata, setDesiderata] = useState({});\n  const [nombreGardesSouhaitees, setNombreGardesSouhaitees] = useState(0);\n  const [nombreGardesMaxParSemaine, setNombreGardesMaxParSemaine] = useState(3);\n  const [gardesGroupees, setGardesGroupees] = useState(false);\n  const [renfortsAssocies, setRenfortsAssocies] = useState(false);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [existingDesiderataId, setExistingDesiderataId] = useState(null);\n  \n  const history = useHistory();\n\n  // Génération des dates\n  const generateDates = useCallback(() => {\n    if (!periodeSaisie) return [];\n    const dates = [];\n    let currentDate = new Date(periodeSaisie.startDate);\n    const end = new Date(periodeSaisie.endDate);\n    while (currentDate <= end) {\n      dates.push(new Date(currentDate));\n      currentDate.setDate(currentDate.getDate() + 1);\n    }\n    return dates;\n  }, [periodeSaisie]);\n\n  // Effet pour charger les données initiales\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const authUser = auth.currentUser;\n        if (!authUser) {\n          history.push('/');\n          return;\n        }\n\n        const userData = await getUser(authUser.uid);\n        if (userData && userData.role === 'medecin') {\n          setUser(userData);\n          const periode = await getPeriodeSaisie();\n          if (periode) {\n            setPeriodeSaisie(periode);\n            const userDesiderata = await getDesiderataByUser(userData.id);\n            const relevantDesiderata = userDesiderata.find(d => \n              new Date(d.startDate) <= new Date(periode.endDate) && \n              new Date(d.endDate) >= new Date(periode.startDate)\n            );\n            \n            if (relevantDesiderata) {\n              setExistingDesiderataId(relevantDesiderata.id);\n              setDesiderata(relevantDesiderata.desiderata || {});\n              setNombreGardesSouhaitees(relevantDesiderata.nombreGardesSouhaitees || 0);\n              setNombreGardesMaxParSemaine(relevantDesiderata.nombreGardesMaxParSemaine || 3);\n              setGardesGroupees(relevantDesiderata.gardesGroupees || false);\n              setRenfortsAssocies(relevantDesiderata.renfortsAssocies || false);\n            }\n          } else {\n            setError('Aucune période de saisie n\\'a été définie par l\\'administrateur.');\n          }\n        } else {\n          setError('Utilisateur non autorisé');\n          history.push('/');\n        }\n      } catch (error) {\n        console.error('Erreur lors de la récupération des données:', error);\n        setError('Erreur lors de la récupération des données: ' + error.message);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [history]);\n\n  // Gestion des changements de desiderata\n  const handleDesiderataChange = (date, creneau, value) => {\n    setDesiderata(prev => ({\n      ...prev,\n      [date]: {\n        ...(prev[date] || {}),\n        [creneau]: value\n      }\n    }));\n  };\n\n  // Gestion du remplissage rapide\n  const handleQuickFill = ({ creneaux: selectedCreneaux, jours: selectedJours, disponibilite, startDate, endDate }) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n    \n    setDesiderata(prev => {\n      const newDesiderata = { ...prev };\n      const dates = generateDates().filter(date => \n        date >= start && \n        date <= end\n      );\n\n      dates.forEach(date => {\n        if (selectedJours.includes(date.getDay().toString())) {\n          const dateString = date.toISOString().split('T')[0];\n          if (!newDesiderata[dateString]) {\n            newDesiderata[dateString] = {};\n          }\n          selectedCreneaux.forEach(creneauId => {\n            if (creneauId !== 'RENFORT_1' || date.getDay() === 6) {\n              newDesiderata[dateString][creneauId] = disponibilite;\n            }\n          });\n        }\n      });\n\n      return newDesiderata;\n    });\n  };\n\n  // Gestion du pattern hebdomadaire\n  const handleApplyPattern = (pattern, startDate, endDate) => {\n    const start = new Date(startDate);\n    const end = new Date(endDate);\n\n    setDesiderata(prev => {\n      const newDesiderata = { ...prev };\n      let currentDate = new Date(start);\n\n      while (currentDate <= end) {\n        const dayOfWeek = currentDate.getDay().toString();\n        const dateString = currentDate.toISOString().split('T')[0];\n\n        if (pattern[dayOfWeek]) {\n          newDesiderata[dateString] = { ...pattern[dayOfWeek] };\n        }\n\n        currentDate.setDate(currentDate.getDate() + 1);\n      }\n\n      return newDesiderata;\n    });\n  };\n\n  // Soumission du formulaire\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    if (user) {\n      try {\n        if (!periodeSaisie || !periodeSaisie.startDate || !periodeSaisie.endDate) {\n          throw new Error('Période de saisie non définie');\n        }\n\n        const desiderataData = {\n          startDate: periodeSaisie.startDate,\n          endDate: periodeSaisie.endDate,\n          desiderata,\n          nombreGardesSouhaitees,\n          nombreGardesMaxParSemaine,\n          gardesGroupees,\n          renfortsAssocies\n        };\n\n        if (existingDesiderataId) {\n          await updateDesiderata(existingDesiderataId, desiderataData);\n          alert('Desiderata mis à jour avec succès!');\n        } else {\n          await addDesiderata(user.id, desiderataData);\n          alert('Desiderata soumis avec succès!');\n        }\n        history.push('/dashboard-medecin');\n      } catch (error) {\n        console.error(\"Erreur lors de la soumission des desiderata:\", error);\n        setError('Une erreur est survenue lors de la soumission des desiderata: ' + error.message);\n      }\n    }\n  };\n\n  // Fonctions utilitaires\n  const isWeekendOrHoliday = (date) => {\n    const day = date.getDay();\n    const formattedDate = date.toISOString().split('T')[0];\n    return day === 0 || day === 6 || joursFeries.includes(formattedDate);\n  };\n\n  const formatDate = (date) => {\n    const days = ['dim.', 'lun.', 'mar.', 'mer.', 'jeu.', 'ven.', 'sam.'];\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\n    \n    const dayOfWeek = days[date.getDay()];\n    const dayOfMonth = date.getDate().toString().padStart(2, '0');\n    const month = months[date.getMonth()];\n    \n    return `${dayOfWeek} ${dayOfMonth} ${month}`;\n  };\n\n  // États de chargement et d'erreur\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Chargement...\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6',\n        padding: '1rem'\n      }}>\n        <div style={{\n          backgroundColor: 'white',\n          padding: '2rem',\n          borderRadius: '0.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          maxWidth: '500px',\n          width: '100%',\n          textAlign: 'center'\n        }}>\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\n          <button\n            onClick={() => history.push('/dashboard-medecin')}\n            style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#2563EB',\n              color: 'white',\n              borderRadius: '0.375rem',\n              border: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            <ArrowLeft size={18} />\n            Retour au tableau de bord\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const dates = generateDates();\n\n  return (\n    <div style={{ \n      backgroundColor: '#f3f4f6', \n      minHeight: '100vh',\n      width: '100%',\n      maxWidth: '100%',\n      overflowX: 'hidden' // Empêche le scroll horizontal\n    }}>\n      {/* Menu fixe en haut */}\n      <nav style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n        borderBottom: '1px solid #e5e7eb',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        zIndex: 40,\n        width: '100%'\n      }}>\n        <div style={{\n          maxWidth: '1280px',\n          margin: '0 auto',\n          padding: '1rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          }}>\n            <button\n              onClick={() => history.push('/dashboard-medecin')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4B5563',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                padding: '0.5rem'\n              }}\n            >\n              <ArrowLeft size={20} />\n              Retour\n            </button>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              color: '#2563EB',\n              fontWeight: 'bold'\n            }}>\n              <Calendar size={24} />\n              <span>Saisie des desiderata</span>\n            </div>\n          </div>\n\n          <button\n            onClick={handleSubmit}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#2563EB',\n              color: 'white',\n              borderRadius: '0.375rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontWeight: '500'\n            }}\n          >\n            <Save size={18} />\n            Enregistrer\n          </button>\n        </div>\n      </nav>\n\n      {/* Contenu principal */}\n      <main style={{\n        margin: '0 auto',\n        paddingTop: '5rem',\n        width: '100%',\n        maxWidth: '1280px',\n        boxSizing: 'border-box'\n      }}>\n        {/* En-tête avec période */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        }}>\n          <h2 style={{\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n            color: '#1F2937',\n            marginBottom: '1rem'\n          }}>\n            Période de saisie : du {new Date(periodeSaisie.startDate).toLocaleDateString()} au {new Date(periodeSaisie.endDate).toLocaleDateString()}\n          </h2>\n\n          {/* Préférences générales */}\n          <div style={{\n            display: 'grid',\n            gap: '1.5rem',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\n          }}>\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Nombre de gardes souhaitées par mois\n              </label>\n              <input\n                type=\"number\"\n                value={nombreGardesSouhaitees}\n                onChange={(e) => setNombreGardesSouhaitees(parseInt(e.target.value))}\n                min=\"0\"\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              />\n            </div>\n\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Maximum de gardes par semaine\n              </label>\n              <input\n                type=\"number\"\n                value={nombreGardesMaxParSemaine}\n                onChange={(e) => setNombreGardesMaxParSemaine(parseInt(e.target.value))}\n                min=\"1\"\n                max=\"7\"\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  border: '1px solid #D1D5DB',\n                  borderRadius: '0.375rem',\n                  backgroundColor: 'white'\n                }}\n              />\n            </div>\n\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            }}>\n              <input\n                type=\"checkbox\"\n                id=\"gardesGroupees\"\n                checked={gardesGroupees}\n                onChange={(e) => setGardesGroupees(e.target.checked)}\n                style={{\n                  width: '1rem',\n                  height: '1rem',\n                  borderRadius: '0.25rem',\n                  borderColor: '#D1D5DB'\n                }}\n              />\n              <label\n                htmlFor=\"gardesGroupees\"\n                style={{\n                  fontSize: '0.875rem',\n                  color: '#374151'\n                }}\n              >\n                Gardes groupées dans un même week-end\n              </label>\n            </div>\n\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem'\n            }}>\n              <input\n                type=\"checkbox\"\n                id=\"renfortsAssocies\"\n                checked={renfortsAssocies}\n                onChange={(e) => setRenfortsAssocies(e.target.checked)}\n                style={{\n                  width: '1rem',\n                  height: '1rem',\n                  borderRadius: '0.25rem',\n                  borderColor: '#D1D5DB'\n                }}\n              />\n              <label\n                htmlFor=\"renfortsAssocies\"\n                style={{\n                  fontSize: '0.875rem',\n                  color: '#374151'\n                }}\n              >\n                Renforts associés à une garde\n              </label>\n            </div>\n          </div>\n        </div>\n\n        {/* Outils de remplissage */}\n        <div style={{\n          display: 'grid',\n          gap: '2rem',\n          marginBottom: '2rem',\n          gridTemplateColumns: '1fr', // Par défaut en une colonne sur mobile\n          padding: '0 1rem', // Padding sur les côtés\n          maxWidth: '100%', // S'assure que rien ne déborde\n          boxSizing: 'border-box', // Inclut le padding dans la largeur\n          margin: '0 auto 2rem', // Centre le contenu\n          '@media (min-width: 768px)': { // Sur les écrans plus larges\n            gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\n            padding: 0\n          }\n        }}>\n          {/* Section remplissage rapide */}\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\n            <QuickFill\n              creneaux={creneaux}\n              onApply={handleQuickFill}\n              periodeSaisie={periodeSaisie}\n            />\n          </div>\n\n          {/* Section pattern hebdomadaire */}\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\n            <WeeklyPattern\n              creneaux={creneaux}\n              onApplyPattern={handleApplyPattern}\n              periodeSaisie={periodeSaisie}\n            />\n          </div>\n        </div>\n\n{/* Tableau des desiderata */}\n<div style={{\n  backgroundColor: 'white',\n  borderRadius: '0.5rem',\n  padding: '1.5rem',\n  boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n  overflowX: 'auto'\n}}>\n  <table style={{\n    width: '100%',\n    borderCollapse: 'collapse',\n    fontSize: '0.875rem'\n  }}>\n    <thead>\n      <tr>\n        <th style={{\n          padding: '0.75rem',\n          backgroundColor: '#F3F4F6',\n          borderBottom: '1px solid #E5E7EB',\n          textAlign: 'left',\n          fontWeight: '600',\n          position: 'sticky',\n          left: 0,\n          backgroundColor: 'white',\n          zIndex: 10\n        }}>\n          Date\n        </th>\n        {creneaux.map(creneau => (\n          <th key={creneau.id} style={{\n            padding: '0.75rem',\n            backgroundColor: '#F3F4F6',\n            borderBottom: '1px solid #E5E7EB',\n            textAlign: 'left',\n            fontWeight: '600',\n            minWidth: '150px'\n          }}>\n            <div>{creneau.label}</div>\n            <div style={{ \n              fontSize: '0.75rem', \n              color: '#6B7280',\n              fontWeight: 'normal'\n            }}>\n              {creneau.hours}\n            </div>\n            <div style={{ \n              fontSize: '0.75rem', \n              color: '#6B7280',\n              fontWeight: 'normal'\n            }}>\n              {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\n            </div>\n          </th>\n        ))}\n      </tr>\n    </thead>\n    <tbody>\n      {dates.map(date => {\n        const isHighlighted = isWeekendOrHoliday(date);\n        const dateString = date.toISOString().split('T')[0];\n        return (\n          <tr key={dateString} style={{\n            backgroundColor: isHighlighted ? '#F3F4F6' : 'white'\n          }}>\n            <td style={{\n              padding: '0.75rem',\n              borderBottom: '1px solid #E5E7EB',\n              fontWeight: '500',\n              position: 'sticky',\n              left: 0,\n              backgroundColor: isHighlighted ? '#F3F4F6' : 'white',\n              zIndex: 10\n            }}>\n              {formatDate(date)}\n            </td>\n            {creneaux.map(creneau => (\n              <td key={`${dateString}-${creneau.id}`} style={{\n                padding: '0.75rem',\n                borderBottom: '1px solid #E5E7EB'\n              }}>\n                {(!creneau.samediOnly || date.getDay() === 6) && (\n                  <select\n                    value={desiderata[dateString]?.[creneau.id] || ''}\n                    onChange={(e) => handleDesiderataChange(dateString, creneau.id, e.target.value)}\n                    style={{\n                      width: '100%',\n                      padding: '0.5rem',\n                      border: '1px solid #D1D5DB',\n                      borderRadius: '0.375rem',\n                      backgroundColor: 'white',\n                      color: (() => {\n                        const value = desiderata[dateString]?.[creneau.id];\n                        switch(value) {\n                          case 'Oui': return '#059669';\n                          case 'Possible': return '#D97706';\n                          case 'Non': return '#DC2626';\n                          default: return '#6B7280';\n                        }\n                      })()\n                    }}\n                  >\n                    <option value=\"\">Sélectionnez</option>\n                    {options.map(option => (\n                      <option \n                        key={option} \n                        value={option}\n                      >\n                        {option}\n                      </option>\n                    ))}\n                  </select>\n                )}\n              </td>\n            ))}\n          </tr>\n        );\n      })}\n    </tbody>\n  </table>\n</div>\n</main>\n</div>\n);\n}\n\nexport default FormulaireDesirata;","// src/components/GestionUtilisateurs.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getAllUsers, createUser, deleteUser, getUser } from '../services/userService';\nimport { registerUser } from '../services/authService';\nimport { \n  ArrowLeft, \n  Plus, \n  Search, \n  Trash2, \n  Edit2, \n  Users,\n  Grid,\n  List,\n  Filter,\n  X,\n  UserPlus,\n  Mail\n} from 'lucide-react';\n\nfunction GestionUtilisateurs() {\n  // États de base\n  const [users, setUsers] = useState([]);\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const history = useHistory();\n\n  // États pour le formulaire d'ajout\n  const [showAddForm, setShowAddForm] = useState(false);\n  const [newUser, setNewUser] = useState({ \n    nom: '', \n    prenom: '', \n    email: '', \n    role: 'medecin' \n  });\n\n  // États pour les filtres et la vue\n  const [searchTerm, setSearchTerm] = useState('');\n  const [roleFilter, setRoleFilter] = useState('all');\n  const [viewMode, setViewMode] = useState('table');\n  const [showFilters, setShowFilters] = useState(false);\n\n  // État pour la pagination\n  const [currentPage, setCurrentPage] = useState(1);\n  const [usersPerPage] = useState(12); // Augmenté pour la vue en grille\n\n  // État pour la confirmation\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\n  const [userToDelete, setUserToDelete] = useState(null);\n\n  // Effet pour charger les données\n useEffect(() => {\n  const fetchData = async () => {\n    try {\n      const authUser = auth.currentUser;\n      if (!authUser) {\n        history.push('/');\n        return;\n      }\n\n      const userData = await getUser(authUser.uid);\n      if (!userData || userData.role !== 'admin') {\n        setError('Utilisateur non autorisé');\n        history.push('/');\n        return;\n      }\n\n      setCurrentUser(userData);\n      await fetchUsers();\n    } catch (error) {\n      console.error(\"Erreur:\", error);\n      setError(\"Erreur lors de la récupération des données\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  fetchData();\n}, [history]);\n\n// Fonction pour récupérer les utilisateurs\nconst fetchUsers = async () => {\n  try {\n    const fetchedUsers = await getAllUsers();\n    setUsers(fetchedUsers);\n  } catch (error) {\n    console.error(\"Erreur lors de la récupération des utilisateurs:\", error);\n    setError(\"Erreur lors de la récupération des utilisateurs\");\n  }\n};\n\n// Gestion des filtres et de la recherche\nconst filteredUsers = users.filter(user => {\n  const matchesSearch = (\n    user.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.prenom.toLowerCase().includes(searchTerm.toLowerCase()) ||\n    user.email.toLowerCase().includes(searchTerm.toLowerCase())\n  );\n\n  const matchesRole = roleFilter === 'all' || user.role === roleFilter;\n\n  return matchesSearch && matchesRole;\n});\n\n// Pagination\nconst indexOfLastUser = currentPage * usersPerPage;\nconst indexOfFirstUser = indexOfLastUser - usersPerPage;\nconst currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\nconst totalPages = Math.ceil(filteredUsers.length / usersPerPage);\n\n// Gestion du formulaire d'ajout\nconst handleInputChange = (e) => {\n  const { name, value } = e.target;\n  setNewUser(prev => ({ ...prev, [name]: value }));\n};\n\n// Gestion de l'ajout d'utilisateur\nconst handleAddUser = async (e) => {\n  e.preventDefault();\n  setError(null);\n\n  try {\n    const userCredential = await registerUser(newUser.email);\n    await createUser(userCredential.user.uid, {\n      nom: newUser.nom,\n      prenom: newUser.prenom,\n      email: newUser.email,\n      role: newUser.role\n    });\n\n    setNewUser({ nom: '', prenom: '', email: '', role: 'medecin' });\n    setShowAddForm(false);\n    await fetchUsers();\n\n    // Afficher une notification de succès\n    showNotification('Utilisateur ajouté avec succès');\n  } catch (error) {\n    console.error(\"Erreur lors de l'ajout de l'utilisateur:\", error);\n    let errorMessage = \"Une erreur est survenue lors de l'ajout de l'utilisateur\";\n    \n    if (error.code === \"auth/email-already-in-use\") {\n      errorMessage = \"Cette adresse email est déjà utilisée.\";\n    }\n\n    setError(errorMessage);\n  }\n};\n\n// Gestion de la suppression\nconst handleDeleteClick = (user) => {\n  setUserToDelete(user);\n  setShowConfirmDelete(true);\n};\n\nconst handleConfirmDelete = async () => {\n  try {\n    await deleteUser(userToDelete.id);\n    await fetchUsers();\n    setShowConfirmDelete(false);\n    setUserToDelete(null);\n    showNotification('Utilisateur supprimé avec succès');\n  } catch (error) {\n    console.error(\"Erreur lors de la suppression:\", error);\n    setError(\"Erreur lors de la suppression de l'utilisateur\");\n  }\n};\n\n// Fonction pour afficher les notifications\nconst showNotification = (message) => {\n  // On pourrait implémenter un système de notifications plus sophistiqué ici\n  alert(message);\n};\n\n// Si chargement en cours\nif (loading) {\n  return (\n    <div style={{\n      minHeight: '100vh',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      backgroundColor: '#f3f4f6'\n    }}>\n      Chargement...\n    </div>\n  );\n}\n\nreturn (\n  <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n    {/* Menu fixe en haut */}\n    <nav style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\n      borderBottom: '1px solid #e5e7eb',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      zIndex: 40\n    }}>\n      <div style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '1rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem'\n        }}>\n          <button\n            onClick={() => history.push('/dashboard-admin')}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              color: '#4B5563',\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer',\n              padding: '0.5rem'\n            }}\n          >\n            <ArrowLeft size={20} />\n            Retour\n          </button>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            color: '#2563EB',\n            fontWeight: 'bold'\n          }}>\n            <Users size={24} />\n            <span>Gestion des utilisateurs</span>\n          </div>\n        </div>\n\n        <button\n          onClick={() => setShowAddForm(true)}\n          style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            padding: '0.5rem 1rem',\n            backgroundColor: '#2563EB',\n            color: 'white',\n            borderRadius: '0.375rem',\n            border: 'none',\n            cursor: 'pointer',\n            fontSize: '0.875rem'\n          }}\n        >\n          <UserPlus size={18} />\n          Ajouter un utilisateur\n        </button>\n      </div>\n    </nav>\n\n    {/* Contenu principal */}\n    <main style={{\n      maxWidth: '1280px',\n      margin: '0 auto',\n      padding: '6rem 1rem 2rem',\n    }}>\n      {/* Barre d'outils */}\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.5rem',\n        padding: '1rem',\n        marginBottom: '1.5rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        display: 'flex',\n        flexWrap: 'wrap',\n        gap: '1rem',\n        alignItems: 'center',\n        justifyContent: 'space-between'\n      }}>\n        {/* Barre de recherche */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          flex: '1',\n          minWidth: '200px',\n          maxWidth: '400px',\n          position: 'relative'\n        }}>\n          <Search size={20} style={{\n            position: 'absolute',\n            left: '0.75rem',\n            color: '#6B7280'\n          }} />\n          <input\n            type=\"text\"\n            placeholder=\"Rechercher un utilisateur...\"\n            value={searchTerm}\n            onChange={(e) => setSearchTerm(e.target.value)}\n            style={{\n              width: '100%',\n              padding: '0.5rem 0.75rem 0.5rem 2.5rem',\n              borderRadius: '0.375rem',\n              border: '1px solid #D1D5DB',\n              fontSize: '0.875rem'\n            }}\n          />\n        </div>\n\n        {/* Filtres et vue */}\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem'\n        }}>\n          {/* Filtre par rôle */}\n          <select\n            value={roleFilter}\n            onChange={(e) => setRoleFilter(e.target.value)}\n            style={{\n              padding: '0.5rem',\n              borderRadius: '0.375rem',\n              border: '1px solid #D1D5DB',\n              backgroundColor: 'white',\n              fontSize: '0.875rem'\n            }}\n          >\n            <option value=\"all\">Tous les rôles</option>\n            <option value=\"medecin\">Médecins</option>\n            <option value=\"admin\">Administrateurs</option>\n          </select>\n\n          {/* Boutons de vue */}\n          <div style={{\n            display: 'flex',\n            gap: '0.5rem',\n            backgroundColor: '#F3F4F6',\n            padding: '0.25rem',\n            borderRadius: '0.375rem'\n          }}>\n            <button\n              onClick={() => setViewMode('table')}\n              style={{\n                padding: '0.5rem',\n                borderRadius: '0.25rem',\n                border: 'none',\n                backgroundColor: viewMode === 'table' ? 'white' : 'transparent',\n                boxShadow: viewMode === 'table' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <List size={20} color={viewMode === 'table' ? '#2563EB' : '#6B7280'} />\n            </button>\n            <button\n              onClick={() => setViewMode('grid')}\n              style={{\n                padding: '0.5rem',\n                borderRadius: '0.25rem',\n                border: 'none',\n                backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\n                boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\n                cursor: 'pointer'\n              }}\n            >\n              <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Affichage des erreurs */}\n      {error && (\n         <div style={{\n           backgroundColor: '#FEE2E2',\n           color: '#DC2626',\n           padding: '1rem',\n           borderRadius: '0.5rem',\n           marginBottom: '1.5rem',\n           display: 'flex',\n           alignItems: 'center',\n           gap: '0.5rem'\n         }}>\n           <X size={20} />\n           {error}\n         </div>\n       )}\n\n       {/* Vue tableau */}\n       {viewMode === 'table' && (\n         <div style={{\n           backgroundColor: 'white',\n           borderRadius: '0.5rem',\n           boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n           overflow: 'hidden'\n         }}>\n           <div style={{ overflowX: 'auto' }}>\n             <table style={{\n               width: '100%',\n               borderCollapse: 'collapse',\n               fontSize: '0.875rem'\n             }}>\n               <thead>\n                 <tr>\n                   <th style={{\n                     padding: '1rem',\n                     textAlign: 'left',\n                     backgroundColor: '#F9FAFB',\n                     borderBottom: '1px solid #E5E7EB',\n                     color: '#374151',\n                     fontWeight: '600'\n                   }}>\n                     Nom\n                   </th>\n                   <th style={{\n                     padding: '1rem',\n                     textAlign: 'left',\n                     backgroundColor: '#F9FAFB',\n                     borderBottom: '1px solid #E5E7EB',\n                     color: '#374151',\n                     fontWeight: '600'\n                   }}>\n                     Prénom\n                   </th>\n                   <th style={{\n                     padding: '1rem',\n                     textAlign: 'left',\n                     backgroundColor: '#F9FAFB',\n                     borderBottom: '1px solid #E5E7EB',\n                     color: '#374151',\n                     fontWeight: '600'\n                   }}>\n                     Email\n                   </th>\n                   <th style={{\n                     padding: '1rem',\n                     textAlign: 'left',\n                     backgroundColor: '#F9FAFB',\n                     borderBottom: '1px solid #E5E7EB',\n                     color: '#374151',\n                     fontWeight: '600'\n                   }}>\n                     Rôle\n                   </th>\n                   <th style={{\n                     padding: '1rem',\n                     textAlign: 'right',\n                     backgroundColor: '#F9FAFB',\n                     borderBottom: '1px solid #E5E7EB',\n                     color: '#374151',\n                     fontWeight: '600'\n                   }}>\n                     Actions\n                   </th>\n                 </tr>\n               </thead>\n               <tbody>\n                 {currentUsers.map((user) => (\n                   <tr \n                     key={user.id}\n                     style={{\n                       borderBottom: '1px solid #E5E7EB',\n                       transition: 'background-color 0.2s'\n                     }}\n                     onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F9FAFB'}\n                     onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'white'}\n                   >\n                     <td style={{ padding: '1rem' }}>{user.nom}</td>\n                     <td style={{ padding: '1rem' }}>{user.prenom}</td>\n                     <td style={{ padding: '1rem' }}>\n                       <div style={{\n                         display: 'flex',\n                         alignItems: 'center',\n                         gap: '0.5rem'\n                       }}>\n                         <Mail size={16} color=\"#6B7280\" />\n                         {user.email}\n                       </div>\n                     </td>\n                     <td style={{ padding: '1rem' }}>\n                       <span style={{\n                         padding: '0.25rem 0.5rem',\n                         borderRadius: '9999px',\n                         fontSize: '0.75rem',\n                         fontWeight: '500',\n                         backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\n                         color: user.role === 'admin' ? '#2563EB' : '#16A34A'\n                       }}>\n                         {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\n                       </span>\n                     </td>\n                     <td style={{\n                       padding: '1rem',\n                       textAlign: 'right'\n                     }}>\n                       <div style={{\n                         display: 'flex',\n                         gap: '0.5rem',\n                         justifyContent: 'flex-end'\n                       }}>\n                         <button\n                           onClick={() => handleDeleteClick(user)}\n                           style={{\n                             padding: '0.5rem',\n                             borderRadius: '0.375rem',\n                             border: '1px solid #DC2626',\n                             backgroundColor: 'white',\n                             color: '#DC2626',\n                             cursor: 'pointer',\n                             display: 'flex',\n                             alignItems: 'center',\n                             gap: '0.25rem',\n                             transition: 'all 0.2s'\n                           }}\n                           onMouseOver={(e) => {\n                             e.currentTarget.style.backgroundColor = '#DC2626';\n                             e.currentTarget.style.color = 'white';\n                           }}\n                           onMouseOut={(e) => {\n                             e.currentTarget.style.backgroundColor = 'white';\n                             e.currentTarget.style.color = '#DC2626';\n                           }}\n                         >\n                           <Trash2 size={16} />\n                           Supprimer\n                         </button>\n                       </div>\n                     </td>\n                   </tr>\n                 ))}\n               </tbody>\n             </table>\n           </div>\n\n           {/* Pagination */}\n           {totalPages > 1 && (\n             <div style={{\n               padding: '1rem',\n               display: 'flex',\n               justifyContent: 'center',\n               gap: '0.5rem',\n               borderTop: '1px solid #E5E7EB'\n             }}>\n               {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                 <button\n                   key={page}\n                   onClick={() => setCurrentPage(page)}\n                   style={{\n                     padding: '0.5rem 1rem',\n                     borderRadius: '0.375rem',\n                     border: '1px solid #E5E7EB',\n                     backgroundColor: currentPage === page ? '#2563EB' : 'white',\n                     color: currentPage === page ? 'white' : '#374151',\n                     cursor: 'pointer',\n                     transition: 'all 0.2s'\n                   }}\n                 >\n                   {page}\n                 </button>\n               ))}\n             </div>\n           )}\n         </div>\n       )}\n\n{/* Vue grille */}\n{viewMode === 'grid' && (\n  <div>\n    <div style={{\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\n      gap: '1rem'\n    }}>\n      {currentUsers.map((user) => (\n        <div\n          key={user.id}\n          style={{\n            backgroundColor: 'white',\n            borderRadius: '0.5rem',\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n            padding: '1.5rem',\n            position: 'relative',\n            transition: 'transform 0.2s, box-shadow 0.2s'\n          }}\n          onMouseOver={(e) => {\n            e.currentTarget.style.transform = 'translateY(-2px)';\n            e.currentTarget.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';\n          }}\n          onMouseOut={(e) => {\n            e.currentTarget.style.transform = 'translateY(0)';\n            e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)';\n          }}\n        >\n          <div style={{\n            display: 'flex',\n            alignItems: 'start',\n            justifyContent: 'space-between',\n            marginBottom: '1rem'\n          }}>\n            <div>\n              <h3 style={{\n                fontSize: '1.125rem',\n                fontWeight: '600',\n                color: '#111827',\n                marginBottom: '0.25rem'\n              }}>\n                {user.prenom} {user.nom}\n              </h3>\n              <div style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#6B7280',\n                fontSize: '0.875rem'\n              }}>\n                <Mail size={16} />\n                {user.email}\n              </div>\n            </div>\n            <span style={{\n              padding: '0.25rem 0.75rem',\n              borderRadius: '9999px',\n              fontSize: '0.75rem',\n              fontWeight: '500',\n              backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\n              color: user.role === 'admin' ? '#2563EB' : '#16A34A'\n            }}>\n              {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\n            </span>\n          </div>\n\n          <div style={{\n            borderTop: '1px solid #E5E7EB',\n            paddingTop: '1rem',\n            display: 'flex',\n            justifyContent: 'flex-end'\n          }}>\n            <button\n              onClick={() => handleDeleteClick(user)}\n              style={{\n                padding: '0.5rem 1rem',\n                borderRadius: '0.375rem',\n                border: '1px solid #DC2626',\n                backgroundColor: 'white',\n                color: '#DC2626',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                transition: 'all 0.2s'\n              }}\n              onMouseOver={(e) => {\n                e.currentTarget.style.backgroundColor = '#DC2626';\n                e.currentTarget.style.color = 'white';\n              }}\n              onMouseOut={(e) => {\n                e.currentTarget.style.backgroundColor = 'white';\n                e.currentTarget.style.color = '#DC2626';\n              }}\n            >\n              <Trash2 size={16} />\n              Supprimer\n            </button>\n          </div>\n        </div>\n      ))}\n    </div>\n\n    {/* Pagination */}\n    {totalPages > 1 && (\n      <div style={{\n        padding: '1rem',\n        display: 'flex',\n        justifyContent: 'center',\n        gap: '0.5rem',\n        marginTop: '2rem'\n      }}>\n        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n          <button\n            key={page}\n            onClick={() => setCurrentPage(page)}\n            style={{\n              padding: '0.5rem 1rem',\n              borderRadius: '0.375rem',\n              border: '1px solid #E5E7EB',\n              backgroundColor: currentPage === page ? '#2563EB' : 'white',\n              color: currentPage === page ? 'white' : '#374151',\n              cursor: 'pointer',\n              transition: 'all 0.2s',\n              minWidth: '2.5rem',\n              fontWeight: currentPage === page ? '600' : '400'\n            }}\n            onMouseOver={(e) => {\n              if (currentPage !== page) {\n                e.currentTarget.style.backgroundColor = '#F3F4F6';\n              }\n            }}\n            onMouseOut={(e) => {\n              if (currentPage !== page) {\n                e.currentTarget.style.backgroundColor = 'white';\n              }\n            }}\n          >\n            {page}\n          </button>\n        ))}\n      </div>\n    )}\n  </div>\n)}\n     </main>\n\n     {/* Modal d'ajout d'utilisateur */}\n     {showAddForm && (\n       <div style={{\n         position: 'fixed',\n         top: 0,\n         left: 0,\n         right: 0,\n         bottom: 0,\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\n         display: 'flex',\n         alignItems: 'center',\n         justifyContent: 'center',\n         zIndex: 50\n       }}>\n         <div style={{\n           backgroundColor: 'white',\n           borderRadius: '0.5rem',\n           padding: '2rem',\n           width: '90%',\n           maxWidth: '500px',\n           position: 'relative'\n         }}>\n           <button\n             onClick={() => setShowAddForm(false)}\n             style={{\n               position: 'absolute',\n               top: '1rem',\n               right: '1rem',\n               padding: '0.5rem',\n               border: 'none',\n               backgroundColor: 'transparent',\n               cursor: 'pointer'\n             }}\n           >\n             <X size={20} color=\"#6B7280\" />\n           </button>\n\n           <h2 style={{\n             fontSize: '1.5rem',\n             fontWeight: 'bold',\n             color: '#111827',\n             marginBottom: '1.5rem'\n           }}>\n             Ajouter un utilisateur\n           </h2>\n\n           <form onSubmit={handleAddUser}>\n             <div style={{ marginBottom: '1rem' }}>\n               <label style={{\n                 display: 'block',\n                 marginBottom: '0.5rem',\n                 fontSize: '0.875rem',\n                 fontWeight: '500',\n                 color: '#374151'\n               }}>\n                 Nom\n               </label>\n               <input\n                 type=\"text\"\n                 name=\"nom\"\n                 value={newUser.nom}\n                 onChange={handleInputChange}\n                 required\n                 style={{\n                   width: '100%',\n                   padding: '0.5rem',\n                   borderRadius: '0.375rem',\n                   border: '1px solid #D1D5DB'\n                 }}\n               />\n             </div>\n\n             <div style={{ marginBottom: '1rem' }}>\n               <label style={{\n                 display: 'block',\n                 marginBottom: '0.5rem',\n                 fontSize: '0.875rem',\n                 fontWeight: '500',\n                 color: '#374151'\n               }}>\n                 Prénom\n               </label>\n               <input\n                 type=\"text\"\n                 name=\"prenom\"\n                 value={newUser.prenom}\n                 onChange={handleInputChange}\n                 required\n                 style={{\n                   width: '100%',\n                   padding: '0.5rem',\n                   borderRadius: '0.375rem',\n                   border: '1px solid #D1D5DB'\n                 }}\n               />\n             </div>\n\n             <div style={{ marginBottom: '1rem' }}>\n               <label style={{\n                 display: 'block',\n                 marginBottom: '0.5rem',\n                 fontSize: '0.875rem',\n                 fontWeight: '500',\n                 color: '#374151'\n               }}>\n                 Email\n               </label>\n               <input\n                 type=\"email\"\n                 name=\"email\"\n                 value={newUser.email}\n                 onChange={handleInputChange}\n                 required\n                 style={{\n                   width: '100%',\n                   padding: '0.5rem',\n                   borderRadius: '0.375rem',\n                   border: '1px solid #D1D5DB'\n                 }}\n               />\n             </div>\n\n             <div style={{ marginBottom: '1.5rem' }}>\n               <label style={{\n                 display: 'block',\n                 marginBottom: '0.5rem',\n                 fontSize: '0.875rem',\n                 fontWeight: '500',\n                 color: '#374151'\n               }}>\n                 Rôle\n               </label>\n               <select\n                 name=\"role\"\n                 value={newUser.role}\n                 onChange={handleInputChange}\n                 style={{\n                   width: '100%',\n                   padding: '0.5rem',\n                   borderRadius: '0.375rem',\n                   border: '1px solid #D1D5DB',\n                   backgroundColor: 'white'\n                 }}\n               >\n                 <option value=\"medecin\">Médecin</option>\n                 <option value=\"admin\">Administrateur</option>\n               </select>\n             </div>\n\n             <div style={{\n               display: 'flex',\n               gap: '1rem',\n               justifyContent: 'flex-end'\n             }}>\n               <button\n                 type=\"button\"\n                 onClick={() => setShowAddForm(false)}\n                 style={{\n                   padding: '0.5rem 1rem',\n                   borderRadius: '0.375rem',\n                   border: '1px solid #D1D5DB',\n                   backgroundColor: 'white',\n                   color: '#374151',\n                   cursor: 'pointer'\n                 }}\n               >\n                 Annuler\n               </button>\n               <button\n                 type=\"submit\"\n                 style={{\n                   padding: '0.5rem 1rem',\n                   borderRadius: '0.375rem',\n                   border: 'none',\n                   backgroundColor: '#2563EB',\n                   color: 'white',\n                   cursor: 'pointer'\n                 }}\n               >\n                 Ajouter\n               </button>\n             </div>\n           </form>\n         </div>\n       </div>\n     )}\n\n     {/* Modal de confirmation de suppression */}\n     {showConfirmDelete && (\n       <div style={{\n         position: 'fixed',\n         top: 0,\n         left: 0,\n         right: 0,\n         bottom: 0,\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\n         display: 'flex',\n         alignItems: 'center',\n         justifyContent: 'center',\n         zIndex: 50\n       }}>\n         <div style={{\n           backgroundColor: 'white',\n           borderRadius: '0.5rem',\n           padding: '2rem',\n           width: '90%',\n           maxWidth: '400px',\n           textAlign: 'center'\n         }}>\n           <div style={{\n             width: '3rem',\n             height: '3rem',\n             backgroundColor: '#FEE2E2',\n             borderRadius: '50%',\n             display: 'flex',\n             alignItems: 'center',\n             justifyContent: 'center',\n             margin: '0 auto 1rem'\n           }}>\n             <Trash2 size={24} color=\"#DC2626\" />\n           </div>\n\n           <h2 style={{\n             fontSize: '1.25rem',\n             fontWeight: 'bold',\n             color: '#111827',\n             marginBottom: '0.5rem'\n           }}>\n             Confirmer la suppression\n           </h2>\n\n           <p style={{\n             color: '#6B7280',\n             marginBottom: '1.5rem'\n           }}>\n             Êtes-vous sûr de vouloir supprimer l'utilisateur{' '}\n             <span style={{ fontWeight: '600' }}>\n               {userToDelete?.prenom} {userToDelete?.nom}\n             </span>\n             ? Cette action est irréversible.\n           </p>\n\n           <div style={{\n             display: 'flex',\n             gap: '1rem',\n             justifyContent: 'center'\n           }}>\n             <button\n               onClick={() => {\n                 setShowConfirmDelete(false);\n                 setUserToDelete(null);\n               }}\n               style={{\n                 padding: '0.5rem 1rem',\n                 borderRadius: '0.375rem',\n                 border: '1px solid #D1D5DB',\n                 backgroundColor: 'white',\n                 color: '#374151',\n                 cursor: 'pointer',\n                 minWidth: '100px'\n               }}\n             >\n               Annuler\n             </button>\n             <button\n               onClick={handleConfirmDelete}\n               style={{\n                 padding: '0.5rem 1rem',\n                 borderRadius: '0.375rem',\n                 border: 'none',\n                 backgroundColor: '#DC2626',\n                 color: 'white',\n                 cursor: 'pointer',\n                 minWidth: '100px'\n               }}\n             >\n               Supprimer\n             </button>\n           </div>\n         </div>\n       </div>\n     )}\n   </div>\n );\n}\n\nexport default GestionUtilisateurs;","// src/utils/planningGenerator.js\nimport { getDesiderataForPeriod } from '../services/planningService';\nimport { getAllUsers } from '../services/userService';\n\nconst creneaux = [\n  { id: 'QUART_1', label: '1er QUART (1h - 7h)', medecins: 2 },\n  { id: 'QUART_2', label: '2ème QUART (7h - 13h)', medecins: 3 },\n  { id: 'RENFORT_1', label: 'RENFORT 10h / 13h', medecins: 1, samediOnly: true },\n  { id: 'QUART_3', label: '3ème QUART (13h - 19h)', medecins: 3 },\n  { id: 'RENFORT_2', label: 'RENFORT 20H / 00H', medecins: 1 },\n  { id: 'QUART_4', label: '4ème QUART (19h - 1h)', medecins: 3 },\n];\n\nconst creneauxChevauchants = {\n  'QUART_2': ['RENFORT_1'],\n  'RENFORT_1': ['QUART_2'],\n  'QUART_4': ['RENFORT_2'],\n  'RENFORT_2': ['QUART_4']\n};\n\nconst aCreneauxChevauchants = (medecinId, date, creneauId, planning) => {\n  if (!creneauxChevauchants[creneauId]) return false;\n  \n  const creneauxDuJour = planning[date];\n  return creneauxChevauchants[creneauId].some(creneauChevauchant => \n    creneauxDuJour[creneauChevauchant]?.includes(medecinId)\n  );\n};\n\nconst genererPlanning = async (debut, fin) => {\n  try {\n    const desiderataData = await getDesiderataForPeriod(debut, fin);\n    const users = await getAllUsers();\n    const medecins = users.filter(user => user.role === 'medecin').map(user => user.id);\n\n    const desiderata = {};\n    desiderataData.forEach(d => {\n      if (!desiderata[d.userId]) {\n        desiderata[d.userId] = {\n          preferences: {},\n          nombreGardesSouhaitees: d.nombreGardesSouhaitees,\n          nombreGardesMaxParSemaine: d.nombreGardesMaxParSemaine || 7,\n          gardesGroupees: d.gardesGroupees,\n          renfortsAssocies: d.renfortsAssocies\n        };\n      }\n      Object.entries(d.desiderata).forEach(([date, creneaux]) => {\n        const formattedDate = new Date(date).toISOString().split('T')[0];\n        if (!desiderata[d.userId].preferences[formattedDate]) {\n          desiderata[d.userId].preferences[formattedDate] = {};\n        }\n        Object.assign(desiderata[d.userId].preferences[formattedDate], creneaux);\n      });\n    });\n\n    let planning = genererPlanningSolution(debut, fin, desiderata, medecins);\n    planning = rechercheTabou(planning, debut, fin, desiderata, medecins);\n    return planning;\n  } catch (error) {\n    console.error('Erreur lors de la génération du planning:', error);\n    throw error;\n  }\n};\n\nconst genererPlanningSolution = (debut, fin, desiderata, medecins) => {\n  const planning = {};\n  let currentDate = new Date(debut);\n  const endDate = new Date(fin);\n\n  while (currentDate <= endDate) {\n    const dateString = currentDate.toISOString().split('T')[0];\n    planning[dateString] = {};\n\n    // Générer les créneaux dans un ordre spécifique pour mieux gérer les chevauchements\n    const ordreCreneaux = [\n      'QUART_1',\n      'QUART_2',\n      'RENFORT_1',\n      'QUART_3',\n      'QUART_4',\n      'RENFORT_2'\n    ];\n\n    ordreCreneaux.forEach(creneauId => {\n      const creneau = creneaux.find(c => c.id === creneauId);\n      if (creneau && (!creneau.samediOnly || currentDate.getDay() === 6)) {\n        planning[dateString][creneauId] = assignerMedecins(dateString, creneau, desiderata, medecins, planning);\n      }\n    });\n\n    currentDate.setDate(currentDate.getDate() + 1);\n  }\n\n  return planning;\n};\n\nconst getWeekNumber = (date) => {\n  const d = new Date(date);\n  d.setHours(0, 0, 0, 0);\n  d.setDate(d.getDate() + 4 - (d.getDay() || 7));\n  const yearStart = new Date(d.getFullYear(), 0, 1);\n  return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\n};\n\nconst compterGardesParSemaine = (medecinId, date, planning) => {\n  const weekNumber = getWeekNumber(date);\n  let count = 0;\n\n  Object.entries(planning).forEach(([planningDate, creneaux]) => {\n    if (getWeekNumber(planningDate) === weekNumber) {\n      Object.values(creneaux).forEach(medecins => {\n        if (medecins && medecins.includes(medecinId)) {\n          count++;\n        }\n      });\n    }\n  });\n\n  return count;\n};\n\nconst assignerMedecins = (date, creneau, desiderata, medecins, planning) => {\n  const medecinsDispo = medecins.filter(medecinId => {\n    const choix = desiderata[medecinId]?.preferences[date]?.[creneau.id];\n    const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\n    const maxGardesParSemaine = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\n    const aChevauchement = aCreneauxChevauchants(medecinId, date, creneau.id, planning);\n\n    return (choix === 'Oui' || choix === 'Possible') && \n           gardesParSemaine < maxGardesParSemaine &&\n           !aChevauchement;\n  });\n\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\n    const choixA = desiderata[a]?.preferences[date]?.[creneau.id];\n    const choixB = desiderata[b]?.preferences[date]?.[creneau.id];\n    if (choixA === 'Oui' && choixB !== 'Oui') return -1;\n    if (choixB === 'Oui' && choixA !== 'Oui') return 1;\n    return 0;\n  });\n\n  const assignes = [];\n  for (let i = 0; i < creneau.medecins; i++) {\n    if (medecinsPriorises.length > 0) {\n      const medecinChoisi = choisirMedecin(medecinsPriorises, date, creneau, desiderata, planning);\n      if (medecinChoisi) {\n        assignes.push(medecinChoisi);\n        medecinsPriorises.splice(medecinsPriorises.indexOf(medecinChoisi), 1);\n      } else {\n        assignes.push(null);\n      }\n    } else {\n      assignes.push(null);\n    }\n  }\n\n  return assignes;\n};\n\nconst choisirMedecin = (medecinsDispo, date, creneau, desiderata, planning) => {\n  const mois = new Date(date).getMonth();\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\n    const scoreA = calculerScoreMedecin(a, date, creneau, desiderata, planning, mois);\n    const scoreB = calculerScoreMedecin(b, date, creneau, desiderata, planning, mois);\n    return scoreB - scoreA;\n  });\n\n  return medecinsPriorises[0];\n};\n\nconst calculerScoreMedecin = (medecinId, date, creneau, desiderata, planning, mois) => {\n  let score = 0;\n  const prefMedecin = desiderata[medecinId];\n  const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\n  const maxGardesParSemaine = prefMedecin?.nombreGardesMaxParSemaine || 7;\n\n  // Pénalité forte pour les chevauchements\n  if (aCreneauxChevauchants(medecinId, date, creneau.id, planning)) {\n    score -= 50;\n  }\n\n  // Pénalité forte si proche du max de gardes par semaine\n  if (gardesParSemaine >= maxGardesParSemaine - 1) {\n    score -= 10;\n  }\n\n  // Respect des préférences\n  if (prefMedecin.preferences[date]?.[creneau.id] === 'Oui') score += 3;\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Possible') score += 1;\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Non') score -= 5;\n\n  // Nombre de gardes souhaitées\n  const gardesDuMois = compterGardesMois(medecinId, planning, mois);\n  if (gardesDuMois < prefMedecin.nombreGardesSouhaitees) score += 2;\n  else score -= (gardesDuMois - prefMedecin.nombreGardesSouhaitees) * 2;\n\n  // Gardes groupées\n  if (prefMedecin.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\n    score += 2;\n  }\n\n  // Renforts associés\n  if (prefMedecin.renfortsAssocies) {\n    if (creneau.id.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\n    if (!creneau.id.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\n  }\n\n  return score;\n};\n\nconst compterGardesMois = (medecinId, planning, mois) => {\n  return Object.entries(planning).reduce((count, [date, creneaux]) => {\n    if (new Date(date).getMonth() === mois) {\n      return count + Object.values(creneaux).flat().filter(m => m === medecinId).length;\n    }\n    return count;\n  }, 0);\n};\n\nconst estWeekEnd = (date) => {\n  const jour = new Date(date).getDay();\n  return jour === 0 || jour === 6;\n};\n\nconst aGardeWeekEnd = (medecinId, date, planning) => {\n  const dateObj = new Date(date);\n  const debutWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay()));\n  const finWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay() + 6));\n\n  for (let d = new Date(debutWeekEnd); d <= finWeekEnd; d.setDate(d.getDate() + 1)) {\n    const dateString = d.toISOString().split('T')[0];\n    if (planning[dateString] && Object.values(planning[dateString]).flat().includes(medecinId)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst aGardeJour = (medecinId, date, planning) => {\n  return planning[date] && Object.values(planning[date]).flat().includes(medecinId);\n};\n\nconst aRenfortJour = (medecinId, date, planning) => {\n  return planning[date] && (\n    planning[date]['RENFORT_1']?.includes(medecinId) || \n    planning[date]['RENFORT_2']?.includes(medecinId)\n  );\n};\n\nconst rechercheTabou = (planning, debut, fin, desiderata, medecins, maxIterations = 1000) => {\n  let meilleurPlanning = planning;\n  let meilleurScore = evaluerPlanning(planning, desiderata);\n  const listeTabou = new Set();\n\n  for (let i = 0; i < maxIterations; i++) {\n    const voisins = genererVoisins(meilleurPlanning, medecins, desiderata);\n    let meilleurVoisin = null;\n    let meilleurScoreVoisin = -Infinity;\n\n    for (const voisin of voisins) {\n      const scoreVoisin = evaluerPlanning(voisin, desiderata);\n      if (scoreVoisin > meilleurScoreVoisin && !listeTabou.has(JSON.stringify(voisin))) {\n        meilleurVoisin = voisin;\n        meilleurScoreVoisin = scoreVoisin;\n      }\n    }\n\n    if (meilleurScoreVoisin > meilleurScore) {\n      meilleurPlanning = meilleurVoisin;\n      meilleurScore = meilleurScoreVoisin;\n      listeTabou.add(JSON.stringify(meilleurVoisin));\n      if (listeTabou.size > 50) {\n        listeTabou.delete(listeTabou.values().next().value);\n      }\n    }\n  }\n\n  return meilleurPlanning;\n};\n\nconst genererVoisins = (planning, medecins, desiderata) => {\n  const voisins = [];\n  const dates = Object.keys(planning);\n  const date = dates[Math.floor(Math.random() * dates.length)];\n  const creneauId = Object.keys(planning[date])[Math.floor(Math.random() * Object.keys(planning[date]).length)];\n  const index = Math.floor(Math.random() * planning[date][creneauId].length);\n\n  for (const medecin of medecins) {\n    if (!planning[date][creneauId].includes(medecin)) {\n      const nouveauPlanning = JSON.parse(JSON.stringify(planning));\n      nouveauPlanning[date][creneauId][index] = medecin;\n      \n      // Vérifier si le changement respecte toutes les contraintes\n      const gardesParSemaine = compterGardesParSemaine(medecin, date, nouveauPlanning);\n      const maxGardes = desiderata[medecin]?.nombreGardesMaxParSemaine || 7;\n      const aChevauchement = aCreneauxChevauchants(medecin, date, creneauId, nouveauPlanning);\n      if (gardesParSemaine <= maxGardes && !aChevauchement && verifierContraintes(nouveauPlanning)) {\n        voisins.push(nouveauPlanning);\n      }\n    }\n  }\n\n  const planningRetrait = JSON.parse(JSON.stringify(planning));\n  planningRetrait[date][creneauId][index] = null;\n  if (verifierContraintes(planningRetrait)) {\n    voisins.push(planningRetrait);\n  }\n\n  return voisins;\n};\n\nconst evaluerPlanning = (planning, desiderata) => {\n  let score = 0;\n  const gardesParMedecin = {};\n  const gardesParMedecinParSemaine = {};\n\n  for (const date in planning) {\n    for (const creneauId in planning[date]) {\n      for (const medecinId of planning[date][creneauId]) {\n        if (medecinId === null) continue;\n\n        // Compter les gardes par semaine\n        const semaine = getWeekNumber(date);\n        if (!gardesParMedecinParSemaine[medecinId]) {\n          gardesParMedecinParSemaine[medecinId] = {};\n        }\n        if (!gardesParMedecinParSemaine[medecinId][semaine]) {\n          gardesParMedecinParSemaine[medecinId][semaine] = 0;\n        }\n        gardesParMedecinParSemaine[medecinId][semaine]++;\n\n        // Pénalité pour dépassement du maximum de gardes par semaine\n        const maxGardes = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\n        if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardes) {\n          score -= 20;\n        }\n\n        // Pénalité pour les chevauchements\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\n          score -= 50;\n        }\n\n        if (!gardesParMedecin[medecinId]) gardesParMedecin[medecinId] = 0;\n        gardesParMedecin[medecinId]++;\n\n        const choix = desiderata[medecinId]?.preferences[date]?.[creneauId];\n        if (choix === 'Oui') score += 3;\n        else if (choix === 'Possible') score += 1;\n        else if (choix === 'Non') score -= 5;\n\n        // Gardes groupées\n        if (desiderata[medecinId]?.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\n          score += 2;\n        }\n\n        // Renforts associés\n        if (desiderata[medecinId]?.renfortsAssocies) {\n          if (creneauId.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\n          if (!creneauId.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\n        }\n      }\n    }\n  }\n\n  // Évaluation du nombre de gardes souhaitées par mois\n  for (const medecinId in gardesParMedecin) {\n    const diff = Math.abs(gardesParMedecin[medecinId] - desiderata[medecinId]?.nombreGardesSouhaitees);\n    score -= diff * 2;\n  }\n\n  return score;\n};\n\nconst verifierContraintes = (planning) => {\n  const dates = Object.keys(planning).sort();\n  const gardesParMedecinParSemaine = {};\n\n  for (let i = 0; i < dates.length; i++) {\n    const date = dates[i];\n    const medecinsDuJour = new Set();\n\n    // Vérifier les chevauchements de créneaux\n    for (const creneauId in planning[date]) {\n      const medecins = planning[date][creneauId];\n      for (const medecinId of medecins) {\n        if (medecinId === null) continue;\n\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\n          return false;\n        }\n\n        medecinsDuJour.add(medecinId);\n      }\n    }\n\n    // Vérifier les gardes consécutives\n    for (const medecinId of medecinsDuJour) {\n      if (i >= 2) {\n        const hierMedecins = new Set();\n        const avantHierMedecins = new Set();\n\n        Object.values(planning[dates[i - 1]]).forEach(medecins => {\n          medecins.forEach(m => { if (m !== null) hierMedecins.add(m); });\n        });\n\n        Object.values(planning[dates[i - 2]]).forEach(medecins => {\n          medecins.forEach(m => { if (m !== null) avantHierMedecins.add(m); });\n        });\n\n        if (hierMedecins.has(medecinId) && avantHierMedecins.has(medecinId)) {\n          return false;\n        }\n      }\n\n      // Vérifier le nombre de gardes par semaine\n      const semaine = getWeekNumber(date);\n      if (!gardesParMedecinParSemaine[medecinId]) {\n        gardesParMedecinParSemaine[medecinId] = {};\n      }\n      if (!gardesParMedecinParSemaine[medecinId][semaine]) {\n        gardesParMedecinParSemaine[medecinId][semaine] = 0;\n      }\n      gardesParMedecinParSemaine[medecinId][semaine]++;\n    }\n  }\n\n  // Vérifier le respect du nombre maximum de gardes par semaine\n  for (const medecinId in gardesParMedecinParSemaine) {\n    for (const semaine in gardesParMedecinParSemaine[medecinId]) {\n      const maxGardesParSemaine = 7;  // Valeur par défaut\n      if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardesParSemaine) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};\n\nexport { genererPlanning, creneaux };","// src/components/planning/PlanningHeader.js\nimport React from 'react';\nimport { \n  ArrowLeft, \n  Calendar, \n  Save, \n  Upload, \n  RefreshCcw, \n  Edit2, \n  X \n} from 'lucide-react';\n\nconst PlanningHeader = ({\n  editMode,\n  modified,\n  onEditToggle,\n  onGenerateClick,\n  onPublishClick,\n  onSaveChanges,\n  onBackClick,\n  planning\n}) => {\n  return (\n    <nav style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\n      borderBottom: '1px solid #e5e7eb',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      zIndex: 40\n    }}>\n      <div style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '1rem',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '1rem'\n        }}>\n          <button\n            onClick={onBackClick}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              color: '#4B5563',\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer',\n              padding: '0.5rem'\n            }}\n          >\n            <ArrowLeft size={20} />\n            Retour\n          </button>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '0.5rem',\n            color: '#2563EB',\n            fontWeight: 'bold'\n          }}>\n            <Calendar size={24} />\n            <span>Gestion du planning</span>\n          </div>\n        </div>\n\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.75rem'\n        }}>\n          {!editMode ? (\n            <>\n              <button\n                onClick={onGenerateClick}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  padding: '0.5rem 1rem',\n                  backgroundColor: '#F3E8FF',\n                  border: '1px solid #9333EA',\n                  color: '#9333EA',\n                  borderRadius: '0.375rem',\n                  cursor: 'pointer'\n                }}\n              >\n                <RefreshCcw size={18} />\n                {planning ? 'Regénérer' : 'Générer'}\n              </button>\n              <button\n                onClick={onEditToggle}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  padding: '0.5rem 1rem',\n                  backgroundColor: '#EBF5FF',\n                  border: '1px solid #2563EB',\n                  color: '#2563EB',\n                  borderRadius: '0.375rem',\n                  cursor: 'pointer'\n                }}\n              >\n                <Edit2 size={18} />\n                Modifier\n              </button>\n              {planning && (\n                <button\n                  onClick={onPublishClick}\n                  style={{\n                    display: 'flex',\n                    alignItems: 'center',\n                    gap: '0.5rem',\n                    padding: '0.5rem 1rem',\n                    backgroundColor: '#ECFDF5',\n                    border: '1px solid #059669',\n                    color: '#059669',\n                    borderRadius: '0.375rem',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <Upload size={18} />\n                  Publier\n                </button>\n              )}\n            </>\n          ) : (\n            <>\n              <button\n                onClick={onSaveChanges}\n                disabled={!modified}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  padding: '0.5rem 1rem',\n                  backgroundColor: modified ? '#2563EB' : '#93C5FD',\n                  color: 'white',\n                  border: 'none',\n                  borderRadius: '0.375rem',\n                  cursor: modified ? 'pointer' : 'not-allowed'\n                }}\n              >\n                <Save size={18} />\n                Sauvegarder\n              </button>\n              <button\n                onClick={onEditToggle}\n                style={{\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: '0.5rem',\n                  padding: '0.5rem 1rem',\n                  backgroundColor: '#F3F4F6',\n                  border: '1px solid #D1D5DB',\n                  color: '#374151',\n                  borderRadius: '0.375rem',\n                  cursor: 'pointer'\n                }}\n              >\n                <X size={18} />\n                Annuler\n              </button>\n            </>\n          )}\n        </div>\n      </div>\n    </nav>\n  );\n};\n\nexport default PlanningHeader;","// src/components/planning/components/MedecinSearchSelect.js\nimport React, { useState, useRef, useEffect } from 'react';\nimport { Search, X, ChevronDown, ChevronUp } from 'lucide-react';\n\nconst MedecinSearchSelect = ({ \n  medecins, \n  value, \n  onChange,\n  placeholder = \"Rechercher un médecin...\" \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const [searchTerm, setSearchTerm] = useState('');\n  const wrapperRef = useRef(null);\n\n  // Ferme la liste déroulante lors d'un clic à l'extérieur\n  useEffect(() => {\n    const handleClickOutside = (event) => {\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\n        setIsOpen(false);\n      }\n    };\n\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => document.removeEventListener('mousedown', handleClickOutside);\n  }, []);\n\n  // Filtrer les médecins selon le terme de recherche\n  const filteredMedecins = medecins.filter(medecin => {\n    const searchTermLower = searchTerm.toLowerCase();\n    return (\n      medecin.nom.toLowerCase().includes(searchTermLower) ||\n      medecin.prenom.toLowerCase().includes(searchTermLower)\n    );\n  });\n\n  // Récupérer le médecin sélectionné\n  const selectedMedecin = medecins.find(m => m.id === value);\n\n  return (\n    <div \n      ref={wrapperRef}\n      style={{\n        position: 'relative',\n        width: '100%'\n      }}\n    >\n      {/* Input de recherche */}\n      <div style={{\n        position: 'relative',\n        display: 'flex',\n        alignItems: 'center'\n      }}>\n        <Search \n          size={18}\n          style={{\n            position: 'absolute',\n            left: '0.75rem',\n            color: '#6B7280'\n          }}\n        />\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => {\n            setSearchTerm(e.target.value);\n            setIsOpen(true);\n          }}\n          onFocus={() => setIsOpen(true)}\n          placeholder={placeholder}\n          style={{\n            width: '100%',\n            padding: '0.5rem 2.5rem',\n            borderRadius: '0.375rem',\n            border: '1px solid #D1D5DB',\n            fontSize: '0.875rem'\n          }}\n        />\n        <div style={{\n          position: 'absolute',\n          right: '0.75rem',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem'\n        }}>\n          {searchTerm && (\n            <button\n              onClick={() => {\n                setSearchTerm('');\n                setIsOpen(true);\n              }}\n              style={{\n                padding: '0.25rem',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                display: 'flex',\n                alignItems: 'center',\n                color: '#6B7280'\n              }}\n            >\n              <X size={16} />\n            </button>\n          )}\n          <button\n            onClick={() => setIsOpen(!isOpen)}\n            style={{\n              padding: '0.25rem',\n              border: 'none',\n              background: 'none',\n              cursor: 'pointer',\n              display: 'flex',\n              alignItems: 'center',\n              color: '#6B7280'\n            }}\n          >\n            {isOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\n          </button>\n        </div>\n      </div>\n\n      {/* Liste déroulante */}\n      {isOpen && (\n        <div style={{\n          position: 'absolute',\n          top: 'calc(100% + 0.25rem)',\n          left: 0,\n          right: 0,\n          maxHeight: '15rem',\n          overflowY: 'auto',\n          backgroundColor: 'white',\n          borderRadius: '0.375rem',\n          border: '1px solid #D1D5DB',\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n          zIndex: 30\n        }}>\n          <div style={{\n            padding: '0.25rem'\n          }}>\n            {/* Option \"Tous les médecins\" */}\n            <button\n              onClick={() => {\n                onChange('all');\n                setIsOpen(false);\n                setSearchTerm('');\n              }}\n              style={{\n                width: '100%',\n                padding: '0.5rem 0.75rem',\n                textAlign: 'left',\n                border: 'none',\n                borderRadius: '0.25rem',\n                backgroundColor: value === 'all' ? '#EBF5FF' : 'transparent',\n                color: value === 'all' ? '#2563EB' : '#374151',\n                cursor: 'pointer',\n                fontSize: '0.875rem',\n                fontWeight: value === 'all' ? '600' : 'normal'\n              }}\n            >\n              Tous les médecins\n            </button>\n\n            {/* Liste des médecins filtrés */}\n            {filteredMedecins.map(medecin => (\n              <button\n                key={medecin.id}\n                onClick={() => {\n                  onChange(medecin.id);\n                  setIsOpen(false);\n                  setSearchTerm('');\n                }}\n                style={{\n                  width: '100%',\n                  padding: '0.5rem 0.75rem',\n                  textAlign: 'left',\n                  border: 'none',\n                  borderRadius: '0.25rem',\n                  backgroundColor: value === medecin.id ? '#EBF5FF' : 'transparent',\n                  color: value === medecin.id ? '#2563EB' : '#374151',\n                  cursor: 'pointer',\n                  fontSize: '0.875rem',\n                  fontWeight: value === medecin.id ? '600' : 'normal'\n                }}\n              >\n                Dr. {medecin.prenom} {medecin.nom}\n              </button>\n            ))}\n\n            {/* Message si aucun résultat */}\n            {filteredMedecins.length === 0 && (\n              <div style={{\n                padding: '0.5rem 0.75rem',\n                color: '#6B7280',\n                fontSize: '0.875rem',\n                textAlign: 'center'\n              }}>\n                Aucun médecin trouvé\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Affichage du médecin sélectionné sous l'input */}\n      {value !== 'all' && selectedMedecin && !isOpen && (\n        <div style={{\n          marginTop: '0.25rem',\n          fontSize: '0.75rem',\n          color: '#2563EB',\n          fontWeight: '500'\n        }}>\n          Médecin sélectionné : Dr. {selectedMedecin.prenom} {selectedMedecin.nom}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default MedecinSearchSelect;","// src/components/planning/PlanningFilters.js\nimport React from 'react';\nimport { Filter, ChevronDown, ChevronUp, Search, List, Grid } from 'lucide-react';\nimport MedecinSearchSelect from './components/MedecinSearchSelect';\n\nconst PlanningFilters = ({\n  showFilters,\n  onToggleFilters,\n  dateFilter,\n  onDateFilterChange,\n  creneauFilter,\n  onCreneauFilterChange,\n  selectedMedecin,\n  onMedecinFilterChange,\n  viewMode,\n  onViewModeChange,\n  medecins,\n  creneaux\n}) => {\n  return (\n    <div style={{\n      backgroundColor: 'white',\n      borderRadius: '0.5rem',\n      marginBottom: '1.5rem',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n    }}>\n      <button\n        onClick={onToggleFilters}\n        style={{\n          width: '100%',\n          padding: '1rem 1.5rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center',\n          border: 'none',\n          background: 'none',\n          cursor: 'pointer',\n          borderRadius: '0.5rem'\n        }}\n      >\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          color: '#374151'\n        }}>\n          <Filter size={20} />\n          <span style={{ fontWeight: '500' }}>Filtres et recherche</span>\n        </div>\n        {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n      </button>\n\n      {showFilters && (\n        <div style={{\n          padding: '1rem 1.5rem',\n          borderTop: '1px solid #E5E7EB'\n        }}>\n          <div style={{\n            display: 'grid',\n            gap: '1rem',\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\n          }}>\n            {/* Filtre par période */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Période\n              </label>\n              <div style={{\n                display: 'flex',\n                gap: '0.5rem'\n              }}>\n                <input\n                  type=\"date\"\n                  value={dateFilter.start}\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, start: e.target.value })}\n                  style={{\n                    flex: 1,\n                    padding: '0.5rem',\n                    borderRadius: '0.375rem',\n                    border: '1px solid #D1D5DB',\n                    fontSize: '0.875rem'\n                  }}\n                />\n                <input\n                  type=\"date\"\n                  value={dateFilter.end}\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, end: e.target.value })}\n                  style={{\n                    flex: 1,\n                    padding: '0.5rem',\n                    borderRadius: '0.375rem',\n                    border: '1px solid #D1D5DB',\n                    fontSize: '0.875rem'\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Filtre par créneau */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Créneau\n              </label>\n              <select\n                value={creneauFilter}\n                onChange={(e) => onCreneauFilterChange(e.target.value)}\n                style={{\n                  width: '100%',\n                  padding: '0.5rem',\n                  borderRadius: '0.375rem',\n                  border: '1px solid #D1D5DB',\n                  backgroundColor: 'white',\n                  fontSize: '0.875rem'\n                }}\n              >\n                <option value=\"all\">Tous les créneaux</option>\n                {creneaux.map(creneau => (\n                  <option key={creneau.id} value={creneau.id}>\n                    {creneau.label} ({creneau.hours})\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            {/* Filtre par médecin */}\n            <div>\n  <label style={{\n    display: 'block',\n    fontSize: '0.875rem',\n    fontWeight: '500',\n    color: '#374151',\n    marginBottom: '0.5rem'\n  }}>\n    Médecin\n  </label>\n  <MedecinSearchSelect\n    medecins={medecins}\n    value={selectedMedecin}\n    onChange={onMedecinFilterChange}\n    placeholder=\"Rechercher un médecin...\"\n  />\n</div>\n\n            {/* Sélecteur de vue */}\n            <div>\n              <label style={{\n                display: 'block',\n                fontSize: '0.875rem',\n                fontWeight: '500',\n                color: '#374151',\n                marginBottom: '0.5rem'\n              }}>\n                Mode d'affichage\n              </label>\n              <div style={{\n                display: 'flex',\n                gap: '0.5rem',\n                backgroundColor: '#F3F4F6',\n                padding: '0.25rem',\n                borderRadius: '0.375rem',\n                width: 'fit-content'\n              }}>\n                <button\n                  onClick={() => onViewModeChange('list')}\n                  style={{\n                    padding: '0.5rem',\n                    borderRadius: '0.25rem',\n                    border: 'none',\n                    backgroundColor: viewMode === 'list' ? 'white' : 'transparent',\n                    boxShadow: viewMode === 'list' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <List size={20} color={viewMode === 'list' ? '#2563EB' : '#6B7280'} />\n                </button>\n                <button\n                  onClick={() => onViewModeChange('grid')}\n                  style={{\n                    padding: '0.5rem',\n                    borderRadius: '0.25rem',\n                    border: 'none',\n                    backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\n                    boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default PlanningFilters;","// src/components/planning/PlanningStatistics.js\nimport React from 'react';\nimport { Users, Calendar, Clock } from 'lucide-react';\n\nconst PlanningStatistics = ({\n  medecins,\n  periodeSaisie,\n  planning,\n  publishedPlanning\n}) => {\n  return (\n    <div style={{\n      display: 'grid',\n      gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\n      gap: '1rem',\n      marginBottom: '2rem'\n    }}>\n      {/* Nombre de médecins */}\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.5rem',\n        padding: '1.5rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.75rem',\n          marginBottom: '0.5rem'\n        }}>\n          <div style={{\n            backgroundColor: '#EBF5FF',\n            borderRadius: '0.5rem',\n            padding: '0.75rem',\n            color: '#2563EB'\n          }}>\n            <Users size={24} />\n          </div>\n          <h2 style={{\n            fontSize: '1rem',\n            fontWeight: '600',\n            color: '#374151'\n          }}>\n            Médecins disponibles\n          </h2>\n        </div>\n        <p style={{\n          fontSize: '1.5rem',\n          fontWeight: 'bold',\n          color: '#2563EB'\n        }}>\n          {medecins.length}\n        </p>\n      </div>\n\n      {/* Période de saisie */}\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.5rem',\n        padding: '1.5rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.75rem',\n          marginBottom: '0.5rem'\n        }}>\n          <div style={{\n            backgroundColor: '#F0FDF4',\n            borderRadius: '0.5rem',\n            padding: '0.75rem',\n            color: '#16A34A'\n          }}>\n            <Clock size={24} />\n          </div>\n          <h2 style={{\n            fontSize: '1rem',\n            fontWeight: '600',\n            color: '#374151'\n          }}>\n            Période de saisie\n          </h2>\n        </div>\n        <p style={{\n          fontSize: '0.875rem',\n          color: periodeSaisie ? '#16A34A' : '#DC2626',\n          fontWeight: '500'\n        }}>\n          {periodeSaisie ? (\n            `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\n          ) : (\n            'Aucune période définie'\n          )}\n        </p>\n      </div>\n\n      {/* État du planning */}\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.5rem',\n        padding: '1.5rem',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n      }}>\n        <div style={{\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.75rem',\n          marginBottom: '0.5rem'\n        }}>\n          <div style={{\n            backgroundColor: '#FFF7ED',\n            borderRadius: '0.5rem',\n            padding: '0.75rem',\n            color: '#EA580C'\n          }}>\n            <Calendar size={24} />\n          </div>\n          <h2 style={{\n            fontSize: '1rem',\n            fontWeight: '600',\n            color: '#374151'\n          }}>\n            État du planning\n          </h2>\n        </div>\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          gap: '0.25rem'\n        }}>\n          <p style={{\n            fontSize: '0.875rem',\n            color: planning ? '#16A34A' : '#DC2626',\n            fontWeight: '500'\n          }}>\n            {planning ? 'Planning généré' : 'Aucun planning généré'}\n          </p>\n          <p style={{\n            fontSize: '0.875rem',\n            color: publishedPlanning ? '#16A34A' : '#DC2626',\n            fontWeight: '500'\n          }}>\n            {publishedPlanning ? 'Planning publié' : 'Non publié'}\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default PlanningStatistics;","// src/utils/planningUtils.js\n\nexport const sortMedecinsByPreference = (medecins, desiderata, date, creneauId) => {\n    // Organise les médecins par leurs préférences pour un créneau donné\n    const sorted = {\n      oui: [],\n      possible: [],\n      nonSpecifie: [],\n      non: []\n    };\n  \n    medecins.forEach(medecin => {\n      const preference = desiderata\n        .find(d => d.userId === medecin.id)?.desiderata[date]?.[creneauId];\n  \n      switch(preference) {\n        case 'Oui':\n          sorted.oui.push(medecin);\n          break;\n        case 'Possible':\n          sorted.possible.push(medecin);\n          break;\n        case 'Non':\n          sorted.non.push(medecin);\n          break;\n        default:\n          sorted.nonSpecifie.push(medecin);\n      }\n    });\n  \n    return {\n      ...sorted,\n      all: [\n        ...sorted.oui,\n        ...sorted.possible,\n        ...sorted.nonSpecifie,\n        ...sorted.non\n      ]\n    };\n  };\n  \n  export const getPreferenceStyle = (preference) => {\n    switch(preference) {\n      case 'Oui':\n        return { color: '#059669', backgroundColor: '#ECFDF5' };\n      case 'Possible':\n        return { color: '#D97706', backgroundColor: '#FFFBEB' };\n      case 'Non':\n        return { color: '#DC2626', backgroundColor: '#FEF2F2' };\n      default:\n        return { color: '#6B7280', backgroundColor: 'transparent' };\n    }\n  };\n  \n  export const compterGardesParMedecin = (planning, medecinId) => {\n    let count = 0;\n    \n    if (!planning || !planning.planning) return 0;\n    \n    Object.values(planning.planning).forEach(joursCreneaux => {\n      Object.values(joursCreneaux).forEach(medecins => {\n        if (medecins.includes(medecinId)) count++;\n      });\n    });\n    \n    return count;\n  };\n  \n  export const getMedecinPreference = (desiderata, medecinId, date, creneauId) => {\n    return desiderata\n      .find(d => d.userId === medecinId)?.desiderata[date]?.[creneauId] || '';\n  };\n  \n  export const getNombreGardesSouhaitees = (desiderata, medecinId) => {\n    const medecinDesiderata = desiderata.find(d => d.userId === medecinId);\n    return medecinDesiderata?.nombreGardesSouhaitees || 0;\n  };","// src/components/planning/PlanningTable.js\nimport React from 'react';\nimport { \n  sortMedecinsByPreference, \n  getPreferenceStyle, \n  getMedecinPreference \n} from '../../utils/planningUtils';\n\n// Composant pour le sélecteur de médecin\n// Modifiez la partie MedecinSelect comme suit :\nconst MedecinSelect = ({ \n    date, \n    creneauId, \n    index, \n    currentValue, \n    medecins, \n    desiderata, \n    selectedMedecin, // On garde ce paramètre pour l'affichage des infos mais pas pour le filtrage\n    onChange \n  }) => {\n    // Trier les médecins selon leurs préférences\n    const sortedMedecins = sortMedecinsByPreference(medecins, desiderata, date, creneauId);\n  \n    return (\n      <select\n        value={currentValue || ''}\n        onChange={(e) => onChange(date, creneauId, index, e.target.value)}\n        style={{\n          width: '100%',\n          padding: '0.5rem',\n          borderRadius: '0.375rem',\n          border: '1px solid #D1D5DB',\n          backgroundColor: 'white',\n          fontSize: '0.875rem'\n        }}\n      >\n        <option value=\"\">Non assigné</option>\n        {sortedMedecins.all.map(medecin => {\n          const preference = getMedecinPreference(desiderata, medecin.id, date, creneauId);\n          const style = getPreferenceStyle(preference);\n          const isSelected = medecin.id === selectedMedecin;\n            \n          return (\n            <option\n              key={medecin.id}\n              value={medecin.id}\n              style={{\n                ...style,\n                fontWeight: isSelected ? 'bold' : 'normal'\n              }}\n            >\n              Dr. {medecin.prenom} {medecin.nom}\n              {preference ? ` (${preference})` : ''}\n              {isSelected ? ' ★' : ''}\n            </option>\n          );\n        })}\n      </select>\n    );\n  };\n\n// Composant pour l'affichage des préférences\nconst PreferenceIndicator = ({ preference }) => {\n  if (!preference) return null;\n  \n  const style = getPreferenceStyle(preference);\n  return (\n    <div style={{\n      position: 'absolute',\n      top: '0.25rem',\n      right: '0.25rem',\n      padding: '0.25rem 0.5rem',\n      borderRadius: '0.25rem',\n      fontSize: '0.75rem',\n      ...style\n    }}>\n      {preference}\n    </div>\n  );\n};\n\n// Composant principal PlanningTable\nconst PlanningTable = ({\n  planning,\n  creneaux,\n  medecins,\n  desiderata,\n  selectedMedecin,\n  editMode,\n  onMedecinChange,\n  dateFilter,\n  creneauFilter\n}) => {\n  // Fonction pour formatter la date\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\n  };\n\n  // Fonction pour vérifier si c'est un week-end\n  const isWeekend = (dateString) => {\n    const date = new Date(dateString);\n    return date.getDay() === 0 || date.getDay() === 6;\n  };\n\n  // Filtrer les dates selon les critères\n  const getFilteredDates = () => {\n    if (!planning || !planning.planning) return [];\n\n    return Object.keys(planning.planning)\n      .filter(date => \n        (!dateFilter.start || date >= dateFilter.start) &&\n        (!dateFilter.end || date <= dateFilter.end)\n      )\n      .sort();\n  };\n\n  // Filtrer les créneaux selon les critères\n  const getFilteredCreneaux = () => {\n    return creneauFilter === 'all' \n      ? creneaux \n      : creneaux.filter(c => c.id === creneauFilter);\n  };\n\n  return (\n    <div style={{\n      backgroundColor: 'white',\n      borderRadius: '0.5rem',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      overflowX: 'auto'\n    }}>\n      <table style={{\n        width: '100%',\n        borderCollapse: 'collapse',\n        fontSize: '0.875rem'\n      }}>\n        <thead>\n          <tr>\n            <th style={{\n              padding: '1rem',\n              backgroundColor: '#F9FAFB',\n              borderBottom: '1px solid #E5E7EB',\n              textAlign: 'left',\n              fontWeight: '600',\n              position: 'sticky',\n              left: 0,\n              zIndex: 10,\n              backgroundColor: 'white'\n            }}>\n              Date\n            </th>\n            {getFilteredCreneaux().map(creneau => (\n              <th key={creneau.id} style={{\n                padding: '1rem',\n                backgroundColor: '#F9FAFB',\n                borderBottom: '1px solid #E5E7EB',\n                textAlign: 'left',\n                fontWeight: '600',\n                minWidth: '200px'\n              }}>\n                <div>{creneau.label}</div>\n                <div style={{\n                  fontSize: '0.75rem',\n                  color: '#6B7280',\n                  fontWeight: 'normal'\n                }}>\n                  {creneau.hours}\n                </div>\n                <div style={{\n                  fontSize: '0.75rem',\n                  color: '#6B7280',\n                  fontWeight: 'normal'\n                }}>\n                  {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\n                </div>\n              </th>\n            ))}\n          </tr>\n        </thead>\n        <tbody>\n          {getFilteredDates().map(date => (\n            <tr key={date} style={{\n              backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\n            }}>\n              <td style={{\n                padding: '1rem',\n                borderBottom: '1px solid #E5E7EB',\n                fontWeight: '500',\n                position: 'sticky',\n                left: 0,\n                backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\n                zIndex: 10\n              }}>\n                {formatDate(date)}\n              </td>\n              {getFilteredCreneaux().map(creneau => (\n                <td key={`${date}-${creneau.id}`} style={{\n                    padding: '1rem',\n                    borderBottom: '1px solid #E5E7EB',\n                    position: 'relative',\n                    backgroundColor: selectedMedecin !== 'all' ? \n                      (() => {\n                        const preference = getMedecinPreference(\n                          desiderata,\n                          selectedMedecin,\n                          date,\n                          creneau.id\n                        );\n                        return preference ? getPreferenceStyle(preference).backgroundColor : 'transparent';\n                      })() : 'transparent'\n                  }}>\n                    {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\n                      <>\n                        {selectedMedecin !== 'all' && (\n                          <PreferenceIndicator \n                            preference={getMedecinPreference(\n                              desiderata,\n                              selectedMedecin,\n                              date,\n                              creneau.id\n                            )}\n                          />\n                        )}\n                        <div style={{\n                          display: 'flex',\n                          flexDirection: 'column',\n                          gap: '0.5rem'\n                        }}>\n                          {Array.from({ length: creneau.medecins }).map((_, index) => (\n                            <div key={index}>\n                              {editMode ? (\n                                <MedecinSelect\n                                  date={date}\n                                  creneauId={creneau.id}\n                                  index={index}\n                                  currentValue={planning.planning[date]?.[creneau.id]?.[index]}\n                                  medecins={medecins}\n                                  desiderata={desiderata}\n                                  selectedMedecin={selectedMedecin}\n                                  onChange={onMedecinChange}\n                                />\n                              ) : (\n                                <div style={{\n                                  padding: '0.5rem',\n                                  backgroundColor: '#F3F4F6',\n                                  borderRadius: '0.375rem',\n                                  fontSize: '0.875rem'\n                                }}>\n                                  {planning.planning[date]?.[creneau.id]?.[index] ? (\n                                    (() => {\n                                      const medecinId = planning.planning[date][creneau.id][index];\n                                      const medecin = medecins.find(m => m.id === medecinId);\n                                      const preference = getMedecinPreference(\n                                        desiderata,\n                                        medecinId,\n                                        date,\n                                        creneau.id\n                                      );\n                                      const style = getPreferenceStyle(preference);\n                                      const isSelected = medecinId === selectedMedecin;\n                                      \n                                      return (\n                                        <span style={{\n                                          ...style,\n                                          fontWeight: isSelected ? 'bold' : 'normal'\n                                        }}>\n                                          Dr. {medecin ? \n                                            `${medecin.prenom} ${medecin.nom}` : \n                                            'Médecin non trouvé'}\n                                          {isSelected ? ' ★' : ''}\n                                        </span>\n                                      );\n                                    })()\n                                  ) : (\n                                    'Non assigné'\n                                  )}\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                      </>\n                    )}\n                  </td>\n              ))}\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  );\n};\n\nexport default PlanningTable;","// src/components/MedecinInfoPanel.js\nimport React from 'react';\nimport { User, Calendar } from 'lucide-react';\nimport { compterGardesParMedecin, getNombreGardesSouhaitees } from '../../utils/planningUtils';\n\nconst MedecinInfoPanel = ({ medecin, planning, desiderata }) => {\n  if (!medecin) return null;\n\n  const gardesAttribuees = compterGardesParMedecin(planning, medecin.id);\n  const gardesSouhaitees = getNombreGardesSouhaitees(desiderata, medecin.id);\n\n  return (\n    <div style={{\n      backgroundColor: 'white',\n      borderRadius: '8px',\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n      padding: '1.5rem',\n      marginBottom: '1.5rem'\n    }}>\n      <div style={{\n        display: 'flex',\n        alignItems: 'center',\n        gap: '1rem',\n        marginBottom: '1rem'\n      }}>\n        <div style={{\n          backgroundColor: '#EBF5FF',\n          borderRadius: '50%',\n          padding: '0.75rem'\n        }}>\n          <User size={24} color=\"#2563EB\" />\n        </div>\n        <div>\n          <h3 style={{\n            fontSize: '1.25rem',\n            fontWeight: 'bold',\n            color: '#1F2937',\n            margin: 0\n          }}>\n            Dr. {medecin.prenom} {medecin.nom}\n          </h3>\n        </div>\n      </div>\n\n      <div style={{\n        display: 'grid',\n        gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))',\n        gap: '1rem'\n      }}>\n        <div style={{\n          padding: '1rem',\n          backgroundColor: '#F3F4F6',\n          borderRadius: '8px'\n        }}>\n          <div style={{\n            fontSize: '0.875rem',\n            color: '#6B7280',\n            marginBottom: '0.5rem'\n          }}>\n            Gardes souhaitées\n          </div>\n          <div style={{\n            fontSize: '1.5rem',\n            fontWeight: 'bold',\n            color: '#2563EB'\n          }}>\n            {gardesSouhaitees}\n          </div>\n        </div>\n\n        <div style={{\n          padding: '1rem',\n          backgroundColor: '#F3F4F6',\n          borderRadius: '8px'\n        }}>\n          <div style={{\n            fontSize: '0.875rem',\n            color: '#6B7280',\n            marginBottom: '0.5rem'\n          }}>\n            Gardes attribuées\n          </div>\n          <div style={{\n            fontSize: '1.5rem',\n            fontWeight: 'bold',\n            color: gardesAttribuees > gardesSouhaitees ? '#DC2626' : '#059669'\n          }}>\n            {gardesAttribuees}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default MedecinInfoPanel;","// src/components/planning/modals/ConfirmationModal.js\nimport React from 'react';\nimport { AlertTriangle, Check } from 'lucide-react';\n\nconst ConfirmationModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  title,\n  message,\n  confirmLabel = 'Confirmer',\n  cancelLabel = 'Annuler',\n  icon: Icon = AlertTriangle,\n  iconColor = '#DC2626',\n  iconBgColor = '#FEE2E2',\n  confirmButtonColor = '#DC2626'\n}) => {\n  if (!isOpen) return null;\n\n  return (\n    <div style={{\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      right: 0,\n      bottom: 0,\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      zIndex: 50\n    }}>\n      <div style={{\n        backgroundColor: 'white',\n        borderRadius: '0.5rem',\n        padding: '2rem',\n        maxWidth: '28rem',\n        width: '90%',\n        textAlign: 'center'\n      }}>\n        <div style={{\n          width: '3rem',\n          height: '3rem',\n          backgroundColor: iconBgColor,\n          borderRadius: '50%',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          margin: '0 auto 1rem'\n        }}>\n          <Icon size={24} color={iconColor} />\n        </div>\n\n        <h2 style={{\n          fontSize: '1.25rem',\n          fontWeight: 'bold',\n          color: '#111827',\n          marginBottom: '0.5rem'\n        }}>\n          {title}\n        </h2>\n\n        <p style={{\n          color: '#6B7280',\n          marginBottom: '1.5rem'\n        }}>\n          {message}\n        </p>\n\n        <div style={{\n          display: 'flex',\n          gap: '1rem',\n          justifyContent: 'center'\n        }}>\n          <button\n            onClick={onClose}\n            style={{\n              padding: '0.5rem 1rem',\n              borderRadius: '0.375rem',\n              border: '1px solid #D1D5DB',\n              backgroundColor: 'white',\n              color: '#374151',\n              cursor: 'pointer'\n            }}\n          >\n            {cancelLabel}\n          </button>\n          <button\n            onClick={onConfirm}\n            style={{\n              padding: '0.5rem 1rem',\n              borderRadius: '0.375rem',\n              border: 'none',\n              backgroundColor: confirmButtonColor,\n              color: 'white',\n              cursor: 'pointer'\n            }}\n          >\n            {confirmLabel}\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConfirmationModal;","// src/components/planning/modals/GeneratePlanningModal.js\nimport React from 'react';\nimport { RefreshCcw } from 'lucide-react';\nimport ConfirmationModal from './ConfirmationModal';\n\nconst GeneratePlanningModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  planning\n}) => {\n  return (\n    <ConfirmationModal\n      isOpen={isOpen}\n      onClose={onClose}\n      onConfirm={onConfirm}\n      title={planning ? 'Regénérer le planning' : 'Générer le planning'}\n      message={planning\n        ? 'Êtes-vous sûr de vouloir regénérer le planning ? Cette action remplacera le planning actuel.'\n        : 'Êtes-vous sûr de vouloir générer un nouveau planning ?'}\n      icon={RefreshCcw}\n      iconColor=\"#9333EA\"\n      iconBgColor=\"#F3E8FF\"\n      confirmButtonColor=\"#9333EA\"\n      confirmLabel=\"Générer\"\n    />\n  );\n};\n\nexport default GeneratePlanningModal;","// src/components/planning/modals/PublishPlanningModal.js\nimport React from 'react';\nimport { Upload } from 'lucide-react';\nimport ConfirmationModal from './ConfirmationModal';\n\nconst PublishPlanningModal = ({\n  isOpen,\n  onClose,\n  onConfirm,\n  publishedPlanning\n}) => {\n  return (\n    <ConfirmationModal\n      isOpen={isOpen}\n      onClose={onClose}\n      onConfirm={onConfirm}\n      title=\"Publier le planning\"\n      message={publishedPlanning\n        ? 'Cette action mettra à jour le planning publié. Les médecins verront les changements immédiatement.'\n        : 'Cette action publiera le planning et le rendra visible pour tous les médecins.'}\n      icon={Upload}\n      iconColor=\"#059669\"\n      iconBgColor=\"#ECFDF5\"\n      confirmButtonColor=\"#059669\"\n      confirmLabel=\"Confirmer la publication\"\n    />\n  );\n};\n\nexport default PublishPlanningModal;","// src/components/planning/modals/DiscardChangesModal.js\nimport React from 'react';\nimport { AlertTriangle } from 'lucide-react';\nimport ConfirmationModal from './ConfirmationModal';\n\nconst DiscardChangesModal = ({\n  isOpen,\n  onClose,\n  onConfirm\n}) => {\n  return (\n    <ConfirmationModal\n      isOpen={isOpen}\n      onClose={onClose}\n      onConfirm={onConfirm}\n      title=\"Changements non sauvegardés\"\n      message=\"Vous avez des modifications non sauvegardées. Voulez-vous vraiment quitter le mode édition ? Les changements seront perdus.\"\n      icon={AlertTriangle}\n      iconColor=\"#DC2626\"\n      iconBgColor=\"#FEE2E2\"\n      confirmButtonColor=\"#DC2626\"\n      confirmLabel=\"Abandonner les changements\"\n      cancelLabel=\"Continuer l'édition\"\n    />\n  );\n};\n\nexport default DiscardChangesModal;","// src/components/planning/GestionPlanning.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../../firebase';\nimport { getUser, getMedecins } from '../../services/userService';\nimport { \n  getLatestPlanning, \n  savePlanning, \n  updatePlanning, \n  getDesiderataForPeriod, \n  publishPlanning, \n  getPublishedPlanning, \n  getPeriodeSaisie \n} from '../../services/planningService';\nimport { genererPlanning, creneaux } from '../../utils/planningGenerator';\nimport { AlertTriangle, Check } from 'lucide-react';\n\n// Import des sous-composants\nimport PlanningHeader from './PlanningHeader';\nimport PlanningFilters from './PlanningFilters';\nimport PlanningStatistics from './PlanningStatistics';\nimport PlanningTable from './PlanningTable';\nimport MedecinInfoPanel from './MedecinInfoPanel';\nimport GeneratePlanningModal from './modals/GeneratePlanningModal';\nimport PublishPlanningModal from './modals/PublishPlanningModal';\nimport DiscardChangesModal from './modals/DiscardChangesModal';\n\nfunction GestionPlanning({ isAdmin = true }) {\n  // États pour les données\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\n  const [planning, setPlanning] = useState(null);\n  const [publishedPlanning, setPublishedPlanning] = useState(null);\n  const [medecins, setMedecins] = useState([]);\n  const [desiderata, setDesiderata] = useState([]);\n\n  // États pour l'interface utilisateur\n  const [editMode, setEditMode] = useState(false);\n  const [modified, setModified] = useState(false);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n\n  // États pour les filtres\n  const [showFilters, setShowFilters] = useState(false);\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' });\n  const [creneauFilter, setCreneauFilter] = useState('all');\n  const [selectedMedecin, setSelectedMedecin] = useState('all');\n  const [viewMode, setViewMode] = useState('list');\n\n  // États pour les modales\n  const [showGenerateConfirm, setShowGenerateConfirm] = useState(false);\n  const [showPublishConfirm, setShowPublishConfirm] = useState(false);\n  const [showDiscardChanges, setShowDiscardChanges] = useState(false);\n\n  const history = useHistory();\n\n  // Effet pour charger les données initiales\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const authUser = auth.currentUser;\n        if (!authUser) {\n          history.push('/');\n          return;\n        }\n\n        const userData = await getUser(authUser.uid);\n        if (!userData || userData.role !== 'admin') {\n          setError('Accès non autorisé');\n          history.push('/');\n          return;\n        }\n\n        // Chargement des données de base\n        const [periode, medecinsList, latestPlan, publishedPlan] = await Promise.all([\n          getPeriodeSaisie(),\n          getMedecins(),\n          getLatestPlanning(),\n          getPublishedPlanning()\n        ]);\n\n        setPeriodeSaisie(periode);\n        setMedecins(medecinsList);\n\n        if (latestPlan) {\n          setPlanning(latestPlan);\n          setDateFilter({\n            start: latestPlan.startDate.split('T')[0],\n            end: latestPlan.endDate.split('T')[0]\n          });\n        }\n\n        setPublishedPlanning(publishedPlan);\n\n        // Charger les desiderata si une période est définie\n        if (periode) {\n          const desiderataData = await getDesiderataForPeriod(\n            periode.startDate,\n            periode.endDate\n          );\n          setDesiderata(desiderataData);\n        }\n\n      } catch (error) {\n        console.error('Erreur:', error);\n        setError('Erreur lors du chargement des données');\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchData();\n  }, [history]);\n\n  // Gestion des notifications\n  const showNotification = (message, isError = false) => {\n    if (isError) {\n      setError(message);\n      setTimeout(() => setError(null), 5000);\n    } else {\n      setSuccess(message);\n      setTimeout(() => setSuccess(null), 5000);\n    }\n  };\n\n  // Handlers pour les actions principales\n  const handleGeneratePlanning = async () => {\n    setLoading(true);\n    try {\n      if (!periodeSaisie) {\n        throw new Error('Période de saisie non définie');\n      }\n\n      const newPlanningData = await genererPlanning(\n        periodeSaisie.startDate, \n        periodeSaisie.endDate\n      );\n\n      if (planning && planning.id) {\n        const updatedPlanning = { \n          ...planning, \n          planning: newPlanningData \n        };\n        await updatePlanning(planning.id, updatedPlanning);\n        setPlanning(updatedPlanning);\n      } else {\n        const savedPlanningId = await savePlanning({\n          planning: newPlanningData,\n          startDate: periodeSaisie.startDate,\n          endDate: periodeSaisie.endDate\n        });\n        setPlanning({ \n          id: savedPlanningId, \n          planning: newPlanningData \n        });\n      }\n\n      showNotification('Planning généré avec succès');\n      setModified(false);\n      setShowGenerateConfirm(false);\n    } catch (error) {\n      console.error(\"Erreur lors de la génération du planning:\", error);\n      showNotification(\"Erreur lors de la génération du planning\", true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handlePublishPlanning = async () => {\n    setLoading(true);\n    try {\n      if (!planning || !planning.id) {\n        throw new Error('Aucun planning à publier');\n      }\n\n      await publishPlanning(planning.id);\n      const updatedPublishedPlanning = await getPublishedPlanning();\n      setPublishedPlanning(updatedPublishedPlanning);\n      \n      showNotification('Planning publié avec succès');\n      setShowPublishConfirm(false);\n    } catch (error) {\n      console.error(\"Erreur lors de la publication:\", error);\n      showNotification(\"Erreur lors de la publication du planning\", true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSaveChanges = async () => {\n    setLoading(true);\n    try {\n      if (!planning || !planning.id) {\n        throw new Error('Aucun planning à sauvegarder');\n      }\n\n      await updatePlanning(planning.id, planning);\n      showNotification('Modifications sauvegardées avec succès');\n      setModified(false);\n    } catch (error) {\n      console.error(\"Erreur lors de la sauvegarde:\", error);\n      showNotification(\"Erreur lors de la sauvegarde des modifications\", true);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleMedecinChange = (date, creneau, index, medecinId) => {\n    if (!editMode) return;\n\n    setPlanning(prev => {\n      const newPlanning = { ...prev };\n      if (!newPlanning.planning[date]) {\n        newPlanning.planning[date] = {};\n      }\n      if (!newPlanning.planning[date][creneau]) {\n        newPlanning.planning[date][creneau] = Array(\n          creneaux.find(c => c.id === creneau)?.medecins || 0\n        ).fill(null);\n      }\n      newPlanning.planning[date][creneau][index] = medecinId || null;\n      return newPlanning;\n    });\n    setModified(true);\n  };\n\n  const toggleEditMode = () => {\n    if (editMode && modified) {\n      setShowDiscardChanges(true);\n      return;\n    }\n    setEditMode(!editMode);\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        <div style={{\n          display: 'flex',\n          flexDirection: 'column',\n          alignItems: 'center',\n          gap: '1rem'\n        }}>\n          <div style={{\n            width: '2rem',\n            height: '2rem',\n            border: '2px solid #E5E7EB',\n            borderTop: '2px solid #2563EB',\n            borderRadius: '50%',\n            animation: 'spin 1s linear infinite'\n          }} />\n          <p style={{ color: '#6B7280' }}>Chargement...</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n      {/* En-tête */}\n      <PlanningHeader\n        editMode={editMode}\n        modified={modified}\n        onEditToggle={toggleEditMode}\n        onGenerateClick={() => setShowGenerateConfirm(true)}\n        onPublishClick={() => setShowPublishConfirm(true)}\n        onSaveChanges={handleSaveChanges}\n        onBackClick={() => history.push('/dashboard-admin')}\n        planning={planning}\n      />\n\n      {/* Notifications */}\n      {error && (\n        <div style={{\n          position: 'fixed',\n          top: '1rem',\n          right: '1rem',\n          backgroundColor: '#FEE2E2',\n          color: '#DC2626',\n          padding: '1rem',\n          borderRadius: '0.5rem',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          zIndex: 50,\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n        }}>\n          <AlertTriangle size={20} />\n          {error}\n        </div>\n      )}\n\n      {success && (\n        <div style={{\n          position: 'fixed',\n          top: '1rem',\n          right: '1rem',\n          backgroundColor: '#DCFCE7',\n          color: '#16A34A',\n          padding: '1rem',\n          borderRadius: '0.5rem',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          zIndex: 50,\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n        }}>\n          <Check size={20} />\n          {success}\n        </div>\n      )}\n\n      {/* Contenu principal */}\n      <main style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '6rem 1rem 2rem'\n      }}>\n        {/* Statistiques */}\n        <PlanningStatistics\n          medecins={medecins}\n          periodeSaisie={periodeSaisie}\n          planning={planning}\n          publishedPlanning={publishedPlanning}\n        />\n\n        {/* Filtres */}\n        <PlanningFilters\n          showFilters={showFilters}\n          onToggleFilters={() => setShowFilters(!showFilters)}\n          dateFilter={dateFilter}\n          onDateFilterChange={setDateFilter}\n          creneauFilter={creneauFilter}\n          onCreneauFilterChange={setCreneauFilter}\n          selectedMedecin={selectedMedecin}\n          onMedecinFilterChange={setSelectedMedecin}\n          viewMode={viewMode}\n          onViewModeChange={setViewMode}\n          medecins={medecins}\n          creneaux={creneaux}\n        />\n\n        {/* Panneau d'information médecin */}\n        {selectedMedecin !== 'all' && (\n          <MedecinInfoPanel\n            medecin={medecins.find(m => m.id === selectedMedecin)}\n            planning={planning}\n            desiderata={desiderata}\n          />\n        )}\n\n        {/* Table du planning */}\n        {planning && (\n          <PlanningTable\n            planning={planning}\n            creneaux={creneaux}\n            medecins={medecins}\n            desiderata={desiderata}\n            selectedMedecin={selectedMedecin}\n            editMode={editMode}\n            onMedecinChange={handleMedecinChange}\n            dateFilter={dateFilter}\n            creneauFilter={creneauFilter}\n          />\n        )}\n      </main>\n\n      {/* Modales */}\n      <GeneratePlanningModal\n        isOpen={showGenerateConfirm}\n        onClose={() => setShowGenerateConfirm(false)}\n        onConfirm={handleGeneratePlanning}\n        planning={planning}\n      />\n\n      <PublishPlanningModal\n        isOpen={showPublishConfirm}\n        onClose={() => setShowPublishConfirm(false)}\n        onConfirm={handlePublishPlanning}\n        publishedPlanning={publishedPlanning}\n      />\n\n      <DiscardChangesModal\n        isOpen={showDiscardChanges}\n        onClose={() => setShowDiscardChanges(false)}\n        onConfirm={() => {\n          setShowDiscardChanges(false);\n          setModified(false);\n          setEditMode(false);\n        }}\n      />\n    </div>\n  );\n}\n\nexport default GestionPlanning;","// src/components/GestionPeriodeSaisie.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getUser } from '../services/userService';\nimport { setPeriodeSaisie, getPeriodeSaisie } from '../services/planningService';\nimport { ArrowLeft, Calendar, Save, AlertTriangle, Check } from 'lucide-react';\n\nfunction GestionPeriodeSaisie() {\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const history = useHistory();\n\n  useEffect(() => {\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\n      if (authUser) {\n        try {\n          const userData = await getUser(authUser.uid);\n          if (userData.role !== 'admin') {\n            setError(\"Accès non autorisé\");\n            history.push('/');\n          } else {\n            setCurrentUser(userData);\n            const periode = await getPeriodeSaisie();\n            if (periode) {\n              setStartDate(periode.startDate.split('T')[0]);\n              setEndDate(periode.endDate.split('T')[0]);\n            }\n          }\n        } catch (error) {\n          console.error(\"Erreur lors de la récupération des données utilisateur:\", error);\n          setError(\"Erreur lors de la récupération des données utilisateur\");\n        }\n      } else {\n        history.push('/');\n      }\n      setLoading(false);\n    });\n\n    return () => unsubscribe();\n  }, [history]);\n\n  const showNotification = (message, isError = false) => {\n    if (isError) {\n      setError(message);\n      setTimeout(() => setError(null), 5000);\n    } else {\n      setSuccess(message);\n      setTimeout(() => setSuccess(null), 5000);\n    }\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      await setPeriodeSaisie(startDate, endDate);\n      showNotification('Période de saisie mise à jour avec succès! Les desiderata obsolètes ont été supprimés.');\n    } catch (error) {\n      console.error(\"Erreur lors de la mise à jour de la période de saisie:\", error);\n      showNotification(\"Une erreur est survenue lors de la mise à jour de la période de saisie\", true);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Chargement...\n      </div>\n    );\n  }\n\n  if (error && !currentUser) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6',\n        padding: '1rem'\n      }}>\n        <div style={{\n          backgroundColor: 'white',\n          padding: '2rem',\n          borderRadius: '0.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          maxWidth: '500px',\n          width: '100%',\n          textAlign: 'center'\n        }}>\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\n          <button\n            onClick={() => history.push('/dashboard-admin')}\n            style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#2563EB',\n              color: 'white',\n              borderRadius: '0.375rem',\n              border: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            <ArrowLeft size={18} />\n            Retour au tableau de bord\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n      {/* Menu fixe en haut */}\n      <nav style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n        borderBottom: '1px solid #e5e7eb',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        zIndex: 40\n      }}>\n        <div style={{\n          maxWidth: '1280px',\n          margin: '0 auto',\n          padding: '1rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          }}>\n            <button\n              onClick={() => history.push('/dashboard-admin')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4B5563',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                padding: '0.5rem'\n              }}\n            >\n              <ArrowLeft size={20} />\n              Retour\n            </button>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              color: '#2563EB',\n              fontWeight: 'bold'\n            }}>\n              <Calendar size={24} />\n              <span>Période de saisie</span>\n            </div>\n          </div>\n\n          <button\n            onClick={handleSubmit}\n            style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#2563EB',\n              color: 'white',\n              borderRadius: '0.375rem',\n              border: 'none',\n              cursor: 'pointer',\n              fontWeight: '500'\n            }}\n          >\n            <Save size={18} />\n            Enregistrer\n          </button>\n        </div>\n      </nav>\n\n      {/* Notifications */}\n      {error && (\n        <div style={{\n          position: 'fixed',\n          top: '1rem',\n          right: '1rem',\n          backgroundColor: '#FEE2E2',\n          color: '#DC2626',\n          padding: '1rem',\n          borderRadius: '0.5rem',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          zIndex: 50,\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n        }}>\n          <AlertTriangle size={20} />\n          {error}\n        </div>\n      )}\n\n      {success && (\n        <div style={{\n          position: 'fixed',\n          top: '1rem',\n          right: '1rem',\n          backgroundColor: '#DCFCE7',\n          color: '#16A34A',\n          padding: '1rem',\n          borderRadius: '0.5rem',\n          display: 'flex',\n          alignItems: 'center',\n          gap: '0.5rem',\n          zIndex: 50,\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\n        }}>\n          <Check size={20} />\n          {success}\n        </div>\n      )}\n\n      {/* Contenu principal */}\n      <main style={{\n        maxWidth: '1280px',\n        margin: '0 auto',\n        padding: '6rem 1rem 2rem'\n      }}>\n        {/* Carte explicative */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          marginBottom: '2rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        }}>\n          <h1 style={{\n            fontSize: '1.875rem',\n            fontWeight: 'bold',\n            color: '#1f2937',\n            marginBottom: '0.5rem'\n          }}>\n            Définir la période de saisie\n          </h1>\n          <p style={{ color: '#6b7280' }}>\n            Configurez la période pendant laquelle les médecins pourront saisir leurs desiderata. \n            Les desiderata en dehors de cette période seront automatiquement supprimés.\n          </p>\n        </div>\n\n        {/* Formulaire de sélection des dates */}\n        <div style={{\n          backgroundColor: 'white',\n          borderRadius: '0.5rem',\n          padding: '1.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\n        }}>\n          <form onSubmit={handleSubmit}>\n            <div style={{\n              display: 'grid',\n              gap: '1.5rem',\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\n            }}>\n              <div>\n                <label style={{\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                }}>\n                  Date de début\n                </label>\n                <input\n                  type=\"date\"\n                  value={startDate}\n                  onChange={(e) => setStartDate(e.target.value)}\n                  required\n                  style={{\n                    width: '100%',\n                    padding: '0.5rem',\n                    borderRadius: '0.375rem',\n                    border: '1px solid #D1D5DB',\n                    fontSize: '0.875rem'\n                  }}\n                />\n              </div>\n\n              <div>\n                <label style={{\n                  display: 'block',\n                  fontSize: '0.875rem',\n                  fontWeight: '500',\n                  color: '#374151',\n                  marginBottom: '0.5rem'\n                }}>\n                  Date de fin\n                </label>\n                <input\n                  type=\"date\"\n                  value={endDate}\n                  onChange={(e) => setEndDate(e.target.value)}\n                  required\n                  style={{\n                    width: '100%',\n                    padding: '0.5rem',\n                    borderRadius: '0.375rem',\n                    border: '1px solid #D1D5DB',\n                    fontSize: '0.875rem'\n                  }}\n                />\n              </div>\n            </div>\n\n            {/* Message d'information */}\n            <div style={{\n              backgroundColor: '#FFF7ED',\n              border: '1px solid #FB923C',\n              borderRadius: '0.375rem',\n              padding: '1rem',\n              marginTop: '1.5rem',\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.75rem'\n            }}>\n              <AlertTriangle size={20} color=\"#FB923C\" />\n              <p style={{\n                fontSize: '0.875rem',\n                color: '#9A3412',\n                margin: 0\n              }}>\n                Attention : La modification de la période de saisie entrainera la suppression des desiderata obsolètes.\n              </p>\n            </div>\n          </form>\n        </div>\n      </main>\n    </div>\n  );\n}\n\nexport default GestionPeriodeSaisie;","// src/components/PlanningVisualisation.js\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { auth } from '../firebase';\nimport { getUser } from '../services/userService';\nimport { \n  getPublishedPlanning, \n  getPeriodeSaisie \n} from '../services/planningService';\nimport { \n  Calendar, \n  ArrowLeft, \n  Download,\n  Filter,\n  ChevronDown,\n  ChevronUp,\n  Eye,\n  EyeOff\n} from 'lucide-react';\nimport { createEvents } from 'ics';\n\nconst creneaux = [\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2, color: '#E3F2FD', textColor: '#1E88E5' },\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3, color: '#E8F5E9', textColor: '#43A047' },\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true, color: '#FFF3E0', textColor: '#FB8C00' },\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3, color: '#F3E5F5', textColor: '#8E24AA' },\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1, color: '#FFF3E0', textColor: '#FB8C00' },\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3, color: '#E1F5FE', textColor: '#039BE5' }\n];\n\nfunction PlanningVisualisation() {\n  // États\n  const [planning, setPlanning] = useState(null);\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [viewMode, setViewMode] = useState('all'); // 'all' ou 'personal'\n  const [showFilters, setShowFilters] = useState(false);\n  const [startDate, setStartDate] = useState('');\n  const [endDate, setEndDate] = useState('');\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\n\n  const history = useHistory();\n  // Effets\n useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const authUser = auth.currentUser;\n        if (!authUser) {\n          history.push('/');\n          return;\n        }\n \n        const userData = await getUser(authUser.uid);\n        if (!userData || userData.role !== 'medecin') {\n          setError(\"Accès non autorisé\");\n          history.push('/');\n          return;\n        }\n \n        setUser(userData);\n \n        const periode = await getPeriodeSaisie();\n        if (!periode) {\n          setError(\"Aucune période de saisie n'a été définie\");\n          return;\n        }\n        setPeriodeSaisie(periode);\n        setStartDate(periode.startDate.split('T')[0]);\n        setEndDate(periode.endDate.split('T')[0]);\n \n        const publishedPlan = await getPublishedPlanning();\n        if (publishedPlan) {\n          setPlanning(publishedPlan);\n        } else {\n          setError(\"Aucun planning n'a été publié\");\n        }\n      } catch (error) {\n        console.error(\"Erreur:\", error);\n        setError(\"Une erreur est survenue lors du chargement des données\");\n      } finally {\n        setLoading(false);\n      }\n    };\n \n    fetchData();\n  }, [history]);\n \n  const exportToICS = () => {\n    if (!planning || !planning.planning) return;\n \n    const events = [];\n    const sortedDates = Object.keys(planning.planning).sort((a, b) => new Date(a) - new Date(b));\n \n    sortedDates.forEach(date => {\n      creneaux.forEach(creneau => {\n        if (planning.planning[date][creneau.id]) {\n          planning.planning[date][creneau.id].forEach((medecinId, index) => {\n            if (medecinId === user.id) {\n              const startDate = new Date(date);\n              const endDate = new Date(date);\n              let startHour, endHour;\n \n              switch (creneau.id) {\n                case 'QUART_1': startHour = 1; endHour = 7; break;\n                case 'QUART_2': startHour = 7; endHour = 13; break;\n                case 'RENFORT_1': startHour = 10; endHour = 13; break;\n                case 'QUART_3': startHour = 13; endHour = 19; break;\n                case 'RENFORT_2': startHour = 20; endHour = 24; break;\n                case 'QUART_4': startHour = 19; endHour = 25; break;\n                default: startHour = 0; endHour = 0; break; // Ajout du case default\n              }\n \n              startDate.setHours(startHour, 0, 0);\n              endDate.setHours(endHour, 0, 0);\n \n              if (endHour === 25) {\n                endDate.setDate(endDate.getDate() + 1);\n                endDate.setHours(1, 0, 0);\n              }\n \n              events.push({\n                start: [startDate.getFullYear(), startDate.getMonth() + 1, startDate.getDate(), startDate.getHours(), startDate.getMinutes()],\n                end: [endDate.getFullYear(), endDate.getMonth() + 1, endDate.getDate(), endDate.getHours(), endDate.getMinutes()],\n                title: `Garde - ${creneau.label}`,\n                description: `Garde médicale - ${creneau.label}`,\n                location: 'Hôpital'\n              });\n            }\n          });\n        }\n      });\n    });\n \n    createEvents(events, (error, value) => {\n      if (error) {\n        console.error(error);\n        alert('Une erreur est survenue lors de la création du fichier ICS');\n        return;\n      }\n      const blob = new Blob([value], { type: 'text/calendar;charset=utf-8' });\n      const link = document.createElement('a');\n      link.href = URL.createObjectURL(blob);\n      link.download = 'gardes.ics';\n      document.body.appendChild(link);\n      link.click();\n      document.body.removeChild(link);\n    });\n  };\n \n  // Fonctions utilitaires\n  const formatDate = (dateString) => {\n    const date = new Date(dateString);\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\n  };\n \n  const isWeekend = (dateString) => {\n    const date = new Date(dateString);\n    return date.getDay() === 0 || date.getDay() === 6;\n  };\n\n   // Rendu conditionnel pour chargement et erreurs\n if (loading) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Chargement...\n      </div>\n    );\n  }\n \n  if (error) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        flexDirection: 'column',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6',\n        padding: '1rem'\n      }}>\n        <div style={{\n          backgroundColor: 'white',\n          padding: '2rem',\n          borderRadius: '0.5rem',\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n          maxWidth: '500px',\n          width: '100%',\n          textAlign: 'center'\n        }}>\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\n          <button\n            onClick={() => history.push('/dashboard-medecin')}\n            style={{\n              display: 'inline-flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              padding: '0.5rem 1rem',\n              backgroundColor: '#2563EB',\n              color: 'white',\n              borderRadius: '0.375rem',\n              border: 'none',\n              cursor: 'pointer'\n            }}\n          >\n            <ArrowLeft size={18} />\n            Retour au tableau de bord\n          </button>\n        </div>\n      </div>\n    );\n  }\n \n  if (!planning || !planning.planning) {\n    return (\n      <div style={{\n        minHeight: '100vh',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n        backgroundColor: '#f3f4f6'\n      }}>\n        Aucun planning disponible\n      </div>\n    );\n  }\n \n  // Filtrage des dates en fonction de la période sélectionnée\n  const filteredDates = Object.keys(planning.planning)\n    .filter(date => date >= startDate && date <= endDate)\n    .sort((a, b) => new Date(a) - new Date(b));\n \n  return (\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\n      {/* Menu fixe en haut */}\n      <nav style={{\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\n        borderBottom: '1px solid #e5e7eb',\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n        zIndex: 40\n      }}>\n        <div style={{\n          maxWidth: '1280px',\n          margin: '0 auto',\n          padding: '1rem',\n          display: 'flex',\n          justifyContent: 'space-between',\n          alignItems: 'center'\n        }}>\n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          }}>\n            <button\n              onClick={() => history.push('/dashboard-medecin')}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                color: '#4B5563',\n                border: 'none',\n                background: 'none',\n                cursor: 'pointer',\n                padding: '0.5rem'\n              }}\n            >\n              <ArrowLeft size={20} />\n              Retour\n            </button>\n            <div style={{\n              display: 'flex',\n              alignItems: 'center',\n              gap: '0.5rem',\n              color: '#2563EB',\n              fontWeight: 'bold'\n            }}>\n              <Calendar size={24} />\n              <span>Planning des gardes</span>\n            </div>\n          </div>\n \n          <div style={{\n            display: 'flex',\n            alignItems: 'center',\n            gap: '1rem'\n          }}>\n            <button\n              onClick={exportToICS}\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n                gap: '0.5rem',\n                padding: '0.5rem 1rem',\n                backgroundColor: '#2563EB',\n                color: 'white',\n                borderRadius: '0.375rem',\n                border: 'none',\n                cursor: 'pointer',\n                fontSize: '0.875rem'\n              }}\n            >\n              <Download size={18} />\n              Exporter (ICS)\n            </button>\n          </div>\n        </div>\n      </nav>\n\n       {/* Contenu principal */}\n <main style={{\n   maxWidth: '1280px',\n   margin: '0 auto',\n   padding: '5rem 1rem 2rem',\n }}>\n   {/* Section des filtres */}\n   <div style={{\n     backgroundColor: 'white',\n     borderRadius: '8px',\n     boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n     marginBottom: '2rem'\n   }}>\n     {/* En-tête des filtres */}\n     <button\n       onClick={() => setShowFilters(!showFilters)}\n       style={{\n         width: '100%',\n         padding: '1rem 1.5rem',\n         display: 'flex',\n         justifyContent: 'space-between',\n         alignItems: 'center',\n         border: 'none',\n         background: 'none',\n         cursor: 'pointer',\n         borderBottom: showFilters ? '1px solid #E5E7EB' : 'none'\n       }}\n     >\n       <div style={{ \n         display: 'flex', \n         alignItems: 'center', \n         gap: '0.5rem',\n         color: '#374151'\n       }}>\n         <Filter size={20} />\n         <span style={{ fontWeight: '500' }}>Filtres</span>\n       </div>\n       {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\n     </button>\n\n     {/* Contenu des filtres */}\n     {showFilters && (\n       <div style={{ padding: '1.5rem' }}>\n         <div style={{\n           display: 'grid',\n           gap: '1.5rem',\n           gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\n         }}>\n           {/* Sélection du mode de vue */}\n           <div>\n             <label style={{\n               display: 'block',\n               fontSize: '0.875rem',\n               fontWeight: '500',\n               color: '#374151',\n               marginBottom: '0.5rem'\n             }}>\n               Mode d'affichage\n             </label>\n             <div style={{\n               display: 'flex',\n               gap: '0.5rem'\n             }}>\n               <button\n                 onClick={() => setViewMode('all')}\n                 style={{\n                   flex: 1,\n                   padding: '0.5rem',\n                   display: 'flex',\n                   alignItems: 'center',\n                   justifyContent: 'center',\n                   gap: '0.5rem',\n                   backgroundColor: viewMode === 'all' ? '#2563EB' : '#F3F4F6',\n                   color: viewMode === 'all' ? 'white' : '#374151',\n                   border: '1px solid',\n                   borderColor: viewMode === 'all' ? '#2563EB' : '#D1D5DB',\n                   borderRadius: '0.375rem',\n                   fontSize: '0.875rem',\n                   cursor: 'pointer'\n                 }}\n               >\n                 <Eye size={16} />\n                 Tout voir\n               </button>\n               <button\n                 onClick={() => setViewMode('personal')}\n                 style={{\n                   flex: 1,\n                   padding: '0.5rem',\n                   display: 'flex',\n                   alignItems: 'center',\n                   justifyContent: 'center',\n                   gap: '0.5rem',\n                   backgroundColor: viewMode === 'personal' ? '#2563EB' : '#F3F4F6',\n                   color: viewMode === 'personal' ? 'white' : '#374151',\n                   border: '1px solid',\n                   borderColor: viewMode === 'personal' ? '#2563EB' : '#D1D5DB',\n                   borderRadius: '0.375rem',\n                   fontSize: '0.875rem',\n                   cursor: 'pointer'\n                 }}\n               >\n                 <EyeOff size={16} />\n                 Mes gardes\n               </button>\n             </div>\n           </div>\n\n           {/* Sélection de la période */}\n           <div>\n             <label style={{\n               display: 'block',\n               fontSize: '0.875rem',\n               fontWeight: '500',\n               color: '#374151',\n               marginBottom: '0.5rem'\n             }}>\n               Période\n             </label>\n             <div style={{\n               display: 'flex',\n               gap: '0.5rem'\n             }}>\n               <input\n                 type=\"date\"\n                 value={startDate}\n                 onChange={(e) => setStartDate(e.target.value)}\n                 style={{\n                   flex: 1,\n                   padding: '0.5rem',\n                   border: '1px solid #D1D5DB',\n                   borderRadius: '0.375rem',\n                   fontSize: '0.875rem'\n                 }}\n               />\n               <input\n                 type=\"date\"\n                 value={endDate}\n                 onChange={(e) => setEndDate(e.target.value)}\n                 style={{\n                   flex: 1,\n                   padding: '0.5rem',\n                   border: '1px solid #D1D5DB',\n                   borderRadius: '0.375rem',\n                   fontSize: '0.875rem'\n                 }}\n               />\n             </div>\n           </div>\n         </div>\n       </div>\n     )}\n   </div>\n\n   {/* Tableau du planning */}\n   <div style={{\n     backgroundColor: 'white',\n     borderRadius: '8px',\n     boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\n     overflowX: 'auto'\n   }}>\n     <table style={{\n       width: '100%',\n       borderCollapse: 'collapse',\n       fontSize: '0.875rem'\n     }}>\n       <thead>\n         <tr>\n           <th style={{\n             padding: '0.75rem',\n             backgroundColor: '#F3F4F6',\n             borderBottom: '1px solid #E5E7EB',\n             textAlign: 'left',\n             fontWeight: '600',\n             position: 'sticky',\n             left: 0,\n             backgroundColor: 'white',\n             zIndex: 10\n           }}>\n             Date\n           </th>\n           {creneaux.map(creneau => (\n             <th key={creneau.id} style={{\n               padding: '0.75rem',\n               backgroundColor: '#F3F4F6',\n               borderBottom: '1px solid #E5E7EB',\n               textAlign: 'left',\n               fontWeight: '600',\n               minWidth: '150px'\n             }}>\n               <div>{creneau.label}</div>\n               <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>{creneau.hours}</div>\n             </th>\n           ))}\n         </tr>\n       </thead>\n       <tbody>\n         {filteredDates.map(date => (\n           <tr key={date} style={{\n             backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\n           }}>\n             <td style={{\n               padding: '0.75rem',\n               borderBottom: '1px solid #E5E7EB',\n               fontWeight: '500',\n               position: 'sticky',\n               left: 0,\n               backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\n               zIndex: 10\n             }}>\n               {formatDate(date)}\n             </td>\n             {creneaux.map(creneau => (\n               <td key={`${date}-${creneau.id}`} style={{\n                 padding: '0.75rem',\n                 borderBottom: '1px solid #E5E7EB',\n                 backgroundColor: planning.planning[date][creneau.id]?.includes(user.id) ? creneau.color : 'transparent'\n               }}>\n                 {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\n                   <div style={{\n                     color: planning.planning[date][creneau.id]?.includes(user.id) ? creneau.textColor : '#374151'\n                   }}>\n                     {viewMode === 'all' ? (\n                       planning.planning[date][creneau.id]?.map((medecinId, index) => (\n                         <div key={index} style={{\n                           padding: '0.25rem',\n                           borderRadius: '0.25rem',\n                           fontWeight: medecinId === user.id ? '600' : 'normal'\n                         }}>\n                           Dr. {medecinId === user.id ? 'Vous' : medecinId}\n                         </div>\n                       ))\n                     ) : (\n                       planning.planning[date][creneau.id]?.includes(user.id) && (\n                         <div style={{\n                           padding: '0.25rem',\n                           borderRadius: '0.25rem',\n                           fontWeight: '600'\n                         }}>\n                           Dr. Vous\n                         </div>\n                       )\n                     )}\n                   </div>\n                 )}\n               </td>\n             ))}\n           </tr>\n         ))}\n       </tbody>\n     </table>\n   </div>\n </main>\n</div>\n );\n}\n\nexport default PlanningVisualisation;","// src/App.js\nimport React from 'react';\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\nimport Login from './components/Login';\nimport DashboardMedecin from './components/DashboardMedecin';\nimport DashboardAdmin from './components/DashboardAdmin';\nimport FormulaireDesirata from './components/FormulaireDesirata';\nimport GestionUtilisateurs from './components/GestionUtilisateurs';\nimport GestionPlanning from './components/planning/GestionPlanning';\nimport GestionPeriodeSaisie from './components/GestionPeriodeSaisie';\nimport PlanningVisualisation from './components/PlanningVisualisation'; // Ajout de l'import\n\nfunction App() {\n  return (\n    <Router>\n      <div className=\"App\">\n        <Switch>\n          <Route exact path=\"/\" component={Login} />\n          <Route path=\"/dashboard-medecin\" component={DashboardMedecin} />\n          <Route path=\"/dashboard-admin\" component={DashboardAdmin} />\n          <Route path=\"/formulaire-desirata\" component={FormulaireDesirata} />\n          <Route path=\"/gestion-utilisateurs\" component={GestionUtilisateurs} />\n          <Route path=\"/gestion-planning-admin\" render={() => <GestionPlanning isAdmin={true} />} />\n          <Route path=\"/planning-visualisation\" component={PlanningVisualisation} />\n          <Route path=\"/gestion-periode-saisie\" component={GestionPeriodeSaisie} />\n        </Switch>\n      </div>\n    </Router>\n  );\n}\n\nexport default App;","// src/index.js\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}