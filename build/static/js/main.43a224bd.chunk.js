(this["webpackJsonpplanning-medecins"]=this["webpackJsonpplanning-medecins"]||[]).push([[0],{46:function(e,t,r){},73:function(e,t,r){"use strict";r.r(t);var n=r(1),o=r.n(n),i=r(36),s=r.n(i),l=(r(46),r(16)),a=r(7),d=r(37),c=r(3),b=r(17);const u=Object(d.a)({apiKey:"AIzaSyDesXYDyPsrG5HxkkPbj9XuqFQV91j2ixY",authDomain:"apum-8cfa4.firebaseapp.com",databaseURL:"https://apum-8cfa4-default-rtdb.europe-west1.firebasedatabase.app",projectId:"apum-8cfa4",storageBucket:"apum-8cfa4.appspot.com",messagingSenderId:"965430779165",appId:"1:965430779165:web:2b1d142cc5937744d5d5f4"}),m=Object(c.h)(u),p=Object(b.b)(u),j="users",g=async e=>{try{if(!e)return console.log("UID non fourni"),null;const t=await Object(c.f)(Object(c.e)(m,j,e));if(t.exists()){const e=t.data();return console.log("Utilisateur trouv\xe9:",e),{id:t.id,...e}}return console.log("Aucun utilisateur trouv\xe9 avec cet UID"),null}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration de l'utilisateur:",t),t}},x=async()=>{try{const e=p.currentUser;if(!e)throw new Error("Utilisateur non authentifi\xe9");const t=await Object(c.f)(Object(c.e)(m,j,e.uid));if(!t.exists()||"admin"!==t.data().role)throw new Error("Acc\xe8s non autoris\xe9");return(await Object(c.g)(Object(c.c)(m,j))).docs.map((e=>({id:e.id,...e.data()})))}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration de tous les utilisateurs:",e),e}},h=async()=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const e=Object(c.k)(Object(c.c)(m,j),Object(c.n)("role","==","medecin"));return(await Object(c.g)(e)).docs.map((e=>({id:e.id,...e.data()})))}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration des m\xe9decins:",e),e}},f=async()=>{try{await Object(b.e)(p),console.log("Utilisateur d\xe9connect\xe9")}catch(e){throw console.error("Erreur lors de la d\xe9connexion:",e),e}};var O=r(78),y=r(0);var v=function(){const[e,t]=Object(n.useState)(""),[r,o]=Object(n.useState)(""),[i,s]=Object(n.useState)(""),[l,d]=Object(n.useState)(""),[u,x]=Object(n.useState)(!1),[h,f]=Object(n.useState)(!1),[v,C]=Object(n.useState)(""),w=Object(a.f)();return Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:[Object(y.jsxs)("div",{style:{width:"400px",backgroundColor:"white",borderRadius:"8px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",margin:"auto"},children:[Object(y.jsxs)("div",{style:{padding:"24px",backgroundColor:"#EBF5FF",borderTopLeftRadius:"8px",borderTopRightRadius:"8px",borderBottom:"1px solid #E5E7EB"},children:[Object(y.jsx)("div",{style:{width:"64px",height:"64px",margin:"0 auto 16px",backgroundColor:"#BFDBFE",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:Object(y.jsx)(O.a,{style:{width:"32px",height:"32px",color:"#2563EB"}})}),Object(y.jsx)("h2",{style:{textAlign:"center",fontSize:"24px",fontWeight:"bold",color:"#2563EB",marginBottom:"8px"},children:"Planning APUM"}),Object(y.jsx)("p",{style:{textAlign:"center",fontSize:"14px",color:"#6B7280"},children:"Connectez-vous pour acc\xe9der \xe0 votre espace"})]}),Object(y.jsx)("div",{style:{padding:"24px"},children:Object(y.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),s(""),x(!0);try{const t=await(async(e,t)=>{try{const r=await Object(b.d)(p,e,t);console.log("Utilisateur connect\xe9:",r);const n=await g(r.user.uid);return{...r,role:n.role}}catch(i){throw console.error("Erreur lors de la connexion:",i),i}})(e,r);if(!t||!t.user)throw new Error("\xc9chec de l'authentification");const n=await g(t.user.uid);if(!n)throw new Error("Utilisateur non trouv\xe9 dans Firestore");"medecin"===n.role?w.push("/dashboard-medecin"):"admin"===n.role?w.push("/dashboard-admin"):s("R\xf4le utilisateur non reconnu")}catch(i){console.error("Erreur de connexion:",i),s("Identifiants incorrects ou erreur de connexion")}finally{x(!1)}},children:[Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Email"}),Object(y.jsx)("input",{type:"email",required:!0,value:e,onChange:e=>t(e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Mot de passe"}),Object(y.jsx)("input",{type:"password",required:!0,value:r,onChange:e=>o(e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px"}})]}),Object(y.jsx)("button",{type:"button",onClick:()=>f(!0),style:{width:"100%",textAlign:"center",color:"#2563EB",fontSize:"14px",marginBottom:"16px",background:"none",border:"none",cursor:"pointer"},children:"Mot de passe oubli\xe9 ?"}),i&&Object(y.jsx)("div",{style:{backgroundColor:"#FEE2E2",padding:"12px",borderRadius:"4px",marginBottom:"16px",border:"1px solid #FECACA"},children:Object(y.jsx)("p",{style:{color:"#DC2626",fontSize:"14px"},children:i})}),Object(y.jsx)("button",{type:"submit",disabled:u,style:{width:"100%",padding:"8px 16px",backgroundColor:u?"#93C5FD":"#2563EB",color:"white",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:u?"not-allowed":"pointer",border:"none"},children:u?"Connexion...":"Se connecter"})]})})]}),h&&Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",padding:"24px",width:"100%",maxWidth:"400px",position:"relative"},children:[Object(y.jsx)("button",{onClick:()=>{f(!1),s(""),d(""),C("")},style:{position:"absolute",top:"12px",right:"12px",background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#6B7280"},children:"\xd7"}),Object(y.jsx)("h3",{style:{fontSize:"18px",fontWeight:"bold",color:"#111827",marginBottom:"16px"},children:"R\xe9initialisation du mot de passe"}),Object(y.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),s(""),d(""),x(!0);try{const e=await(async e=>{try{const t=Object(c.k)(Object(c.c)(m,j),Object(c.n)("email","==",e)),r=await Object(c.g)(t);if(r.empty)return null;const n=r.docs[0];return{id:n.id,...n.data()}}catch(i){throw console.error("Erreur lors de la recherche de l'utilisateur par email:",i),i}})(v);if(!e)return s("Aucun compte n'est associ\xe9 \xe0 cette adresse email."),void x(!1);await Object(b.c)(p,v),d("Email de r\xe9initialisation envoy\xe9 avec succ\xe8s !"),setTimeout((()=>{f(!1),C(""),d("")}),3e3)}catch(i){console.error("Erreur lors de l'envoi de l'email de r\xe9initialisation:",i),s("Erreur lors de l'envoi de l'email de r\xe9initialisation")}finally{x(!1)}},children:[Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"14px",fontWeight:"500",color:"#374151",marginBottom:"4px"},children:"Email"}),Object(y.jsx)("input",{type:"email",required:!0,value:v,onChange:e=>C(e.target.value),style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px"},placeholder:"Entrez votre adresse email"})]}),i&&Object(y.jsx)("div",{style:{backgroundColor:"#FEE2E2",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:Object(y.jsx)("p",{style:{color:"#DC2626",fontSize:"14px"},children:i})}),l&&Object(y.jsx)("div",{style:{backgroundColor:"#D1FAE5",padding:"12px",borderRadius:"4px",marginBottom:"16px"},children:Object(y.jsx)("p",{style:{color:"#059669",fontSize:"14px"},children:l})}),Object(y.jsx)("button",{type:"submit",disabled:u,style:{width:"100%",padding:"8px 16px",backgroundColor:u?"#93C5FD":"#2563EB",color:"white",borderRadius:"4px",fontSize:"14px",fontWeight:"500",cursor:u?"not-allowed":"pointer",border:"none"},children:u?"Envoi...":"Envoyer le lien de r\xe9initialisation"})]})]})})]})};const C="desiderata",w="planning",D="periode_saisie",E=e=>{if(e instanceof c.a)return e;const t=new Date(e);return c.a.fromDate(t)},S=e=>e instanceof c.a?e.toDate().toISOString():"string"===typeof e?e:(console.error("Format de date non reconnu:",e),null),k=async(e,t)=>{try{const r=Object(c.c)(m,C),n=Object(c.k)(r),o=await Object(c.g)(n),i=Object(c.o)(m);o.forEach((r=>{const n=r.data();B(n,e,t)&&i.delete(r.ref)})),await i.commit(),console.log("Desiderata obsol\xe8tes supprim\xe9s")}catch(r){throw console.error("Erreur lors de la suppression des desiderata obsol\xe8tes:",r),r}},B=(e,t,r)=>{const n=e.startDate.toDate(),o=e.endDate.toDate(),i=new Date(t),s=new Date(r);return o<i||n>s},F=async()=>{try{const e=await Object(c.f)(Object(c.e)(m,w,D));if(e.exists()){const t=e.data();return{startDate:S(t.startDate),endDate:S(t.endDate)}}return null}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration de la p\xe9riode de saisie:",e),e}},R=async e=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const t=Object(c.k)(Object(c.c)(m,C),Object(c.n)("userId","==",e));return(await Object(c.g)(t)).docs.map((e=>{const t=e.data();return{id:e.id,...t,startDate:S(t.startDate),endDate:S(t.endDate)}}))}catch(t){throw console.error("Erreur lors de la r\xe9cup\xe9ration des desiderata:",t),t}},z=async(e,t)=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const r=E(e),n=E(t),o=Object(c.k)(Object(c.c)(m,C),Object(c.n)("startDate","<=",n),Object(c.n)("endDate",">=",r));return(await Object(c.g)(o)).docs.map((e=>{const t=e.data();return{id:e.id,userId:t.userId,startDate:S(t.startDate),endDate:S(t.endDate),desiderata:t.desiderata,nombreGardesSouhaitees:t.nombreGardesSouhaitees,nombreGardesMaxParSemaine:t.nombreGardesMaxParSemaine,gardesGroupees:t.gardesGroupees,renfortsAssocies:t.renfortsAssocies}}))}catch(r){throw console.error("Erreur lors de la r\xe9cup\xe9ration des desiderata pour la p\xe9riode:",r),r}},A=async(e,t)=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const r=Object(c.e)(m,w,e);await Object(c.m)(r,{...t,startDate:E(t.startDate),endDate:E(t.endDate)})}catch(r){throw console.error("Erreur lors de la mise \xe0 jour du planning:",r),r}},I=async()=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const e=Object(c.k)(Object(c.c)(m,w),Object(c.j)("startDate","desc"),Object(c.i)(1)),t=await Object(c.g)(e);if(t.empty)return null;const r=t.docs[0],n=r.data();return{id:r.id,...n,startDate:S(n.startDate),endDate:S(n.endDate)}}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration du dernier planning:",e),e}},W=async()=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const e=Object(c.k)(Object(c.c)(m,w),Object(c.n)("publishedAt","!=",null),Object(c.j)("publishedAt","desc"),Object(c.i)(1)),t=await Object(c.g)(e);if(t.empty)return null;const r=t.docs[0],n=r.data();return{id:r.id,...n,startDate:S(n.startDate),endDate:S(n.endDate),publishedAt:S(n.publishedAt)}}catch(e){throw console.error("Erreur lors de la r\xe9cup\xe9ration du planning publi\xe9:",e),e}};var T=r(80),M=r(81),U=r(82),P=r(79),G=r(83);var N=function(e){let{onClose:t}=e;const[r,o]=Object(n.useState)(""),[i,s]=Object(n.useState)(""),[l,a]=Object(n.useState)(""),[d,c]=Object(n.useState)(""),[u,m]=Object(n.useState)(""),[j,g]=Object(n.useState)(!1);return Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50,padding:"16px"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",width:"100%",maxWidth:"400px",position:"relative",boxSizing:"border-box"},children:[Object(y.jsxs)("div",{style:{padding:"16px 24px",borderBottom:"1px solid #E5E7EB",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsx)("h2",{style:{fontSize:"20px",fontWeight:"bold",color:"#2563EB",margin:0},children:"Changer le mot de passe"}),Object(y.jsx)("button",{onClick:t,style:{background:"none",border:"none",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center",justifyContent:"center",marginLeft:"8px"},children:Object(y.jsx)(P.a,{size:20,color:"#6B7280"})})]}),Object(y.jsxs)("div",{style:{padding:"24px"},children:[d&&Object(y.jsx)("div",{style:{backgroundColor:"#FEE2E2",padding:"12px",borderRadius:"4px",marginBottom:"16px",color:"#DC2626",fontSize:"14px"},children:d}),u&&Object(y.jsx)("div",{style:{backgroundColor:"#DCFCE7",padding:"12px",borderRadius:"4px",marginBottom:"16px",color:"#16A34A",fontSize:"14px"},children:u}),Object(y.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),m(""),g(!0),i!==l)return c("Les nouveaux mots de passe ne correspondent pas."),void g(!1);try{await(async e=>{try{const t=p.currentUser;if(!t)throw new Error("Aucun utilisateur connect\xe9");await Object(b.f)(t,e),console.log("Mot de passe mis \xe0 jour avec succ\xe8s")}catch(d){throw console.error("Erreur lors de la mise \xe0 jour du mot de passe:",d),d}})(i),m("Mot de passe mis \xe0 jour avec succ\xe8s."),o(""),s(""),a(""),setTimeout(t,2e3)}catch(d){c("Erreur lors de la mise \xe0 jour du mot de passe: "+d.message)}finally{g(!1)}},style:{marginBottom:"0"},children:[Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Mot de passe actuel"}),Object(y.jsx)("input",{type:"password",value:r,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px",boxSizing:"border-box"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Nouveau mot de passe"}),Object(y.jsx)("input",{type:"password",value:i,onChange:e=>s(e.target.value),required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px",boxSizing:"border-box"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"16px"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500",color:"#374151"},children:"Confirmer le nouveau mot de passe"}),Object(y.jsx)("input",{type:"password",value:l,onChange:e=>a(e.target.value),required:!0,style:{width:"100%",padding:"8px 12px",borderRadius:"4px",border:"1px solid #D1D5DB",fontSize:"14px",boxSizing:"border-box"}})]}),Object(y.jsx)("button",{type:"submit",disabled:j,style:{width:"100%",padding:"8px 16px",backgroundColor:j?"#93C5FD":"#2563EB",color:"white",border:"none",borderRadius:"4px",cursor:j?"not-allowed":"pointer",fontSize:"14px",fontWeight:"500",boxSizing:"border-box"},children:j?"Mise \xe0 jour...":"Changer le mot de passe"})]})]})]})})};var L=function(){const[e,t]=Object(n.useState)(null),[r,o]=Object(n.useState)([]),[i,s]=Object(n.useState)(!0),[l,d]=Object(n.useState)(null),[c,b]=Object(n.useState)(!1),[u,m]=Object(n.useState)(!1),j=Object(a.f)();Object(n.useEffect)((()=>{const e=p.onAuthStateChanged((async e=>{if(e)try{const r=await g(e.uid);if(r&&"medecin"===r.role){t(r);try{const e=await R(r.id);o(e)}catch(l){console.error("Erreur lors de la r\xe9cup\xe9ration des desiderata:",l)}}else d("Utilisateur non autoris\xe9"),j.push("/")}catch(l){console.error("Erreur:",l),d("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es")}else j.push("/");s(!1)}));return()=>e()}),[j]);const x=async()=>{try{await f(),j.push("/")}catch(l){console.error("Erreur lors de la d\xe9connexion:",l),d("Erreur lors de la d\xe9connexion")}};return i?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."}):l?Object(y.jsxs)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:["Erreur: ",l]}):Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsxs)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:[Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563eb",fontWeight:"bold",fontSize:"1.25rem"},children:[Object(y.jsx)(O.a,{size:24}),Object(y.jsx)("span",{children:"Planning APUM"})]}),Object(y.jsxs)("div",{style:{display:"none",gap:"1rem","@media (min-width: 768px)":{display:"flex"}},children:[Object(y.jsxs)("button",{onClick:()=>j.push("/formulaire-desirata"),style:{padding:"0.5rem 1rem",color:"#4b5563",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(T.a,{size:18}),"Saisir desiderata"]}),Object(y.jsxs)("button",{onClick:()=>j.push("/planning-visualisation"),style:{padding:"0.5rem 1rem",color:"#4b5563",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(O.a,{size:18}),"Voir planning"]}),Object(y.jsxs)("button",{onClick:()=>b(!0),style:{padding:"0.5rem 1rem",color:"#4b5563",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(M.a,{size:18}),"Mot de passe"]}),Object(y.jsxs)("button",{onClick:x,style:{padding:"0.5rem 1rem",color:"#dc2626",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(U.a,{size:18}),"D\xe9connexion"]})]}),Object(y.jsx)("button",{onClick:()=>m(!u),style:{display:"flex",padding:"0.5rem",color:"#4b5563",border:"none",background:"none",cursor:"pointer","@media (min-width: 768px)":{display:"none"}},children:u?Object(y.jsx)(P.a,{size:24}):Object(y.jsx)(G.a,{size:24})})]}),Object(y.jsx)("div",{style:{display:u?"block":"none",backgroundColor:"white",borderTop:"1px solid #e5e7eb","@media (min-width: 768px)":{display:"none"}},children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",padding:"0.5rem"},children:[Object(y.jsxs)("button",{onClick:()=>{j.push("/formulaire-desirata"),m(!1)},style:{padding:"1rem",color:"#4b5563",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer",width:"100%",justifyContent:"flex-start"},children:[Object(y.jsx)(T.a,{size:18}),"Saisir desiderata"]}),Object(y.jsxs)("button",{onClick:()=>{j.push("/planning-visualisation"),m(!1)},style:{padding:"1rem",color:"#4b5563",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer",width:"100%",justifyContent:"flex-start"},children:[Object(y.jsx)(O.a,{size:18}),"Voir planning"]}),Object(y.jsxs)("button",{onClick:()=>{b(!0),m(!1)},style:{padding:"1rem",color:"#4b5563",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer",width:"100%",justifyContent:"flex-start"},children:[Object(y.jsx)(M.a,{size:18}),"Mot de passe"]}),Object(y.jsxs)("button",{onClick:()=>{x(),m(!1)},style:{padding:"1rem",color:"#dc2626",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer",width:"100%",justifyContent:"flex-start"},children:[Object(y.jsx)(U.a,{size:18}),"D\xe9connexion"]})]})})]}),Object(y.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"6rem 1rem 2rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:["Bienvenue, Dr. ",null===e||void 0===e?void 0:e.nom]}),Object(y.jsx)("p",{style:{color:"#6b7280"},children:"G\xe9rez vos gardes et consultez le planning depuis votre tableau de bord"})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",maxWidth:"800px",margin:"0 auto"},children:[Object(y.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#1f2937",marginBottom:"1rem"},children:"Derniers desiderata"}),r.length>0?Object(y.jsx)("ul",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:r.map(((e,t)=>Object(y.jsxs)("li",{style:{padding:"0.75rem",backgroundColor:"#f9fafb",borderRadius:"0.375rem",fontSize:"0.875rem"},children:["Pour la p\xe9riode du ",new Date(e.startDate).toLocaleDateString()," au ",new Date(e.endDate).toLocaleDateString()]},t)))}):Object(y.jsx)("p",{style:{color:"#6b7280"},children:"Aucun desiderata saisi"})]})]}),c&&Object(y.jsx)(N,{onClose:()=>b(!1)})]})},_=r(84),Q=r(85),$=r(86),H=r(87);var V=function(){const[e,t]=Object(n.useState)(null),[r,o]=Object(n.useState)([]),[i,s]=Object(n.useState)(null),[l,d]=Object(n.useState)(null),[c,b]=Object(n.useState)(!0),[u,m]=Object(n.useState)(null),[j,x]=Object(n.useState)(!1),v=Object(a.f)();return Object(n.useEffect)((()=>{(async()=>{try{const e=p.currentUser;if(!e)return void v.push("/");const r=await g(e.uid);if(!r||"admin"!==r.role)return m("Utilisateur non autoris\xe9"),void v.push("/");t(r);const n=await h();o(n);const i=await F();s(i);const l=await W();d(l)}catch(u){console.error("Erreur:",u),m("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es")}finally{b(!1)}})()}),[v]),c?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."}):u?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"1rem"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",maxWidth:"500px",width:"100%",textAlign:"center"},children:[Object(y.jsx)("h2",{style:{color:"#DC2626",marginBottom:"1rem"},children:"Erreur"}),Object(y.jsx)("p",{style:{color:"#4B5563",marginBottom:"1.5rem"},children:u})]})}):Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold",fontSize:"1.25rem"},children:[Object(y.jsx)(_.a,{size:24}),Object(y.jsx)("span",{children:"Administration APUM"})]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:()=>x(!0),style:{padding:"0.5rem 1rem",color:"#4b5563",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(M.a,{size:18}),"Mot de passe"]}),Object(y.jsxs)("button",{onClick:async()=>{try{await f(),v.push("/")}catch(u){console.error("Erreur lors de la d\xe9connexion:",u),m("Erreur lors de la d\xe9connexion")}},style:{padding:"0.5rem 1rem",color:"#dc2626",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:[Object(y.jsx)(U.a,{size:18}),"D\xe9connexion"]})]})]})}),Object(y.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"6rem 1rem 2rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:["Bienvenue, ",null===e||void 0===e?void 0:e.prenom," ",null===e||void 0===e?void 0:e.nom]}),Object(y.jsx)("p",{style:{color:"#6b7280"},children:"G\xe9rez les utilisateurs, le planning et les p\xe9riodes de saisie depuis votre tableau de bord"})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"2rem"},children:[Object(y.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"600",color:"#1f2937",marginBottom:"1rem"},children:"Actions principales"}),Object(y.jsxs)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))"},children:[Object(y.jsxs)("button",{onClick:()=>v.push("/gestion-utilisateurs"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",backgroundColor:"#EBF5FF",border:"1px solid #2563EB",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#DBEAFE"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#EBF5FF"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsx)("div",{style:{color:"#2563EB"},children:Object(y.jsx)(Q.a,{size:24})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{fontWeight:"500",color:"#1F2937"},children:"G\xe9rer les utilisateurs"}),Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280"},children:"Ajouter ou modifier des utilisateurs"})]})]}),Object(y.jsx)($.a,{size:20,color:"#2563EB"})]}),Object(y.jsxs)("button",{onClick:()=>v.push("/gestion-planning-admin"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",backgroundColor:"#F3E8FF",border:"1px solid #9333EA",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#EDE9FE"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#F3E8FF"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsx)("div",{style:{color:"#9333EA"},children:Object(y.jsx)(O.a,{size:24})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{fontWeight:"500",color:"#1F2937"},children:"G\xe9rer le planning"}),Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280"},children:"G\xe9n\xe9rer et modifier le planning"})]})]}),Object(y.jsx)($.a,{size:20,color:"#9333EA"})]}),Object(y.jsxs)("button",{onClick:()=>v.push("/gestion-periode-saisie"),style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"1rem",backgroundColor:"#ECFDF5",border:"1px solid #059669",borderRadius:"0.5rem",cursor:"pointer",transition:"all 0.2s",textAlign:"left"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#D1FAE5"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="#ECFDF5"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsx)("div",{style:{color:"#059669"},children:Object(y.jsx)(T.a,{size:24})}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{fontWeight:"500",color:"#1F2937"},children:"P\xe9riode de saisie"}),Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280"},children:"D\xe9finir la p\xe9riode de saisie des desiderata"})]})]}),Object(y.jsx)($.a,{size:20,color:"#059669"})]})]})]}),Object(y.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#EBF5FF",borderRadius:"0.5rem",padding:"0.75rem",color:"#2563EB"},children:Object(y.jsx)(Q.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937"},children:"M\xe9decins"})]}),Object(y.jsx)("p",{style:{fontSize:"2rem",fontWeight:"bold",color:"#2563EB"},children:r.length})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#F0FDF4",borderRadius:"0.5rem",padding:"0.75rem",color:"#16A34A"},children:Object(y.jsx)(H.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937"},children:"P\xe9riode de saisie"})]}),Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:i?"#16A34A":"#DC2626",fontWeight:"500"},children:i?`Du ${new Date(i.startDate).toLocaleDateString()} au ${new Date(i.endDate).toLocaleDateString()}`:"Aucune p\xe9riode d\xe9finie"})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"1rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#FFF7ED",borderRadius:"0.5rem",padding:"0.75rem",color:"#EA580C"},children:Object(y.jsx)(O.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1f2937"},children:"Planning"})]}),Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:l?"#16A34A":"#DC2626",fontWeight:"500"},children:l?"Planning publi\xe9":"Aucun planning publi\xe9"})]})]})]}),j&&Object(y.jsx)(N,{onClose:()=>x(!1)})]})},q=r(92),J=r(93),Y=r(88),X=r(89),K=r(90);var Z=function(e){let{creneaux:t,onApply:r,periodeSaisie:o}=e;const[i,s]=Object(n.useState)({}),[l,a]=Object(n.useState)({}),[d,c]=Object(n.useState)(""),[b,u]=Object(n.useState)(""),[m,p]=Object(n.useState)(""),[j,g]=Object(n.useState)(!1),x=[{id:"1",label:"Lundi"},{id:"2",label:"Mardi"},{id:"3",label:"Mercredi"},{id:"4",label:"Jeudi"},{id:"5",label:"Vendredi"},{id:"6",label:"Samedi"},{id:"0",label:"Dimanche"}];return Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",width:"100%"},children:[Object(y.jsxs)("button",{onClick:()=>g(!j),style:{width:"100%",padding:"1rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"none",cursor:"pointer",borderBottom:j?"1px solid #E5E7EB":"none",transition:"background-color 0.2s",borderRadius:"8px"},children:[Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:Object(y.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1F2937",margin:0},children:"Remplissage rapide"})}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"#6B7280",fontSize:"0.875rem",gap:"0.5rem"},children:[j?"Replier":"D\xe9plier",j?Object(y.jsx)(Y.a,{size:20}):Object(y.jsx)(X.a,{size:20})]})]}),j&&Object(y.jsx)("div",{style:{padding:"1.5rem"},children:Object(y.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"P\xe9riode de remplissage"}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem"},children:[Object(y.jsxs)("div",{style:{minWidth:"140px",flex:1},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",color:"#6B7280",marginBottom:"0.25rem"},children:"Du :"}),Object(y.jsx)("input",{type:"date",value:b,onChange:e=>u(e.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",width:"100%"}})]}),Object(y.jsxs)("div",{style:{minWidth:"140px",flex:1},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",color:"#6B7280",marginBottom:"0.25rem"},children:"Au :"}),Object(y.jsx)("input",{type:"date",value:m,onChange:e=>p(e.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",width:"100%"}})]})]}),Object(y.jsxs)("button",{onClick:()=>{o&&(u(o.startDate.split("T")[0]),p(o.endDate.split("T")[0]))},style:{padding:"0.75rem 1rem",backgroundColor:"#EBF5FF",border:"1px solid #2563EB",borderRadius:"0.375rem",color:"#2563EB",fontSize:"0.875rem",cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#DBEAFE",onMouseOut:e=>e.currentTarget.style.backgroundColor="#EBF5FF",children:[Object(y.jsx)(O.a,{size:16}),"Toute la p\xe9riode"]})]})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[Object(y.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Cr\xe9neaux"}),Object(y.jsx)("button",{onClick:()=>{const e=t.every((e=>i[e.id])),r={};t.forEach((t=>{r[t.id]=!e})),s(r)},style:{fontSize:"0.75rem",color:"#2563EB",background:"none",border:"none",cursor:"pointer",padding:"0.25rem 0.5rem"},children:t.every((e=>i[e.id]))?"Tout d\xe9s\xe9lectionner":"Tout s\xe9lectionner"})]}),Object(y.jsx)("div",{style:{display:"grid",gap:"0.5rem",border:"1px solid #E5E7EB",padding:"0.5rem",borderRadius:"0.375rem"},children:t.map((e=>Object(y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",cursor:"pointer",borderRadius:"0.25rem",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#F3F4F6",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[Object(y.jsx)("input",{type:"checkbox",checked:i[e.id]||!1,onChange:()=>{s((t=>({...t,[e.id]:!t[e.id]})))},style:{width:"1rem",height:"1rem",borderRadius:"0.25rem"}}),Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{children:e.label}),Object(y.jsx)("div",{style:{fontSize:"0.75rem",color:"#6B7280"},children:e.hours})]})]},e.id)))})]}),Object(y.jsxs)("div",{children:[Object(y.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"0.5rem"},children:[Object(y.jsx)("label",{style:{fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Jours de la semaine"}),Object(y.jsx)("button",{onClick:()=>{const e=x.every((e=>l[e.id])),t={};x.forEach((r=>{t[r.id]=!e})),a(t)},style:{fontSize:"0.75rem",color:"#2563EB",background:"none",border:"none",cursor:"pointer",padding:"0.25rem 0.5rem"},children:x.every((e=>l[e.id]))?"Tout d\xe9s\xe9lectionner":"Tout s\xe9lectionner"})]}),Object(y.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(140px, 1fr))",gap:"0.5rem",border:"1px solid #E5E7EB",padding:"0.5rem",borderRadius:"0.375rem"},children:x.map((e=>Object(y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",cursor:"pointer",borderRadius:"0.25rem",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#F3F4F6",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[Object(y.jsx)("input",{type:"checkbox",checked:l[e.id]||!1,onChange:()=>{a((t=>({...t,[e.id]:!t[e.id]})))},style:{width:"1rem",height:"1rem",borderRadius:"0.25rem"}}),Object(y.jsx)("span",{children:e.label})]},e.id)))})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Disponibilit\xe9"}),Object(y.jsxs)("select",{value:d,onChange:e=>c(e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white"},children:[Object(y.jsx)("option",{value:"",children:"S\xe9lectionnez une disponibilit\xe9"}),Object(y.jsx)("option",{value:"Oui",children:"Oui"}),Object(y.jsx)("option",{value:"Possible",children:"Possible"}),Object(y.jsx)("option",{value:"Non",children:"Non"})]})]}),Object(y.jsxs)("button",{onClick:()=>{if(!d)return void alert("Veuillez s\xe9lectionner une disponibilit\xe9");if(!b||!m)return void alert("Veuillez s\xe9lectionner une p\xe9riode");const e=Object.entries(i).filter((e=>{let[t,r]=e;return r})).map((e=>{let[t]=e;return t})),t=Object.entries(l).filter((e=>{let[t,r]=e;return r})).map((e=>{let[t]=e;return t}));0!==e.length?0!==t.length?r({creneaux:e,jours:t,disponibilite:d,startDate:b,endDate:m}):alert("Veuillez s\xe9lectionner au moins un jour"):alert("Veuillez s\xe9lectionner au moins un cr\xe9neau")},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"0.75rem",backgroundColor:"#2563EB",color:"white",border:"none",borderRadius:"0.375rem",fontWeight:"500",cursor:"pointer"},children:[Object(y.jsx)(K.a,{size:18}),"Appliquer"]})]})})]})},ee=r(91);var te=function(e){let{creneaux:t,onApplyPattern:r,periodeSaisie:o}=e;const[i,s]=Object(n.useState)(""),[l,a]=Object(n.useState)(""),[d,c]=Object(n.useState)({}),[b,u]=Object(n.useState)(!1);return Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",width:"100%"},children:[Object(y.jsxs)("button",{onClick:()=>u(!b),style:{width:"100%",padding:"1rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"none",cursor:"pointer",borderBottom:b?"1px solid #E5E7EB":"none",transition:"background-color 0.2s",borderRadius:"8px"},children:[Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:Object(y.jsx)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#1F2937",margin:0},children:"Pattern hebdomadaire"})}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",color:"#6B7280",fontSize:"0.875rem",gap:"0.5rem"},children:[b?"Replier":"D\xe9plier",b?Object(y.jsx)(Y.a,{size:20}):Object(y.jsx)(X.a,{size:20})]})]}),b&&Object(y.jsx)("div",{style:{padding:"1.5rem"},children:Object(y.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:"#6B7280",marginBottom:"1rem"},children:"D\xe9finissez votre semaine type ci-dessous. Ce pattern sera appliqu\xe9 automatiquement sur la p\xe9riode s\xe9lectionn\xe9e."}),Object(y.jsx)("div",{style:{overflowX:"auto",marginBottom:"1.5rem",maxWidth:"100%"},children:Object(y.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem",minWidth:"600px"},children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{padding:"0.75rem",backgroundColor:"#F3F4F6",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",minWidth:"100px"},children:"Jour"}),t.map((e=>Object(y.jsxs)("th",{style:{padding:"0.75rem",backgroundColor:"#F3F4F6",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600"},children:[Object(y.jsx)("div",{children:e.label}),Object(y.jsx)("div",{style:{fontSize:"0.75rem",color:"#6B7280"},children:e.hours})]},e.id)))]})}),Object(y.jsx)("tbody",{children:[{id:"1",label:"Lundi"},{id:"2",label:"Mardi"},{id:"3",label:"Mercredi"},{id:"4",label:"Jeudi"},{id:"5",label:"Vendredi"},{id:"6",label:"Samedi"},{id:"0",label:"Dimanche"}].map((e=>Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB",fontWeight:"500"},children:e.label}),t.map((t=>{var r;return Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB"},children:(!t.samediOnly||"6"===e.id)&&Object(y.jsxs)("select",{value:(null===(r=d[e.id])||void 0===r?void 0:r[t.id])||"",onChange:r=>((e,t,r)=>{c((n=>({...n,[e]:{...n[e]||{},[t]:r}})))})(e.id,t.id,r.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white"},children:[Object(y.jsx)("option",{value:"",children:"-"}),Object(y.jsx)("option",{value:"Oui",children:"Oui"}),Object(y.jsx)("option",{value:"Possible",children:"Possible"}),Object(y.jsx)("option",{value:"Non",children:"Non"})]})},t.id)}))]},e.id)))})]})}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"1.5rem"},children:[Object(y.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"1rem",marginBottom:"1rem"},children:[Object(y.jsxs)("div",{style:{minWidth:"140px",flex:1},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Du :"}),Object(y.jsx)("input",{type:"date",value:i,onChange:e=>s(e.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",width:"100%"}})]}),Object(y.jsxs)("div",{style:{minWidth:"140px",flex:1},children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Au :"}),Object(y.jsx)("input",{type:"date",value:l,onChange:e=>a(e.target.value),style:{padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",width:"100%"}})]})]}),Object(y.jsxs)("button",{onClick:()=>{o&&(s(o.startDate.split("T")[0]),a(o.endDate.split("T")[0]))},style:{padding:"0.75rem 1rem",backgroundColor:"#EBF5FF",border:"1px solid #2563EB",borderRadius:"0.375rem",color:"#2563EB",fontSize:"0.875rem",cursor:"pointer",width:"100%",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",fontWeight:"500",transition:"all 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#DBEAFE",onMouseOut:e=>e.currentTarget.style.backgroundColor="#EBF5FF",children:[Object(y.jsx)(O.a,{size:16}),"Toute la p\xe9riode"]})]}),Object(y.jsxs)("button",{onClick:()=>{i&&l?0!==Object.keys(d).length?r(d,i,l):alert("Veuillez d\xe9finir au moins une pr\xe9f\xe9rence dans le pattern"):alert("Veuillez s\xe9lectionner une p\xe9riode")},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"0.5rem",width:"100%",padding:"0.75rem",backgroundColor:"#2563EB",color:"white",border:"none",borderRadius:"0.375rem",fontWeight:"500",cursor:"pointer"},children:[Object(y.jsx)(ee.a,{size:18}),"Appliquer le pattern"]})]})})]})};const re=[{id:"QUART_1",label:"1er QUART",hours:"1h - 7h",medecins:2},{id:"QUART_2",label:"2\xe8me QUART",hours:"7h - 13h",medecins:3},{id:"RENFORT_1",label:"RENFORT",hours:"10h - 13h",medecins:1,samediOnly:!0},{id:"QUART_3",label:"3\xe8me QUART",hours:"13h - 19h",medecins:3},{id:"RENFORT_2",label:"RENFORT",hours:"20h - 00h",medecins:1},{id:"QUART_4",label:"4\xe8me QUART",hours:"19h - 1h",medecins:3}],ne=["Oui","Possible","Non"],oe=["2024-01-01","2024-04-01","2024-05-01","2024-05-08","2024-05-09","2024-05-20","2024-07-14","2024-08-15","2024-11-01","2024-11-11","2024-12-25"];var ie=function(){const[e,t]=Object(n.useState)(null),[r,o]=Object(n.useState)({}),[i,s]=Object(n.useState)(0),[l,d]=Object(n.useState)(3),[b,u]=Object(n.useState)(!1),[j,x]=Object(n.useState)(!1),[h,f]=Object(n.useState)(null),[v,w]=Object(n.useState)(!0),[D,S]=Object(n.useState)(null),[k,B]=Object(n.useState)(null),z=Object(a.f)(),A=Object(n.useCallback)((()=>{if(!e)return[];const t=[];let r=new Date(e.startDate);const n=new Date(e.endDate);for(;r<=n;)t.push(new Date(r)),r.setDate(r.getDate()+1);return t}),[e]);Object(n.useEffect)((()=>{(async()=>{try{const e=p.currentUser;if(!e)return void z.push("/");const r=await g(e.uid);if(r&&"medecin"===r.role){f(r);const e=await F();if(e){t(e);const n=(await R(r.id)).find((t=>new Date(t.startDate)<=new Date(e.endDate)&&new Date(t.endDate)>=new Date(e.startDate)));n&&(B(n.id),o(n.desiderata||{}),s(n.nombreGardesSouhaitees||0),d(n.nombreGardesMaxParSemaine||3),u(n.gardesGroupees||!1),x(n.renfortsAssocies||!1))}else S("Aucune p\xe9riode de saisie n'a \xe9t\xe9 d\xe9finie par l'administrateur.")}else S("Utilisateur non autoris\xe9"),z.push("/")}catch(D){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es:",D),S("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es: "+D.message)}finally{w(!1)}})()}),[z]);const I=e=>`${["dim.","lun.","mar.","mer.","jeu.","ven.","sam."][e.getDay()]} ${e.getDate().toString().padStart(2,"0")} ${["jan","f\xe9v","mar","avr","mai","juin","juil","ao\xfbt","sep","oct","nov","d\xe9c"][e.getMonth()]}`;if(v)return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."});if(D)return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"1rem"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",maxWidth:"500px",width:"100%",textAlign:"center"},children:[Object(y.jsx)("h2",{style:{color:"#DC2626",marginBottom:"1rem"},children:"Erreur"}),Object(y.jsx)("p",{style:{color:"#4B5563",marginBottom:"1.5rem"},children:D}),Object(y.jsxs)("button",{onClick:()=>z.push("/dashboard-medecin"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},children:[Object(y.jsx)(q.a,{size:18}),"Retour au tableau de bord"]})]})});const W=A();return Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh",width:"100%",maxWidth:"100%",overflowX:"hidden"},children:[Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40,width:"100%"},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:()=>z.push("/dashboard-medecin"),style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#4B5563",border:"none",background:"none",cursor:"pointer",padding:"0.5rem"},children:[Object(y.jsx)(q.a,{size:20}),"Retour"]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold"},children:[Object(y.jsx)(O.a,{size:24}),Object(y.jsx)("span",{children:"Saisie des desiderata"})]})]}),Object(y.jsxs)("button",{onClick:async t=>{if(t.preventDefault(),h)try{if(!e||!e.startDate||!e.endDate)throw new Error("P\xe9riode de saisie non d\xe9finie");const t={startDate:e.startDate,endDate:e.endDate,desiderata:r,nombreGardesSouhaitees:i,nombreGardesMaxParSemaine:l,gardesGroupees:b,renfortsAssocies:j};k?(await(async(e,t)=>{try{const r=Object(c.e)(m,C,e);await Object(c.m)(r,{startDate:E(t.startDate),endDate:E(t.endDate),desiderata:t.desiderata,nombreGardesSouhaitees:t.nombreGardesSouhaitees,nombreGardesMaxParSemaine:t.nombreGardesMaxParSemaine,gardesGroupees:t.gardesGroupees,renfortsAssocies:t.renfortsAssocies}),console.log("Desiderata mis \xe0 jour avec succ\xe8s")}catch(D){throw console.error("Erreur lors de la mise \xe0 jour des desiderata:",D),D}})(k,t),alert("Desiderata mis \xe0 jour avec succ\xe8s!")):(await(async(e,t)=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");return(await Object(c.b)(Object(c.c)(m,C),{userId:e,startDate:E(t.startDate),endDate:E(t.endDate),desiderata:t.desiderata,nombreGardesSouhaitees:t.nombreGardesSouhaitees,nombreGardesMaxParSemaine:t.nombreGardesMaxParSemaine,gardesGroupees:t.gardesGroupees,renfortsAssocies:t.renfortsAssocies})).id}catch(D){throw console.error("Erreur lors de l'ajout des desiderata:",D),D}})(h.id,t),alert("Desiderata soumis avec succ\xe8s!")),z.push("/dashboard-medecin")}catch(D){console.error("Erreur lors de la soumission des desiderata:",D),S("Une erreur est survenue lors de la soumission des desiderata: "+D.message)}},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:[Object(y.jsx)(J.a,{size:18}),"Enregistrer"]})]})}),Object(y.jsxs)("main",{style:{margin:"0 auto",paddingTop:"5rem",width:"100%",maxWidth:"1280px",boxSizing:"border-box"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#1F2937",marginBottom:"1rem"},children:["P\xe9riode de saisie : du ",new Date(e.startDate).toLocaleDateString()," au ",new Date(e.endDate).toLocaleDateString()]}),Object(y.jsxs)("div",{style:{display:"grid",gap:"1.5rem",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Nombre de gardes souhait\xe9es par mois"}),Object(y.jsx)("input",{type:"number",value:i,onChange:e=>s(parseInt(e.target.value)),min:"0",style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white"}})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Maximum de gardes par semaine"}),Object(y.jsx)("input",{type:"number",value:l,onChange:e=>d(parseInt(e.target.value)),min:"1",max:"7",style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white"}})]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(y.jsx)("input",{type:"checkbox",id:"gardesGroupees",checked:b,onChange:e=>u(e.target.checked),style:{width:"1rem",height:"1rem",borderRadius:"0.25rem",borderColor:"#D1D5DB"}}),Object(y.jsx)("label",{htmlFor:"gardesGroupees",style:{fontSize:"0.875rem",color:"#374151"},children:"Gardes group\xe9es dans un m\xeame week-end"})]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(y.jsx)("input",{type:"checkbox",id:"renfortsAssocies",checked:j,onChange:e=>x(e.target.checked),style:{width:"1rem",height:"1rem",borderRadius:"0.25rem",borderColor:"#D1D5DB"}}),Object(y.jsx)("label",{htmlFor:"renfortsAssocies",style:{fontSize:"0.875rem",color:"#374151"},children:"Renforts associ\xe9s \xe0 une garde"})]})]})]}),Object(y.jsxs)("div",{style:{display:"grid",gap:"2rem",marginBottom:"2rem",gridTemplateColumns:"1fr",padding:"0 1rem",maxWidth:"100%",boxSizing:"border-box",margin:"0 auto 2rem","@media (min-width: 768px)":{gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",padding:0}},children:[Object(y.jsx)("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:Object(y.jsx)(Z,{creneaux:re,onApply:e=>{let{creneaux:t,jours:r,disponibilite:n,startDate:i,endDate:s}=e;const l=new Date(i),a=new Date(s);o((e=>{const o={...e};return A().filter((e=>e>=l&&e<=a)).forEach((e=>{if(r.includes(e.getDay().toString())){const r=e.toISOString().split("T")[0];o[r]||(o[r]={}),t.forEach((t=>{"RENFORT_1"===t&&6!==e.getDay()||(o[r][t]=n)}))}})),o}))},periodeSaisie:e})}),Object(y.jsx)("div",{style:{width:"100%",maxWidth:"100%",overflow:"hidden"},children:Object(y.jsx)(te,{creneaux:re,onApplyPattern:(e,t,r)=>{const n=new Date(t),i=new Date(r);o((t=>{const r={...t};let o=new Date(n);for(;o<=i;){const t=o.getDay().toString(),n=o.toISOString().split("T")[0];e[t]&&(r[n]={...e[t]}),o.setDate(o.getDate()+1)}return r}))},periodeSaisie:e})})]}),Object(y.jsx)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflowX:"auto"},children:Object(y.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{padding:"0.75rem",backgroundColor:"#F3F4F6",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",position:"sticky",left:0,backgroundColor:"white",zIndex:10},children:"Date"}),re.map((e=>Object(y.jsxs)("th",{style:{padding:"0.75rem",backgroundColor:"#F3F4F6",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",minWidth:"150px"},children:[Object(y.jsx)("div",{children:e.label}),Object(y.jsx)("div",{style:{fontSize:"0.75rem",color:"#6B7280",fontWeight:"normal"},children:e.hours}),Object(y.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6B7280",fontWeight:"normal"},children:[e.medecins," m\xe9decin",e.medecins>1?"s":""]})]},e.id)))]})}),Object(y.jsx)("tbody",{children:W.map((e=>{const t=(e=>{const t=e.getDay(),r=e.toISOString().split("T")[0];return 0===t||6===t||oe.includes(r)})(e),n=e.toISOString().split("T")[0];return Object(y.jsxs)("tr",{style:{backgroundColor:t?"#F3F4F6":"white"},children:[Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB",fontWeight:"500",position:"sticky",left:0,backgroundColor:t?"#F3F4F6":"white",zIndex:10},children:I(e)}),re.map((t=>{var i;return Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB"},children:(!t.samediOnly||6===e.getDay())&&Object(y.jsxs)("select",{value:(null===(i=r[n])||void 0===i?void 0:i[t.id])||"",onChange:e=>((e,t,r)=>{o((n=>({...n,[e]:{...n[e]||{},[t]:r}})))})(n,t.id,e.target.value),style:{width:"100%",padding:"0.5rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white",color:(e=>{switch(null===(e=r[n])||void 0===e?void 0:e[t.id]){case"Oui":return"#059669";case"Possible":return"#D97706";case"Non":return"#DC2626";default:return"#6B7280"}})()},children:[Object(y.jsx)("option",{value:"",children:"S\xe9lectionnez"}),ne.map((e=>Object(y.jsx)("option",{value:e,children:e},e)))]})},`${n}-${t.id}`)}))]},n)}))})]})})]})]})},se=r(94),le=r(95),ae=r(96),de=r(97),ce=r(98),be=r(99);var ue=function(){const[e,t]=Object(n.useState)([]),[r,o]=Object(n.useState)(null),[i,s]=Object(n.useState)(!0),[l,d]=Object(n.useState)(null),u=Object(a.f)(),[h,f]=Object(n.useState)(!1),[O,v]=Object(n.useState)({nom:"",prenom:"",email:"",role:"medecin"}),[C,w]=Object(n.useState)(""),[D,E]=Object(n.useState)("all"),[S,k]=Object(n.useState)("table"),[B,F]=Object(n.useState)(!1),[R,z]=Object(n.useState)(1),[A]=Object(n.useState)(12),[I,W]=Object(n.useState)(!1),[T,M]=Object(n.useState)(null);Object(n.useEffect)((()=>{(async()=>{try{const e=p.currentUser;if(!e)return void u.push("/");const t=await g(e.uid);if(!t||"admin"!==t.role)return d("Utilisateur non autoris\xe9"),void u.push("/");o(t),await U()}catch(l){console.error("Erreur:",l),d("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es")}finally{s(!1)}})()}),[u]);const U=async()=>{try{const e=await x();t(e)}catch(l){console.error("Erreur lors de la r\xe9cup\xe9ration des utilisateurs:",l),d("Erreur lors de la r\xe9cup\xe9ration des utilisateurs")}},G=e.filter((e=>{const t=e.nom.toLowerCase().includes(C.toLowerCase())||e.prenom.toLowerCase().includes(C.toLowerCase())||e.email.toLowerCase().includes(C.toLowerCase()),r="all"===D||e.role===D;return t&&r})),N=R*A,L=N-A,_=G.slice(L,N),$=Math.ceil(G.length/A),H=e=>{const{name:t,value:r}=e.target;v((e=>({...e,[t]:r})))},V=e=>{M(e),W(!0)},J=e=>{alert(e)};return i?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."}):Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:()=>u.push("/dashboard-admin"),style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#4B5563",border:"none",background:"none",cursor:"pointer",padding:"0.5rem"},children:[Object(y.jsx)(q.a,{size:20}),"Retour"]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold"},children:[Object(y.jsx)(Q.a,{size:24}),Object(y.jsx)("span",{children:"Gestion des utilisateurs"})]})]}),Object(y.jsxs)("button",{onClick:()=>f(!0),style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[Object(y.jsx)(se.a,{size:18}),"Ajouter un utilisateur"]})]})}),Object(y.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"6rem 1rem 2rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",display:"flex",flexWrap:"wrap",gap:"1rem",alignItems:"center",justifyContent:"space-between"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",flex:"1",minWidth:"200px",maxWidth:"400px",position:"relative"},children:[Object(y.jsx)(le.a,{size:20,style:{position:"absolute",left:"0.75rem",color:"#6B7280"}}),Object(y.jsx)("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:C,onChange:e=>w(e.target.value),style:{width:"100%",padding:"0.5rem 0.75rem 0.5rem 2.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}})]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("select",{value:D,onChange:e=>E(e.target.value),style:{padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",fontSize:"0.875rem"},children:[Object(y.jsx)("option",{value:"all",children:"Tous les r\xf4les"}),Object(y.jsx)("option",{value:"medecin",children:"M\xe9decins"}),Object(y.jsx)("option",{value:"admin",children:"Administrateurs"})]}),Object(y.jsxs)("div",{style:{display:"flex",gap:"0.5rem",backgroundColor:"#F3F4F6",padding:"0.25rem",borderRadius:"0.375rem"},children:[Object(y.jsx)("button",{onClick:()=>k("table"),style:{padding:"0.5rem",borderRadius:"0.25rem",border:"none",backgroundColor:"table"===S?"white":"transparent",boxShadow:"table"===S?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:Object(y.jsx)(ae.a,{size:20,color:"table"===S?"#2563EB":"#6B7280"})}),Object(y.jsx)("button",{onClick:()=>k("grid"),style:{padding:"0.5rem",borderRadius:"0.25rem",border:"none",backgroundColor:"grid"===S?"white":"transparent",boxShadow:"grid"===S?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:Object(y.jsx)(de.a,{size:20,color:"grid"===S?"#2563EB":"#6B7280"})})]})]})]}),l&&Object(y.jsxs)("div",{style:{backgroundColor:"#FEE2E2",color:"#DC2626",padding:"1rem",borderRadius:"0.5rem",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(y.jsx)(P.a,{size:20}),l]}),"table"===S&&Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflow:"hidden"},children:[Object(y.jsx)("div",{style:{overflowX:"auto"},children:Object(y.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem"},children:[Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{padding:"1rem",textAlign:"left",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",color:"#374151",fontWeight:"600"},children:"Nom"}),Object(y.jsx)("th",{style:{padding:"1rem",textAlign:"left",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",color:"#374151",fontWeight:"600"},children:"Pr\xe9nom"}),Object(y.jsx)("th",{style:{padding:"1rem",textAlign:"left",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",color:"#374151",fontWeight:"600"},children:"Email"}),Object(y.jsx)("th",{style:{padding:"1rem",textAlign:"left",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",color:"#374151",fontWeight:"600"},children:"R\xf4le"}),Object(y.jsx)("th",{style:{padding:"1rem",textAlign:"right",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",color:"#374151",fontWeight:"600"},children:"Actions"})]})}),Object(y.jsx)("tbody",{children:_.map((e=>Object(y.jsxs)("tr",{style:{borderBottom:"1px solid #E5E7EB",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#F9FAFB",onMouseOut:e=>e.currentTarget.style.backgroundColor="white",children:[Object(y.jsx)("td",{style:{padding:"1rem"},children:e.nom}),Object(y.jsx)("td",{style:{padding:"1rem"},children:e.prenom}),Object(y.jsx)("td",{style:{padding:"1rem"},children:Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(y.jsx)(ce.a,{size:16,color:"#6B7280"}),e.email]})}),Object(y.jsx)("td",{style:{padding:"1rem"},children:Object(y.jsx)("span",{style:{padding:"0.25rem 0.5rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"admin"===e.role?"#EBF5FF":"#F0FDF4",color:"admin"===e.role?"#2563EB":"#16A34A"},children:"admin"===e.role?"Administrateur":"M\xe9decin"})}),Object(y.jsx)("td",{style:{padding:"1rem",textAlign:"right"},children:Object(y.jsx)("div",{style:{display:"flex",gap:"0.5rem",justifyContent:"flex-end"},children:Object(y.jsxs)("button",{onClick:()=>V(e),style:{padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #DC2626",backgroundColor:"white",color:"#DC2626",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.25rem",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#DC2626",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="#DC2626"},children:[Object(y.jsx)(be.a,{size:16}),"Supprimer"]})})})]},e.id)))})]})}),$>1&&Object(y.jsx)("div",{style:{padding:"1rem",display:"flex",justifyContent:"center",gap:"0.5rem",borderTop:"1px solid #E5E7EB"},children:Array.from({length:$},((e,t)=>t+1)).map((e=>Object(y.jsx)("button",{onClick:()=>z(e),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #E5E7EB",backgroundColor:R===e?"#2563EB":"white",color:R===e?"white":"#374151",cursor:"pointer",transition:"all 0.2s"},children:e},e)))})]}),"grid"===S&&Object(y.jsxs)("div",{children:[Object(y.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"1rem"},children:_.map((e=>Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",padding:"1.5rem",position:"relative",transition:"transform 0.2s, box-shadow 0.2s"},onMouseOver:e=>{e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 6px rgba(0,0,0,0.1)"},onMouseOut:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"start",justifyContent:"space-between",marginBottom:"1rem"},children:[Object(y.jsxs)("div",{children:[Object(y.jsxs)("h3",{style:{fontSize:"1.125rem",fontWeight:"600",color:"#111827",marginBottom:"0.25rem"},children:[e.prenom," ",e.nom]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#6B7280",fontSize:"0.875rem"},children:[Object(y.jsx)(ce.a,{size:16}),e.email]})]}),Object(y.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"9999px",fontSize:"0.75rem",fontWeight:"500",backgroundColor:"admin"===e.role?"#EBF5FF":"#F0FDF4",color:"admin"===e.role?"#2563EB":"#16A34A"},children:"admin"===e.role?"Administrateur":"M\xe9decin"})]}),Object(y.jsx)("div",{style:{borderTop:"1px solid #E5E7EB",paddingTop:"1rem",display:"flex",justifyContent:"flex-end"},children:Object(y.jsxs)("button",{onClick:()=>V(e),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #DC2626",backgroundColor:"white",color:"#DC2626",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",transition:"all 0.2s"},onMouseOver:e=>{e.currentTarget.style.backgroundColor="#DC2626",e.currentTarget.style.color="white"},onMouseOut:e=>{e.currentTarget.style.backgroundColor="white",e.currentTarget.style.color="#DC2626"},children:[Object(y.jsx)(be.a,{size:16}),"Supprimer"]})})]},e.id)))}),$>1&&Object(y.jsx)("div",{style:{padding:"1rem",display:"flex",justifyContent:"center",gap:"0.5rem",marginTop:"2rem"},children:Array.from({length:$},((e,t)=>t+1)).map((e=>Object(y.jsx)("button",{onClick:()=>z(e),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #E5E7EB",backgroundColor:R===e?"#2563EB":"white",color:R===e?"white":"#374151",cursor:"pointer",transition:"all 0.2s",minWidth:"2.5rem",fontWeight:R===e?"600":"400"},onMouseOver:t=>{R!==e&&(t.currentTarget.style.backgroundColor="#F3F4F6")},onMouseOut:t=>{R!==e&&(t.currentTarget.style.backgroundColor="white")},children:e},e)))})]})]}),h&&Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"500px",position:"relative"},children:[Object(y.jsx)("button",{onClick:()=>f(!1),style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.5rem",border:"none",backgroundColor:"transparent",cursor:"pointer"},children:Object(y.jsx)(P.a,{size:20,color:"#6B7280"})}),Object(y.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#111827",marginBottom:"1.5rem"},children:"Ajouter un utilisateur"}),Object(y.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),d(null);try{const e=await(async(e,t)=>{try{const r=await Object(b.a)(p,e,t);return console.log("Utilisateur enregistr\xe9:",r),r}catch(l){throw console.error("Erreur lors de l'enregistrement:",l),l}})(O.email);await(async(e,t)=>{try{await Object(c.l)(Object(c.e)(m,j,e),t),console.log("Utilisateur cr\xe9\xe9 avec succ\xe8s")}catch(l){throw console.error("Erreur lors de la cr\xe9ation de l'utilisateur:",l),l}})(e.user.uid,{nom:O.nom,prenom:O.prenom,email:O.email,role:O.role}),v({nom:"",prenom:"",email:"",role:"medecin"}),f(!1),await U(),J("Utilisateur ajout\xe9 avec succ\xe8s")}catch(l){console.error("Erreur lors de l'ajout de l'utilisateur:",l);let t="Une erreur est survenue lors de l'ajout de l'utilisateur";"auth/email-already-in-use"===l.code&&(t="Cette adresse email est d\xe9j\xe0 utilis\xe9e."),d(t)}},children:[Object(y.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Nom"}),Object(y.jsx)("input",{type:"text",name:"nom",value:O.nom,onChange:H,required:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Pr\xe9nom"}),Object(y.jsx)("input",{type:"text",name:"prenom",value:O.prenom,onChange:H,required:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"Email"}),Object(y.jsx)("input",{type:"email",name:"email",value:O.email,onChange:H,required:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB"}})]}),Object(y.jsxs)("div",{style:{marginBottom:"1.5rem"},children:[Object(y.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontSize:"0.875rem",fontWeight:"500",color:"#374151"},children:"R\xf4le"}),Object(y.jsxs)("select",{name:"role",value:O.role,onChange:H,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white"},children:[Object(y.jsx)("option",{value:"medecin",children:"M\xe9decin"}),Object(y.jsx)("option",{value:"admin",children:"Administrateur"})]})]}),Object(y.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"flex-end"},children:[Object(y.jsx)("button",{type:"button",onClick:()=>f(!1),style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",color:"#374151",cursor:"pointer"},children:"Annuler"}),Object(y.jsx)("button",{type:"submit",style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#2563EB",color:"white",cursor:"pointer"},children:"Ajouter"})]})]})]})}),I&&Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"400px",textAlign:"center"},children:[Object(y.jsx)("div",{style:{width:"3rem",height:"3rem",backgroundColor:"#FEE2E2",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:Object(y.jsx)(be.a,{size:24,color:"#DC2626"})}),Object(y.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#111827",marginBottom:"0.5rem"},children:"Confirmer la suppression"}),Object(y.jsxs)("p",{style:{color:"#6B7280",marginBottom:"1.5rem"},children:["\xcates-vous s\xfbr de vouloir supprimer l'utilisateur"," ",Object(y.jsxs)("span",{style:{fontWeight:"600"},children:[null===T||void 0===T?void 0:T.prenom," ",null===T||void 0===T?void 0:T.nom]}),"? Cette action est irr\xe9versible."]}),Object(y.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[Object(y.jsx)("button",{onClick:()=>{W(!1),M(null)},style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",color:"#374151",cursor:"pointer",minWidth:"100px"},children:"Annuler"}),Object(y.jsx)("button",{onClick:async()=>{try{await(async e=>{try{await Object(c.d)(Object(c.e)(m,j,e)),console.log("Utilisateur supprim\xe9 avec succ\xe8s")}catch(l){throw console.error("Erreur lors de la suppression de l'utilisateur:",l),l}})(T.id),await U(),W(!1),M(null),J("Utilisateur supprim\xe9 avec succ\xe8s")}catch(l){console.error("Erreur lors de la suppression:",l),d("Erreur lors de la suppression de l'utilisateur")}},style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",backgroundColor:"#DC2626",color:"white",cursor:"pointer",minWidth:"100px"},children:"Supprimer"})]})]})})]})};const me=[{id:"QUART_1",label:"1er QUART (1h - 7h)",medecins:2},{id:"QUART_2",label:"2\xe8me QUART (7h - 13h)",medecins:3},{id:"RENFORT_1",label:"RENFORT 10h / 13h",medecins:1,samediOnly:!0},{id:"QUART_3",label:"3\xe8me QUART (13h - 19h)",medecins:3},{id:"RENFORT_2",label:"RENFORT 20H / 00H",medecins:1},{id:"QUART_4",label:"4\xe8me QUART (19h - 1h)",medecins:3}],pe={QUART_2:["RENFORT_1"],RENFORT_1:["QUART_2"],QUART_4:["RENFORT_2"],RENFORT_2:["QUART_4"]},je=(e,t,r,n)=>{if(!pe[r])return!1;const o=n[t];return pe[r].some((t=>{var r;return null===(r=o[t])||void 0===r?void 0:r.includes(e)}))},ge=(e,t,r,n)=>{const o={};let i=new Date(e);const s=new Date(t);for(;i<=s;){const e=i.toISOString().split("T")[0];o[e]={};["QUART_1","QUART_2","RENFORT_1","QUART_3","QUART_4","RENFORT_2"].forEach((t=>{const s=me.find((e=>e.id===t));!s||s.samediOnly&&6!==i.getDay()||(o[e][t]=fe(e,s,r,n,o))})),i.setDate(i.getDate()+1)}return o},xe=e=>{const t=new Date(e);t.setHours(0,0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const r=new Date(t.getFullYear(),0,1);return Math.ceil(((t-r)/864e5+1)/7)},he=(e,t,r)=>{const n=xe(t);let o=0;return Object.entries(r).forEach((t=>{let[r,i]=t;xe(r)===n&&Object.values(i).forEach((t=>{t&&t.includes(e)&&o++}))})),o},fe=(e,t,r,n,o)=>{const i=n.filter((n=>{var i,s,l;const a=null===(i=r[n])||void 0===i||null===(s=i.preferences[e])||void 0===s?void 0:s[t.id],d=he(n,e,o),c=(null===(l=r[n])||void 0===l?void 0:l.nombreGardesMaxParSemaine)||7,b=je(n,e,t.id,o);return("Oui"===a||"Possible"===a)&&d<c&&!b})).sort(((n,o)=>{var i,s,l,a;const d=null===(i=r[n])||void 0===i||null===(s=i.preferences[e])||void 0===s?void 0:s[t.id],c=null===(l=r[o])||void 0===l||null===(a=l.preferences[e])||void 0===a?void 0:a[t.id];return"Oui"===d&&"Oui"!==c?-1:"Oui"===c&&"Oui"!==d?1:0})),s=[];for(let l=0;l<t.medecins;l++)if(i.length>0){const n=Oe(i,e,t,r,o);n?(s.push(n),i.splice(i.indexOf(n),1)):s.push(null)}else s.push(null);return s},Oe=(e,t,r,n,o)=>{const i=new Date(t).getMonth();return e.sort(((e,s)=>{const l=ye(e,t,r,n,o,i);return ye(s,t,r,n,o,i)-l}))[0]},ye=(e,t,r,n,o,i)=>{var s,l,a;let d=0;const c=n[e],b=he(e,t,o),u=(null===c||void 0===c?void 0:c.nombreGardesMaxParSemaine)||7;je(e,t,r.id,o)&&(d-=50),b>=u-1&&(d-=10),"Oui"===(null===(s=c.preferences[t])||void 0===s?void 0:s[r.id])?d+=3:"Possible"===(null===(l=c.preferences[t])||void 0===l?void 0:l[r.id])?d+=1:"Non"===(null===(a=c.preferences[t])||void 0===a?void 0:a[r.id])&&(d-=5);const m=ve(e,o,i);return m<c.nombreGardesSouhaitees?d+=2:d-=2*(m-c.nombreGardesSouhaitees),c.gardesGroupees&&Ce(t)&&we(e,t,o)&&(d+=2),c.renfortsAssocies&&(r.id.startsWith("RENFORT")&&De(e,t,o)&&(d+=2),!r.id.startsWith("RENFORT")&&Ee(e,t,o)&&(d+=2)),d},ve=(e,t,r)=>Object.entries(t).reduce(((t,n)=>{let[o,i]=n;return new Date(o).getMonth()===r?t+Object.values(i).flat().filter((t=>t===e)).length:t}),0),Ce=e=>{const t=new Date(e).getDay();return 0===t||6===t},we=(e,t,r)=>{const n=new Date(t),o=new Date(n.setDate(n.getDate()-n.getDay())),i=new Date(n.setDate(n.getDate()-n.getDay()+6));for(let s=new Date(o);s<=i;s.setDate(s.getDate()+1)){const t=s.toISOString().split("T")[0];if(r[t]&&Object.values(r[t]).flat().includes(e))return!0}return!1},De=(e,t,r)=>r[t]&&Object.values(r[t]).flat().includes(e),Ee=(e,t,r)=>{var n,o;return r[t]&&((null===(n=r[t].RENFORT_1)||void 0===n?void 0:n.includes(e))||(null===(o=r[t].RENFORT_2)||void 0===o?void 0:o.includes(e)))},Se=function(e,t,r,n,o){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1e3,s=e,l=Be(e,n);const a=new Set;for(let d=0;d<i;d++){const e=ke(s,o,n);let t=null,r=-1/0;for(const o of e){const e=Be(o,n);e>r&&!a.has(JSON.stringify(o))&&(t=o,r=e)}r>l&&(s=t,l=r,a.add(JSON.stringify(t)),a.size>50&&a.delete(a.values().next().value))}return s},ke=(e,t,r)=>{const n=[],o=Object.keys(e),i=o[Math.floor(Math.random()*o.length)],s=Object.keys(e[i])[Math.floor(Math.random()*Object.keys(e[i]).length)],l=Math.floor(Math.random()*e[i][s].length);for(const c of t)if(!e[i][s].includes(c)){var a;const t=JSON.parse(JSON.stringify(e));t[i][s][l]=c;const o=he(c,i,t),d=(null===(a=r[c])||void 0===a?void 0:a.nombreGardesMaxParSemaine)||7,b=je(c,i,s,t);o<=d&&!b&&Fe(t)&&n.push(t)}const d=JSON.parse(JSON.stringify(e));return d[i][s][l]=null,Fe(d)&&n.push(d),n},Be=(e,t)=>{let r=0;const n={},o={};for(const b in e)for(const c in e[b])for(const u of e[b][c]){var i,s,l,a,d;if(null===u)continue;const m=xe(b);o[u]||(o[u]={}),o[u][m]||(o[u][m]=0),o[u][m]++;const p=(null===(i=t[u])||void 0===i?void 0:i.nombreGardesMaxParSemaine)||7;o[u][m]>p&&(r-=20),je(u,b,c,e)&&(r-=50),n[u]||(n[u]=0),n[u]++;const j=null===(s=t[u])||void 0===s||null===(l=s.preferences[b])||void 0===l?void 0:l[c];"Oui"===j?r+=3:"Possible"===j?r+=1:"Non"===j&&(r-=5),null!==(a=t[u])&&void 0!==a&&a.gardesGroupees&&Ce(b)&&we(u,b,e)&&(r+=2),null!==(d=t[u])&&void 0!==d&&d.renfortsAssocies&&(c.startsWith("RENFORT")&&De(u,b,e)&&(r+=2),!c.startsWith("RENFORT")&&Ee(u,b,e)&&(r+=2))}for(const b in n){var c;r-=2*Math.abs(n[b]-(null===(c=t[b])||void 0===c?void 0:c.nombreGardesSouhaitees))}return r},Fe=e=>{const t=Object.keys(e).sort(),r={};for(let n=0;n<t.length;n++){const o=t[n],i=new Set;for(const t in e[o]){const r=e[o][t];for(const n of r)if(null!==n){if(je(n,o,t,e))return!1;i.add(n)}}for(const s of i){if(n>=2){const r=new Set,o=new Set;if(Object.values(e[t[n-1]]).forEach((e=>{e.forEach((e=>{null!==e&&r.add(e)}))})),Object.values(e[t[n-2]]).forEach((e=>{e.forEach((e=>{null!==e&&o.add(e)}))})),r.has(s)&&o.has(s))return!1}const i=xe(o);r[s]||(r[s]={}),r[s][i]||(r[s][i]=0),r[s][i]++}}for(const n in r)for(const e in r[n]){const t=7;if(r[n][e]>t)return!1}return!0};var Re=r(105),ze=r(106),Ae=r(100),Ie=r(101),We=r(102);var Te=e=>{let{editMode:t,modified:r,onEditToggle:n,onGenerateClick:o,onPublishClick:i,onSaveChanges:s,onBackClick:l,onExportClick:a,planning:d}=e;return Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:l,style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#4B5563",border:"none",background:"none",cursor:"pointer",padding:"0.5rem"},children:[Object(y.jsx)(q.a,{size:20}),"Retour"]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold"},children:[Object(y.jsx)(O.a,{size:24}),Object(y.jsx)("span",{children:"Gestion du planning"})]})]}),Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem"},children:t?Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("button",{onClick:s,disabled:!r,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:r?"#2563EB":"#93C5FD",color:"white",border:"none",borderRadius:"0.375rem",cursor:r?"pointer":"not-allowed"},children:[Object(y.jsx)(J.a,{size:18}),"Sauvegarder"]}),Object(y.jsxs)("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#F3F4F6",border:"1px solid #D1D5DB",color:"#374151",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)(P.a,{size:18}),"Annuler"]})]}):Object(y.jsxs)(y.Fragment,{children:[Object(y.jsxs)("button",{onClick:a,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#F0FDF4",border:"1px solid #16A34A",color:"#16A34A",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)(Ae.a,{size:18}),"Exporter desiderata"]}),Object(y.jsxs)("button",{onClick:o,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#F3E8FF",border:"1px solid #9333EA",color:"#9333EA",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)(Ie.a,{size:18}),d?"Reg\xe9n\xe9rer":"G\xe9n\xe9rer"]}),Object(y.jsxs)("button",{onClick:n,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#EBF5FF",border:"1px solid #2563EB",color:"#2563EB",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)(We.a,{size:18}),"Modifier"]}),d&&Object(y.jsxs)("button",{onClick:i,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#ECFDF5",border:"1px solid #059669",color:"#059669",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)(K.a,{size:18}),"Publier"]})]})})]})})},Me=r(103);var Ue=e=>{let{medecins:t,value:r,onChange:o,placeholder:i="Rechercher un m\xe9decin..."}=e;const[s,l]=Object(n.useState)(!1),[a,d]=Object(n.useState)(""),c=Object(n.useRef)(null);Object(n.useEffect)((()=>{const e=e=>{c.current&&!c.current.contains(e.target)&&l(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}),[]);const b=t.filter((e=>{const t=a.toLowerCase();return e.nom.toLowerCase().includes(t)||e.prenom.toLowerCase().includes(t)})),u=t.find((e=>e.id===r));return Object(y.jsxs)("div",{ref:c,style:{position:"relative",width:"100%"},children:[Object(y.jsxs)("div",{style:{position:"relative",display:"flex",alignItems:"center"},children:[Object(y.jsx)(le.a,{size:18,style:{position:"absolute",left:"0.75rem",color:"#6B7280"}}),Object(y.jsx)("input",{type:"text",value:a,onChange:e=>{d(e.target.value),l(!0)},onFocus:()=>l(!0),placeholder:i,style:{width:"100%",padding:"0.5rem 2.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}}),Object(y.jsxs)("div",{style:{position:"absolute",right:"0.75rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[a&&Object(y.jsx)("button",{onClick:()=>{d(""),l(!0)},style:{padding:"0.25rem",border:"none",background:"none",cursor:"pointer",display:"flex",alignItems:"center",color:"#6B7280"},children:Object(y.jsx)(P.a,{size:16})}),Object(y.jsx)("button",{onClick:()=>l(!s),style:{padding:"0.25rem",border:"none",background:"none",cursor:"pointer",display:"flex",alignItems:"center",color:"#6B7280"},children:s?Object(y.jsx)(Y.a,{size:16}):Object(y.jsx)(X.a,{size:16})})]})]}),s&&Object(y.jsx)("div",{style:{position:"absolute",top:"calc(100% + 0.25rem)",left:0,right:0,maxHeight:"15rem",overflowY:"auto",backgroundColor:"white",borderRadius:"0.375rem",border:"1px solid #D1D5DB",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)",zIndex:30},children:Object(y.jsxs)("div",{style:{padding:"0.25rem"},children:[Object(y.jsx)("button",{onClick:()=>{o("all"),l(!1),d("")},style:{width:"100%",padding:"0.5rem 0.75rem",textAlign:"left",border:"none",borderRadius:"0.25rem",backgroundColor:"all"===r?"#EBF5FF":"transparent",color:"all"===r?"#2563EB":"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:"all"===r?"600":"normal"},children:"Tous les m\xe9decins"}),b.map((e=>Object(y.jsxs)("button",{onClick:()=>{o(e.id),l(!1),d("")},style:{width:"100%",padding:"0.5rem 0.75rem",textAlign:"left",border:"none",borderRadius:"0.25rem",backgroundColor:r===e.id?"#EBF5FF":"transparent",color:r===e.id?"#2563EB":"#374151",cursor:"pointer",fontSize:"0.875rem",fontWeight:r===e.id?"600":"normal"},children:["Dr. ",e.prenom," ",e.nom]},e.id))),0===b.length&&Object(y.jsx)("div",{style:{padding:"0.5rem 0.75rem",color:"#6B7280",fontSize:"0.875rem",textAlign:"center"},children:"Aucun m\xe9decin trouv\xe9"})]})}),"all"!==r&&u&&!s&&Object(y.jsxs)("div",{style:{marginTop:"0.25rem",fontSize:"0.75rem",color:"#2563EB",fontWeight:"500"},children:["M\xe9decin s\xe9lectionn\xe9 : Dr. ",u.prenom," ",u.nom]})]})};var Pe=e=>{let{showFilters:t,onToggleFilters:r,dateFilter:n,onDateFilterChange:o,creneauFilter:i,onCreneauFilterChange:s,selectedMedecin:l,onMedecinFilterChange:a,viewMode:d,onViewModeChange:c,medecins:b,creneaux:u}=e;return Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",marginBottom:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("button",{onClick:r,style:{width:"100%",padding:"1rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"none",cursor:"pointer",borderRadius:"0.5rem"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#374151"},children:[Object(y.jsx)(Me.a,{size:20}),Object(y.jsx)("span",{style:{fontWeight:"500"},children:"Filtres et recherche"})]}),t?Object(y.jsx)(Y.a,{size:20}):Object(y.jsx)(X.a,{size:20})]}),t&&Object(y.jsx)("div",{style:{padding:"1rem 1.5rem",borderTop:"1px solid #E5E7EB"},children:Object(y.jsxs)("div",{style:{display:"grid",gap:"1rem",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"P\xe9riode"}),Object(y.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[Object(y.jsx)("input",{type:"date",value:n.start,onChange:e=>o({...n,start:e.target.value}),style:{flex:1,padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}}),Object(y.jsx)("input",{type:"date",value:n.end,onChange:e=>o({...n,end:e.target.value}),style:{flex:1,padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}})]})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Cr\xe9neau"}),Object(y.jsxs)("select",{value:i,onChange:e=>s(e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",fontSize:"0.875rem"},children:[Object(y.jsx)("option",{value:"all",children:"Tous les cr\xe9neaux"}),u.map((e=>Object(y.jsxs)("option",{value:e.id,children:[e.label," (",e.hours,")"]},e.id)))]})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"M\xe9decin"}),Object(y.jsx)(Ue,{medecins:b,value:l,onChange:a,placeholder:"Rechercher un m\xe9decin..."})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Mode d'affichage"}),Object(y.jsxs)("div",{style:{display:"flex",gap:"0.5rem",backgroundColor:"#F3F4F6",padding:"0.25rem",borderRadius:"0.375rem",width:"fit-content"},children:[Object(y.jsx)("button",{onClick:()=>c("list"),style:{padding:"0.5rem",borderRadius:"0.25rem",border:"none",backgroundColor:"list"===d?"white":"transparent",boxShadow:"list"===d?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:Object(y.jsx)(ae.a,{size:20,color:"list"===d?"#2563EB":"#6B7280"})}),Object(y.jsx)("button",{onClick:()=>c("grid"),style:{padding:"0.5rem",borderRadius:"0.25rem",border:"none",backgroundColor:"grid"===d?"white":"transparent",boxShadow:"grid"===d?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer"},children:Object(y.jsx)(de.a,{size:20,color:"grid"===d?"#2563EB":"#6B7280"})})]})]})]})})]})};var Ge=e=>{let{medecins:t,periodeSaisie:r,planning:n,publishedPlanning:o}=e;return Object(y.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"1rem",marginBottom:"2rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#EBF5FF",borderRadius:"0.5rem",padding:"0.75rem",color:"#2563EB"},children:Object(y.jsx)(Q.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"M\xe9decins disponibles"})]}),Object(y.jsx)("p",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#2563EB"},children:t.length})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#F0FDF4",borderRadius:"0.5rem",padding:"0.75rem",color:"#16A34A"},children:Object(y.jsx)(H.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"P\xe9riode de saisie"})]}),Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:r?"#16A34A":"#DC2626",fontWeight:"500"},children:r?`Du ${new Date(r.startDate).toLocaleDateString()} au ${new Date(r.endDate).toLocaleDateString()}`:"Aucune p\xe9riode d\xe9finie"})]}),Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.75rem",marginBottom:"0.5rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#FFF7ED",borderRadius:"0.5rem",padding:"0.75rem",color:"#EA580C"},children:Object(y.jsx)(O.a,{size:24})}),Object(y.jsx)("h2",{style:{fontSize:"1rem",fontWeight:"600",color:"#374151"},children:"\xc9tat du planning"})]}),Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:[Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:n?"#16A34A":"#DC2626",fontWeight:"500"},children:n?"Planning g\xe9n\xe9r\xe9":"Aucun planning g\xe9n\xe9r\xe9"}),Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:o?"#16A34A":"#DC2626",fontWeight:"500"},children:o?"Planning publi\xe9":"Non publi\xe9"})]})]})]})};const Ne=e=>{switch(e){case"Oui":return{color:"#059669",backgroundColor:"#ECFDF5"};case"Possible":return{color:"#D97706",backgroundColor:"#FFFBEB"};case"Non":return{color:"#DC2626",backgroundColor:"#FEF2F2"};default:return{color:"#6B7280",backgroundColor:"transparent"}}},Le=(e,t,r,n)=>{var o,i;return(null===(o=e.find((e=>e.userId===t)))||void 0===o||null===(i=o.desiderata[r])||void 0===i?void 0:i[n])||""},_e=e=>{let{date:t,creneauId:r,index:n,currentValue:o,medecins:i,desiderata:s,selectedMedecin:l,onChange:a}=e;const d=((e,t,r,n)=>{const o={oui:[],possible:[],nonSpecifie:[],non:[]};return e.forEach((e=>{var i,s;switch(null===(i=t.find((t=>t.userId===e.id)))||void 0===i||null===(s=i.desiderata[r])||void 0===s?void 0:s[n]){case"Oui":o.oui.push(e);break;case"Possible":o.possible.push(e);break;case"Non":o.non.push(e);break;default:o.nonSpecifie.push(e)}})),{...o,all:[...o.oui,...o.possible,...o.nonSpecifie,...o.non]}})(i,s,t,r);return Object(y.jsxs)("select",{value:o||"",onChange:e=>a(t,r,n,e.target.value),style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",fontSize:"0.875rem"},children:[Object(y.jsx)("option",{value:"",children:"Non assign\xe9"}),d.all.map((e=>{const n=Le(s,e.id,t,r),o=Ne(n),i=e.id===l;return Object(y.jsxs)("option",{value:e.id,style:{...o,fontWeight:i?"bold":"normal"},children:["Dr. ",e.prenom," ",e.nom,n?` (${n})`:"",i?" \u2605":""]},e.id)}))]})},Qe=e=>{let{preference:t}=e;if(!t)return null;const r=Ne(t);return Object(y.jsx)("div",{style:{position:"absolute",top:"0.25rem",right:"0.25rem",padding:"0.25rem 0.5rem",borderRadius:"0.25rem",fontSize:"0.75rem",...r},children:t})};var $e=e=>{let{planning:t,creneaux:r,medecins:n,desiderata:o,selectedMedecin:i,editMode:s,onMedecinChange:l,dateFilter:a,creneauFilter:d}=e;const c=e=>{const t=new Date(e);return`${["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][t.getDay()]} ${t.getDate()} ${["jan","f\xe9v","mar","avr","mai","juin","juil","ao\xfbt","sep","oct","nov","d\xe9c"][t.getMonth()]}`},b=e=>{const t=new Date(e);return 0===t.getDay()||6===t.getDay()},u=()=>"all"===d?r:r.filter((e=>e.id===d));return Object(y.jsx)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflowX:"auto",width:"100%",maxWidth:"100vw",margin:"0 auto"},children:Object(y.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem",tableLayout:"fixed"},children:[Object(y.jsxs)("colgroup",{children:[Object(y.jsx)("col",{style:{width:"120px"}}),"  ",u().map(((e,t)=>Object(y.jsx)("col",{style:{width:100/u().length+"%"}},t)))]}),Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{padding:"1rem",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",position:"sticky",left:0,zIndex:10,backgroundColor:"white"},children:"Date"}),u().map((e=>Object(y.jsxs)("th",{style:{padding:"1rem",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",minWidth:"200px"},children:[Object(y.jsx)("div",{children:e.label}),Object(y.jsx)("div",{style:{fontSize:"0.75rem",color:"#6B7280",fontWeight:"normal"},children:e.hours}),Object(y.jsxs)("div",{style:{fontSize:"0.75rem",color:"#6B7280",fontWeight:"normal"},children:[e.medecins," m\xe9decin",e.medecins>1?"s":""]})]},e.id)))]})}),Object(y.jsx)("tbody",{children:(t&&t.planning?Object.keys(t.planning).filter((e=>(!a.start||e>=a.start)&&(!a.end||e<=a.end))).sort():[]).map((e=>Object(y.jsxs)("tr",{style:{backgroundColor:b(e)?"#F9FAFB":"white"},children:[Object(y.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid #E5E7EB",fontWeight:"500",position:"sticky",left:0,backgroundColor:b(e)?"#F9FAFB":"white",zIndex:10},children:c(e)}),u().map((r=>Object(y.jsx)("td",{style:{padding:"1rem",borderBottom:"1px solid #E5E7EB",position:"relative",backgroundColor:"all"!==i?(()=>{const t=Le(o,i,e,r.id);return t?Ne(t).backgroundColor:"transparent"})():"transparent"},children:(!r.samediOnly||6===new Date(e).getDay())&&Object(y.jsxs)(y.Fragment,{children:["all"!==i&&Object(y.jsx)(Qe,{preference:Le(o,i,e,r.id)}),Object(y.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.5rem"},children:Array.from({length:r.medecins}).map(((a,d)=>{var c,b,u,m;return Object(y.jsx)("div",{children:s?Object(y.jsx)(_e,{date:e,creneauId:r.id,index:d,currentValue:null===(c=t.planning[e])||void 0===c||null===(b=c[r.id])||void 0===b?void 0:b[d],medecins:n,desiderata:o,selectedMedecin:i,onChange:l}):Object(y.jsx)("div",{style:{padding:"0.5rem",backgroundColor:"#F3F4F6",borderRadius:"0.375rem",fontSize:"0.875rem"},children:null!==(u=t.planning[e])&&void 0!==u&&null!==(m=u[r.id])&&void 0!==m&&m[d]?(()=>{const s=t.planning[e][r.id][d],l=n.find((e=>e.id===s)),a=Le(o,s,e,r.id),c=Ne(a),b=s===i;return Object(y.jsxs)("span",{style:{...c,fontWeight:b?"bold":"normal"},children:["Dr. ",l?`${l.prenom} ${l.nom}`:"M\xe9decin non trouv\xe9",b?" \u2605":""]})})():"Non assign\xe9"})},d)}))})]})},`${e}-${r.id}`)))]},e)))})]})})},He=r(104);var Ve=e=>{let{medecin:t,planning:r,desiderata:n}=e;if(!t)return null;const o=((e,t)=>{let r=0;return e&&e.planning?(Object.values(e.planning).forEach((e=>{Object.values(e).forEach((e=>{e.includes(t)&&r++}))})),r):0})(r,t.id),i=((e,t)=>{const r=e.find((e=>e.userId===t));return(null===r||void 0===r?void 0:r.nombreGardesSouhaitees)||0})(n,t.id),s=n.filter((e=>e.userId===t.id)).sort(((e,t)=>new Date(t.startDate)-new Date(e.startDate)))[0],l=void 0!==(null===s||void 0===s?void 0:s.nombreGardesMaxParSemaine)?s.nombreGardesMaxParSemaine:"Non d\xe9fini";return Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",padding:"1.5rem",marginBottom:"1.5rem"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem",marginBottom:"1rem"},children:[Object(y.jsx)("div",{style:{backgroundColor:"#EBF5FF",borderRadius:"50%",padding:"0.75rem"},children:Object(y.jsx)(He.a,{size:24,color:"#2563EB"})}),Object(y.jsx)("div",{children:Object(y.jsxs)("h3",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#1F2937",margin:0},children:["Dr. ",t.prenom," ",t.nom]})})]}),Object(y.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(160px, 1fr))",gap:"1rem"},children:[Object(y.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:[Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280",marginBottom:"0.5rem"},children:"Gardes souhait\xe9es / mois"}),Object(y.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#2563EB"},children:i||"Non d\xe9fini"})]}),Object(y.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:[Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280",marginBottom:"0.5rem"},children:"Gardes max. / semaine"}),Object(y.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#059669"},children:"number"===typeof l?l:"Non d\xe9fini"})]}),Object(y.jsxs)("div",{style:{padding:"1rem",backgroundColor:"#F3F4F6",borderRadius:"8px"},children:[Object(y.jsx)("div",{style:{fontSize:"0.875rem",color:"#6B7280",marginBottom:"0.5rem"},children:"Gardes attribu\xe9es"}),Object(y.jsx)("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:o>i?"#DC2626":"#059669"},children:o})]})]})]})};var qe=e=>{let{isOpen:t,onClose:r,onConfirm:n,title:o,message:i,confirmLabel:s="Confirmer",cancelLabel:l="Annuler",icon:a=Re.a,iconColor:d="#DC2626",iconBgColor:c="#FEE2E2",confirmButtonColor:b="#DC2626"}=e;return t?Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",maxWidth:"28rem",width:"90%",textAlign:"center"},children:[Object(y.jsx)("div",{style:{width:"3rem",height:"3rem",backgroundColor:c,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem"},children:Object(y.jsx)(a,{size:24,color:d})}),Object(y.jsx)("h2",{style:{fontSize:"1.25rem",fontWeight:"bold",color:"#111827",marginBottom:"0.5rem"},children:o}),Object(y.jsx)("p",{style:{color:"#6B7280",marginBottom:"1.5rem"},children:i}),Object(y.jsxs)("div",{style:{display:"flex",gap:"1rem",justifyContent:"center"},children:[Object(y.jsx)("button",{onClick:r,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",backgroundColor:"white",color:"#374151",cursor:"pointer"},children:l}),Object(y.jsx)("button",{onClick:n,style:{padding:"0.5rem 1rem",borderRadius:"0.375rem",border:"none",backgroundColor:b,color:"white",cursor:"pointer"},children:s})]})]})}):null};var Je=e=>{let{isOpen:t,onClose:r,onConfirm:n,planning:o}=e;return Object(y.jsx)(qe,{isOpen:t,onClose:r,onConfirm:n,title:o?"Reg\xe9n\xe9rer le planning":"G\xe9n\xe9rer le planning",message:o?"\xcates-vous s\xfbr de vouloir reg\xe9n\xe9rer le planning ? Cette action remplacera le planning actuel.":"\xcates-vous s\xfbr de vouloir g\xe9n\xe9rer un nouveau planning ?",icon:Ie.a,iconColor:"#9333EA",iconBgColor:"#F3E8FF",confirmButtonColor:"#9333EA",confirmLabel:"G\xe9n\xe9rer"})};var Ye=e=>{let{isOpen:t,onClose:r,onConfirm:n,publishedPlanning:o}=e;return Object(y.jsx)(qe,{isOpen:t,onClose:r,onConfirm:n,title:"Publier le planning",message:o?"Cette action mettra \xe0 jour le planning publi\xe9. Les m\xe9decins verront les changements imm\xe9diatement.":"Cette action publiera le planning et le rendra visible pour tous les m\xe9decins.",icon:K.a,iconColor:"#059669",iconBgColor:"#ECFDF5",confirmButtonColor:"#059669",confirmLabel:"Confirmer la publication"})};var Xe=e=>{let{isOpen:t,onClose:r,onConfirm:n}=e;return Object(y.jsx)(qe,{isOpen:t,onClose:r,onConfirm:n,title:"Changements non sauvegard\xe9s",message:"Vous avez des modifications non sauvegard\xe9es. Voulez-vous vraiment quitter le mode \xe9dition ? Les changements seront perdus.",icon:Re.a,iconColor:"#DC2626",iconBgColor:"#FEE2E2",confirmButtonColor:"#DC2626",confirmLabel:"Abandonner les changements",cancelLabel:"Continuer l'\xe9dition"})},Ke=r(39);var Ze=function(e){let{isOpen:t,onClose:r,medecins:o,desiderata:i,periodeSaisie:s,creneaux:l}=e;const[a,d]=Object(n.useState)({}),[c,b]=Object(n.useState)(!1),[u,m]=Object(n.useState)(""),p=o.filter((e=>e.nom.toLowerCase().includes(u.toLowerCase())||e.prenom.toLowerCase().includes(u.toLowerCase())));return t?Object(y.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:50},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"2rem",width:"90%",maxWidth:"600px",position:"relative"},children:[Object(y.jsx)("button",{onClick:r,style:{position:"absolute",top:"1rem",right:"1rem",padding:"0.5rem",border:"none",background:"none",cursor:"pointer"},children:Object(y.jsx)(P.a,{size:20,color:"#6B7280"})}),Object(y.jsxs)("h2",{style:{fontSize:"1.5rem",fontWeight:"bold",color:"#111827",marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[Object(y.jsx)(Ae.a,{size:24}),"Exporter les desiderata"]}),Object(y.jsxs)("div",{style:{marginBottom:"1rem"},children:[Object(y.jsxs)("div",{style:{position:"relative",marginBottom:"1rem"},children:[Object(y.jsx)("div",{style:{position:"absolute",left:"0.75rem",top:"50%",transform:"translateY(-50%)",color:"#6B7280"},children:Object(y.jsx)(le.a,{size:20})}),Object(y.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Rechercher un m\xe9decin...",style:{width:"100%",padding:"0.75rem",paddingLeft:"2.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}}),u&&Object(y.jsx)("button",{onClick:()=>m(""),style:{position:"absolute",right:"0.75rem",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",padding:"0.25rem",cursor:"pointer",color:"#6B7280"},children:Object(y.jsx)(P.a,{size:16})})]}),Object(y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",marginBottom:"1rem",padding:"0.5rem",backgroundColor:"#F3F4F6",borderRadius:"0.375rem",cursor:"pointer"},children:[Object(y.jsx)("input",{type:"checkbox",checked:c,onChange:()=>{const e=!c;b(e);const t={};p.forEach((r=>{t[r.id]=e})),d(t)},style:{width:"auto"}}),Object(y.jsx)("span",{style:{fontWeight:"500"},children:"S\xe9lectionner tous les m\xe9decins"})]}),Object(y.jsx)("div",{style:{maxHeight:"300px",overflowY:"auto",border:"1px solid #E5E7EB",borderRadius:"0.375rem",padding:"0.5rem"},children:p.length>0?p.map((e=>Object(y.jsxs)("label",{style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem",cursor:"pointer",borderRadius:"0.25rem",transition:"background-color 0.2s"},onMouseOver:e=>e.currentTarget.style.backgroundColor="#F3F4F6",onMouseOut:e=>e.currentTarget.style.backgroundColor="transparent",children:[Object(y.jsx)("input",{type:"checkbox",checked:a[e.id]||!1,onChange:()=>{return t=e.id,void d((e=>({...e,[t]:!e[t]})));var t},style:{width:"auto"}}),Object(y.jsxs)("span",{children:["Dr. ",e.prenom," ",e.nom]})]},e.id))):Object(y.jsx)("div",{style:{padding:"1rem",textAlign:"center",color:"#6B7280"},children:"Aucun m\xe9decin trouv\xe9"})})]}),Object(y.jsxs)("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[Object(y.jsx)("button",{onClick:r,style:{padding:"0.5rem 1rem",border:"1px solid #D1D5DB",borderRadius:"0.375rem",backgroundColor:"white",color:"#374151"},children:"Annuler"}),Object(y.jsxs)("button",{onClick:()=>{const e=new Ke.a,t=o.filter((e=>a[e.id])),r=[{id:"QUART_1",label:"Q1"},{id:"QUART_2",label:"Q2"},{id:"RENFORT_1",label:"RM"},{id:"QUART_3",label:"Q3"},{id:"RENFORT_2",label:"RS"},{id:"QUART_4",label:"Q4"}];let n=1;t.forEach(((t,o)=>{o>0&&(e.addPage(),n++);const s=i.find((e=>e.userId===t.id));e.setFontSize(14),e.setFont("helvetica","bold"),e.text(`Dr. ${t.prenom} ${t.nom}`,20,20),e.setFontSize(10),e.setFont("helvetica","normal");e.text(`Gardes/mois: ${(null===s||void 0===s?void 0:s.nombreGardesSouhaitees)||"-"}`,20,30),e.text(`Max/semaine: ${(null===s||void 0===s?void 0:s.nombreGardesMaxParSemaine)||"-"}`,90,30),e.text("Gardes group\xe9es: "+(null!==s&&void 0!==s&&s.gardesGroupees?"Oui":"Non"),20,37),e.text("Renforts associ\xe9s: "+(null!==s&&void 0!==s&&s.renfortsAssocies?"Oui":"Non"),90,37);const l=20,a=40;let d=45;e.setFont("helvetica","bold"),e.text("Date",20,d),r.forEach(((t,r)=>{e.text(t.label,a+r*l+7,d)})),d+=5,e.setLineWidth(.1),e.line(20,d,a+r.length*l,d),d+=5,e.setFont("helvetica","normal");Object.keys((null===s||void 0===s?void 0:s.desiderata)||{}).sort().forEach((t=>{d>270&&(e.addPage(),n++,d=20,e.setFont("helvetica","bold"),e.text("Date",20,d),r.forEach(((t,r)=>{e.text(t.label,a+r*l+7,d)})),d+=5,e.line(20,d,a+r.length*l,d),d+=5,e.setFont("helvetica","normal")),e.text((e=>{const t=new Date(e);return`${["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][t.getDay()]} ${t.getDate().toString().padStart(2,"0")}/${(t.getMonth()+1).toString().padStart(2,"0")}`})(t),20,d),r.forEach(((r,n)=>{var o;const i=(e=>{switch(e){case"Oui":return"O";case"Possible":return"P";case"Non":return"N";default:return"-"}})(null===s||void 0===s||null===(o=s.desiderata[t])||void 0===o?void 0:o[r.id]);"-"!==i&&(e.setFillColor("O"===i?"#BBF7D0":"P"===i?"#FEF08A":"#FECACA"),e.rect(a+n*l,d-4,l,7,"F")),e.text(i,a+n*l+7,d)})),d+=7})),d+=10,d>270&&(e.addPage(),n++,d=20),e.setFontSize(8),e.setFillColor("#BBF7D0"),e.rect(20,d,5,5,"F"),e.text("O: Oui",30,d+4),e.setFillColor("#FEF08A"),e.rect(50,d,5,5,"F"),e.text("P: Possible",60,d+4),e.setFillColor("#FECACA"),e.rect(90,d,5,5,"F"),e.text("N: Non",100,d+4),e.setFillColor("#F3F4F6"),e.rect(130,d,5,5,"F"),e.text("-: Non sp\xe9cifi\xe9",140,d+4),e.setFontSize(8),e.text(`Page ${n}`,180,290)})),e.save("desiderata.pdf")},disabled:0===Object.values(a).filter(Boolean).length,style:{padding:"0.5rem 1rem",backgroundColor:0===Object.values(a).filter(Boolean).length?"#9CA3AF":"#2563EB",color:"white",border:"none",borderRadius:"0.375rem",display:"flex",alignItems:"center",gap:"0.5rem",cursor:0===Object.values(a).filter(Boolean).length?"not-allowed":"pointer"},children:[Object(y.jsx)(Ae.a,{size:18}),"Exporter en PDF"]})]})]})}):null};var et=function(e){let{isAdmin:t=!0}=e;const[r,o]=Object(n.useState)(null),[i,s]=Object(n.useState)(null),[l,d]=Object(n.useState)(null),[b,u]=Object(n.useState)([]),[j,f]=Object(n.useState)([]),[O,v]=Object(n.useState)(!1),[C,D]=Object(n.useState)(!1),[S,k]=Object(n.useState)(!0),[B,R]=Object(n.useState)(null),[T,M]=Object(n.useState)(null),[U,P]=Object(n.useState)(!1),[G,N]=Object(n.useState)({start:"",end:""}),[L,_]=Object(n.useState)("all"),[Q,$]=Object(n.useState)("all"),[H,V]=Object(n.useState)("list"),[q,J]=Object(n.useState)(!1),[Y,X]=Object(n.useState)(!1),[K,Z]=Object(n.useState)(!1),[ee,te]=Object(n.useState)(!1),re=Object(a.f)();Object(n.useEffect)((()=>{(async()=>{try{const e=p.currentUser;if(!e)return void re.push("/");const t=await g(e.uid);if(!t||"admin"!==t.role)return R("Acc\xe8s non autoris\xe9"),void re.push("/");const[r,n,i,l]=await Promise.all([F(),h(),I(),W()]);if(o(r),u(n),i&&(s(i),N({start:i.startDate.split("T")[0],end:i.endDate.split("T")[0]})),d(l),r){const e=await z(r.startDate,r.endDate);f(e)}}catch(B){console.error("Erreur:",B),R("Erreur lors du chargement des donn\xe9es")}finally{k(!1)}})()}),[re]);const ne=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(R(e),setTimeout((()=>R(null)),5e3)):(M(e),setTimeout((()=>M(null)),5e3))};return S?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:Object(y.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",gap:"1rem"},children:[Object(y.jsx)("div",{style:{width:"2rem",height:"2rem",border:"2px solid #E5E7EB",borderTop:"2px solid #2563EB",borderRadius:"50%",animation:"spin 1s linear infinite"}}),Object(y.jsx)("p",{style:{color:"#6B7280"},children:"Chargement..."})]})}):Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsx)(Te,{editMode:O,modified:C,onEditToggle:()=>{O&&C?Z(!0):v(!O)},onGenerateClick:()=>J(!0),onPublishClick:()=>X(!0),onSaveChanges:async()=>{k(!0);try{if(!i||!i.id)throw new Error("Aucun planning \xe0 sauvegarder");await A(i.id,i),ne("Modifications sauvegard\xe9es avec succ\xe8s"),D(!1)}catch(B){console.error("Erreur lors de la sauvegarde:",B),ne("Erreur lors de la sauvegarde des modifications",!0)}finally{k(!1)}},onBackClick:()=>re.push("/dashboard-admin"),onExportClick:()=>te(!0),planning:i}),B&&Object(y.jsxs)("div",{style:{position:"fixed",top:"1rem",right:"1rem",backgroundColor:"#FEE2E2",color:"#DC2626",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[Object(y.jsx)(Re.a,{size:20}),B]}),T&&Object(y.jsxs)("div",{style:{position:"fixed",top:"1rem",right:"1rem",backgroundColor:"#DCFCE7",color:"#16A34A",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[Object(y.jsx)(ze.a,{size:20}),T]}),Object(y.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"6rem 1rem 2rem"},children:[Object(y.jsx)(Ge,{medecins:b,periodeSaisie:r,planning:i,publishedPlanning:l}),Object(y.jsx)(Pe,{showFilters:U,onToggleFilters:()=>P(!U),dateFilter:G,onDateFilterChange:N,creneauFilter:L,onCreneauFilterChange:_,selectedMedecin:Q,onMedecinFilterChange:$,viewMode:H,onViewModeChange:V,medecins:b,creneaux:me}),"all"!==Q&&Object(y.jsx)(Ve,{medecin:b.find((e=>e.id===Q)),planning:i,desiderata:j}),i&&Object(y.jsx)($e,{planning:i,creneaux:me,medecins:b,desiderata:j,selectedMedecin:Q,editMode:O,onMedecinChange:(e,t,r,n)=>{O&&(s((o=>{const i={...o};var s;(i.planning[e]||(i.planning[e]={}),i.planning[e][t])||(i.planning[e][t]=Array((null===(s=me.find((e=>e.id===t)))||void 0===s?void 0:s.medecins)||0).fill(null));return i.planning[e][t][r]=n||null,i})),D(!0))},dateFilter:G,creneauFilter:L})]}),Object(y.jsx)(Je,{isOpen:q,onClose:()=>J(!1),onConfirm:async()=>{k(!0);try{if(!r)throw new Error("P\xe9riode de saisie non d\xe9finie");const e=await(async(e,t)=>{try{const r=await z(e,t),n=(await x()).filter((e=>"medecin"===e.role)).map((e=>e.id)),o={};r.forEach((e=>{o[e.userId]||(o[e.userId]={preferences:{},nombreGardesSouhaitees:e.nombreGardesSouhaitees,nombreGardesMaxParSemaine:e.nombreGardesMaxParSemaine||7,gardesGroupees:e.gardesGroupees,renfortsAssocies:e.renfortsAssocies}),Object.entries(e.desiderata).forEach((t=>{let[r,n]=t;const i=new Date(r).toISOString().split("T")[0];o[e.userId].preferences[i]||(o[e.userId].preferences[i]={}),Object.assign(o[e.userId].preferences[i],n)}))}));let i=ge(e,t,o,n);return i=Se(i,e,t,o,n),i}catch(B){throw console.error("Erreur lors de la g\xe9n\xe9ration du planning:",B),B}})(r.startDate,r.endDate);if(i&&i.id){const t={...i,planning:e};await A(i.id,t),s(t)}else{const t=await(async e=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");return(await Object(c.b)(Object(c.c)(m,w),{...e,startDate:E(e.startDate),endDate:E(e.endDate)})).id}catch(B){throw console.error("Erreur lors de la sauvegarde du planning:",B),B}})({planning:e,startDate:r.startDate,endDate:r.endDate});s({id:t,planning:e})}ne("Planning g\xe9n\xe9r\xe9 avec succ\xe8s"),D(!1),J(!1)}catch(B){console.error("Erreur lors de la g\xe9n\xe9ration du planning:",B),ne("Erreur lors de la g\xe9n\xe9ration du planning",!0)}finally{k(!1)}},planning:i}),Object(y.jsx)(Ye,{isOpen:Y,onClose:()=>X(!1),onConfirm:async()=>{k(!0);try{if(!i||!i.id)throw new Error("Aucun planning \xe0 publier");await(async e=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");const t=Object(c.e)(m,w,e);await Object(c.m)(t,{publishedAt:c.a.now()})}catch(B){throw console.error("Erreur lors de la publication du planning:",B),B}})(i.id);const e=await W();d(e),ne("Planning publi\xe9 avec succ\xe8s"),X(!1)}catch(B){console.error("Erreur lors de la publication:",B),ne("Erreur lors de la publication du planning",!0)}finally{k(!1)}},publishedPlanning:l}),Object(y.jsx)(Xe,{isOpen:K,onClose:()=>Z(!1),onConfirm:()=>{Z(!1),D(!1),v(!1)}}),Object(y.jsx)(Ze,{isOpen:ee,onClose:()=>te(!1),medecins:b,desiderata:j,periodeSaisie:r,creneaux:me})]})};var tt=function(){const[e,t]=Object(n.useState)(""),[r,o]=Object(n.useState)(""),[i,s]=Object(n.useState)(null),[l,d]=Object(n.useState)(!0),[b,u]=Object(n.useState)(null),[j,x]=Object(n.useState)(null),h=Object(a.f)();Object(n.useEffect)((()=>{const e=p.onAuthStateChanged((async e=>{if(e)try{const r=await g(e.uid);if("admin"!==r.role)u("Acc\xe8s non autoris\xe9"),h.push("/");else{s(r);const e=await F();e&&(t(e.startDate.split("T")[0]),o(e.endDate.split("T")[0]))}}catch(b){console.error("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es utilisateur:",b),u("Erreur lors de la r\xe9cup\xe9ration des donn\xe9es utilisateur")}else h.push("/");d(!1)}));return()=>e()}),[h]);const f=function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?(u(e),setTimeout((()=>u(null)),5e3)):(x(e),setTimeout((()=>x(null)),5e3))},v=async t=>{t.preventDefault();try{await(async(e,t)=>{try{if(!p.currentUser)throw new Error("Utilisateur non authentifi\xe9");await Object(c.l)(Object(c.e)(m,w,D),{startDate:E(e),endDate:E(t)}),await k(e,t),console.log("P\xe9riode de saisie mise \xe0 jour et desiderata obsol\xe8tes supprim\xe9s")}catch(b){throw console.error("Erreur lors de la mise \xe0 jour de la p\xe9riode de saisie:",b),b}})(e,r),f("P\xe9riode de saisie mise \xe0 jour avec succ\xe8s! Les desiderata obsol\xe8tes ont \xe9t\xe9 supprim\xe9s.")}catch(b){console.error("Erreur lors de la mise \xe0 jour de la p\xe9riode de saisie:",b),f("Une erreur est survenue lors de la mise \xe0 jour de la p\xe9riode de saisie",!0)}};return l?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."}):b&&!i?Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"1rem"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",maxWidth:"500px",width:"100%",textAlign:"center"},children:[Object(y.jsx)("h2",{style:{color:"#DC2626",marginBottom:"1rem"},children:"Erreur"}),Object(y.jsx)("p",{style:{color:"#4B5563",marginBottom:"1.5rem"},children:b}),Object(y.jsxs)("button",{onClick:()=>h.push("/dashboard-admin"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},children:[Object(y.jsx)(q.a,{size:18}),"Retour au tableau de bord"]})]})}):Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:()=>h.push("/dashboard-admin"),style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#4B5563",border:"none",background:"none",cursor:"pointer",padding:"0.5rem"},children:[Object(y.jsx)(q.a,{size:20}),"Retour"]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold"},children:[Object(y.jsx)(O.a,{size:24}),Object(y.jsx)("span",{children:"P\xe9riode de saisie"})]})]}),Object(y.jsxs)("button",{onClick:v,style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontWeight:"500"},children:[Object(y.jsx)(J.a,{size:18}),"Enregistrer"]})]})}),b&&Object(y.jsxs)("div",{style:{position:"fixed",top:"1rem",right:"1rem",backgroundColor:"#FEE2E2",color:"#DC2626",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[Object(y.jsx)(Re.a,{size:20}),b]}),j&&Object(y.jsxs)("div",{style:{position:"fixed",top:"1rem",right:"1rem",backgroundColor:"#DCFCE7",color:"#16A34A",padding:"1rem",borderRadius:"0.5rem",display:"flex",alignItems:"center",gap:"0.5rem",zIndex:50,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[Object(y.jsx)(ze.a,{size:20}),j]}),Object(y.jsxs)("main",{style:{maxWidth:"1280px",margin:"0 auto",padding:"6rem 1rem 2rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",marginBottom:"2rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:[Object(y.jsx)("h1",{style:{fontSize:"1.875rem",fontWeight:"bold",color:"#1f2937",marginBottom:"0.5rem"},children:"D\xe9finir la p\xe9riode de saisie"}),Object(y.jsx)("p",{style:{color:"#6b7280"},children:"Configurez la p\xe9riode pendant laquelle les m\xe9decins pourront saisir leurs desiderata. Les desiderata en dehors de cette p\xe9riode seront automatiquement supprim\xe9s."})]}),Object(y.jsx)("div",{style:{backgroundColor:"white",borderRadius:"0.5rem",padding:"1.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)"},children:Object(y.jsxs)("form",{onSubmit:v,children:[Object(y.jsxs)("div",{style:{display:"grid",gap:"1.5rem",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Date de d\xe9but"}),Object(y.jsx)("input",{type:"date",value:e,onChange:e=>t(e.target.value),required:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Date de fin"}),Object(y.jsx)("input",{type:"date",value:r,onChange:e=>o(e.target.value),required:!0,style:{width:"100%",padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}})]})]}),Object(y.jsxs)("div",{style:{backgroundColor:"#FFF7ED",border:"1px solid #FB923C",borderRadius:"0.375rem",padding:"1rem",marginTop:"1.5rem",display:"flex",alignItems:"center",gap:"0.75rem"},children:[Object(y.jsx)(Re.a,{size:20,color:"#FB923C"}),Object(y.jsx)("p",{style:{fontSize:"0.875rem",color:"#9A3412",margin:0},children:"Attention : La modification de la p\xe9riode de saisie entrainera la suppression des desiderata obsol\xe8tes."})]})]})})]})]})},rt=r(107),nt=r(108),ot=r(40);const it=[{id:"QUART_1",label:"1er QUART",hours:"1h - 7h",medecins:2,color:"#E3F2FD",textColor:"#1E88E5"},{id:"QUART_2",label:"2\xe8me QUART",hours:"7h - 13h",medecins:3,color:"#E8F5E9",textColor:"#43A047"},{id:"RENFORT_1",label:"RENFORT",hours:"10h - 13h",medecins:1,samediOnly:!0,color:"#FFF3E0",textColor:"#FB8C00"},{id:"QUART_3",label:"3\xe8me QUART",hours:"13h - 19h",medecins:3,color:"#F3E5F5",textColor:"#8E24AA"},{id:"RENFORT_2",label:"RENFORT",hours:"20h - 00h",medecins:1,color:"#FFF3E0",textColor:"#FB8C00"},{id:"QUART_4",label:"4\xe8me QUART",hours:"19h - 1h",medecins:3,color:"#E1F5FE",textColor:"#039BE5"}];var st=function(){const[e,t]=Object(n.useState)(null),[r,o]=Object(n.useState)([]),[i,s]=Object(n.useState)(null),[l,d]=Object(n.useState)(!0),[c,b]=Object(n.useState)(null),[u,m]=Object(n.useState)("all"),[j,x]=Object(n.useState)(!1),[f,v]=Object(n.useState)(""),[C,w]=Object(n.useState)(""),[D,E]=Object(n.useState)(null),S=Object(a.f)();Object(n.useEffect)((()=>{(async()=>{try{const e=p.currentUser;if(!e)return void S.push("/");const r=await g(e.uid);if(!r||"medecin"!==r.role)return b("Acc\xe8s non autoris\xe9"),void S.push("/");const n=await h();o(n),s(r);const i=await F();if(!i)return void b("Aucune p\xe9riode de saisie n'a \xe9t\xe9 d\xe9finie");E(i),v(i.startDate.split("T")[0]),w(i.endDate.split("T")[0]);const l=await W();l?t(l):b("Aucun planning n'a \xe9t\xe9 publi\xe9")}catch(c){console.error("Erreur:",c),b("Une erreur est survenue lors du chargement des donn\xe9es")}finally{d(!1)}})()}),[S]);const k=e=>{const t=new Date(e);return`${["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"][t.getDay()]} ${t.getDate()} ${["jan","f\xe9v","mar","avr","mai","juin","juil","ao\xfbt","sep","oct","nov","d\xe9c"][t.getMonth()]}`},B=e=>{const t=new Date(e);return 0===t.getDay()||6===t.getDay()},R=e=>{if(e===i.id)return`Dr. ${i.prenom} ${i.nom}`;const t=r.find((t=>t.id===e));return t?`Dr. ${t.prenom} ${t.nom}`:"M\xe9decin non trouv\xe9"};if(l)return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Chargement..."});if(c)return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6",padding:"1rem"},children:Object(y.jsxs)("div",{style:{backgroundColor:"white",padding:"2rem",borderRadius:"0.5rem",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",maxWidth:"500px",width:"100%",textAlign:"center"},children:[Object(y.jsx)("h2",{style:{color:"#DC2626",marginBottom:"1rem"},children:"Erreur"}),Object(y.jsx)("p",{style:{color:"#4B5563",marginBottom:"1.5rem"},children:c}),Object(y.jsxs)("button",{onClick:()=>S.push("/dashboard-medecin"),style:{display:"inline-flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer"},children:[Object(y.jsx)(q.a,{size:18}),"Retour au tableau de bord"]})]})});if(!e||!e.planning)return Object(y.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#f3f4f6"},children:"Aucun planning disponible"});const z=Object.keys(e.planning).filter((e=>e>=f&&e<=C)).sort(((e,t)=>new Date(e)-new Date(t)));return Object(y.jsxs)("div",{style:{backgroundColor:"#f3f4f6",minHeight:"100vh"},children:[Object(y.jsx)("nav",{style:{position:"fixed",top:0,left:0,right:0,backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid #e5e7eb",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",zIndex:40},children:Object(y.jsxs)("div",{style:{maxWidth:"1280px",margin:"0 auto",padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:[Object(y.jsxs)("button",{onClick:()=>S.push("/dashboard-medecin"),style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#4B5563",border:"none",background:"none",cursor:"pointer",padding:"0.5rem"},children:[Object(y.jsx)(q.a,{size:20}),"Retour"]}),Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#2563EB",fontWeight:"bold"},children:[Object(y.jsx)(O.a,{size:24}),Object(y.jsx)("span",{children:"Planning des gardes"})]})]}),Object(y.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},children:Object(y.jsxs)("button",{onClick:()=>{if(!e||!e.planning)return;const t=[];Object.keys(e.planning).sort(((e,t)=>new Date(e)-new Date(t))).forEach((r=>{it.forEach((n=>{e.planning[r][n.id]&&e.planning[r][n.id].forEach(((e,o)=>{if(e===i.id){const e=new Date(r),o=new Date(r);let i,s;switch(n.id){case"QUART_1":i=1,s=7;break;case"QUART_2":i=7,s=13;break;case"RENFORT_1":i=10,s=13;break;case"QUART_3":i=13,s=19;break;case"RENFORT_2":i=20,s=24;break;case"QUART_4":i=19,s=25;break;default:i=0,s=0}e.setHours(i,0,0),o.setHours(s,0,0),25===s&&(o.setDate(o.getDate()+1),o.setHours(1,0,0)),t.push({start:[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes()],end:[o.getFullYear(),o.getMonth()+1,o.getDate(),o.getHours(),o.getMinutes()],title:`Garde - ${n.label}`,description:`Garde m\xe9dicale - ${n.label}`,location:"H\xf4pital"})}}))}))})),Object(ot.createEvents)(t,((e,t)=>{if(e)return console.error(e),void alert("Une erreur est survenue lors de la cr\xe9ation du fichier ICS");const r=new Blob([t],{type:"text/calendar;charset=utf-8"}),n=document.createElement("a");n.href=URL.createObjectURL(r),n.download="gardes.ics",document.body.appendChild(n),n.click(),document.body.removeChild(n)}))},style:{display:"flex",alignItems:"center",gap:"0.5rem",padding:"0.5rem 1rem",backgroundColor:"#2563EB",color:"white",borderRadius:"0.375rem",border:"none",cursor:"pointer",fontSize:"0.875rem"},children:[Object(y.jsx)(Ae.a,{size:18}),"Exporter (ICS)"]})})]})}),Object(y.jsxs)("main",{style:{maxWidth:"100%",margin:"0 auto",padding:"2rem",marginTop:"80px",height:"calc(100vh - 80px)",display:"flex",flexDirection:"column",gap:"1.5rem"},children:[Object(y.jsxs)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",marginBottom:"2rem",border:"1px solid #E5E7EB"},children:[Object(y.jsxs)("button",{onClick:()=>x(!j),style:{width:"100%",padding:"1rem 1.5rem",display:"flex",justifyContent:"space-between",alignItems:"center",border:"none",background:"none",cursor:"pointer",borderBottom:j?"1px solid #E5E7EB":"none"},children:[Object(y.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"#374151"},children:[Object(y.jsx)(Me.a,{size:20}),Object(y.jsx)("span",{style:{fontWeight:"500"},children:"Filtres"})]}),j?Object(y.jsx)(Y.a,{size:20}):Object(y.jsx)(X.a,{size:20})]}),j&&Object(y.jsx)("div",{style:{padding:"1.5rem"},children:Object(y.jsxs)("div",{style:{display:"grid",gap:"1.5rem"},children:[Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"Mode d'affichage"}),Object(y.jsxs)("div",{style:{display:"flex",gap:"0.5rem",backgroundColor:"#F3F4F6",padding:"0.25rem",borderRadius:"0.375rem",width:"fit-content"},children:[Object(y.jsxs)("button",{onClick:()=>m("all"),style:{padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",backgroundColor:"all"===u?"#2563EB":"#F3F4F6",color:"all"===u?"white":"#374151",boxShadow:"all"===u?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[Object(y.jsx)(rt.a,{size:16}),"Voir tout"]}),Object(y.jsxs)("button",{onClick:()=>m("personal"),style:{padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",backgroundColor:"personal"===u?"#2563EB":"#F3F4F6",color:"personal"===u?"white":"#374151",boxShadow:"personal"===u?"0 1px 3px rgba(0,0,0,0.1)":"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem",fontWeight:"500"},children:[Object(y.jsx)(nt.a,{size:16}),"Mes gardes"]})]})]}),Object(y.jsxs)("div",{children:[Object(y.jsx)("label",{style:{display:"block",fontSize:"0.875rem",fontWeight:"500",color:"#374151",marginBottom:"0.5rem"},children:"P\xe9riode"}),Object(y.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},children:[Object(y.jsx)("input",{type:"date",value:f,onChange:e=>v(e.target.value),style:{flex:1,padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}}),Object(y.jsx)("input",{type:"date",value:C,onChange:e=>w(e.target.value),style:{flex:1,padding:"0.5rem",borderRadius:"0.375rem",border:"1px solid #D1D5DB",fontSize:"0.875rem"}})]})]})]})})]}),Object(y.jsx)("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 1px 3px rgba(0,0,0,0.1)",overflowX:"auto",flexGrow:1,display:"flex",flexDirection:"column",border:"1px solid #E5E7EB"},children:Object(y.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.875rem",tableLayout:"fixed"},children:[Object(y.jsxs)("colgroup",{children:[Object(y.jsx)("col",{style:{width:"120px"}})," ",it.map((e=>Object(y.jsx)("col",{style:{width:100/it.length+"%"}},e.id)))]}),Object(y.jsx)("thead",{children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{style:{padding:"0.75rem",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",position:"sticky",left:0,top:0,zIndex:20,backgroundColor:"white",width:"120px"},children:"Date"}),it.map((e=>Object(y.jsxs)("th",{style:{padding:"0.75rem",backgroundColor:"#F9FAFB",borderBottom:"1px solid #E5E7EB",textAlign:"left",fontWeight:"600",position:"sticky",top:0,zIndex:10},children:[Object(y.jsx)("div",{children:e.label}),Object(y.jsx)("div",{style:{fontSize:"0.75rem",color:"#6B7280"},children:e.hours})]},e.id)))]})}),Object(y.jsx)("tbody",{children:z.map((t=>Object(y.jsxs)("tr",{style:{backgroundColor:B(t)?"#F9FAFB":"white"},children:[Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB",fontWeight:"500",position:"sticky",left:0,backgroundColor:B(t)?"#F9FAFB":"white",zIndex:10,width:"120px"},children:k(t)}),it.map((r=>{var n,o;return Object(y.jsx)("td",{style:{padding:"0.75rem",borderBottom:"1px solid #E5E7EB",verticalAlign:"top"},children:(!r.samediOnly||6===new Date(t).getDay())&&Object(y.jsx)("div",{style:{display:"flex",flexDirection:"column",gap:"0.25rem"},children:null===(n=e.planning[t])||void 0===n||null===(o=n[r.id])||void 0===o?void 0:o.map(((e,t)=>Object(y.jsx)("div",{style:{padding:"0.5rem",backgroundColor:e?r.color:"#F3F4F6",color:e?r.textColor:"#6B7280",borderRadius:"0.375rem",fontSize:"0.75rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:e?R(e):"Non assign\xe9"},t)))})},`${t}-${r.id}`)}))]},t)))})]})})]})]})};var lt=function(){return Object(y.jsx)(l.a,{children:Object(y.jsx)("div",{className:"App",children:Object(y.jsxs)(a.c,{children:[Object(y.jsx)(a.a,{exact:!0,path:"/",component:v}),Object(y.jsx)(a.a,{path:"/dashboard-medecin",component:L}),Object(y.jsx)(a.a,{path:"/dashboard-admin",component:V}),Object(y.jsx)(a.a,{path:"/formulaire-desirata",component:ie}),Object(y.jsx)(a.a,{path:"/gestion-utilisateurs",component:ue}),Object(y.jsx)(a.a,{path:"/gestion-planning-admin",render:()=>Object(y.jsx)(et,{isAdmin:!0})}),Object(y.jsx)(a.a,{path:"/planning-visualisation",component:st}),Object(y.jsx)(a.a,{path:"/gestion-periode-saisie",component:tt})]})})})};s.a.render(Object(y.jsx)(o.a.StrictMode,{children:Object(y.jsx)(lt,{})}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.43a224bd.chunk.js.map