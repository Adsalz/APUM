{"version":3,"sources":["firebase.js","services/userService.js","services/authService.js","components/Login.js","services/planningService.js","components/ChangePasswordModal.js","components/DashboardMedecin.js","components/DashboardAdmin.js","components/QuickFill.js","components/WeeklyPattern.js","components/FormulaireDesirata.js","components/GestionUtilisateurs.js","utils/planningGenerator.js","components/planning/PlanningHeader.js","components/planning/components/MedecinSearchSelect.js","components/planning/PlanningFilters.js","components/planning/PlanningStatistics.js","utils/planningUtils.js","components/planning/PlanningTable.js","components/planning/MedecinInfoPanel.js","components/planning/modals/ConfirmationModal.js","components/planning/modals/GeneratePlanningModal.js","components/planning/modals/PublishPlanningModal.js","components/planning/modals/DiscardChangesModal.js","components/ExportDesiderataModal.js","components/planning/GestionPlanning.js","components/GestionPeriodeSaisie.js","components/PlanningVisualisation.js","App.js","index.js"],"names":["app","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","db","getFirestore","auth","getAuth","USERS_COLLECTION","getUser","async","uid","console","log","userDoc","getDoc","doc","exists","userData","data","id","error","getAllUsers","user","currentUser","Error","currentUserDoc","role","getDocs","collection","docs","map","getMedecins","q","query","where","logoutUser","signOut","Login","email","setEmail","useState","password","setPassword","setError","success","setSuccess","isLoading","setIsLoading","showResetModal","setShowResetModal","resetEmail","setResetEmail","history","useHistory","_jsxs","style","backgroundColor","minHeight","display","alignItems","justifyContent","padding","children","width","borderRadius","boxShadow","margin","borderTopLeftRadius","borderTopRightRadius","borderBottom","_jsx","height","Calendar","color","textAlign","fontSize","fontWeight","marginBottom","onSubmit","e","preventDefault","userCredential","signInWithEmailAndPassword","userDetails","loginUser","push","type","required","value","onChange","target","border","onClick","background","cursor","disabled","position","top","left","right","bottom","maxWidth","querySnapshot","empty","getUserByEmail","sendPasswordResetEmail","setTimeout","placeholder","DESIDERATA_COLLECTION","PLANNING_COLLECTION","PERIODE_SAISIE_DOC","convertToTimestamp","dateString","Timestamp","date","Date","fromDate","convertFromTimestamp","timestamp","toDate","toISOString","deleteObsoleteDesiderata","newStartDate","newEndDate","desiderataRef","batch","writeBatch","forEach","desiderata","isDesiderataObsolete","delete","ref","commit","desiderataStart","startDate","desiderataEnd","endDate","newStart","newEnd","getPeriodeSaisie","periodeDoc","getDesiderataByUser","userId","getDesiderataForPeriod","debut","fin","debutTimestamp","finTimestamp","nombreGardesSouhaitees","nombreGardesMaxParSemaine","gardesGroupees","renfortsAssocies","updatePlanning","planningId","planning","planningRef","updateDoc","getLatestPlanning","orderBy","limit","latestDoc","getPublishedPlanning","publishedDoc","publishedAt","ChangePasswordModal","_ref","onClose","currentPassword","setCurrentPassword","newPassword","setNewPassword","confirmPassword","setConfirmPassword","zIndex","boxSizing","marginLeft","X","size","updatePassword","updateUserPassword","message","DashboardMedecin","setUser","setDesiderata","loading","setLoading","showChangePassword","setShowChangePassword","isMenuOpen","setIsMenuOpen","useEffect","unsubscribe","onAuthStateChanged","authUser","userDesiderata","handleLogout","gap","ClipboardList","Key","LogOut","Menu","borderTop","flexDirection","nom","length","d","index","toLocaleDateString","DashboardAdmin","medecins","setMedecins","periodeSaisie","setPeriodeSaisie","setPlanning","medecinsList","periode","publishedPlan","fetchData","Settings","prenom","gridTemplateColumns","transition","onMouseOver","currentTarget","onMouseOut","Users","ChevronRight","Clock","QuickFill","creneaux","onApply","selectedCreneaux","setSelectedCreneaux","selectedJours","setSelectedJours","selectedDispo","setSelectedDispo","setStartDate","setEndDate","isExpanded","setIsExpanded","jours","label","ChevronUp","ChevronDown","flexWrap","minWidth","flex","handleSelectFullPeriod","split","toggleAllCreneaux","allSelected","every","creneau","newSelectedCreneaux","checked","prev","hours","toggleAllJours","jour","newSelectedJours","handleApply","alert","selectedCreneauxArray","Object","entries","filter","_ref2","_","isSelected","_ref3","creneauId","selectedJoursArray","_ref4","_ref5","jourId","disponibilite","Upload","WeeklyPattern","onApplyPattern","pattern","setPattern","overflowX","borderCollapse","_pattern$jour$id","samediOnly","handlePatternChange","handleApplyPattern","keys","Copy","options","joursFeries","FormulaireDesirata","setNombreGardesSouhaitees","setNombreGardesMaxParSemaine","setGardesGroupees","setRenfortsAssocies","existingDesiderataId","setExistingDesiderataId","generateDates","useCallback","dates","currentDate","end","setDate","getDate","relevantDesiderata","find","formatDate","getDay","toString","padStart","getMonth","ArrowLeft","desiderataData","desiderataId","updateDesiderata","addDoc","addDesiderata","Save","paddingTop","parseInt","min","max","borderColor","htmlFor","overflow","start","newDesiderata","includes","dayOfWeek","isHighlighted","day","formattedDate","isWeekendOrHoliday","_desiderata$dateStrin","handleDesiderataChange","_desiderata$dateStrin2","option","GestionUtilisateurs","users","setUsers","setCurrentUser","showAddForm","setShowAddForm","newUser","setNewUser","searchTerm","setSearchTerm","roleFilter","setRoleFilter","viewMode","setViewMode","showFilters","setShowFilters","currentPage","setCurrentPage","usersPerPage","showConfirmDelete","setShowConfirmDelete","userToDelete","setUserToDelete","fetchUsers","fetchedUsers","filteredUsers","matchesSearch","toLowerCase","matchesRole","indexOfLastUser","indexOfFirstUser","currentUsers","slice","totalPages","Math","ceil","handleInputChange","name","handleDeleteClick","showNotification","UserPlus","Search","List","Grid","Mail","Trash2","Array","from","i","page","transform","marginTop","createUserWithEmailAndPassword","registerUser","setDoc","createUser","errorMessage","code","deleteDoc","deleteUser","creneauxChevauchants","aCreneauxChevauchants","medecinId","creneauxDuJour","some","creneauChevauchant","_creneauxDuJour$crene","genererPlanningSolution","c","assignerMedecins","getWeekNumber","setHours","yearStart","getFullYear","compterGardesParSemaine","weekNumber","count","planningDate","values","medecinsPriorises","_desiderata$medecinId","_desiderata$medecinId2","_desiderata$medecinId3","choix","preferences","gardesParSemaine","maxGardesParSemaine","aChevauchement","sort","a","b","_desiderata$a","_desiderata$a$prefere","_desiderata$b","_desiderata$b$prefere","choixA","choixB","assignes","medecinChoisi","choisirMedecin","splice","indexOf","medecinsDispo","mois","scoreA","calculerScoreMedecin","_prefMedecin$preferen","_prefMedecin$preferen2","_prefMedecin$preferen3","score","prefMedecin","gardesDuMois","compterGardesMois","estWeekEnd","aGardeWeekEnd","startsWith","aGardeJour","aRenfortJour","reduce","flat","m","dateObj","debutWeekEnd","finWeekEnd","_planning$date$RENFOR","_planning$date$RENFOR2","rechercheTabou","maxIterations","arguments","undefined","meilleurPlanning","meilleurScore","evaluerPlanning","listeTabou","Set","voisins","genererVoisins","meilleurVoisin","meilleurScoreVoisin","Infinity","voisin","scoreVoisin","has","JSON","stringify","add","next","floor","random","medecin","_desiderata$medecin","nouveauPlanning","parse","maxGardes","verifierContraintes","planningRetrait","gardesParMedecin","gardesParMedecinParSemaine","_desiderata$medecinId4","_desiderata$medecinId5","_desiderata$medecinId6","_desiderata$medecinId7","_desiderata$medecinId8","semaine","_desiderata$medecinId9","abs","medecinsDuJour","hierMedecins","avantHierMedecins","PlanningHeader","editMode","modified","onEditToggle","onGenerateClick","onPublishClick","onSaveChanges","onBackClick","onExportClick","_Fragment","Download","RefreshCcw","Edit2","MedecinSearchSelect","isOpen","setIsOpen","wrapperRef","useRef","handleClickOutside","event","current","contains","document","addEventListener","removeEventListener","filteredMedecins","searchTermLower","selectedMedecin","onFocus","maxHeight","overflowY","PlanningFilters","onToggleFilters","dateFilter","onDateFilterChange","creneauFilter","onCreneauFilterChange","onMedecinFilterChange","onViewModeChange","Filter","PlanningStatistics","publishedPlanning","getPreferenceStyle","preference","getMedecinPreference","_desiderata$find2","_desiderata$find2$des","MedecinSelect","currentValue","sortedMedecins","sortMedecinsByPreference","sorted","oui","possible","nonSpecifie","non","_desiderata$find","_desiderata$find$desi","all","PreferenceIndicator","PlanningTable","onMedecinChange","isWeekend","getFilteredCreneaux","tableLayout","_planning$planning$da","_planning$planning$da2","_planning$planning$da3","_planning$planning$da4","MedecinInfoPanel","gardesAttribuees","compterGardesParMedecin","joursCreneaux","gardesSouhaitees","getNombreGardesSouhaitees","medecinDesiderata","gardesMaxParSemaine","User","ConfirmationModal","onConfirm","title","confirmLabel","cancelLabel","icon","Icon","AlertTriangle","iconColor","iconBgColor","confirmButtonColor","GeneratePlanningModal","PublishPlanningModal","DiscardChangesModal","ExportDesiderataModal","selectedMedecins","setSelectedMedecins","selectAll","setSelectAll","paddingLeft","toggleSelectAll","newState","newSelected","toggleMedecin","generatePDF","jsPDF","selectedMedecinsList","creneauxSimplifies","addPage","setFontSize","setFont","text","startY","infoY","cellWidth","dateWidth","currentY","setLineWidth","line","dateStr","_medecinDesiderata$de","symbol","getPreferenceSymbol","setFillColor","rect","save","Boolean","GestionPlanning","isAdmin","setPublishedPlanning","setEditMode","setModified","setDateFilter","setCreneauFilter","setSelectedMedecin","showGenerateConfirm","setShowGenerateConfirm","showPublishConfirm","setShowPublishConfirm","showDiscardChanges","setShowDiscardChanges","showExportModal","setShowExportModal","latestPlan","Promise","animation","toggleEditMode","Check","handleMedecinChange","newPlanning","_creneaux$find","fill","newPlanningData","assign","genererPlanning","updatedPlanning","savedPlanningId","savePlanning","now","publishPlanning","updatedPublishedPlanning","GestionPeriodeSaisie","handleSubmit","textColor","PlanningVisualisation","allMedecins","getMedecinName","filteredDates","exportToICS","events","startHour","endHour","getHours","getMinutes","description","location","createEvents","blob","Blob","link","createElement","href","URL","createObjectURL","download","body","appendChild","click","removeChild","Eye","EyeOff","flexGrow","verticalAlign","whiteSpace","textOverflow","App","Router","className","Switch","Route","exact","path","component","render","ReactDOM","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.43a224bd.chunk.js","sourcesContent":["// src/firebase.js\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getFirestore } from 'firebase/firestore';\r\nimport { getAuth } from 'firebase/auth';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyDesXYDyPsrG5HxkkPbj9XuqFQV91j2ixY\",\r\n  authDomain: \"apum-8cfa4.firebaseapp.com\",\r\n  databaseURL: \"https://apum-8cfa4-default-rtdb.europe-west1.firebasedatabase.app\",\r\n  projectId: \"apum-8cfa4\",\r\n  storageBucket: \"apum-8cfa4.appspot.com\",\r\n  messagingSenderId: \"965430779165\",\r\n  appId: \"1:965430779165:web:2b1d142cc5937744d5d5f4\"\r\n};\r\n\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore(app);\r\nconst auth = getAuth(app);\r\n\r\nexport { db, auth };","import { db, auth } from '../firebase';\r\nimport { \r\n  doc, \r\n  getDoc, \r\n  setDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  getDocs, \r\n  collection, \r\n  query, \r\n  where \r\n} from 'firebase/firestore';\r\n\r\nconst USERS_COLLECTION = 'users';\r\n\r\nexport const createUser = async (uid, userData) => {\r\n  try {\r\n    await setDoc(doc(db, USERS_COLLECTION, uid), userData);\r\n    console.log('Utilisateur créé avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la création de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUser = async (uid) => {\r\n  try {\r\n    if (!uid) {\r\n      console.log('UID non fourni');\r\n      return null;\r\n    }\r\n\r\n    const userDoc = await getDoc(doc(db, USERS_COLLECTION, uid));\r\n    if (userDoc.exists()) {\r\n      const userData = userDoc.data();\r\n      console.log('Utilisateur trouvé:', userData);\r\n      return { id: userDoc.id, ...userData };\r\n    } else {\r\n      console.log('Aucun utilisateur trouvé avec cet UID');\r\n      return null;\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateUser = async (uid, userData) => {\r\n  try {\r\n    await updateDoc(doc(db, USERS_COLLECTION, uid), userData);\r\n    console.log('Utilisateur mis à jour avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deleteUser = async (uid) => {\r\n  try {\r\n    await deleteDoc(doc(db, USERS_COLLECTION, uid));\r\n    console.log('Utilisateur supprimé avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression de l\\'utilisateur:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getAllUsers = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const currentUserDoc = await getDoc(doc(db, USERS_COLLECTION, user.uid));\r\n    if (!currentUserDoc.exists() || currentUserDoc.data().role !== 'admin') {\r\n      throw new Error('Accès non autorisé');\r\n    }\r\n\r\n    const querySnapshot = await getDocs(collection(db, USERS_COLLECTION));\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de tous les utilisateurs:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getMedecins = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const q = query(collection(db, USERS_COLLECTION), where(\"role\", \"==\", \"medecin\"));\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des médecins:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getUserByEmail = async (email) => {\r\n  try {\r\n    const q = query(collection(db, USERS_COLLECTION), where(\"email\", \"==\", email));\r\n    const querySnapshot = await getDocs(q);\r\n    \r\n    if (querySnapshot.empty) {\r\n      return null;\r\n    }\r\n\r\n    const userDoc = querySnapshot.docs[0];\r\n    return {\r\n      id: userDoc.id,\r\n      ...userDoc.data()\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la recherche de l\\'utilisateur par email:', error);\r\n    throw error;\r\n  }\r\n};","import { auth } from '../firebase';\r\nimport { \r\n  createUserWithEmailAndPassword, \r\n  signInWithEmailAndPassword, \r\n  signOut,\r\n  updatePassword\r\n} from 'firebase/auth';\r\nimport { getUser } from './userService';\r\n\r\nexport const registerUser = async (email, password) => {\r\n  try {\r\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n    console.log('Utilisateur enregistré:', userCredential);\r\n    return userCredential;\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'enregistrement:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const loginUser = async (email, password) => {\r\n  try {\r\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n    console.log('Utilisateur connecté:', userCredential);\r\n    const userDetails = await getUser(userCredential.user.uid);\r\n    return { ...userCredential, role: userDetails.role };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la connexion:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const logoutUser = async () => {\r\n  try {\r\n    await signOut(auth);\r\n    console.log('Utilisateur déconnecté');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la déconnexion:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const checkUserRole = async (uid, allowedRoles) => {\r\n  try {\r\n    const user = await getUser(uid);\r\n    if (user && allowedRoles.includes(user.role)) {\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la vérification du rôle:', error);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const updateUserPassword = async (newPassword) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (user) {\r\n      await updatePassword(user, newPassword);\r\n      console.log('Mot de passe mis à jour avec succès');\r\n    } else {\r\n      throw new Error('Aucun utilisateur connecté');\r\n    }\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour du mot de passe:', error);\r\n    throw error;\r\n  }\r\n};","import React, { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { loginUser } from '../services/authService';\r\nimport { getUser, getUserByEmail } from '../services/userService';\r\nimport { Calendar } from 'lucide-react';\r\nimport { sendPasswordResetEmail } from 'firebase/auth';\r\nimport { auth } from '../firebase';\r\n\r\nfunction Login() {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [showResetModal, setShowResetModal] = useState(false);\r\n  const [resetEmail, setResetEmail] = useState('');\r\n  const history = useHistory();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      const userCredential = await loginUser(email, password);\r\n      if (!userCredential || !userCredential.user) {\r\n        throw new Error('Échec de l\\'authentification');\r\n      }\r\n\r\n      const user = await getUser(userCredential.user.uid);\r\n      if (!user) {\r\n        throw new Error('Utilisateur non trouvé dans Firestore');\r\n      }\r\n\r\n      if (user.role === 'medecin') {\r\n        history.push('/dashboard-medecin');\r\n      } else if (user.role === 'admin') {\r\n        history.push('/dashboard-admin');\r\n      } else {\r\n        setError('Rôle utilisateur non reconnu');\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Erreur de connexion:\", error);\r\n      setError('Identifiants incorrects ou erreur de connexion');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleResetPassword = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    setIsLoading(true);\r\n\r\n    try {\r\n      // Vérifier d'abord si l'utilisateur existe dans notre base\r\n      const user = await getUserByEmail(resetEmail);\r\n      \r\n      if (!user) {\r\n        setError('Aucun compte n\\'est associé à cette adresse email.');\r\n        setIsLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Envoyer l'email de réinitialisation\r\n      await sendPasswordResetEmail(auth, resetEmail);\r\n      setSuccess('Email de réinitialisation envoyé avec succès !');\r\n      setTimeout(() => {\r\n        setShowResetModal(false);\r\n        setResetEmail('');\r\n        setSuccess('');\r\n      }, 3000);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de l'envoi de l'email de réinitialisation:\", error);\r\n      setError('Erreur lors de l\\'envoi de l\\'email de réinitialisation');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ \r\n      backgroundColor: '#f3f4f6', \r\n      minHeight: '100vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      padding: '24px'\r\n    }}>\r\n      <div style={{ \r\n        width: '400px',\r\n        backgroundColor: 'white', \r\n        borderRadius: '8px', \r\n        boxShadow: '0 4px 6px rgba(0, 0, 0, 0.1)',\r\n        margin: 'auto'\r\n      }}>\r\n        <div style={{ \r\n          padding: '24px', \r\n          backgroundColor: '#EBF5FF', \r\n          borderTopLeftRadius: '8px', \r\n          borderTopRightRadius: '8px', \r\n          borderBottom: '1px solid #E5E7EB'\r\n        }}>\r\n          <div style={{ \r\n            width: '64px', \r\n            height: '64px', \r\n            margin: '0 auto 16px', \r\n            backgroundColor: '#BFDBFE', \r\n            borderRadius: '50%', \r\n            display: 'flex', \r\n            alignItems: 'center', \r\n            justifyContent: 'center' \r\n          }}>\r\n            <Calendar style={{ width: '32px', height: '32px', color: '#2563EB' }} />\r\n          </div>\r\n          <h2 style={{ textAlign: 'center', fontSize: '24px', fontWeight: 'bold', color: '#2563EB', marginBottom: '8px' }}>\r\n            Planning APUM\r\n          </h2>\r\n          <p style={{ textAlign: 'center', fontSize: '14px', color: '#6B7280' }}>\r\n            Connectez-vous pour accéder à votre espace\r\n          </p>\r\n        </div>\r\n\r\n        <div style={{ padding: '24px' }}>\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{ \r\n                display: 'block', \r\n                fontSize: '14px', \r\n                fontWeight: '500', \r\n                color: '#374151', \r\n                marginBottom: '4px' \r\n              }}>\r\n                Email\r\n              </label>\r\n              <input\r\n                type=\"email\"\r\n                required\r\n                value={email}\r\n                onChange={(e) => setEmail(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{ \r\n                display: 'block', \r\n                fontSize: '14px', \r\n                fontWeight: '500', \r\n                color: '#374151', \r\n                marginBottom: '4px' \r\n              }}>\r\n                Mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                required\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => setShowResetModal(true)}\r\n              style={{\r\n                width: '100%',\r\n                textAlign: 'center',\r\n                color: '#2563EB',\r\n                fontSize: '14px',\r\n                marginBottom: '16px',\r\n                background: 'none',\r\n                border: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              Mot de passe oublié ?\r\n            </button>\r\n\r\n            {error && (\r\n              <div style={{ \r\n                backgroundColor: '#FEE2E2', \r\n                padding: '12px', \r\n                borderRadius: '4px', \r\n                marginBottom: '16px',\r\n                border: '1px solid #FECACA'\r\n              }}>\r\n                <p style={{ color: '#DC2626', fontSize: '14px' }}>{error}</p>\r\n              </div>\r\n            )}\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '8px 16px',\r\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\r\n                color: 'white',\r\n                borderRadius: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                cursor: isLoading ? 'not-allowed' : 'pointer',\r\n                border: 'none'\r\n              }}\r\n            >\r\n              {isLoading ? 'Connexion...' : 'Se connecter'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Modal de réinitialisation du mot de passe */}\r\n      {showResetModal && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: 0,\r\n          left: 0,\r\n          right: 0,\r\n          bottom: 0,\r\n          backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          padding: '24px'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '8px',\r\n            padding: '24px',\r\n            width: '100%',\r\n            maxWidth: '400px',\r\n            position: 'relative'\r\n          }}>\r\n            <button\r\n              onClick={() => {\r\n                setShowResetModal(false);\r\n                setError('');\r\n                setSuccess('');\r\n                setResetEmail('');\r\n              }}\r\n              style={{\r\n                position: 'absolute',\r\n                top: '12px',\r\n                right: '12px',\r\n                background: 'none',\r\n                border: 'none',\r\n                fontSize: '24px',\r\n                cursor: 'pointer',\r\n                color: '#6B7280'\r\n              }}\r\n            >\r\n              ×\r\n            </button>\r\n\r\n            <h3 style={{\r\n              fontSize: '18px',\r\n              fontWeight: 'bold',\r\n              color: '#111827',\r\n              marginBottom: '16px'\r\n            }}>\r\n              Réinitialisation du mot de passe\r\n            </h3>\r\n\r\n            <form onSubmit={handleResetPassword}>\r\n              <div style={{ marginBottom: '16px' }}>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '4px'\r\n                }}>\r\n                  Email\r\n                </label>\r\n                <input\r\n                  type=\"email\"\r\n                  required\r\n                  value={resetEmail}\r\n                  onChange={(e) => setResetEmail(e.target.value)}\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '8px 12px',\r\n                    borderRadius: '4px',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '14px'\r\n                  }}\r\n                  placeholder=\"Entrez votre adresse email\"\r\n                />\r\n              </div>\r\n\r\n              {error && (\r\n                <div style={{\r\n                  backgroundColor: '#FEE2E2',\r\n                  padding: '12px',\r\n                  borderRadius: '4px',\r\n                  marginBottom: '16px'\r\n                }}>\r\n                  <p style={{ color: '#DC2626', fontSize: '14px' }}>{error}</p>\r\n                </div>\r\n              )}\r\n\r\n              {success && (\r\n                <div style={{\r\n                  backgroundColor: '#D1FAE5',\r\n                  padding: '12px',\r\n                  borderRadius: '4px',\r\n                  marginBottom: '16px'\r\n                }}>\r\n                  <p style={{ color: '#059669', fontSize: '14px' }}>{success}</p>\r\n                </div>\r\n              )}\r\n\r\n              <button\r\n                type=\"submit\"\r\n                disabled={isLoading}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 16px',\r\n                  backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\r\n                  color: 'white',\r\n                  borderRadius: '4px',\r\n                  fontSize: '14px',\r\n                  fontWeight: '500',\r\n                  cursor: isLoading ? 'not-allowed' : 'pointer',\r\n                  border: 'none'\r\n                }}\r\n              >\r\n                {isLoading ? 'Envoi...' : 'Envoyer le lien de réinitialisation'}\r\n              </button>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import { db, auth } from '../firebase';\r\nimport { \r\n  collection, \r\n  addDoc, \r\n  updateDoc, \r\n  doc, \r\n  deleteDoc, \r\n  getDocs, \r\n  query, \r\n  where,\r\n  orderBy,\r\n  limit,\r\n  getDoc,\r\n  setDoc,\r\n  Timestamp,\r\n  writeBatch\r\n} from 'firebase/firestore';\r\n\r\nconst DESIDERATA_COLLECTION = 'desiderata';\r\nconst PLANNING_COLLECTION = 'planning';\r\nconst PERIODE_SAISIE_DOC = 'periode_saisie';\r\n\r\nconst convertToTimestamp = (dateString) => {\r\n  if (dateString instanceof Timestamp) {\r\n    return dateString;\r\n  }\r\n  const date = new Date(dateString);\r\n  return Timestamp.fromDate(date);\r\n};\r\n\r\nconst convertFromTimestamp = (timestamp) => {\r\n  if (timestamp instanceof Timestamp) {\r\n    return timestamp.toDate().toISOString();\r\n  }\r\n  if (typeof timestamp === 'string') {\r\n    return timestamp;\r\n  }\r\n  console.error('Format de date non reconnu:', timestamp);\r\n  return null;\r\n};\r\n\r\nexport const setPeriodeSaisie = async (startDate, endDate) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    \r\n    await setDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC), { \r\n      startDate: convertToTimestamp(startDate),\r\n      endDate: convertToTimestamp(endDate)\r\n    });\r\n\r\n    await deleteObsoleteDesiderata(startDate, endDate);\r\n\r\n    console.log('Période de saisie mise à jour et desiderata obsolètes supprimés');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour de la période de saisie:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst deleteObsoleteDesiderata = async (newStartDate, newEndDate) => {\r\n  try {\r\n    const desiderataRef = collection(db, DESIDERATA_COLLECTION);\r\n    const q = query(desiderataRef);\r\n    const querySnapshot = await getDocs(q);\r\n\r\n    const batch = writeBatch(db);\r\n    querySnapshot.forEach((doc) => {\r\n      const desiderata = doc.data();\r\n      if (isDesiderataObsolete(desiderata, newStartDate, newEndDate)) {\r\n        batch.delete(doc.ref);\r\n      }\r\n    });\r\n\r\n    await batch.commit();\r\n    console.log('Desiderata obsolètes supprimés');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression des desiderata obsolètes:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst isDesiderataObsolete = (desiderata, newStartDate, newEndDate) => {\r\n  const desiderataStart = desiderata.startDate.toDate();\r\n  const desiderataEnd = desiderata.endDate.toDate();\r\n  const newStart = new Date(newStartDate);\r\n  const newEnd = new Date(newEndDate);\r\n\r\n  return desiderataEnd < newStart || desiderataStart > newEnd;\r\n};\r\n\r\nexport const getPeriodeSaisie = async () => {\r\n  try {\r\n    const periodeDoc = await getDoc(doc(db, PLANNING_COLLECTION, PERIODE_SAISIE_DOC));\r\n    if (periodeDoc.exists()) {\r\n      const data = periodeDoc.data();\r\n      return {\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate)\r\n      };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération de la période de saisie:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const addDesiderata = async (userId, desiderata) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const docRef = await addDoc(collection(db, DESIDERATA_COLLECTION), {\r\n      userId,\r\n      startDate: convertToTimestamp(desiderata.startDate),\r\n      endDate: convertToTimestamp(desiderata.endDate),\r\n      desiderata: desiderata.desiderata,\r\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\r\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\r\n      gardesGroupees: desiderata.gardesGroupees,\r\n      renfortsAssocies: desiderata.renfortsAssocies\r\n    });\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Erreur lors de l\\'ajout des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updateDesiderata = async (desiderataId, desiderata) => {\r\n  try {\r\n    const desiderataRef = doc(db, DESIDERATA_COLLECTION, desiderataId);\r\n    await updateDoc(desiderataRef, {\r\n      startDate: convertToTimestamp(desiderata.startDate),\r\n      endDate: convertToTimestamp(desiderata.endDate),\r\n      desiderata: desiderata.desiderata,\r\n      nombreGardesSouhaitees: desiderata.nombreGardesSouhaitees,\r\n      nombreGardesMaxParSemaine: desiderata.nombreGardesMaxParSemaine, // Ajout de ce champ\r\n      gardesGroupees: desiderata.gardesGroupees,\r\n      renfortsAssocies: desiderata.renfortsAssocies\r\n    });\r\n    console.log('Desiderata mis à jour avec succès');\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getDesiderataByUser = async (userId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(collection(db, DESIDERATA_COLLECTION), where(\"userId\", \"==\", userId));\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      return { \r\n        id: doc.id, \r\n        ...data,\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate)\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des desiderata:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getDesiderataForPeriod = async (debut, fin) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n\r\n    const debutTimestamp = convertToTimestamp(debut);\r\n    const finTimestamp = convertToTimestamp(fin);\r\n\r\n    const q = query(\r\n      collection(db, DESIDERATA_COLLECTION),\r\n      where(\"startDate\", \"<=\", finTimestamp),\r\n      where(\"endDate\", \">=\", debutTimestamp)\r\n    );\r\n    const querySnapshot = await getDocs(q);\r\n    return querySnapshot.docs.map(doc => {\r\n      const data = doc.data();\r\n      return {\r\n        id: doc.id,\r\n        userId: data.userId,\r\n        startDate: convertFromTimestamp(data.startDate),\r\n        endDate: convertFromTimestamp(data.endDate),\r\n        desiderata: data.desiderata,\r\n        nombreGardesSouhaitees: data.nombreGardesSouhaitees,\r\n        nombreGardesMaxParSemaine: data.nombreGardesMaxParSemaine,\r\n        gardesGroupees: data.gardesGroupees,\r\n        renfortsAssocies: data.renfortsAssocies\r\n      };\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération des desiderata pour la période:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const savePlanning = async (planning) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const docRef = await addDoc(collection(db, PLANNING_COLLECTION), {\r\n      ...planning,\r\n      startDate: convertToTimestamp(planning.startDate),\r\n      endDate: convertToTimestamp(planning.endDate),\r\n    });\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la sauvegarde du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const updatePlanning = async (planningId, planning) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\r\n    await updateDoc(planningRef, {\r\n      ...planning,\r\n      startDate: convertToTimestamp(planning.startDate),\r\n      endDate: convertToTimestamp(planning.endDate),\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la mise à jour du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getLatestPlanning = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(collection(db, PLANNING_COLLECTION), orderBy('startDate', 'desc'), limit(1));\r\n    const querySnapshot = await getDocs(q);\r\n    if (querySnapshot.empty) {\r\n      return null;\r\n    }\r\n    const latestDoc = querySnapshot.docs[0];\r\n    const data = latestDoc.data();\r\n    return { \r\n      id: latestDoc.id, \r\n      ...data,\r\n      startDate: convertFromTimestamp(data.startDate),\r\n      endDate: convertFromTimestamp(data.endDate)\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération du dernier planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const deletePlanning = async (planningId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    await deleteDoc(doc(db, PLANNING_COLLECTION, planningId));\r\n  } catch (error) {\r\n    console.error('Erreur lors de la suppression du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const publishPlanning = async (planningId) => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const planningRef = doc(db, PLANNING_COLLECTION, planningId);\r\n    await updateDoc(planningRef, {\r\n      publishedAt: Timestamp.now()\r\n    });\r\n  } catch (error) {\r\n    console.error('Erreur lors de la publication du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport const getPublishedPlanning = async () => {\r\n  try {\r\n    const user = auth.currentUser;\r\n    if (!user) {\r\n      throw new Error('Utilisateur non authentifié');\r\n    }\r\n    const q = query(\r\n      collection(db, PLANNING_COLLECTION), \r\n      where(\"publishedAt\", \"!=\", null),\r\n      orderBy(\"publishedAt\", \"desc\"),\r\n      limit(1)\r\n    );\r\n    const querySnapshot = await getDocs(q);\r\n    if (querySnapshot.empty) {\r\n      return null;\r\n    }\r\n    const publishedDoc = querySnapshot.docs[0];\r\n    const data = publishedDoc.data();\r\n    return { \r\n      id: publishedDoc.id, \r\n      ...data,\r\n      startDate: convertFromTimestamp(data.startDate),\r\n      endDate: convertFromTimestamp(data.endDate),\r\n      publishedAt: convertFromTimestamp(data.publishedAt)\r\n    };\r\n  } catch (error) {\r\n    console.error('Erreur lors de la récupération du planning publié:', error);\r\n    throw error;\r\n  }\r\n};","// src/components/ChangePasswordModal.js\r\nimport React, { useState } from 'react';\r\nimport { X } from 'lucide-react';\r\nimport { updateUserPassword } from '../services/authService';\r\n\r\nfunction ChangePasswordModal({ onClose }) {\r\n  const [currentPassword, setCurrentPassword] = useState('');\r\n  const [newPassword, setNewPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n    setSuccess('');\r\n    setIsLoading(true);\r\n\r\n    if (newPassword !== confirmPassword) {\r\n      setError('Les nouveaux mots de passe ne correspondent pas.');\r\n      setIsLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      await updateUserPassword(newPassword);\r\n      setSuccess('Mot de passe mis à jour avec succès.');\r\n      setCurrentPassword('');\r\n      setNewPassword('');\r\n      setConfirmPassword('');\r\n      setTimeout(onClose, 2000);\r\n    } catch (error) {\r\n      setError('Erreur lors de la mise à jour du mot de passe: ' + error.message);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 50,\r\n      padding: '16px'\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '8px',\r\n        width: '100%',\r\n        maxWidth: '400px',\r\n        position: 'relative',\r\n        boxSizing: 'border-box'\r\n      }}>\r\n        {/* En-tête du modal avec titre et bouton de fermeture alignés */}\r\n        <div style={{\r\n          padding: '16px 24px',\r\n          borderBottom: '1px solid #E5E7EB',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '20px',\r\n            fontWeight: 'bold',\r\n            color: '#2563EB',\r\n            margin: 0 // Supprime les marges par défaut\r\n          }}>\r\n            Changer le mot de passe\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              background: 'none',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              padding: '4px',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              justifyContent: 'center',\r\n              marginLeft: '8px'\r\n            }}\r\n          >\r\n            <X size={20} color=\"#6B7280\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* Corps du modal */}\r\n        <div style={{ padding: '24px' }}>\r\n          {error && (\r\n            <div style={{\r\n              backgroundColor: '#FEE2E2',\r\n              padding: '12px',\r\n              borderRadius: '4px',\r\n              marginBottom: '16px',\r\n              color: '#DC2626',\r\n              fontSize: '14px'\r\n            }}>\r\n              {error}\r\n            </div>\r\n          )}\r\n\r\n          {success && (\r\n            <div style={{\r\n              backgroundColor: '#DCFCE7',\r\n              padding: '12px',\r\n              borderRadius: '4px',\r\n              marginBottom: '16px',\r\n              color: '#16A34A',\r\n              fontSize: '14px'\r\n            }}>\r\n              {success}\r\n            </div>\r\n          )}\r\n\r\n          <form onSubmit={handleSubmit} style={{ marginBottom: '0' }}>\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Mot de passe actuel\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={currentPassword}\r\n                onChange={(e) => setCurrentPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Nouveau mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={newPassword}\r\n                onChange={(e) => setNewPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{ marginBottom: '16px' }}>\r\n              <label style={{\r\n                display: 'block',\r\n                marginBottom: '4px',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                color: '#374151'\r\n              }}>\r\n                Confirmer le nouveau mot de passe\r\n              </label>\r\n              <input\r\n                type=\"password\"\r\n                value={confirmPassword}\r\n                onChange={(e) => setConfirmPassword(e.target.value)}\r\n                required\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '8px 12px',\r\n                  borderRadius: '4px',\r\n                  border: '1px solid #D1D5DB',\r\n                  fontSize: '14px',\r\n                  boxSizing: 'border-box'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <button\r\n              type=\"submit\"\r\n              disabled={isLoading}\r\n              style={{\r\n                width: '100%',\r\n                padding: '8px 16px',\r\n                backgroundColor: isLoading ? '#93C5FD' : '#2563EB',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '4px',\r\n                cursor: isLoading ? 'not-allowed' : 'pointer',\r\n                fontSize: '14px',\r\n                fontWeight: '500',\r\n                boxSizing: 'border-box'\r\n              }}\r\n            >\r\n              {isLoading ? 'Mise à jour...' : 'Changer le mot de passe'}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ChangePasswordModal;","// src/components/DashboardMedecin.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { getDesiderataByUser } from '../services/planningService';\r\nimport { logoutUser } from '../services/authService';\r\nimport { Calendar, ClipboardList, LogOut, Key, Menu, X } from 'lucide-react';\r\nimport ChangePasswordModal from './ChangePasswordModal';\r\n\r\nfunction DashboardMedecin() {\r\n  const [user, setUser] = useState(null);\r\n  const [desiderata, setDesiderata] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showChangePassword, setShowChangePassword] = useState(false);\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\r\n      if (authUser) {\r\n        try {\r\n          const userData = await getUser(authUser.uid);\r\n          if (userData && userData.role === 'medecin') {\r\n            setUser(userData);\r\n            try {\r\n              const userDesiderata = await getDesiderataByUser(userData.id);\r\n              setDesiderata(userDesiderata);\r\n            } catch (error) {\r\n              console.error('Erreur lors de la récupération des desiderata:', error);\r\n            }\r\n          } else {\r\n            setError('Utilisateur non autorisé');\r\n            history.push('/');\r\n          }\r\n        } catch (error) {\r\n          console.error('Erreur:', error);\r\n          setError('Erreur lors de la récupération des données');\r\n        }\r\n      } else {\r\n        history.push('/');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [history]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n      history.push('/');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la déconnexion:\", error);\r\n      setError('Erreur lors de la déconnexion');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Erreur: {error}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          {/* Logo et titre */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563eb',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.25rem'\r\n          }}>\r\n            <Calendar size={24} />\r\n            <span>Planning APUM</span>\r\n          </div>\r\n\r\n          {/* Navigation principale - Desktop */}\r\n          <div style={{\r\n            display: 'none',\r\n            gap: '1rem',\r\n            '@media (min-width: 768px)': {\r\n              display: 'flex'\r\n            }\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/formulaire-desirata')}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <ClipboardList size={18} />\r\n              Saisir desiderata\r\n            </button>\r\n            <button\r\n              onClick={() => history.push('/planning-visualisation')}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Calendar size={18} />\r\n              Voir planning\r\n            </button>\r\n            <button\r\n              onClick={() => setShowChangePassword(true)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#dc2626',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n\r\n          {/* Bouton menu mobile */}\r\n          <button\r\n            onClick={() => setIsMenuOpen(!isMenuOpen)}\r\n            style={{\r\n              display: 'flex',\r\n              padding: '0.5rem',\r\n              color: '#4b5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              '@media (min-width: 768px)': {\r\n                display: 'none'\r\n              }\r\n            }}\r\n          >\r\n            {isMenuOpen ? <X size={24} /> : <Menu size={24} />}\r\n          </button>\r\n        </div>\r\n\r\n        {/* Menu mobile */}\r\n        <div style={{\r\n          display: isMenuOpen ? 'block' : 'none',\r\n          backgroundColor: 'white',\r\n          borderTop: '1px solid #e5e7eb',\r\n          '@media (min-width: 768px)': {\r\n            display: 'none'\r\n          }\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            flexDirection: 'column',\r\n            padding: '0.5rem'\r\n          }}>\r\n            <button\r\n              onClick={() => {\r\n                history.push('/formulaire-desirata');\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <ClipboardList size={18} />\r\n              Saisir desiderata\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                history.push('/planning-visualisation');\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <Calendar size={18} />\r\n              Voir planning\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                setShowChangePassword(true);\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#4b5563',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={() => {\r\n                handleLogout();\r\n                setIsMenuOpen(false);\r\n              }}\r\n              style={{\r\n                padding: '1rem',\r\n                color: '#dc2626',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                width: '100%',\r\n                justifyContent: 'flex-start'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem',\r\n      }}>\r\n        {/* Carte de bienvenue */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Bienvenue, Dr. {user?.nom}\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Gérez vos gardes et consultez le planning depuis votre tableau de bord\r\n          </p>\r\n        </div>\r\n\r\n        {/* Carte des derniers desiderata */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '800px',\r\n          margin: '0 auto'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Derniers desiderata\r\n          </h2>\r\n          {desiderata.length > 0 ? (\r\n            <ul style={{\r\n              display: 'flex',\r\n              flexDirection: 'column',\r\n              gap: '0.5rem'\r\n            }}>\r\n              {desiderata.map((d, index) => (\r\n                <li key={index} style={{\r\n                  padding: '0.75rem',\r\n                  backgroundColor: '#f9fafb',\r\n                  borderRadius: '0.375rem',\r\n                  fontSize: '0.875rem'\r\n                }}>\r\n                  Pour la période du {new Date(d.startDate).toLocaleDateString()} au {new Date(d.endDate).toLocaleDateString()}\r\n                </li>\r\n              ))}\r\n            </ul>\r\n          ) : (\r\n            <p style={{ color: '#6b7280' }}>Aucun desiderata saisi</p>\r\n          )}\r\n        </div>\r\n      </main>\r\n\r\n      {/* Modal de changement de mot de passe */}\r\n      {showChangePassword && (\r\n        <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default DashboardMedecin;","// src/components/DashboardAdmin.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser, getMedecins } from '../services/userService';\r\nimport { logoutUser } from '../services/authService';\r\nimport { getPeriodeSaisie, getPublishedPlanning } from '../services/planningService';\r\nimport { \r\n  Users, \r\n  Calendar, \r\n  Clock, \r\n  LogOut, \r\n  Key,\r\n  ClipboardList,\r\n  Settings,\r\n  ChevronRight\r\n} from 'lucide-react';\r\nimport ChangePasswordModal from './ChangePasswordModal';\r\n\r\nfunction DashboardAdmin() {\r\n  const [user, setUser] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [planning, setPlanning] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [showChangePassword, setShowChangePassword] = useState(false);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'admin') {\r\n          setError('Utilisateur non autorisé');\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        setUser(userData);\r\n\r\n        // Récupération des données pour les statistiques\r\n        const medecinsList = await getMedecins();\r\n        setMedecins(medecinsList);\r\n\r\n        const periode = await getPeriodeSaisie();\r\n        setPeriodeSaisie(periode);\r\n\r\n        const publishedPlan = await getPublishedPlanning();\r\n        setPlanning(publishedPlan);\r\n\r\n      } catch (error) {\r\n        console.error('Erreur:', error);\r\n        setError('Erreur lors de la récupération des données');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  const handleLogout = async () => {\r\n    try {\r\n      await logoutUser();\r\n      history.push('/');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la déconnexion:\", error);\r\n      setError('Erreur lors de la déconnexion');\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.25rem'\r\n          }}>\r\n            <Settings size={24} />\r\n            <span>Administration APUM</span>\r\n          </div>\r\n\r\n          {/* Actions utilisateur */}\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => setShowChangePassword(true)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#4b5563',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Key size={18} />\r\n              Mot de passe\r\n            </button>\r\n            <button\r\n              onClick={handleLogout}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                color: '#dc2626',\r\n                borderRadius: '0.375rem',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <LogOut size={18} />\r\n              Déconnexion\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem',\r\n      }}>\r\n        {/* Carte de bienvenue */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Bienvenue, {user?.prenom} {user?.nom}\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Gérez les utilisateurs, le planning et les périodes de saisie depuis votre tableau de bord\r\n          </p>\r\n        </div>\r\n\r\n        {/* Actions principales */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          marginBottom: '2rem'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: '600',\r\n            color: '#1f2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Actions principales\r\n          </h2>\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))'\r\n          }}>\r\n            {/* Gestion des utilisateurs */}\r\n            <button\r\n              onClick={() => history.push('/gestion-utilisateurs')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#EBF5FF',\r\n                border: '1px solid #2563EB',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#DBEAFE';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#EBF5FF';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#2563EB' }}>\r\n                  <Users size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer les utilisateurs</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Ajouter ou modifier des utilisateurs</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#2563EB\" />\r\n            </button>\r\n\r\n            {/* Gestion du planning */}\r\n            <button\r\n              onClick={() => history.push('/gestion-planning-admin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#F3E8FF',\r\n                border: '1px solid #9333EA',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#EDE9FE';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#F3E8FF';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#9333EA' }}>\r\n                  <Calendar size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Gérer le planning</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Générer et modifier le planning</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#9333EA\" />\r\n            </button>\r\n\r\n            {/* Gestion de la période de saisie */}\r\n            <button\r\n              onClick={() => history.push('/gestion-periode-saisie')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'space-between',\r\n                padding: '1rem',\r\n                backgroundColor: '#ECFDF5',\r\n                border: '1px solid #059669',\r\n                borderRadius: '0.5rem',\r\n                cursor: 'pointer',\r\n                transition: 'all 0.2s',\r\n                textAlign: 'left'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#D1FAE5';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#ECFDF5';\r\n              }}\r\n            >\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{ color: '#059669' }}>\r\n                  <ClipboardList size={24} />\r\n                </div>\r\n                <div>\r\n                  <div style={{ fontWeight: '500', color: '#1F2937' }}>Période de saisie</div>\r\n                  <div style={{ fontSize: '0.875rem', color: '#6B7280' }}>Définir la période de saisie des desiderata</div>\r\n                </div>\r\n              </div>\r\n              <ChevronRight size={20} color=\"#059669\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Cartes de statistiques */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\r\n          gap: '1rem'\r\n        }}>\r\n          {/* Nombre de médecins */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n          }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <div style={{\r\n                backgroundColor: '#EBF5FF',\r\n                borderRadius: '0.5rem',\r\n                padding: '0.75rem',\r\n                color: '#2563EB'\r\n              }}>\r\n                <Users size={24} />\r\n              </div>\r\n              <h2 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#1f2937'\r\n              }}>\r\n                Médecins\r\n              </h2>\r\n            </div>\r\n            <p style={{\r\n              fontSize: '2rem',\r\n              fontWeight: 'bold',\r\n              color: '#2563EB'\r\n            }}>\r\n              {medecins.length}\r\n            </p>\r\n          </div>\r\n\r\n          {/* Période de saisie */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n          }}>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem',\r\n              marginBottom: '1rem'\r\n            }}>\r\n              <div style={{\r\n                backgroundColor: '#F0FDF4',\r\n                borderRadius: '0.5rem',\r\n                padding: '0.75rem',\r\n                color: '#16A34A'\r\n              }}>\r\n                <Clock size={24} />\r\n              </div>\r\n              <h2 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#1f2937'\r\n              }}>\r\n                Période de saisie\r\n              </h2>\r\n            </div>\r\n            <p style={{\r\n              fontSize: '0.875rem',\r\n              color: periodeSaisie ? '#16A34A' : '#DC2626',\r\n              fontWeight: '500'\r\n            }}>\r\n              {periodeSaisie ? (\r\n                `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\r\n              ) : (\r\n                'Aucune période définie'\r\n              )}\r\n            </p>\r\n          </div>\r\n\r\n          {/* État du planning */}\r\n          <div style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            padding: '1.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n         }}>\r\n           <div style={{\r\n             display: 'flex',\r\n             alignItems: 'center',\r\n             gap: '0.75rem',\r\n             marginBottom: '1rem'\r\n           }}>\r\n             <div style={{\r\n               backgroundColor: '#FFF7ED',\r\n               borderRadius: '0.5rem',\r\n               padding: '0.75rem',\r\n               color: '#EA580C'\r\n             }}>\r\n               <Calendar size={24} />\r\n             </div>\r\n             <h2 style={{\r\n               fontSize: '1.125rem',\r\n               fontWeight: '600',\r\n               color: '#1f2937'\r\n             }}>\r\n               Planning\r\n             </h2>\r\n           </div>\r\n           <p style={{\r\n             fontSize: '0.875rem',\r\n             color: planning ? '#16A34A' : '#DC2626',\r\n             fontWeight: '500'\r\n           }}>\r\n             {planning ? 'Planning publié' : 'Aucun planning publié'}\r\n           </p>\r\n         </div>\r\n       </div>\r\n     </main>\r\n\r\n     {/* Modal de changement de mot de passe */}\r\n     {showChangePassword && (\r\n       <ChangePasswordModal onClose={() => setShowChangePassword(false)} />\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default DashboardAdmin;","// src/components/QuickFill.js\r\nimport React, { useState } from 'react';\r\nimport { Upload, ChevronDown, ChevronUp, Calendar } from 'lucide-react';\r\n\r\nfunction QuickFill({ creneaux, onApply, periodeSaisie }) {\r\n  const [selectedCreneaux, setSelectedCreneaux] = useState({});\r\n  const [selectedJours, setSelectedJours] = useState({});\r\n  const [selectedDispo, setSelectedDispo] = useState('');\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  const jours = [\r\n    { id: '1', label: 'Lundi' },\r\n    { id: '2', label: 'Mardi' },\r\n    { id: '3', label: 'Mercredi' },\r\n    { id: '4', label: 'Jeudi' },\r\n    { id: '5', label: 'Vendredi' },\r\n    { id: '6', label: 'Samedi' },\r\n    { id: '0', label: 'Dimanche' }\r\n  ];\r\n\r\n  const handleSelectFullPeriod = () => {\r\n    if (periodeSaisie) {\r\n      setStartDate(periodeSaisie.startDate.split('T')[0]);\r\n      setEndDate(periodeSaisie.endDate.split('T')[0]);\r\n    }\r\n  };\r\n\r\n  const toggleAllCreneaux = () => {\r\n    const allSelected = creneaux.every(creneau => selectedCreneaux[creneau.id]);\r\n    const newSelectedCreneaux = {};\r\n    creneaux.forEach(creneau => {\r\n      newSelectedCreneaux[creneau.id] = !allSelected;\r\n    });\r\n    setSelectedCreneaux(newSelectedCreneaux);\r\n  };\r\n\r\n  const toggleAllJours = () => {\r\n    const allSelected = jours.every(jour => selectedJours[jour.id]);\r\n    const newSelectedJours = {};\r\n    jours.forEach(jour => {\r\n      newSelectedJours[jour.id] = !allSelected;\r\n    });\r\n    setSelectedJours(newSelectedJours);\r\n  };\r\n\r\n  const handleApply = () => {\r\n    if (!selectedDispo) {\r\n      alert('Veuillez sélectionner une disponibilité');\r\n      return;\r\n    }\r\n\r\n    if (!startDate || !endDate) {\r\n      alert('Veuillez sélectionner une période');\r\n      return;\r\n    }\r\n\r\n    const selectedCreneauxArray = Object.entries(selectedCreneaux)\r\n      .filter(([_, isSelected]) => isSelected)\r\n      .map(([creneauId]) => creneauId);\r\n\r\n    const selectedJoursArray = Object.entries(selectedJours)\r\n      .filter(([_, isSelected]) => isSelected)\r\n      .map(([jourId]) => jourId);\r\n\r\n    if (selectedCreneauxArray.length === 0) {\r\n      alert('Veuillez sélectionner au moins un créneau');\r\n      return;\r\n    }\r\n\r\n    if (selectedJoursArray.length === 0) {\r\n      alert('Veuillez sélectionner au moins un jour');\r\n      return;\r\n    }\r\n\r\n    onApply({\r\n      creneaux: selectedCreneauxArray,\r\n      jours: selectedJoursArray,\r\n      disponibilite: selectedDispo,\r\n      startDate,\r\n      endDate\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      width: '100%'\r\n    }}>\r\n      {/* En-tête avec bouton pour replier/déplier */}\r\n      <button\r\n        onClick={() => setIsExpanded(!isExpanded)}\r\n        style={{\r\n          width: '100%',\r\n          padding: '1rem 1.5rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          border: 'none',\r\n          background: 'none',\r\n          cursor: 'pointer',\r\n          borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\r\n          transition: 'background-color 0.2s',\r\n          borderRadius: '8px'\r\n        }}\r\n      >\r\n        <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n          <h3 style={{\r\n            fontSize: '1.125rem',\r\n            fontWeight: '600',\r\n            color: '#1F2937',\r\n            margin: 0\r\n          }}>\r\n            Remplissage rapide\r\n          </h3>\r\n        </div>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          color: '#6B7280',\r\n          fontSize: '0.875rem',\r\n          gap: '0.5rem'\r\n        }}>\r\n          {isExpanded ? 'Replier' : 'Déplier'}\r\n          {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n        </div>\r\n      </button>\r\n\r\n      {isExpanded && (\r\n        <div style={{ padding: '1.5rem' }}>\r\n          <div style={{ display: 'grid', gap: '1.5rem' }}>\r\n            {/* Sélection de la période */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Période de remplissage\r\n              </label>\r\n              <div style={{ \r\n                display: 'flex', \r\n                flexDirection: 'column',\r\n                gap: '1rem'\r\n              }}>\r\n                <div style={{\r\n                  display: 'flex',\r\n                  flexWrap: 'wrap',\r\n                  gap: '1rem'\r\n                }}>\r\n                  <div style={{ minWidth: '140px', flex: 1 }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '0.875rem',\r\n                      color: '#6B7280',\r\n                      marginBottom: '0.25rem'\r\n                    }}>\r\n                      Du :\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={startDate}\r\n                      onChange={(e) => setStartDate(e.target.value)}\r\n                      style={{\r\n                        padding: '0.5rem',\r\n                        border: '1px solid #D1D5DB',\r\n                        borderRadius: '0.375rem',\r\n                        width: '100%'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                  <div style={{ minWidth: '140px', flex: 1 }}>\r\n                    <label style={{\r\n                      display: 'block',\r\n                      fontSize: '0.875rem',\r\n                      color: '#6B7280',\r\n                      marginBottom: '0.25rem'\r\n                    }}>\r\n                      Au :\r\n                    </label>\r\n                    <input\r\n                      type=\"date\"\r\n                      value={endDate}\r\n                      onChange={(e) => setEndDate(e.target.value)}\r\n                      style={{\r\n                        padding: '0.5rem',\r\n                        border: '1px solid #D1D5DB',\r\n                        borderRadius: '0.375rem',\r\n                        width: '100%'\r\n                      }}\r\n                    />\r\n                  </div>\r\n                </div>\r\n                <button\r\n                  onClick={handleSelectFullPeriod}\r\n                  style={{\r\n                    padding: '0.75rem 1rem',\r\n                    backgroundColor: '#EBF5FF',\r\n                    border: '1px solid #2563EB',\r\n                    borderRadius: '0.375rem',\r\n                    color: '#2563EB',\r\n                    fontSize: '0.875rem',\r\n                    cursor: 'pointer',\r\n                    width: '100%',\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    justifyContent: 'center',\r\n                    gap: '0.5rem',\r\n                    fontWeight: '500',\r\n                    transition: 'all 0.2s'\r\n                  }}\r\n                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\r\n                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\r\n                >\r\n                  <Calendar size={16} />\r\n                  Toute la période\r\n                </button>\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection des créneaux */}\r\n            <div>\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                <label style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151'\r\n                }}>\r\n                  Créneaux\r\n                </label>\r\n                <button\r\n                  onClick={toggleAllCreneaux}\r\n                  style={{\r\n                    fontSize: '0.75rem',\r\n                    color: '#2563EB',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    padding: '0.25rem 0.5rem'\r\n                  }}\r\n                >\r\n                  {creneaux.every(creneau => selectedCreneaux[creneau.id]) \r\n                    ? 'Tout désélectionner' \r\n                    : 'Tout sélectionner'}\r\n                </button>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gap: '0.5rem',\r\n                border: '1px solid #E5E7EB',\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem'\r\n              }}>\r\n                {creneaux.map(creneau => (\r\n                  <label\r\n                    key={creneau.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.5rem',\r\n                      cursor: 'pointer',\r\n                      borderRadius: '0.25rem',\r\n                      transition: 'background-color 0.2s'\r\n                    }}\r\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\r\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedCreneaux[creneau.id] || false}\r\n                      onChange={() => {\r\n                        setSelectedCreneaux(prev => ({\r\n                          ...prev,\r\n                          [creneau.id]: !prev[creneau.id]\r\n                        }));\r\n                      }}\r\n                      style={{\r\n                        width: '1rem',\r\n                        height: '1rem',\r\n                        borderRadius: '0.25rem'\r\n                      }}\r\n                    />\r\n                    <div>\r\n                      <div>{creneau.label}</div>\r\n                      <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>\r\n                        {creneau.hours}\r\n                      </div>\r\n                    </div>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection des jours */}\r\n            <div>\r\n              <div style={{\r\n                display: 'flex',\r\n                justifyContent: 'space-between',\r\n                alignItems: 'center',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                <label style={{\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151'\r\n                }}>\r\n                  Jours de la semaine\r\n                </label>\r\n                <button\r\n                  onClick={toggleAllJours}\r\n                  style={{\r\n                    fontSize: '0.75rem',\r\n                    color: '#2563EB',\r\n                    background: 'none',\r\n                    border: 'none',\r\n                    cursor: 'pointer',\r\n                    padding: '0.25rem 0.5rem'\r\n                  }}\r\n                >\r\n                  {jours.every(jour => selectedJours[jour.id]) \r\n                    ? 'Tout désélectionner' \r\n                    : 'Tout sélectionner'}\r\n                </button>\r\n              </div>\r\n              <div style={{\r\n                display: 'grid',\r\n                gridTemplateColumns: 'repeat(auto-fill, minmax(140px, 1fr))',\r\n                gap: '0.5rem',\r\n                border: '1px solid #E5E7EB',\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem'\r\n              }}>\r\n                {jours.map(jour => (\r\n                  <label\r\n                    key={jour.id}\r\n                    style={{\r\n                      display: 'flex',\r\n                      alignItems: 'center',\r\n                      gap: '0.5rem',\r\n                      padding: '0.5rem',\r\n                      cursor: 'pointer',\r\n                      borderRadius: '0.25rem',\r\n                      transition: 'background-color 0.2s'\r\n                    }}\r\n                    onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\r\n                    onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\r\n                  >\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      checked={selectedJours[jour.id] || false}\r\n                      onChange={() => {\r\n                        setSelectedJours(prev => ({\r\n                          ...prev,\r\n                          [jour.id]: !prev[jour.id]\r\n                        }));\r\n                      }}\r\n                      style={{\r\n                        width: '1rem',\r\n                        height: '1rem',\r\n                        borderRadius: '0.25rem'\r\n                      }}\r\n                    />\r\n                    <span>{jour.label}</span>\r\n                  </label>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            {/* Sélection de la disponibilité */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Disponibilité\r\n              </label>\r\n              <select\r\n                value={selectedDispo}\r\n                onChange={(e) => setSelectedDispo(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              >\r\n                <option value=\"\">Sélectionnez une disponibilité</option>\r\n                <option value=\"Oui\">Oui</option>\r\n                <option value=\"Possible\">Possible</option>\r\n                <option value=\"Non\">Non</option>\r\n              </select>\r\n            </div>\r\n\r\n            {/* Bouton d'application */}\r\n            <button\r\n              onClick={handleApply}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                justifyContent: 'center',\r\n                gap: '0.5rem',\r\n                width: '100%',\r\n                padding: '0.75rem',\r\n                backgroundColor: '#2563EB',\r\n                color: 'white',\r\n                border: 'none',\r\n                borderRadius: '0.375rem',\r\n                fontWeight: '500',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Upload size={18} />\r\n              Appliquer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default QuickFill;","// src/components/WeeklyPattern.js\r\nimport React, { useState } from 'react';\r\nimport { Calendar, Copy, ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\nfunction WeeklyPattern({ creneaux, onApplyPattern, periodeSaisie }) {\r\n const [startDate, setStartDate] = useState('');\r\n const [endDate, setEndDate] = useState('');\r\n const [pattern, setPattern] = useState({});\r\n const [isExpanded, setIsExpanded] = useState(false);\r\n \r\n const jours = [\r\n   { id: '1', label: 'Lundi' },\r\n   { id: '2', label: 'Mardi' },\r\n   { id: '3', label: 'Mercredi' },\r\n   { id: '4', label: 'Jeudi' },\r\n   { id: '5', label: 'Vendredi' },\r\n   { id: '6', label: 'Samedi' },\r\n   { id: '0', label: 'Dimanche' }\r\n ];\r\n\r\n const handlePatternChange = (jour, creneau, value) => {\r\n   setPattern(prev => ({\r\n     ...prev,\r\n     [jour]: {\r\n       ...(prev[jour] || {}),\r\n       [creneau]: value\r\n     }\r\n   }));\r\n };\r\n\r\n const handleSelectFullPeriod = () => {\r\n   if (periodeSaisie) {\r\n     setStartDate(periodeSaisie.startDate.split('T')[0]);\r\n     setEndDate(periodeSaisie.endDate.split('T')[0]);\r\n   }\r\n };\r\n\r\n const handleApplyPattern = () => {\r\n   if (!startDate || !endDate) {\r\n     alert('Veuillez sélectionner une période');\r\n     return;\r\n   }\r\n\r\n   if (Object.keys(pattern).length === 0) {\r\n     alert('Veuillez définir au moins une préférence dans le pattern');\r\n     return;\r\n   }\r\n\r\n   onApplyPattern(pattern, startDate, endDate);\r\n };\r\n\r\n return (\r\n   <div style={{\r\n     backgroundColor: 'white',\r\n     borderRadius: '8px',\r\n     boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n     width: '100%'\r\n   }}>\r\n     {/* En-tête avec bouton pour replier/déplier */}\r\n     <button\r\n       onClick={() => setIsExpanded(!isExpanded)}\r\n       style={{\r\n         width: '100%',\r\n         padding: '1rem 1.5rem',\r\n         display: 'flex',\r\n         justifyContent: 'space-between',\r\n         alignItems: 'center',\r\n         border: 'none',\r\n         background: 'none',\r\n         cursor: 'pointer',\r\n         borderBottom: isExpanded ? '1px solid #E5E7EB' : 'none',\r\n         transition: 'background-color 0.2s',\r\n         borderRadius: '8px'\r\n       }}\r\n     >\r\n       <div style={{ display: 'flex', alignItems: 'center', gap: '0.5rem' }}>\r\n         <h3 style={{\r\n           fontSize: '1.125rem',\r\n           fontWeight: '600',\r\n           color: '#1F2937',\r\n           margin: 0\r\n         }}>\r\n           Pattern hebdomadaire\r\n         </h3>\r\n       </div>\r\n       <div style={{\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         color: '#6B7280',\r\n         fontSize: '0.875rem',\r\n         gap: '0.5rem'\r\n       }}>\r\n         {isExpanded ? 'Replier' : 'Déplier'}\r\n         {isExpanded ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n       </div>\r\n     </button>\r\n\r\n     {isExpanded && (\r\n       <div style={{ padding: '1.5rem' }}>\r\n         <div style={{ marginBottom: '1.5rem' }}>\r\n           <p style={{\r\n             fontSize: '0.875rem',\r\n             color: '#6B7280',\r\n             marginBottom: '1rem'\r\n           }}>\r\n             Définissez votre semaine type ci-dessous. Ce pattern sera appliqué automatiquement sur la période sélectionnée.\r\n           </p>\r\n\r\n           {/* Table du pattern */}\r\n           <div style={{ \r\n             overflowX: 'auto',\r\n             marginBottom: '1.5rem',\r\n             maxWidth: '100%'\r\n           }}>\r\n             <table style={{\r\n               width: '100%',\r\n               borderCollapse: 'collapse',\r\n               fontSize: '0.875rem',\r\n               minWidth: '600px'\r\n             }}>\r\n               <thead>\r\n                 <tr>\r\n                   <th style={{\r\n                     padding: '0.75rem',\r\n                     backgroundColor: '#F3F4F6',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     textAlign: 'left',\r\n                     fontWeight: '600',\r\n                     minWidth: '100px'\r\n                   }}>\r\n                     Jour\r\n                   </th>\r\n                   {creneaux.map(creneau => (\r\n                     <th key={creneau.id} style={{\r\n                       padding: '0.75rem',\r\n                       backgroundColor: '#F3F4F6',\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       textAlign: 'left',\r\n                       fontWeight: '600'\r\n                     }}>\r\n                       <div>{creneau.label}</div>\r\n                       <div style={{ fontSize: '0.75rem', color: '#6B7280' }}>{creneau.hours}</div>\r\n                     </th>\r\n                   ))}\r\n                 </tr>\r\n               </thead>\r\n               <tbody>\r\n                 {jours.map(jour => (\r\n                   <tr key={jour.id}>\r\n                     <td style={{\r\n                       padding: '0.75rem',\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       fontWeight: '500'\r\n                     }}>\r\n                       {jour.label}\r\n                     </td>\r\n                     {creneaux.map(creneau => (\r\n                       <td key={creneau.id} style={{\r\n                         padding: '0.75rem',\r\n                         borderBottom: '1px solid #E5E7EB'\r\n                       }}>\r\n                         {(!creneau.samediOnly || jour.id === '6') && (\r\n                           <select\r\n                             value={pattern[jour.id]?.[creneau.id] || ''}\r\n                             onChange={(e) => handlePatternChange(jour.id, creneau.id, e.target.value)}\r\n                             style={{\r\n                               width: '100%',\r\n                               padding: '0.5rem',\r\n                               border: '1px solid #D1D5DB',\r\n                               borderRadius: '0.375rem',\r\n                               backgroundColor: 'white'\r\n                             }}\r\n                           >\r\n                             <option value=\"\">-</option>\r\n                             <option value=\"Oui\">Oui</option>\r\n                             <option value=\"Possible\">Possible</option>\r\n                             <option value=\"Non\">Non</option>\r\n                           </select>\r\n                         )}\r\n                       </td>\r\n                     ))}\r\n                   </tr>\r\n                 ))}\r\n               </tbody>\r\n             </table>\r\n           </div>\r\n\r\n           {/* Sélection de la période */}\r\n           <div style={{\r\n             display: 'flex',\r\n             flexDirection: 'column',\r\n             gap: '1rem',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             <div style={{\r\n               display: 'flex',\r\n               flexWrap: 'wrap',\r\n               gap: '1rem',\r\n               marginBottom: '1rem'\r\n             }}>\r\n               <div style={{ minWidth: '140px', flex: 1 }}>\r\n                 <label style={{\r\n                   display: 'block',\r\n                   fontSize: '0.875rem',\r\n                   fontWeight: '500',\r\n                   color: '#374151',\r\n                   marginBottom: '0.5rem'\r\n                 }}>\r\n                   Du :\r\n                 </label>\r\n                 <input\r\n                   type=\"date\"\r\n                   value={startDate}\r\n                   onChange={(e) => setStartDate(e.target.value)}\r\n                   style={{\r\n                     padding: '0.5rem',\r\n                     border: '1px solid #D1D5DB',\r\n                     borderRadius: '0.375rem',\r\n                     width: '100%'\r\n                   }}\r\n                 />\r\n               </div>\r\n               <div style={{ minWidth: '140px', flex: 1 }}>\r\n                 <label style={{\r\n                   display: 'block',\r\n                   fontSize: '0.875rem',\r\n                   fontWeight: '500',\r\n                   color: '#374151',\r\n                   marginBottom: '0.5rem'\r\n                 }}>\r\n                   Au :\r\n                 </label>\r\n                 <input\r\n                   type=\"date\"\r\n                   value={endDate}\r\n                   onChange={(e) => setEndDate(e.target.value)}\r\n                   style={{\r\n                     padding: '0.5rem',\r\n                     border: '1px solid #D1D5DB',\r\n                     borderRadius: '0.375rem',\r\n                     width: '100%'\r\n                   }}\r\n                 />\r\n               </div>\r\n             </div>\r\n             \r\n             <button\r\n               onClick={handleSelectFullPeriod}\r\n               style={{\r\n                 padding: '0.75rem 1rem',\r\n                 backgroundColor: '#EBF5FF',\r\n                 border: '1px solid #2563EB',\r\n                 borderRadius: '0.375rem',\r\n                 color: '#2563EB',\r\n                 fontSize: '0.875rem',\r\n                 cursor: 'pointer',\r\n                 width: '100%',\r\n                 display: 'flex',\r\n                 alignItems: 'center',\r\n                 justifyContent: 'center',\r\n                 gap: '0.5rem',\r\n                 fontWeight: '500',\r\n                 transition: 'all 0.2s'\r\n               }}\r\n               onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#DBEAFE'}\r\n               onMouseOut={(e) => e.currentTarget.style.backgroundColor = '#EBF5FF'}\r\n             >\r\n               <Calendar size={16} />\r\n               Toute la période\r\n             </button>\r\n           </div>\r\n\r\n           {/* Bouton d'application */}\r\n           <button\r\n             onClick={handleApplyPattern}\r\n             style={{\r\n               display: 'flex',\r\n               alignItems: 'center',\r\n               justifyContent: 'center',\r\n               gap: '0.5rem',\r\n               width: '100%',\r\n               padding: '0.75rem',\r\n               backgroundColor: '#2563EB',\r\n               color: 'white',\r\n               border: 'none',\r\n               borderRadius: '0.375rem',\r\n               fontWeight: '500',\r\n               cursor: 'pointer'\r\n             }}\r\n           >\r\n             <Copy size={18} />\r\n             Appliquer le pattern\r\n           </button>\r\n         </div>\r\n       </div>\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default WeeklyPattern;","// src/components/FormulaireDesirata.js\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { \r\n  addDesiderata, \r\n  getPeriodeSaisie, \r\n  getDesiderataByUser, \r\n  updateDesiderata \r\n} from '../services/planningService';\r\nimport { \r\n  Calendar,\r\n  ArrowLeft,\r\n  Save\r\n} from 'lucide-react';\r\nimport QuickFill from './QuickFill';\r\nimport WeeklyPattern from './WeeklyPattern';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2 },\r\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3 },\r\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true },\r\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3 },\r\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1 },\r\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3 }\r\n];\r\n\r\nconst options = ['Oui', 'Possible', 'Non'];\r\n\r\nconst joursFeries = [\r\n  '2024-01-01', '2024-04-01', '2024-05-01', '2024-05-08', '2024-05-09',\r\n  '2024-05-20', '2024-07-14', '2024-08-15', '2024-11-01', '2024-11-11', '2024-12-25'\r\n];\r\n\r\nfunction FormulaireDesirata() {\r\n  // États\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [desiderata, setDesiderata] = useState({});\r\n  const [nombreGardesSouhaitees, setNombreGardesSouhaitees] = useState(0);\r\n  const [nombreGardesMaxParSemaine, setNombreGardesMaxParSemaine] = useState(3);\r\n  const [gardesGroupees, setGardesGroupees] = useState(false);\r\n  const [renfortsAssocies, setRenfortsAssocies] = useState(false);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [existingDesiderataId, setExistingDesiderataId] = useState(null);\r\n  \r\n  const history = useHistory();\r\n\r\n  // Génération des dates\r\n  const generateDates = useCallback(() => {\r\n    if (!periodeSaisie) return [];\r\n    const dates = [];\r\n    let currentDate = new Date(periodeSaisie.startDate);\r\n    const end = new Date(periodeSaisie.endDate);\r\n    while (currentDate <= end) {\r\n      dates.push(new Date(currentDate));\r\n      currentDate.setDate(currentDate.getDate() + 1);\r\n    }\r\n    return dates;\r\n  }, [periodeSaisie]);\r\n\r\n  // Effet pour charger les données initiales\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (userData && userData.role === 'medecin') {\r\n          setUser(userData);\r\n          const periode = await getPeriodeSaisie();\r\n          if (periode) {\r\n            setPeriodeSaisie(periode);\r\n            const userDesiderata = await getDesiderataByUser(userData.id);\r\n            const relevantDesiderata = userDesiderata.find(d => \r\n              new Date(d.startDate) <= new Date(periode.endDate) && \r\n              new Date(d.endDate) >= new Date(periode.startDate)\r\n            );\r\n            \r\n            if (relevantDesiderata) {\r\n              setExistingDesiderataId(relevantDesiderata.id);\r\n              setDesiderata(relevantDesiderata.desiderata || {});\r\n              setNombreGardesSouhaitees(relevantDesiderata.nombreGardesSouhaitees || 0);\r\n              setNombreGardesMaxParSemaine(relevantDesiderata.nombreGardesMaxParSemaine || 3);\r\n              setGardesGroupees(relevantDesiderata.gardesGroupees || false);\r\n              setRenfortsAssocies(relevantDesiderata.renfortsAssocies || false);\r\n            }\r\n          } else {\r\n            setError('Aucune période de saisie n\\'a été définie par l\\'administrateur.');\r\n          }\r\n        } else {\r\n          setError('Utilisateur non autorisé');\r\n          history.push('/');\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des données:', error);\r\n        setError('Erreur lors de la récupération des données: ' + error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  // Gestion des changements de desiderata\r\n  const handleDesiderataChange = (date, creneau, value) => {\r\n    setDesiderata(prev => ({\r\n      ...prev,\r\n      [date]: {\r\n        ...(prev[date] || {}),\r\n        [creneau]: value\r\n      }\r\n    }));\r\n  };\r\n\r\n  // Gestion du remplissage rapide\r\n  const handleQuickFill = ({ creneaux: selectedCreneaux, jours: selectedJours, disponibilite, startDate, endDate }) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n    \r\n    setDesiderata(prev => {\r\n      const newDesiderata = { ...prev };\r\n      const dates = generateDates().filter(date => \r\n        date >= start && \r\n        date <= end\r\n      );\r\n\r\n      dates.forEach(date => {\r\n        if (selectedJours.includes(date.getDay().toString())) {\r\n          const dateString = date.toISOString().split('T')[0];\r\n          if (!newDesiderata[dateString]) {\r\n            newDesiderata[dateString] = {};\r\n          }\r\n          selectedCreneaux.forEach(creneauId => {\r\n            if (creneauId !== 'RENFORT_1' || date.getDay() === 6) {\r\n              newDesiderata[dateString][creneauId] = disponibilite;\r\n            }\r\n          });\r\n        }\r\n      });\r\n\r\n      return newDesiderata;\r\n    });\r\n  };\r\n\r\n  // Gestion du pattern hebdomadaire\r\n  const handleApplyPattern = (pattern, startDate, endDate) => {\r\n    const start = new Date(startDate);\r\n    const end = new Date(endDate);\r\n\r\n    setDesiderata(prev => {\r\n      const newDesiderata = { ...prev };\r\n      let currentDate = new Date(start);\r\n\r\n      while (currentDate <= end) {\r\n        const dayOfWeek = currentDate.getDay().toString();\r\n        const dateString = currentDate.toISOString().split('T')[0];\r\n\r\n        if (pattern[dayOfWeek]) {\r\n          newDesiderata[dateString] = { ...pattern[dayOfWeek] };\r\n        }\r\n\r\n        currentDate.setDate(currentDate.getDate() + 1);\r\n      }\r\n\r\n      return newDesiderata;\r\n    });\r\n  };\r\n\r\n  // Soumission du formulaire\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (user) {\r\n      try {\r\n        if (!periodeSaisie || !periodeSaisie.startDate || !periodeSaisie.endDate) {\r\n          throw new Error('Période de saisie non définie');\r\n        }\r\n\r\n        const desiderataData = {\r\n          startDate: periodeSaisie.startDate,\r\n          endDate: periodeSaisie.endDate,\r\n          desiderata,\r\n          nombreGardesSouhaitees,\r\n          nombreGardesMaxParSemaine,\r\n          gardesGroupees,\r\n          renfortsAssocies\r\n        };\r\n\r\n        if (existingDesiderataId) {\r\n          await updateDesiderata(existingDesiderataId, desiderataData);\r\n          alert('Desiderata mis à jour avec succès!');\r\n        } else {\r\n          await addDesiderata(user.id, desiderataData);\r\n          alert('Desiderata soumis avec succès!');\r\n        }\r\n        history.push('/dashboard-medecin');\r\n      } catch (error) {\r\n        console.error(\"Erreur lors de la soumission des desiderata:\", error);\r\n        setError('Une erreur est survenue lors de la soumission des desiderata: ' + error.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fonctions utilitaires\r\n  const isWeekendOrHoliday = (date) => {\r\n    const day = date.getDay();\r\n    const formattedDate = date.toISOString().split('T')[0];\r\n    return day === 0 || day === 6 || joursFeries.includes(formattedDate);\r\n  };\r\n\r\n  const formatDate = (date) => {\r\n    const days = ['dim.', 'lun.', 'mar.', 'mer.', 'jeu.', 'ven.', 'sam.'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    \r\n    const dayOfWeek = days[date.getDay()];\r\n    const dayOfMonth = date.getDate().toString().padStart(2, '0');\r\n    const month = months[date.getMonth()];\r\n    \r\n    return `${dayOfWeek} ${dayOfMonth} ${month}`;\r\n  };\r\n\r\n  // États de chargement et d'erreur\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-medecin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const dates = generateDates();\r\n\r\n  return (\r\n    <div style={{ \r\n      backgroundColor: '#f3f4f6', \r\n      minHeight: '100vh',\r\n      width: '100%',\r\n      maxWidth: '100%',\r\n      overflowX: 'hidden' // Empêche le scroll horizontal\r\n    }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40,\r\n        width: '100%'\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-medecin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Saisie des desiderata</span>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSubmit}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            <Save size={18} />\r\n            Enregistrer\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        margin: '0 auto',\r\n        paddingTop: '5rem',\r\n        width: '100%',\r\n        maxWidth: '1280px',\r\n        boxSizing: 'border-box'\r\n      }}>\r\n        {/* En-tête avec période */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h2 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1F2937',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            Période de saisie : du {new Date(periodeSaisie.startDate).toLocaleDateString()} au {new Date(periodeSaisie.endDate).toLocaleDateString()}\r\n          </h2>\r\n\r\n          {/* Préférences générales */}\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1.5rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n          }}>\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Nombre de gardes souhaitées par mois\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={nombreGardesSouhaitees}\r\n                onChange={(e) => setNombreGardesSouhaitees(parseInt(e.target.value))}\r\n                min=\"0\"\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Maximum de gardes par semaine\r\n              </label>\r\n              <input\r\n                type=\"number\"\r\n                value={nombreGardesMaxParSemaine}\r\n                onChange={(e) => setNombreGardesMaxParSemaine(parseInt(e.target.value))}\r\n                min=\"1\"\r\n                max=\"7\"\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  borderRadius: '0.375rem',\r\n                  backgroundColor: 'white'\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem'\r\n            }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"gardesGroupees\"\r\n                checked={gardesGroupees}\r\n                onChange={(e) => setGardesGroupees(e.target.checked)}\r\n                style={{\r\n                  width: '1rem',\r\n                  height: '1rem',\r\n                  borderRadius: '0.25rem',\r\n                  borderColor: '#D1D5DB'\r\n                }}\r\n              />\r\n              <label\r\n                htmlFor=\"gardesGroupees\"\r\n                style={{\r\n                  fontSize: '0.875rem',\r\n                  color: '#374151'\r\n                }}\r\n              >\r\n                Gardes groupées dans un même week-end\r\n              </label>\r\n            </div>\r\n\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem'\r\n            }}>\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"renfortsAssocies\"\r\n                checked={renfortsAssocies}\r\n                onChange={(e) => setRenfortsAssocies(e.target.checked)}\r\n                style={{\r\n                  width: '1rem',\r\n                  height: '1rem',\r\n                  borderRadius: '0.25rem',\r\n                  borderColor: '#D1D5DB'\r\n                }}\r\n              />\r\n              <label\r\n                htmlFor=\"renfortsAssocies\"\r\n                style={{\r\n                  fontSize: '0.875rem',\r\n                  color: '#374151'\r\n                }}\r\n              >\r\n                Renforts associés à une garde\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Outils de remplissage */}\r\n        <div style={{\r\n          display: 'grid',\r\n          gap: '2rem',\r\n          marginBottom: '2rem',\r\n          gridTemplateColumns: '1fr', // Par défaut en une colonne sur mobile\r\n          padding: '0 1rem', // Padding sur les côtés\r\n          maxWidth: '100%', // S'assure que rien ne déborde\r\n          boxSizing: 'border-box', // Inclut le padding dans la largeur\r\n          margin: '0 auto 2rem', // Centre le contenu\r\n          '@media (min-width: 768px)': { // Sur les écrans plus larges\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(300px, 1fr))',\r\n            padding: 0\r\n          }\r\n        }}>\r\n          {/* Section remplissage rapide */}\r\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\r\n            <QuickFill\r\n              creneaux={creneaux}\r\n              onApply={handleQuickFill}\r\n              periodeSaisie={periodeSaisie}\r\n            />\r\n          </div>\r\n\r\n          {/* Section pattern hebdomadaire */}\r\n          <div style={{ width: '100%', maxWidth: '100%', overflow: 'hidden' }}>\r\n            <WeeklyPattern\r\n              creneaux={creneaux}\r\n              onApplyPattern={handleApplyPattern}\r\n              periodeSaisie={periodeSaisie}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n{/* Tableau des desiderata */}\r\n<div style={{\r\n  backgroundColor: 'white',\r\n  borderRadius: '0.5rem',\r\n  padding: '1.5rem',\r\n  boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n  overflowX: 'auto'\r\n}}>\r\n  <table style={{\r\n    width: '100%',\r\n    borderCollapse: 'collapse',\r\n    fontSize: '0.875rem'\r\n  }}>\r\n    <thead>\r\n      <tr>\r\n        <th style={{\r\n          padding: '0.75rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderBottom: '1px solid #E5E7EB',\r\n          textAlign: 'left',\r\n          fontWeight: '600',\r\n          position: 'sticky',\r\n          left: 0,\r\n          backgroundColor: 'white',\r\n          zIndex: 10\r\n        }}>\r\n          Date\r\n        </th>\r\n        {creneaux.map(creneau => (\r\n          <th key={creneau.id} style={{\r\n            padding: '0.75rem',\r\n            backgroundColor: '#F3F4F6',\r\n            borderBottom: '1px solid #E5E7EB',\r\n            textAlign: 'left',\r\n            fontWeight: '600',\r\n            minWidth: '150px'\r\n          }}>\r\n            <div>{creneau.label}</div>\r\n            <div style={{ \r\n              fontSize: '0.75rem', \r\n              color: '#6B7280',\r\n              fontWeight: 'normal'\r\n            }}>\r\n              {creneau.hours}\r\n            </div>\r\n            <div style={{ \r\n              fontSize: '0.75rem', \r\n              color: '#6B7280',\r\n              fontWeight: 'normal'\r\n            }}>\r\n              {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\r\n            </div>\r\n          </th>\r\n        ))}\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {dates.map(date => {\r\n        const isHighlighted = isWeekendOrHoliday(date);\r\n        const dateString = date.toISOString().split('T')[0];\r\n        return (\r\n          <tr key={dateString} style={{\r\n            backgroundColor: isHighlighted ? '#F3F4F6' : 'white'\r\n          }}>\r\n            <td style={{\r\n              padding: '0.75rem',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              fontWeight: '500',\r\n              position: 'sticky',\r\n              left: 0,\r\n              backgroundColor: isHighlighted ? '#F3F4F6' : 'white',\r\n              zIndex: 10\r\n            }}>\r\n              {formatDate(date)}\r\n            </td>\r\n            {creneaux.map(creneau => (\r\n              <td key={`${dateString}-${creneau.id}`} style={{\r\n                padding: '0.75rem',\r\n                borderBottom: '1px solid #E5E7EB'\r\n              }}>\r\n                {(!creneau.samediOnly || date.getDay() === 6) && (\r\n                  <select\r\n                    value={desiderata[dateString]?.[creneau.id] || ''}\r\n                    onChange={(e) => handleDesiderataChange(dateString, creneau.id, e.target.value)}\r\n                    style={{\r\n                      width: '100%',\r\n                      padding: '0.5rem',\r\n                      border: '1px solid #D1D5DB',\r\n                      borderRadius: '0.375rem',\r\n                      backgroundColor: 'white',\r\n                      color: (() => {\r\n                        const value = desiderata[dateString]?.[creneau.id];\r\n                        switch(value) {\r\n                          case 'Oui': return '#059669';\r\n                          case 'Possible': return '#D97706';\r\n                          case 'Non': return '#DC2626';\r\n                          default: return '#6B7280';\r\n                        }\r\n                      })()\r\n                    }}\r\n                  >\r\n                    <option value=\"\">Sélectionnez</option>\r\n                    {options.map(option => (\r\n                      <option \r\n                        key={option} \r\n                        value={option}\r\n                      >\r\n                        {option}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                )}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        );\r\n      })}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n</main>\r\n</div>\r\n);\r\n}\r\n\r\nexport default FormulaireDesirata;","// src/components/GestionUtilisateurs.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getAllUsers, createUser, deleteUser, getUser } from '../services/userService';\r\nimport { registerUser } from '../services/authService';\r\nimport { \r\n  ArrowLeft, \r\n  Plus, \r\n  Search, \r\n  Trash2, \r\n  Edit2, \r\n  Users,\r\n  Grid,\r\n  List,\r\n  Filter,\r\n  X,\r\n  UserPlus,\r\n  Mail\r\n} from 'lucide-react';\r\n\r\nfunction GestionUtilisateurs() {\r\n  // États de base\r\n  const [users, setUsers] = useState([]);\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const history = useHistory();\r\n\r\n  // États pour le formulaire d'ajout\r\n  const [showAddForm, setShowAddForm] = useState(false);\r\n  const [newUser, setNewUser] = useState({ \r\n    nom: '', \r\n    prenom: '', \r\n    email: '', \r\n    role: 'medecin' \r\n  });\r\n\r\n  // États pour les filtres et la vue\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [roleFilter, setRoleFilter] = useState('all');\r\n  const [viewMode, setViewMode] = useState('table');\r\n  const [showFilters, setShowFilters] = useState(false);\r\n\r\n  // État pour la pagination\r\n  const [currentPage, setCurrentPage] = useState(1);\r\n  const [usersPerPage] = useState(12); // Augmenté pour la vue en grille\r\n\r\n  // État pour la confirmation\r\n  const [showConfirmDelete, setShowConfirmDelete] = useState(false);\r\n  const [userToDelete, setUserToDelete] = useState(null);\r\n\r\n  // Effet pour charger les données\r\n useEffect(() => {\r\n  const fetchData = async () => {\r\n    try {\r\n      const authUser = auth.currentUser;\r\n      if (!authUser) {\r\n        history.push('/');\r\n        return;\r\n      }\r\n\r\n      const userData = await getUser(authUser.uid);\r\n      if (!userData || userData.role !== 'admin') {\r\n        setError('Utilisateur non autorisé');\r\n        history.push('/');\r\n        return;\r\n      }\r\n\r\n      setCurrentUser(userData);\r\n      await fetchUsers();\r\n    } catch (error) {\r\n      console.error(\"Erreur:\", error);\r\n      setError(\"Erreur lors de la récupération des données\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  fetchData();\r\n}, [history]);\r\n\r\n// Fonction pour récupérer les utilisateurs\r\nconst fetchUsers = async () => {\r\n  try {\r\n    const fetchedUsers = await getAllUsers();\r\n    setUsers(fetchedUsers);\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la récupération des utilisateurs:\", error);\r\n    setError(\"Erreur lors de la récupération des utilisateurs\");\r\n  }\r\n};\r\n\r\n// Gestion des filtres et de la recherche\r\nconst filteredUsers = users.filter(user => {\r\n  const matchesSearch = (\r\n    user.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    user.prenom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    user.email.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const matchesRole = roleFilter === 'all' || user.role === roleFilter;\r\n\r\n  return matchesSearch && matchesRole;\r\n});\r\n\r\n// Pagination\r\nconst indexOfLastUser = currentPage * usersPerPage;\r\nconst indexOfFirstUser = indexOfLastUser - usersPerPage;\r\nconst currentUsers = filteredUsers.slice(indexOfFirstUser, indexOfLastUser);\r\nconst totalPages = Math.ceil(filteredUsers.length / usersPerPage);\r\n\r\n// Gestion du formulaire d'ajout\r\nconst handleInputChange = (e) => {\r\n  const { name, value } = e.target;\r\n  setNewUser(prev => ({ ...prev, [name]: value }));\r\n};\r\n\r\n// Gestion de l'ajout d'utilisateur\r\nconst handleAddUser = async (e) => {\r\n  e.preventDefault();\r\n  setError(null);\r\n\r\n  try {\r\n    const userCredential = await registerUser(newUser.email);\r\n    await createUser(userCredential.user.uid, {\r\n      nom: newUser.nom,\r\n      prenom: newUser.prenom,\r\n      email: newUser.email,\r\n      role: newUser.role\r\n    });\r\n\r\n    setNewUser({ nom: '', prenom: '', email: '', role: 'medecin' });\r\n    setShowAddForm(false);\r\n    await fetchUsers();\r\n\r\n    // Afficher une notification de succès\r\n    showNotification('Utilisateur ajouté avec succès');\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de l'ajout de l'utilisateur:\", error);\r\n    let errorMessage = \"Une erreur est survenue lors de l'ajout de l'utilisateur\";\r\n    \r\n    if (error.code === \"auth/email-already-in-use\") {\r\n      errorMessage = \"Cette adresse email est déjà utilisée.\";\r\n    }\r\n\r\n    setError(errorMessage);\r\n  }\r\n};\r\n\r\n// Gestion de la suppression\r\nconst handleDeleteClick = (user) => {\r\n  setUserToDelete(user);\r\n  setShowConfirmDelete(true);\r\n};\r\n\r\nconst handleConfirmDelete = async () => {\r\n  try {\r\n    await deleteUser(userToDelete.id);\r\n    await fetchUsers();\r\n    setShowConfirmDelete(false);\r\n    setUserToDelete(null);\r\n    showNotification('Utilisateur supprimé avec succès');\r\n  } catch (error) {\r\n    console.error(\"Erreur lors de la suppression:\", error);\r\n    setError(\"Erreur lors de la suppression de l'utilisateur\");\r\n  }\r\n};\r\n\r\n// Fonction pour afficher les notifications\r\nconst showNotification = (message) => {\r\n  // On pourrait implémenter un système de notifications plus sophistiqué ici\r\n  alert(message);\r\n};\r\n\r\n// Si chargement en cours\r\nif (loading) {\r\n  return (\r\n    <div style={{\r\n      minHeight: '100vh',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      backgroundColor: '#f3f4f6'\r\n    }}>\r\n      Chargement...\r\n    </div>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n    {/* Menu fixe en haut */}\r\n    <nav style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      zIndex: 40\r\n    }}>\r\n      <div style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <button\r\n            onClick={() => history.push('/dashboard-admin')}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#4B5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              padding: '0.5rem'\r\n            }}\r\n          >\r\n            <ArrowLeft size={20} />\r\n            Retour\r\n          </button>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            <Users size={24} />\r\n            <span>Gestion des utilisateurs</span>\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={() => setShowAddForm(true)}\r\n          style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            padding: '0.5rem 1rem',\r\n            backgroundColor: '#2563EB',\r\n            color: 'white',\r\n            borderRadius: '0.375rem',\r\n            border: 'none',\r\n            cursor: 'pointer',\r\n            fontSize: '0.875rem'\r\n          }}\r\n        >\r\n          <UserPlus size={18} />\r\n          Ajouter un utilisateur\r\n        </button>\r\n      </div>\r\n    </nav>\r\n\r\n    {/* Contenu principal */}\r\n    <main style={{\r\n      maxWidth: '1280px',\r\n      margin: '0 auto',\r\n      padding: '6rem 1rem 2rem',\r\n    }}>\r\n      {/* Barre d'outils */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1rem',\r\n        marginBottom: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        display: 'flex',\r\n        flexWrap: 'wrap',\r\n        gap: '1rem',\r\n        alignItems: 'center',\r\n        justifyContent: 'space-between'\r\n      }}>\r\n        {/* Barre de recherche */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          flex: '1',\r\n          minWidth: '200px',\r\n          maxWidth: '400px',\r\n          position: 'relative'\r\n        }}>\r\n          <Search size={20} style={{\r\n            position: 'absolute',\r\n            left: '0.75rem',\r\n            color: '#6B7280'\r\n          }} />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Rechercher un utilisateur...\"\r\n            value={searchTerm}\r\n            onChange={(e) => setSearchTerm(e.target.value)}\r\n            style={{\r\n              width: '100%',\r\n              padding: '0.5rem 0.75rem 0.5rem 2.5rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          />\r\n        </div>\r\n\r\n        {/* Filtres et vue */}\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          {/* Filtre par rôle */}\r\n          <select\r\n            value={roleFilter}\r\n            onChange={(e) => setRoleFilter(e.target.value)}\r\n            style={{\r\n              padding: '0.5rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              backgroundColor: 'white',\r\n              fontSize: '0.875rem'\r\n            }}\r\n          >\r\n            <option value=\"all\">Tous les rôles</option>\r\n            <option value=\"medecin\">Médecins</option>\r\n            <option value=\"admin\">Administrateurs</option>\r\n          </select>\r\n\r\n          {/* Boutons de vue */}\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            backgroundColor: '#F3F4F6',\r\n            padding: '0.25rem',\r\n            borderRadius: '0.375rem'\r\n          }}>\r\n            <button\r\n              onClick={() => setViewMode('table')}\r\n              style={{\r\n                padding: '0.5rem',\r\n                borderRadius: '0.25rem',\r\n                border: 'none',\r\n                backgroundColor: viewMode === 'table' ? 'white' : 'transparent',\r\n                boxShadow: viewMode === 'table' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <List size={20} color={viewMode === 'table' ? '#2563EB' : '#6B7280'} />\r\n            </button>\r\n            <button\r\n              onClick={() => setViewMode('grid')}\r\n              style={{\r\n                padding: '0.5rem',\r\n                borderRadius: '0.25rem',\r\n                border: 'none',\r\n                backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\r\n                boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                cursor: 'pointer'\r\n              }}\r\n            >\r\n              <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Affichage des erreurs */}\r\n      {error && (\r\n         <div style={{\r\n           backgroundColor: '#FEE2E2',\r\n           color: '#DC2626',\r\n           padding: '1rem',\r\n           borderRadius: '0.5rem',\r\n           marginBottom: '1.5rem',\r\n           display: 'flex',\r\n           alignItems: 'center',\r\n           gap: '0.5rem'\r\n         }}>\r\n           <X size={20} />\r\n           {error}\r\n         </div>\r\n       )}\r\n\r\n       {/* Vue tableau */}\r\n       {viewMode === 'table' && (\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n           overflow: 'hidden'\r\n         }}>\r\n           <div style={{ overflowX: 'auto' }}>\r\n             <table style={{\r\n               width: '100%',\r\n               borderCollapse: 'collapse',\r\n               fontSize: '0.875rem'\r\n             }}>\r\n               <thead>\r\n                 <tr>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Nom\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Prénom\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Email\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'left',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Rôle\r\n                   </th>\r\n                   <th style={{\r\n                     padding: '1rem',\r\n                     textAlign: 'right',\r\n                     backgroundColor: '#F9FAFB',\r\n                     borderBottom: '1px solid #E5E7EB',\r\n                     color: '#374151',\r\n                     fontWeight: '600'\r\n                   }}>\r\n                     Actions\r\n                   </th>\r\n                 </tr>\r\n               </thead>\r\n               <tbody>\r\n                 {currentUsers.map((user) => (\r\n                   <tr \r\n                     key={user.id}\r\n                     style={{\r\n                       borderBottom: '1px solid #E5E7EB',\r\n                       transition: 'background-color 0.2s'\r\n                     }}\r\n                     onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F9FAFB'}\r\n                     onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'white'}\r\n                   >\r\n                     <td style={{ padding: '1rem' }}>{user.nom}</td>\r\n                     <td style={{ padding: '1rem' }}>{user.prenom}</td>\r\n                     <td style={{ padding: '1rem' }}>\r\n                       <div style={{\r\n                         display: 'flex',\r\n                         alignItems: 'center',\r\n                         gap: '0.5rem'\r\n                       }}>\r\n                         <Mail size={16} color=\"#6B7280\" />\r\n                         {user.email}\r\n                       </div>\r\n                     </td>\r\n                     <td style={{ padding: '1rem' }}>\r\n                       <span style={{\r\n                         padding: '0.25rem 0.5rem',\r\n                         borderRadius: '9999px',\r\n                         fontSize: '0.75rem',\r\n                         fontWeight: '500',\r\n                         backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\r\n                         color: user.role === 'admin' ? '#2563EB' : '#16A34A'\r\n                       }}>\r\n                         {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\r\n                       </span>\r\n                     </td>\r\n                     <td style={{\r\n                       padding: '1rem',\r\n                       textAlign: 'right'\r\n                     }}>\r\n                       <div style={{\r\n                         display: 'flex',\r\n                         gap: '0.5rem',\r\n                         justifyContent: 'flex-end'\r\n                       }}>\r\n                         <button\r\n                           onClick={() => handleDeleteClick(user)}\r\n                           style={{\r\n                             padding: '0.5rem',\r\n                             borderRadius: '0.375rem',\r\n                             border: '1px solid #DC2626',\r\n                             backgroundColor: 'white',\r\n                             color: '#DC2626',\r\n                             cursor: 'pointer',\r\n                             display: 'flex',\r\n                             alignItems: 'center',\r\n                             gap: '0.25rem',\r\n                             transition: 'all 0.2s'\r\n                           }}\r\n                           onMouseOver={(e) => {\r\n                             e.currentTarget.style.backgroundColor = '#DC2626';\r\n                             e.currentTarget.style.color = 'white';\r\n                           }}\r\n                           onMouseOut={(e) => {\r\n                             e.currentTarget.style.backgroundColor = 'white';\r\n                             e.currentTarget.style.color = '#DC2626';\r\n                           }}\r\n                         >\r\n                           <Trash2 size={16} />\r\n                           Supprimer\r\n                         </button>\r\n                       </div>\r\n                     </td>\r\n                   </tr>\r\n                 ))}\r\n               </tbody>\r\n             </table>\r\n           </div>\r\n\r\n           {/* Pagination */}\r\n           {totalPages > 1 && (\r\n             <div style={{\r\n               padding: '1rem',\r\n               display: 'flex',\r\n               justifyContent: 'center',\r\n               gap: '0.5rem',\r\n               borderTop: '1px solid #E5E7EB'\r\n             }}>\r\n               {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                 <button\r\n                   key={page}\r\n                   onClick={() => setCurrentPage(page)}\r\n                   style={{\r\n                     padding: '0.5rem 1rem',\r\n                     borderRadius: '0.375rem',\r\n                     border: '1px solid #E5E7EB',\r\n                     backgroundColor: currentPage === page ? '#2563EB' : 'white',\r\n                     color: currentPage === page ? 'white' : '#374151',\r\n                     cursor: 'pointer',\r\n                     transition: 'all 0.2s'\r\n                   }}\r\n                 >\r\n                   {page}\r\n                 </button>\r\n               ))}\r\n             </div>\r\n           )}\r\n         </div>\r\n       )}\r\n\r\n{/* Vue grille */}\r\n{viewMode === 'grid' && (\r\n  <div>\r\n    <div style={{\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fill, minmax(300px, 1fr))',\r\n      gap: '1rem'\r\n    }}>\r\n      {currentUsers.map((user) => (\r\n        <div\r\n          key={user.id}\r\n          style={{\r\n            backgroundColor: 'white',\r\n            borderRadius: '0.5rem',\r\n            boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n            padding: '1.5rem',\r\n            position: 'relative',\r\n            transition: 'transform 0.2s, box-shadow 0.2s'\r\n          }}\r\n          onMouseOver={(e) => {\r\n            e.currentTarget.style.transform = 'translateY(-2px)';\r\n            e.currentTarget.style.boxShadow = '0 4px 6px rgba(0,0,0,0.1)';\r\n          }}\r\n          onMouseOut={(e) => {\r\n            e.currentTarget.style.transform = 'translateY(0)';\r\n            e.currentTarget.style.boxShadow = '0 1px 3px rgba(0,0,0,0.1)';\r\n          }}\r\n        >\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'start',\r\n            justifyContent: 'space-between',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            <div>\r\n              <h3 style={{\r\n                fontSize: '1.125rem',\r\n                fontWeight: '600',\r\n                color: '#111827',\r\n                marginBottom: '0.25rem'\r\n              }}>\r\n                {user.prenom} {user.nom}\r\n              </h3>\r\n              <div style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#6B7280',\r\n                fontSize: '0.875rem'\r\n              }}>\r\n                <Mail size={16} />\r\n                {user.email}\r\n              </div>\r\n            </div>\r\n            <span style={{\r\n              padding: '0.25rem 0.75rem',\r\n              borderRadius: '9999px',\r\n              fontSize: '0.75rem',\r\n              fontWeight: '500',\r\n              backgroundColor: user.role === 'admin' ? '#EBF5FF' : '#F0FDF4',\r\n              color: user.role === 'admin' ? '#2563EB' : '#16A34A'\r\n            }}>\r\n              {user.role === 'admin' ? 'Administrateur' : 'Médecin'}\r\n            </span>\r\n          </div>\r\n\r\n          <div style={{\r\n            borderTop: '1px solid #E5E7EB',\r\n            paddingTop: '1rem',\r\n            display: 'flex',\r\n            justifyContent: 'flex-end'\r\n          }}>\r\n            <button\r\n              onClick={() => handleDeleteClick(user)}\r\n              style={{\r\n                padding: '0.5rem 1rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #DC2626',\r\n                backgroundColor: 'white',\r\n                color: '#DC2626',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                transition: 'all 0.2s'\r\n              }}\r\n              onMouseOver={(e) => {\r\n                e.currentTarget.style.backgroundColor = '#DC2626';\r\n                e.currentTarget.style.color = 'white';\r\n              }}\r\n              onMouseOut={(e) => {\r\n                e.currentTarget.style.backgroundColor = 'white';\r\n                e.currentTarget.style.color = '#DC2626';\r\n              }}\r\n            >\r\n              <Trash2 size={16} />\r\n              Supprimer\r\n            </button>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n\r\n    {/* Pagination */}\r\n    {totalPages > 1 && (\r\n      <div style={{\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'center',\r\n        gap: '0.5rem',\r\n        marginTop: '2rem'\r\n      }}>\r\n        {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n          <button\r\n            key={page}\r\n            onClick={() => setCurrentPage(page)}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #E5E7EB',\r\n              backgroundColor: currentPage === page ? '#2563EB' : 'white',\r\n              color: currentPage === page ? 'white' : '#374151',\r\n              cursor: 'pointer',\r\n              transition: 'all 0.2s',\r\n              minWidth: '2.5rem',\r\n              fontWeight: currentPage === page ? '600' : '400'\r\n            }}\r\n            onMouseOver={(e) => {\r\n              if (currentPage !== page) {\r\n                e.currentTarget.style.backgroundColor = '#F3F4F6';\r\n              }\r\n            }}\r\n            onMouseOut={(e) => {\r\n              if (currentPage !== page) {\r\n                e.currentTarget.style.backgroundColor = 'white';\r\n              }\r\n            }}\r\n          >\r\n            {page}\r\n          </button>\r\n        ))}\r\n      </div>\r\n    )}\r\n  </div>\r\n)}\r\n     </main>\r\n\r\n     {/* Modal d'ajout d'utilisateur */}\r\n     {showAddForm && (\r\n       <div style={{\r\n         position: 'fixed',\r\n         top: 0,\r\n         left: 0,\r\n         right: 0,\r\n         bottom: 0,\r\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         justifyContent: 'center',\r\n         zIndex: 50\r\n       }}>\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           padding: '2rem',\r\n           width: '90%',\r\n           maxWidth: '500px',\r\n           position: 'relative'\r\n         }}>\r\n           <button\r\n             onClick={() => setShowAddForm(false)}\r\n             style={{\r\n               position: 'absolute',\r\n               top: '1rem',\r\n               right: '1rem',\r\n               padding: '0.5rem',\r\n               border: 'none',\r\n               backgroundColor: 'transparent',\r\n               cursor: 'pointer'\r\n             }}\r\n           >\r\n             <X size={20} color=\"#6B7280\" />\r\n           </button>\r\n\r\n           <h2 style={{\r\n             fontSize: '1.5rem',\r\n             fontWeight: 'bold',\r\n             color: '#111827',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             Ajouter un utilisateur\r\n           </h2>\r\n\r\n           <form onSubmit={handleAddUser}>\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Nom\r\n               </label>\r\n               <input\r\n                 type=\"text\"\r\n                 name=\"nom\"\r\n                 value={newUser.nom}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Prénom\r\n               </label>\r\n               <input\r\n                 type=\"text\"\r\n                 name=\"prenom\"\r\n                 value={newUser.prenom}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Email\r\n               </label>\r\n               <input\r\n                 type=\"email\"\r\n                 name=\"email\"\r\n                 value={newUser.email}\r\n                 onChange={handleInputChange}\r\n                 required\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB'\r\n                 }}\r\n               />\r\n             </div>\r\n\r\n             <div style={{ marginBottom: '1.5rem' }}>\r\n               <label style={{\r\n                 display: 'block',\r\n                 marginBottom: '0.5rem',\r\n                 fontSize: '0.875rem',\r\n                 fontWeight: '500',\r\n                 color: '#374151'\r\n               }}>\r\n                 Rôle\r\n               </label>\r\n               <select\r\n                 name=\"role\"\r\n                 value={newUser.role}\r\n                 onChange={handleInputChange}\r\n                 style={{\r\n                   width: '100%',\r\n                   padding: '0.5rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB',\r\n                   backgroundColor: 'white'\r\n                 }}\r\n               >\r\n                 <option value=\"medecin\">Médecin</option>\r\n                 <option value=\"admin\">Administrateur</option>\r\n               </select>\r\n             </div>\r\n\r\n             <div style={{\r\n               display: 'flex',\r\n               gap: '1rem',\r\n               justifyContent: 'flex-end'\r\n             }}>\r\n               <button\r\n                 type=\"button\"\r\n                 onClick={() => setShowAddForm(false)}\r\n                 style={{\r\n                   padding: '0.5rem 1rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: '1px solid #D1D5DB',\r\n                   backgroundColor: 'white',\r\n                   color: '#374151',\r\n                   cursor: 'pointer'\r\n                 }}\r\n               >\r\n                 Annuler\r\n               </button>\r\n               <button\r\n                 type=\"submit\"\r\n                 style={{\r\n                   padding: '0.5rem 1rem',\r\n                   borderRadius: '0.375rem',\r\n                   border: 'none',\r\n                   backgroundColor: '#2563EB',\r\n                   color: 'white',\r\n                   cursor: 'pointer'\r\n                 }}\r\n               >\r\n                 Ajouter\r\n               </button>\r\n             </div>\r\n           </form>\r\n         </div>\r\n       </div>\r\n     )}\r\n\r\n     {/* Modal de confirmation de suppression */}\r\n     {showConfirmDelete && (\r\n       <div style={{\r\n         position: 'fixed',\r\n         top: 0,\r\n         left: 0,\r\n         right: 0,\r\n         bottom: 0,\r\n         backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n         display: 'flex',\r\n         alignItems: 'center',\r\n         justifyContent: 'center',\r\n         zIndex: 50\r\n       }}>\r\n         <div style={{\r\n           backgroundColor: 'white',\r\n           borderRadius: '0.5rem',\r\n           padding: '2rem',\r\n           width: '90%',\r\n           maxWidth: '400px',\r\n           textAlign: 'center'\r\n         }}>\r\n           <div style={{\r\n             width: '3rem',\r\n             height: '3rem',\r\n             backgroundColor: '#FEE2E2',\r\n             borderRadius: '50%',\r\n             display: 'flex',\r\n             alignItems: 'center',\r\n             justifyContent: 'center',\r\n             margin: '0 auto 1rem'\r\n           }}>\r\n             <Trash2 size={24} color=\"#DC2626\" />\r\n           </div>\r\n\r\n           <h2 style={{\r\n             fontSize: '1.25rem',\r\n             fontWeight: 'bold',\r\n             color: '#111827',\r\n             marginBottom: '0.5rem'\r\n           }}>\r\n             Confirmer la suppression\r\n           </h2>\r\n\r\n           <p style={{\r\n             color: '#6B7280',\r\n             marginBottom: '1.5rem'\r\n           }}>\r\n             Êtes-vous sûr de vouloir supprimer l'utilisateur{' '}\r\n             <span style={{ fontWeight: '600' }}>\r\n               {userToDelete?.prenom} {userToDelete?.nom}\r\n             </span>\r\n             ? Cette action est irréversible.\r\n           </p>\r\n\r\n           <div style={{\r\n             display: 'flex',\r\n             gap: '1rem',\r\n             justifyContent: 'center'\r\n           }}>\r\n             <button\r\n               onClick={() => {\r\n                 setShowConfirmDelete(false);\r\n                 setUserToDelete(null);\r\n               }}\r\n               style={{\r\n                 padding: '0.5rem 1rem',\r\n                 borderRadius: '0.375rem',\r\n                 border: '1px solid #D1D5DB',\r\n                 backgroundColor: 'white',\r\n                 color: '#374151',\r\n                 cursor: 'pointer',\r\n                 minWidth: '100px'\r\n               }}\r\n             >\r\n               Annuler\r\n             </button>\r\n             <button\r\n               onClick={handleConfirmDelete}\r\n               style={{\r\n                 padding: '0.5rem 1rem',\r\n                 borderRadius: '0.375rem',\r\n                 border: 'none',\r\n                 backgroundColor: '#DC2626',\r\n                 color: 'white',\r\n                 cursor: 'pointer',\r\n                 minWidth: '100px'\r\n               }}\r\n             >\r\n               Supprimer\r\n             </button>\r\n           </div>\r\n         </div>\r\n       </div>\r\n     )}\r\n   </div>\r\n );\r\n}\r\n\r\nexport default GestionUtilisateurs;","// src/utils/planningGenerator.js\r\nimport { getDesiderataForPeriod } from '../services/planningService';\r\nimport { getAllUsers } from '../services/userService';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART (1h - 7h)', medecins: 2 },\r\n  { id: 'QUART_2', label: '2ème QUART (7h - 13h)', medecins: 3 },\r\n  { id: 'RENFORT_1', label: 'RENFORT 10h / 13h', medecins: 1, samediOnly: true },\r\n  { id: 'QUART_3', label: '3ème QUART (13h - 19h)', medecins: 3 },\r\n  { id: 'RENFORT_2', label: 'RENFORT 20H / 00H', medecins: 1 },\r\n  { id: 'QUART_4', label: '4ème QUART (19h - 1h)', medecins: 3 },\r\n];\r\n\r\nconst creneauxChevauchants = {\r\n  'QUART_2': ['RENFORT_1'],\r\n  'RENFORT_1': ['QUART_2'],\r\n  'QUART_4': ['RENFORT_2'],\r\n  'RENFORT_2': ['QUART_4']\r\n};\r\n\r\nconst aCreneauxChevauchants = (medecinId, date, creneauId, planning) => {\r\n  if (!creneauxChevauchants[creneauId]) return false;\r\n  \r\n  const creneauxDuJour = planning[date];\r\n  return creneauxChevauchants[creneauId].some(creneauChevauchant => \r\n    creneauxDuJour[creneauChevauchant]?.includes(medecinId)\r\n  );\r\n};\r\n\r\nconst genererPlanning = async (debut, fin) => {\r\n  try {\r\n    const desiderataData = await getDesiderataForPeriod(debut, fin);\r\n    const users = await getAllUsers();\r\n    const medecins = users.filter(user => user.role === 'medecin').map(user => user.id);\r\n\r\n    const desiderata = {};\r\n    desiderataData.forEach(d => {\r\n      if (!desiderata[d.userId]) {\r\n        desiderata[d.userId] = {\r\n          preferences: {},\r\n          nombreGardesSouhaitees: d.nombreGardesSouhaitees,\r\n          nombreGardesMaxParSemaine: d.nombreGardesMaxParSemaine || 7,\r\n          gardesGroupees: d.gardesGroupees,\r\n          renfortsAssocies: d.renfortsAssocies\r\n        };\r\n      }\r\n      Object.entries(d.desiderata).forEach(([date, creneaux]) => {\r\n        const formattedDate = new Date(date).toISOString().split('T')[0];\r\n        if (!desiderata[d.userId].preferences[formattedDate]) {\r\n          desiderata[d.userId].preferences[formattedDate] = {};\r\n        }\r\n        Object.assign(desiderata[d.userId].preferences[formattedDate], creneaux);\r\n      });\r\n    });\r\n\r\n    let planning = genererPlanningSolution(debut, fin, desiderata, medecins);\r\n    planning = rechercheTabou(planning, debut, fin, desiderata, medecins);\r\n    return planning;\r\n  } catch (error) {\r\n    console.error('Erreur lors de la génération du planning:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst genererPlanningSolution = (debut, fin, desiderata, medecins) => {\r\n  const planning = {};\r\n  let currentDate = new Date(debut);\r\n  const endDate = new Date(fin);\r\n\r\n  while (currentDate <= endDate) {\r\n    const dateString = currentDate.toISOString().split('T')[0];\r\n    planning[dateString] = {};\r\n\r\n    // Générer les créneaux dans un ordre spécifique pour mieux gérer les chevauchements\r\n    const ordreCreneaux = [\r\n      'QUART_1',\r\n      'QUART_2',\r\n      'RENFORT_1',\r\n      'QUART_3',\r\n      'QUART_4',\r\n      'RENFORT_2'\r\n    ];\r\n\r\n    ordreCreneaux.forEach(creneauId => {\r\n      const creneau = creneaux.find(c => c.id === creneauId);\r\n      if (creneau && (!creneau.samediOnly || currentDate.getDay() === 6)) {\r\n        planning[dateString][creneauId] = assignerMedecins(dateString, creneau, desiderata, medecins, planning);\r\n      }\r\n    });\r\n\r\n    currentDate.setDate(currentDate.getDate() + 1);\r\n  }\r\n\r\n  return planning;\r\n};\r\n\r\nconst getWeekNumber = (date) => {\r\n  const d = new Date(date);\r\n  d.setHours(0, 0, 0, 0);\r\n  d.setDate(d.getDate() + 4 - (d.getDay() || 7));\r\n  const yearStart = new Date(d.getFullYear(), 0, 1);\r\n  return Math.ceil((((d - yearStart) / 86400000) + 1) / 7);\r\n};\r\n\r\nconst compterGardesParSemaine = (medecinId, date, planning) => {\r\n  const weekNumber = getWeekNumber(date);\r\n  let count = 0;\r\n\r\n  Object.entries(planning).forEach(([planningDate, creneaux]) => {\r\n    if (getWeekNumber(planningDate) === weekNumber) {\r\n      Object.values(creneaux).forEach(medecins => {\r\n        if (medecins && medecins.includes(medecinId)) {\r\n          count++;\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  return count;\r\n};\r\n\r\nconst assignerMedecins = (date, creneau, desiderata, medecins, planning) => {\r\n  const medecinsDispo = medecins.filter(medecinId => {\r\n    const choix = desiderata[medecinId]?.preferences[date]?.[creneau.id];\r\n    const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\r\n    const maxGardesParSemaine = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\r\n    const aChevauchement = aCreneauxChevauchants(medecinId, date, creneau.id, planning);\r\n\r\n    return (choix === 'Oui' || choix === 'Possible') && \r\n           gardesParSemaine < maxGardesParSemaine &&\r\n           !aChevauchement;\r\n  });\r\n\r\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\r\n    const choixA = desiderata[a]?.preferences[date]?.[creneau.id];\r\n    const choixB = desiderata[b]?.preferences[date]?.[creneau.id];\r\n    if (choixA === 'Oui' && choixB !== 'Oui') return -1;\r\n    if (choixB === 'Oui' && choixA !== 'Oui') return 1;\r\n    return 0;\r\n  });\r\n\r\n  const assignes = [];\r\n  for (let i = 0; i < creneau.medecins; i++) {\r\n    if (medecinsPriorises.length > 0) {\r\n      const medecinChoisi = choisirMedecin(medecinsPriorises, date, creneau, desiderata, planning);\r\n      if (medecinChoisi) {\r\n        assignes.push(medecinChoisi);\r\n        medecinsPriorises.splice(medecinsPriorises.indexOf(medecinChoisi), 1);\r\n      } else {\r\n        assignes.push(null);\r\n      }\r\n    } else {\r\n      assignes.push(null);\r\n    }\r\n  }\r\n\r\n  return assignes;\r\n};\r\n\r\nconst choisirMedecin = (medecinsDispo, date, creneau, desiderata, planning) => {\r\n  const mois = new Date(date).getMonth();\r\n  const medecinsPriorises = medecinsDispo.sort((a, b) => {\r\n    const scoreA = calculerScoreMedecin(a, date, creneau, desiderata, planning, mois);\r\n    const scoreB = calculerScoreMedecin(b, date, creneau, desiderata, planning, mois);\r\n    return scoreB - scoreA;\r\n  });\r\n\r\n  return medecinsPriorises[0];\r\n};\r\n\r\nconst calculerScoreMedecin = (medecinId, date, creneau, desiderata, planning, mois) => {\r\n  let score = 0;\r\n  const prefMedecin = desiderata[medecinId];\r\n  const gardesParSemaine = compterGardesParSemaine(medecinId, date, planning);\r\n  const maxGardesParSemaine = prefMedecin?.nombreGardesMaxParSemaine || 7;\r\n\r\n  // Pénalité forte pour les chevauchements\r\n  if (aCreneauxChevauchants(medecinId, date, creneau.id, planning)) {\r\n    score -= 50;\r\n  }\r\n\r\n  // Pénalité forte si proche du max de gardes par semaine\r\n  if (gardesParSemaine >= maxGardesParSemaine - 1) {\r\n    score -= 10;\r\n  }\r\n\r\n  // Respect des préférences\r\n  if (prefMedecin.preferences[date]?.[creneau.id] === 'Oui') score += 3;\r\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Possible') score += 1;\r\n  else if (prefMedecin.preferences[date]?.[creneau.id] === 'Non') score -= 5;\r\n\r\n  // Nombre de gardes souhaitées\r\n  const gardesDuMois = compterGardesMois(medecinId, planning, mois);\r\n  if (gardesDuMois < prefMedecin.nombreGardesSouhaitees) score += 2;\r\n  else score -= (gardesDuMois - prefMedecin.nombreGardesSouhaitees) * 2;\r\n\r\n  // Gardes groupées\r\n  if (prefMedecin.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\r\n    score += 2;\r\n  }\r\n\r\n  // Renforts associés\r\n  if (prefMedecin.renfortsAssocies) {\r\n    if (creneau.id.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\r\n    if (!creneau.id.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\r\n  }\r\n\r\n  return score;\r\n};\r\n\r\nconst compterGardesMois = (medecinId, planning, mois) => {\r\n  return Object.entries(planning).reduce((count, [date, creneaux]) => {\r\n    if (new Date(date).getMonth() === mois) {\r\n      return count + Object.values(creneaux).flat().filter(m => m === medecinId).length;\r\n    }\r\n    return count;\r\n  }, 0);\r\n};\r\n\r\nconst estWeekEnd = (date) => {\r\n  const jour = new Date(date).getDay();\r\n  return jour === 0 || jour === 6;\r\n};\r\n\r\nconst aGardeWeekEnd = (medecinId, date, planning) => {\r\n  const dateObj = new Date(date);\r\n  const debutWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay()));\r\n  const finWeekEnd = new Date(dateObj.setDate(dateObj.getDate() - dateObj.getDay() + 6));\r\n\r\n  for (let d = new Date(debutWeekEnd); d <= finWeekEnd; d.setDate(d.getDate() + 1)) {\r\n    const dateString = d.toISOString().split('T')[0];\r\n    if (planning[dateString] && Object.values(planning[dateString]).flat().includes(medecinId)) {\r\n      return true;\r\n    }\r\n  }\r\n  return false;\r\n};\r\n\r\nconst aGardeJour = (medecinId, date, planning) => {\r\n  return planning[date] && Object.values(planning[date]).flat().includes(medecinId);\r\n};\r\n\r\nconst aRenfortJour = (medecinId, date, planning) => {\r\n  return planning[date] && (\r\n    planning[date]['RENFORT_1']?.includes(medecinId) || \r\n    planning[date]['RENFORT_2']?.includes(medecinId)\r\n  );\r\n};\r\n\r\nconst rechercheTabou = (planning, debut, fin, desiderata, medecins, maxIterations = 1000) => {\r\n  let meilleurPlanning = planning;\r\n  let meilleurScore = evaluerPlanning(planning, desiderata);\r\n  const listeTabou = new Set();\r\n\r\n  for (let i = 0; i < maxIterations; i++) {\r\n    const voisins = genererVoisins(meilleurPlanning, medecins, desiderata);\r\n    let meilleurVoisin = null;\r\n    let meilleurScoreVoisin = -Infinity;\r\n\r\n    for (const voisin of voisins) {\r\n      const scoreVoisin = evaluerPlanning(voisin, desiderata);\r\n      if (scoreVoisin > meilleurScoreVoisin && !listeTabou.has(JSON.stringify(voisin))) {\r\n        meilleurVoisin = voisin;\r\n        meilleurScoreVoisin = scoreVoisin;\r\n      }\r\n    }\r\n\r\n    if (meilleurScoreVoisin > meilleurScore) {\r\n      meilleurPlanning = meilleurVoisin;\r\n      meilleurScore = meilleurScoreVoisin;\r\n      listeTabou.add(JSON.stringify(meilleurVoisin));\r\n      if (listeTabou.size > 50) {\r\n        listeTabou.delete(listeTabou.values().next().value);\r\n      }\r\n    }\r\n  }\r\n\r\n  return meilleurPlanning;\r\n};\r\n\r\nconst genererVoisins = (planning, medecins, desiderata) => {\r\n  const voisins = [];\r\n  const dates = Object.keys(planning);\r\n  const date = dates[Math.floor(Math.random() * dates.length)];\r\n  const creneauId = Object.keys(planning[date])[Math.floor(Math.random() * Object.keys(planning[date]).length)];\r\n  const index = Math.floor(Math.random() * planning[date][creneauId].length);\r\n\r\n  for (const medecin of medecins) {\r\n    if (!planning[date][creneauId].includes(medecin)) {\r\n      const nouveauPlanning = JSON.parse(JSON.stringify(planning));\r\n      nouveauPlanning[date][creneauId][index] = medecin;\r\n      \r\n      // Vérifier si le changement respecte toutes les contraintes\r\n      const gardesParSemaine = compterGardesParSemaine(medecin, date, nouveauPlanning);\r\n      const maxGardes = desiderata[medecin]?.nombreGardesMaxParSemaine || 7;\r\n      const aChevauchement = aCreneauxChevauchants(medecin, date, creneauId, nouveauPlanning);\r\n      if (gardesParSemaine <= maxGardes && !aChevauchement && verifierContraintes(nouveauPlanning)) {\r\n        voisins.push(nouveauPlanning);\r\n      }\r\n    }\r\n  }\r\n\r\n  const planningRetrait = JSON.parse(JSON.stringify(planning));\r\n  planningRetrait[date][creneauId][index] = null;\r\n  if (verifierContraintes(planningRetrait)) {\r\n    voisins.push(planningRetrait);\r\n  }\r\n\r\n  return voisins;\r\n};\r\n\r\nconst evaluerPlanning = (planning, desiderata) => {\r\n  let score = 0;\r\n  const gardesParMedecin = {};\r\n  const gardesParMedecinParSemaine = {};\r\n\r\n  for (const date in planning) {\r\n    for (const creneauId in planning[date]) {\r\n      for (const medecinId of planning[date][creneauId]) {\r\n        if (medecinId === null) continue;\r\n\r\n        // Compter les gardes par semaine\r\n        const semaine = getWeekNumber(date);\r\n        if (!gardesParMedecinParSemaine[medecinId]) {\r\n          gardesParMedecinParSemaine[medecinId] = {};\r\n        }\r\n        if (!gardesParMedecinParSemaine[medecinId][semaine]) {\r\n          gardesParMedecinParSemaine[medecinId][semaine] = 0;\r\n        }\r\n        gardesParMedecinParSemaine[medecinId][semaine]++;\r\n\r\n        // Pénalité pour dépassement du maximum de gardes par semaine\r\n        const maxGardes = desiderata[medecinId]?.nombreGardesMaxParSemaine || 7;\r\n        if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardes) {\r\n          score -= 20;\r\n        }\r\n\r\n        // Pénalité pour les chevauchements\r\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\r\n          score -= 50;\r\n        }\r\n\r\n        if (!gardesParMedecin[medecinId]) gardesParMedecin[medecinId] = 0;\r\n        gardesParMedecin[medecinId]++;\r\n\r\n        const choix = desiderata[medecinId]?.preferences[date]?.[creneauId];\r\n        if (choix === 'Oui') score += 3;\r\n        else if (choix === 'Possible') score += 1;\r\n        else if (choix === 'Non') score -= 5;\r\n\r\n        // Gardes groupées\r\n        if (desiderata[medecinId]?.gardesGroupees && estWeekEnd(date) && aGardeWeekEnd(medecinId, date, planning)) {\r\n          score += 2;\r\n        }\r\n\r\n        // Renforts associés\r\n        if (desiderata[medecinId]?.renfortsAssocies) {\r\n          if (creneauId.startsWith('RENFORT') && aGardeJour(medecinId, date, planning)) score += 2;\r\n          if (!creneauId.startsWith('RENFORT') && aRenfortJour(medecinId, date, planning)) score += 2;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Évaluation du nombre de gardes souhaitées par mois\r\n  for (const medecinId in gardesParMedecin) {\r\n    const diff = Math.abs(gardesParMedecin[medecinId] - desiderata[medecinId]?.nombreGardesSouhaitees);\r\n    score -= diff * 2;\r\n  }\r\n\r\n  return score;\r\n};\r\n\r\nconst verifierContraintes = (planning) => {\r\n  const dates = Object.keys(planning).sort();\r\n  const gardesParMedecinParSemaine = {};\r\n\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    const medecinsDuJour = new Set();\r\n\r\n    // Vérifier les chevauchements de créneaux\r\n    for (const creneauId in planning[date]) {\r\n      const medecins = planning[date][creneauId];\r\n      for (const medecinId of medecins) {\r\n        if (medecinId === null) continue;\r\n\r\n        if (aCreneauxChevauchants(medecinId, date, creneauId, planning)) {\r\n          return false;\r\n        }\r\n\r\n        medecinsDuJour.add(medecinId);\r\n      }\r\n    }\r\n\r\n    // Vérifier les gardes consécutives\r\n    for (const medecinId of medecinsDuJour) {\r\n      if (i >= 2) {\r\n        const hierMedecins = new Set();\r\n        const avantHierMedecins = new Set();\r\n\r\n        Object.values(planning[dates[i - 1]]).forEach(medecins => {\r\n          medecins.forEach(m => { if (m !== null) hierMedecins.add(m); });\r\n        });\r\n\r\n        Object.values(planning[dates[i - 2]]).forEach(medecins => {\r\n          medecins.forEach(m => { if (m !== null) avantHierMedecins.add(m); });\r\n        });\r\n\r\n        if (hierMedecins.has(medecinId) && avantHierMedecins.has(medecinId)) {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      // Vérifier le nombre de gardes par semaine\r\n      const semaine = getWeekNumber(date);\r\n      if (!gardesParMedecinParSemaine[medecinId]) {\r\n        gardesParMedecinParSemaine[medecinId] = {};\r\n      }\r\n      if (!gardesParMedecinParSemaine[medecinId][semaine]) {\r\n        gardesParMedecinParSemaine[medecinId][semaine] = 0;\r\n      }\r\n      gardesParMedecinParSemaine[medecinId][semaine]++;\r\n    }\r\n  }\r\n\r\n  // Vérifier le respect du nombre maximum de gardes par semaine\r\n  for (const medecinId in gardesParMedecinParSemaine) {\r\n    for (const semaine in gardesParMedecinParSemaine[medecinId]) {\r\n      const maxGardesParSemaine = 7;  // Valeur par défaut\r\n      if (gardesParMedecinParSemaine[medecinId][semaine] > maxGardesParSemaine) {\r\n        return false;\r\n      }\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nexport { genererPlanning, creneaux };","// src/components/planning/PlanningHeader.js\r\nimport React from 'react';\r\nimport { \r\n  ArrowLeft, \r\n  Calendar, \r\n  Save, \r\n  Upload, \r\n  RefreshCcw, \r\n  Edit2, \r\n  X,\r\n  Download\r\n} from 'lucide-react';\r\n\r\nconst PlanningHeader = ({\r\n  editMode,\r\n  modified,\r\n  onEditToggle,\r\n  onGenerateClick,\r\n  onPublishClick,\r\n  onSaveChanges,\r\n  onBackClick,\r\n  onExportClick,\r\n  planning\r\n}) => {\r\n  return (\r\n    <nav style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n      borderBottom: '1px solid #e5e7eb',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      zIndex: 40\r\n    }}>\r\n      <div style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '1rem',\r\n        display: 'flex',\r\n        justifyContent: 'space-between',\r\n        alignItems: 'center'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <button\r\n            onClick={onBackClick}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#4B5563',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              padding: '0.5rem'\r\n            }}\r\n          >\r\n            <ArrowLeft size={20} />\r\n            Retour\r\n          </button>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            color: '#2563EB',\r\n            fontWeight: 'bold'\r\n          }}>\r\n            <Calendar size={24} />\r\n            <span>Gestion du planning</span>\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem'\r\n        }}>\r\n          {!editMode ? (\r\n            <>\r\n              <button\r\n                onClick={onExportClick}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#F0FDF4',\r\n                  border: '1px solid #16A34A',\r\n                  color: '#16A34A',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <Download size={18} />\r\n                Exporter desiderata\r\n              </button>\r\n              <button\r\n                onClick={onGenerateClick}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#F3E8FF',\r\n                  border: '1px solid #9333EA',\r\n                  color: '#9333EA',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <RefreshCcw size={18} />\r\n                {planning ? 'Regénérer' : 'Générer'}\r\n              </button>\r\n              <button\r\n                onClick={onEditToggle}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#EBF5FF',\r\n                  border: '1px solid #2563EB',\r\n                  color: '#2563EB',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <Edit2 size={18} />\r\n                Modifier\r\n              </button>\r\n              {planning && (\r\n                <button\r\n                  onClick={onPublishClick}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.5rem 1rem',\r\n                    backgroundColor: '#ECFDF5',\r\n                    border: '1px solid #059669',\r\n                    color: '#059669',\r\n                    borderRadius: '0.375rem',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <Upload size={18} />\r\n                  Publier\r\n                </button>\r\n              )}\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button\r\n                onClick={onSaveChanges}\r\n                disabled={!modified}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: modified ? '#2563EB' : '#93C5FD',\r\n                  color: 'white',\r\n                  border: 'none',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: modified ? 'pointer' : 'not-allowed'\r\n                }}\r\n              >\r\n                <Save size={18} />\r\n                Sauvegarder\r\n              </button>\r\n              <button\r\n                onClick={onEditToggle}\r\n                style={{\r\n                  display: 'flex',\r\n                  alignItems: 'center',\r\n                  gap: '0.5rem',\r\n                  padding: '0.5rem 1rem',\r\n                  backgroundColor: '#F3F4F6',\r\n                  border: '1px solid #D1D5DB',\r\n                  color: '#374151',\r\n                  borderRadius: '0.375rem',\r\n                  cursor: 'pointer'\r\n                }}\r\n              >\r\n                <X size={18} />\r\n                Annuler\r\n              </button>\r\n            </>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default PlanningHeader;","// src/components/planning/components/MedecinSearchSelect.js\r\nimport React, { useState, useRef, useEffect } from 'react';\r\nimport { Search, X, ChevronDown, ChevronUp } from 'lucide-react';\r\n\r\nconst MedecinSearchSelect = ({ \r\n  medecins, \r\n  value, \r\n  onChange,\r\n  placeholder = \"Rechercher un médecin...\" \r\n}) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const wrapperRef = useRef(null);\r\n\r\n  // Ferme la liste déroulante lors d'un clic à l'extérieur\r\n  useEffect(() => {\r\n    const handleClickOutside = (event) => {\r\n      if (wrapperRef.current && !wrapperRef.current.contains(event.target)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Filtrer les médecins selon le terme de recherche\r\n  const filteredMedecins = medecins.filter(medecin => {\r\n    const searchTermLower = searchTerm.toLowerCase();\r\n    return (\r\n      medecin.nom.toLowerCase().includes(searchTermLower) ||\r\n      medecin.prenom.toLowerCase().includes(searchTermLower)\r\n    );\r\n  });\r\n\r\n  // Récupérer le médecin sélectionné\r\n  const selectedMedecin = medecins.find(m => m.id === value);\r\n\r\n  return (\r\n    <div \r\n      ref={wrapperRef}\r\n      style={{\r\n        position: 'relative',\r\n        width: '100%'\r\n      }}\r\n    >\r\n      {/* Input de recherche */}\r\n      <div style={{\r\n        position: 'relative',\r\n        display: 'flex',\r\n        alignItems: 'center'\r\n      }}>\r\n        <Search \r\n          size={18}\r\n          style={{\r\n            position: 'absolute',\r\n            left: '0.75rem',\r\n            color: '#6B7280'\r\n          }}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          value={searchTerm}\r\n          onChange={(e) => {\r\n            setSearchTerm(e.target.value);\r\n            setIsOpen(true);\r\n          }}\r\n          onFocus={() => setIsOpen(true)}\r\n          placeholder={placeholder}\r\n          style={{\r\n            width: '100%',\r\n            padding: '0.5rem 2.5rem',\r\n            borderRadius: '0.375rem',\r\n            border: '1px solid #D1D5DB',\r\n            fontSize: '0.875rem'\r\n          }}\r\n        />\r\n        <div style={{\r\n          position: 'absolute',\r\n          right: '0.75rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          {searchTerm && (\r\n            <button\r\n              onClick={() => {\r\n                setSearchTerm('');\r\n                setIsOpen(true);\r\n              }}\r\n              style={{\r\n                padding: '0.25rem',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                color: '#6B7280'\r\n              }}\r\n            >\r\n              <X size={16} />\r\n            </button>\r\n          )}\r\n          <button\r\n            onClick={() => setIsOpen(!isOpen)}\r\n            style={{\r\n              padding: '0.25rem',\r\n              border: 'none',\r\n              background: 'none',\r\n              cursor: 'pointer',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              color: '#6B7280'\r\n            }}\r\n          >\r\n            {isOpen ? <ChevronUp size={16} /> : <ChevronDown size={16} />}\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Liste déroulante */}\r\n      {isOpen && (\r\n        <div style={{\r\n          position: 'absolute',\r\n          top: 'calc(100% + 0.25rem)',\r\n          left: 0,\r\n          right: 0,\r\n          maxHeight: '15rem',\r\n          overflowY: 'auto',\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.375rem',\r\n          border: '1px solid #D1D5DB',\r\n          boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\r\n          zIndex: 30\r\n        }}>\r\n          <div style={{\r\n            padding: '0.25rem'\r\n          }}>\r\n            {/* Option \"Tous les médecins\" */}\r\n            <button\r\n              onClick={() => {\r\n                onChange('all');\r\n                setIsOpen(false);\r\n                setSearchTerm('');\r\n              }}\r\n              style={{\r\n                width: '100%',\r\n                padding: '0.5rem 0.75rem',\r\n                textAlign: 'left',\r\n                border: 'none',\r\n                borderRadius: '0.25rem',\r\n                backgroundColor: value === 'all' ? '#EBF5FF' : 'transparent',\r\n                color: value === 'all' ? '#2563EB' : '#374151',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem',\r\n                fontWeight: value === 'all' ? '600' : 'normal'\r\n              }}\r\n            >\r\n              Tous les médecins\r\n            </button>\r\n\r\n            {/* Liste des médecins filtrés */}\r\n            {filteredMedecins.map(medecin => (\r\n              <button\r\n                key={medecin.id}\r\n                onClick={() => {\r\n                  onChange(medecin.id);\r\n                  setIsOpen(false);\r\n                  setSearchTerm('');\r\n                }}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem 0.75rem',\r\n                  textAlign: 'left',\r\n                  border: 'none',\r\n                  borderRadius: '0.25rem',\r\n                  backgroundColor: value === medecin.id ? '#EBF5FF' : 'transparent',\r\n                  color: value === medecin.id ? '#2563EB' : '#374151',\r\n                  cursor: 'pointer',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: value === medecin.id ? '600' : 'normal'\r\n                }}\r\n              >\r\n                Dr. {medecin.prenom} {medecin.nom}\r\n              </button>\r\n            ))}\r\n\r\n            {/* Message si aucun résultat */}\r\n            {filteredMedecins.length === 0 && (\r\n              <div style={{\r\n                padding: '0.5rem 0.75rem',\r\n                color: '#6B7280',\r\n                fontSize: '0.875rem',\r\n                textAlign: 'center'\r\n              }}>\r\n                Aucun médecin trouvé\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Affichage du médecin sélectionné sous l'input */}\r\n      {value !== 'all' && selectedMedecin && !isOpen && (\r\n        <div style={{\r\n          marginTop: '0.25rem',\r\n          fontSize: '0.75rem',\r\n          color: '#2563EB',\r\n          fontWeight: '500'\r\n        }}>\r\n          Médecin sélectionné : Dr. {selectedMedecin.prenom} {selectedMedecin.nom}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedecinSearchSelect;","// src/components/planning/PlanningFilters.js\r\nimport React from 'react';\r\nimport { Filter, ChevronDown, ChevronUp, Search, List, Grid } from 'lucide-react';\r\nimport MedecinSearchSelect from './components/MedecinSearchSelect';\r\n\r\nconst PlanningFilters = ({\r\n  showFilters,\r\n  onToggleFilters,\r\n  dateFilter,\r\n  onDateFilterChange,\r\n  creneauFilter,\r\n  onCreneauFilterChange,\r\n  selectedMedecin,\r\n  onMedecinFilterChange,\r\n  viewMode,\r\n  onViewModeChange,\r\n  medecins,\r\n  creneaux\r\n}) => {\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '0.5rem',\r\n      marginBottom: '1.5rem',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n    }}>\r\n      <button\r\n        onClick={onToggleFilters}\r\n        style={{\r\n          width: '100%',\r\n          padding: '1rem 1.5rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center',\r\n          border: 'none',\r\n          background: 'none',\r\n          cursor: 'pointer',\r\n          borderRadius: '0.5rem'\r\n        }}\r\n      >\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          color: '#374151'\r\n        }}>\r\n          <Filter size={20} />\r\n          <span style={{ fontWeight: '500' }}>Filtres et recherche</span>\r\n        </div>\r\n        {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n      </button>\r\n\r\n      {showFilters && (\r\n        <div style={{\r\n          padding: '1rem 1.5rem',\r\n          borderTop: '1px solid #E5E7EB'\r\n        }}>\r\n          <div style={{\r\n            display: 'grid',\r\n            gap: '1rem',\r\n            gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n          }}>\r\n            {/* Filtre par période */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Période\r\n              </label>\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '0.5rem'\r\n              }}>\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFilter.start}\r\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, start: e.target.value })}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n                <input\r\n                  type=\"date\"\r\n                  value={dateFilter.end}\r\n                  onChange={(e) => onDateFilterChange({ ...dateFilter, end: e.target.value })}\r\n                  style={{\r\n                    flex: 1,\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Filtre par créneau */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Créneau\r\n              </label>\r\n              <select\r\n                value={creneauFilter}\r\n                onChange={(e) => onCreneauFilterChange(e.target.value)}\r\n                style={{\r\n                  width: '100%',\r\n                  padding: '0.5rem',\r\n                  borderRadius: '0.375rem',\r\n                  border: '1px solid #D1D5DB',\r\n                  backgroundColor: 'white',\r\n                  fontSize: '0.875rem'\r\n                }}\r\n              >\r\n                <option value=\"all\">Tous les créneaux</option>\r\n                {creneaux.map(creneau => (\r\n                  <option key={creneau.id} value={creneau.id}>\r\n                    {creneau.label} ({creneau.hours})\r\n                  </option>\r\n                ))}\r\n              </select>\r\n            </div>\r\n\r\n            {/* Filtre par médecin */}\r\n            <div>\r\n  <label style={{\r\n    display: 'block',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500',\r\n    color: '#374151',\r\n    marginBottom: '0.5rem'\r\n  }}>\r\n    Médecin\r\n  </label>\r\n  <MedecinSearchSelect\r\n    medecins={medecins}\r\n    value={selectedMedecin}\r\n    onChange={onMedecinFilterChange}\r\n    placeholder=\"Rechercher un médecin...\"\r\n  />\r\n</div>\r\n\r\n            {/* Sélecteur de vue */}\r\n            <div>\r\n              <label style={{\r\n                display: 'block',\r\n                fontSize: '0.875rem',\r\n                fontWeight: '500',\r\n                color: '#374151',\r\n                marginBottom: '0.5rem'\r\n              }}>\r\n                Mode d'affichage\r\n              </label>\r\n              <div style={{\r\n                display: 'flex',\r\n                gap: '0.5rem',\r\n                backgroundColor: '#F3F4F6',\r\n                padding: '0.25rem',\r\n                borderRadius: '0.375rem',\r\n                width: 'fit-content'\r\n              }}>\r\n                <button\r\n                  onClick={() => onViewModeChange('list')}\r\n                  style={{\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.25rem',\r\n                    border: 'none',\r\n                    backgroundColor: viewMode === 'list' ? 'white' : 'transparent',\r\n                    boxShadow: viewMode === 'list' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <List size={20} color={viewMode === 'list' ? '#2563EB' : '#6B7280'} />\r\n                </button>\r\n                <button\r\n                  onClick={() => onViewModeChange('grid')}\r\n                  style={{\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.25rem',\r\n                    border: 'none',\r\n                    backgroundColor: viewMode === 'grid' ? 'white' : 'transparent',\r\n                    boxShadow: viewMode === 'grid' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n                    cursor: 'pointer'\r\n                  }}\r\n                >\r\n                  <Grid size={20} color={viewMode === 'grid' ? '#2563EB' : '#6B7280'} />\r\n                </button>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningFilters;","// src/components/planning/PlanningStatistics.js\r\nimport React from 'react';\r\nimport { Users, Calendar, Clock } from 'lucide-react';\r\n\r\nconst PlanningStatistics = ({\r\n  medecins,\r\n  periodeSaisie,\r\n  planning,\r\n  publishedPlanning\r\n}) => {\r\n  return (\r\n    <div style={{\r\n      display: 'grid',\r\n      gridTemplateColumns: 'repeat(auto-fit, minmax(240px, 1fr))',\r\n      gap: '1rem',\r\n      marginBottom: '2rem'\r\n    }}>\r\n      {/* Nombre de médecins */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#EBF5FF',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#2563EB'\r\n          }}>\r\n            <Users size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            Médecins disponibles\r\n          </h2>\r\n        </div>\r\n        <p style={{\r\n          fontSize: '1.5rem',\r\n          fontWeight: 'bold',\r\n          color: '#2563EB'\r\n        }}>\r\n          {medecins.length}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Période de saisie */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#F0FDF4',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#16A34A'\r\n          }}>\r\n            <Clock size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            Période de saisie\r\n          </h2>\r\n        </div>\r\n        <p style={{\r\n          fontSize: '0.875rem',\r\n          color: periodeSaisie ? '#16A34A' : '#DC2626',\r\n          fontWeight: '500'\r\n        }}>\r\n          {periodeSaisie ? (\r\n            `Du ${new Date(periodeSaisie.startDate).toLocaleDateString()} au ${new Date(periodeSaisie.endDate).toLocaleDateString()}`\r\n          ) : (\r\n            'Aucune période définie'\r\n          )}\r\n        </p>\r\n      </div>\r\n\r\n      {/* État du planning */}\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '1.5rem',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.75rem',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          <div style={{\r\n            backgroundColor: '#FFF7ED',\r\n            borderRadius: '0.5rem',\r\n            padding: '0.75rem',\r\n            color: '#EA580C'\r\n          }}>\r\n            <Calendar size={24} />\r\n          </div>\r\n          <h2 style={{\r\n            fontSize: '1rem',\r\n            fontWeight: '600',\r\n            color: '#374151'\r\n          }}>\r\n            État du planning\r\n          </h2>\r\n        </div>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          gap: '0.25rem'\r\n        }}>\r\n          <p style={{\r\n            fontSize: '0.875rem',\r\n            color: planning ? '#16A34A' : '#DC2626',\r\n            fontWeight: '500'\r\n          }}>\r\n            {planning ? 'Planning généré' : 'Aucun planning généré'}\r\n          </p>\r\n          <p style={{\r\n            fontSize: '0.875rem',\r\n            color: publishedPlanning ? '#16A34A' : '#DC2626',\r\n            fontWeight: '500'\r\n          }}>\r\n            {publishedPlanning ? 'Planning publié' : 'Non publié'}\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningStatistics;","// src/utils/planningUtils.js\r\n\r\nexport const sortMedecinsByPreference = (medecins, desiderata, date, creneauId) => {\r\n    // Organise les médecins par leurs préférences pour un créneau donné\r\n    const sorted = {\r\n      oui: [],\r\n      possible: [],\r\n      nonSpecifie: [],\r\n      non: []\r\n    };\r\n  \r\n    medecins.forEach(medecin => {\r\n      const preference = desiderata\r\n        .find(d => d.userId === medecin.id)?.desiderata[date]?.[creneauId];\r\n  \r\n      switch(preference) {\r\n        case 'Oui':\r\n          sorted.oui.push(medecin);\r\n          break;\r\n        case 'Possible':\r\n          sorted.possible.push(medecin);\r\n          break;\r\n        case 'Non':\r\n          sorted.non.push(medecin);\r\n          break;\r\n        default:\r\n          sorted.nonSpecifie.push(medecin);\r\n      }\r\n    });\r\n  \r\n    return {\r\n      ...sorted,\r\n      all: [\r\n        ...sorted.oui,\r\n        ...sorted.possible,\r\n        ...sorted.nonSpecifie,\r\n        ...sorted.non\r\n      ]\r\n    };\r\n  };\r\n  \r\n  export const getPreferenceStyle = (preference) => {\r\n    switch(preference) {\r\n      case 'Oui':\r\n        return { color: '#059669', backgroundColor: '#ECFDF5' };\r\n      case 'Possible':\r\n        return { color: '#D97706', backgroundColor: '#FFFBEB' };\r\n      case 'Non':\r\n        return { color: '#DC2626', backgroundColor: '#FEF2F2' };\r\n      default:\r\n        return { color: '#6B7280', backgroundColor: 'transparent' };\r\n    }\r\n  };\r\n  \r\n  export const compterGardesParMedecin = (planning, medecinId) => {\r\n    let count = 0;\r\n    \r\n    if (!planning || !planning.planning) return 0;\r\n    \r\n    Object.values(planning.planning).forEach(joursCreneaux => {\r\n      Object.values(joursCreneaux).forEach(medecins => {\r\n        if (medecins.includes(medecinId)) count++;\r\n      });\r\n    });\r\n    \r\n    return count;\r\n  };\r\n  \r\n  export const getMedecinPreference = (desiderata, medecinId, date, creneauId) => {\r\n    return desiderata\r\n      .find(d => d.userId === medecinId)?.desiderata[date]?.[creneauId] || '';\r\n  };\r\n  \r\n  export const getNombreGardesSouhaitees = (desiderata, medecinId) => {\r\n    const medecinDesiderata = desiderata.find(d => d.userId === medecinId);\r\n    return medecinDesiderata?.nombreGardesSouhaitees || 0;\r\n  };","// src/components/planning/PlanningTable.js\r\nimport React from 'react';\r\nimport { \r\n  sortMedecinsByPreference, \r\n  getPreferenceStyle, \r\n  getMedecinPreference \r\n} from '../../utils/planningUtils';\r\n\r\n// Composant pour le sélecteur de médecin\r\n// Modifiez la partie MedecinSelect comme suit :\r\nconst MedecinSelect = ({ \r\n    date, \r\n    creneauId, \r\n    index, \r\n    currentValue, \r\n    medecins, \r\n    desiderata, \r\n    selectedMedecin, // On garde ce paramètre pour l'affichage des infos mais pas pour le filtrage\r\n    onChange \r\n  }) => {\r\n    // Trier les médecins selon leurs préférences\r\n    const sortedMedecins = sortMedecinsByPreference(medecins, desiderata, date, creneauId);\r\n  \r\n    return (\r\n      <select\r\n        value={currentValue || ''}\r\n        onChange={(e) => onChange(date, creneauId, index, e.target.value)}\r\n        style={{\r\n          width: '100%',\r\n          padding: '0.5rem',\r\n          borderRadius: '0.375rem',\r\n          border: '1px solid #D1D5DB',\r\n          backgroundColor: 'white',\r\n          fontSize: '0.875rem'\r\n        }}\r\n      >\r\n        <option value=\"\">Non assigné</option>\r\n        {sortedMedecins.all.map(medecin => {\r\n          const preference = getMedecinPreference(desiderata, medecin.id, date, creneauId);\r\n          const style = getPreferenceStyle(preference);\r\n          const isSelected = medecin.id === selectedMedecin;\r\n            \r\n          return (\r\n            <option\r\n              key={medecin.id}\r\n              value={medecin.id}\r\n              style={{\r\n                ...style,\r\n                fontWeight: isSelected ? 'bold' : 'normal'\r\n              }}\r\n            >\r\n              Dr. {medecin.prenom} {medecin.nom}\r\n              {preference ? ` (${preference})` : ''}\r\n              {isSelected ? ' ★' : ''}\r\n            </option>\r\n          );\r\n        })}\r\n      </select>\r\n    );\r\n  };\r\n\r\n// Composant pour l'affichage des préférences\r\nconst PreferenceIndicator = ({ preference }) => {\r\n  if (!preference) return null;\r\n  \r\n  const style = getPreferenceStyle(preference);\r\n  return (\r\n    <div style={{\r\n      position: 'absolute',\r\n      top: '0.25rem',\r\n      right: '0.25rem',\r\n      padding: '0.25rem 0.5rem',\r\n      borderRadius: '0.25rem',\r\n      fontSize: '0.75rem',\r\n      ...style\r\n    }}>\r\n      {preference}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Composant principal PlanningTable\r\nconst PlanningTable = ({\r\n  planning,\r\n  creneaux,\r\n  medecins,\r\n  desiderata,\r\n  selectedMedecin,\r\n  editMode,\r\n  onMedecinChange,\r\n  dateFilter,\r\n  creneauFilter\r\n}) => {\r\n  // Fonction pour formatter la date\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\r\n  };\r\n\r\n  // Fonction pour vérifier si c'est un week-end\r\n  const isWeekend = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.getDay() === 0 || date.getDay() === 6;\r\n  };\r\n\r\n  // Filtrer les dates selon les critères\r\n  const getFilteredDates = () => {\r\n    if (!planning || !planning.planning) return [];\r\n\r\n    return Object.keys(planning.planning)\r\n      .filter(date => \r\n        (!dateFilter.start || date >= dateFilter.start) &&\r\n        (!dateFilter.end || date <= dateFilter.end)\r\n      )\r\n      .sort();\r\n  };\r\n\r\n  // Filtrer les créneaux selon les critères\r\n  const getFilteredCreneaux = () => {\r\n    return creneauFilter === 'all' \r\n      ? creneaux \r\n      : creneaux.filter(c => c.id === creneauFilter);\r\n  };\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '0.5rem',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      overflowX: 'auto',\r\n      width: '100%',        // Ajout de width 100%\r\n      maxWidth: '100vw',    // Utilisation de la largeur de la vue\r\n      margin: '0 auto'      // Centrage\r\n    }}>\r\n      <table style={{\r\n        width: '100%',\r\n        borderCollapse: 'collapse',\r\n        fontSize: '0.875rem',\r\n        tableLayout: 'fixed'    // Ajout de table-layout fixed\r\n      }}>\r\n        <colgroup>\r\n          <col style={{ width: '120px' }} />  {/* Largeur fixe pour la colonne date */}\r\n          {getFilteredCreneaux().map((creneau, index) => (\r\n            <col key={index} style={{ width: `${100 / getFilteredCreneaux().length}%` }} />\r\n          ))}\r\n        </colgroup>\r\n        <thead>\r\n          <tr>\r\n            <th style={{\r\n              padding: '1rem',\r\n              backgroundColor: '#F9FAFB',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              textAlign: 'left',\r\n              fontWeight: '600',\r\n              position: 'sticky',\r\n              left: 0,\r\n              zIndex: 10,\r\n              backgroundColor: 'white'\r\n            }}>\r\n              Date\r\n            </th>\r\n            {getFilteredCreneaux().map(creneau => (\r\n              <th key={creneau.id} style={{\r\n                padding: '1rem',\r\n                backgroundColor: '#F9FAFB',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                textAlign: 'left',\r\n                fontWeight: '600',\r\n                minWidth: '200px'\r\n              }}>\r\n                <div>{creneau.label}</div>\r\n                <div style={{\r\n                  fontSize: '0.75rem',\r\n                  color: '#6B7280',\r\n                  fontWeight: 'normal'\r\n                }}>\r\n                  {creneau.hours}\r\n                </div>\r\n                <div style={{\r\n                  fontSize: '0.75rem',\r\n                  color: '#6B7280',\r\n                  fontWeight: 'normal'\r\n                }}>\r\n                  {creneau.medecins} médecin{creneau.medecins > 1 ? 's' : ''}\r\n                </div>\r\n              </th>\r\n            ))}\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {getFilteredDates().map(date => (\r\n            <tr key={date} style={{\r\n              backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\r\n            }}>\r\n              <td style={{\r\n                padding: '1rem',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                fontWeight: '500',\r\n                position: 'sticky',\r\n                left: 0,\r\n                backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\r\n                zIndex: 10\r\n              }}>\r\n                {formatDate(date)}\r\n              </td>\r\n              {getFilteredCreneaux().map(creneau => (\r\n                <td key={`${date}-${creneau.id}`} style={{\r\n                    padding: '1rem',\r\n                    borderBottom: '1px solid #E5E7EB',\r\n                    position: 'relative',\r\n                    backgroundColor: selectedMedecin !== 'all' ? \r\n                      (() => {\r\n                        const preference = getMedecinPreference(\r\n                          desiderata,\r\n                          selectedMedecin,\r\n                          date,\r\n                          creneau.id\r\n                        );\r\n                        return preference ? getPreferenceStyle(preference).backgroundColor : 'transparent';\r\n                      })() : 'transparent'\r\n                  }}>\r\n                    {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\r\n                      <>\r\n                        {selectedMedecin !== 'all' && (\r\n                          <PreferenceIndicator \r\n                            preference={getMedecinPreference(\r\n                              desiderata,\r\n                              selectedMedecin,\r\n                              date,\r\n                              creneau.id\r\n                            )}\r\n                          />\r\n                        )}\r\n                        <div style={{\r\n                          display: 'flex',\r\n                          flexDirection: 'column',\r\n                          gap: '0.5rem'\r\n                        }}>\r\n                          {Array.from({ length: creneau.medecins }).map((_, index) => (\r\n                            <div key={index}>\r\n                              {editMode ? (\r\n                                <MedecinSelect\r\n                                  date={date}\r\n                                  creneauId={creneau.id}\r\n                                  index={index}\r\n                                  currentValue={planning.planning[date]?.[creneau.id]?.[index]}\r\n                                  medecins={medecins}\r\n                                  desiderata={desiderata}\r\n                                  selectedMedecin={selectedMedecin}\r\n                                  onChange={onMedecinChange}\r\n                                />\r\n                              ) : (\r\n                                <div style={{\r\n                                  padding: '0.5rem',\r\n                                  backgroundColor: '#F3F4F6',\r\n                                  borderRadius: '0.375rem',\r\n                                  fontSize: '0.875rem'\r\n                                }}>\r\n                                  {planning.planning[date]?.[creneau.id]?.[index] ? (\r\n                                    (() => {\r\n                                      const medecinId = planning.planning[date][creneau.id][index];\r\n                                      const medecin = medecins.find(m => m.id === medecinId);\r\n                                      const preference = getMedecinPreference(\r\n                                        desiderata,\r\n                                        medecinId,\r\n                                        date,\r\n                                        creneau.id\r\n                                      );\r\n                                      const style = getPreferenceStyle(preference);\r\n                                      const isSelected = medecinId === selectedMedecin;\r\n                                      \r\n                                      return (\r\n                                        <span style={{\r\n                                          ...style,\r\n                                          fontWeight: isSelected ? 'bold' : 'normal'\r\n                                        }}>\r\n                                          Dr. {medecin ? \r\n                                            `${medecin.prenom} ${medecin.nom}` : \r\n                                            'Médecin non trouvé'}\r\n                                          {isSelected ? ' ★' : ''}\r\n                                        </span>\r\n                                      );\r\n                                    })()\r\n                                  ) : (\r\n                                    'Non assigné'\r\n                                  )}\r\n                                </div>\r\n                              )}\r\n                            </div>\r\n                          ))}\r\n                        </div>\r\n                      </>\r\n                    )}\r\n                  </td>\r\n              ))}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlanningTable;","// src/components/planning/MedecinInfoPanel.js\r\nimport React from 'react';\r\nimport { User, Calendar } from 'lucide-react';\r\nimport { compterGardesParMedecin, getNombreGardesSouhaitees } from '../../utils/planningUtils';\r\n\r\nconst MedecinInfoPanel = ({ medecin, planning, desiderata }) => {\r\n  if (!medecin) return null;\r\n\r\n  const gardesAttribuees = compterGardesParMedecin(planning, medecin.id);\r\n  const gardesSouhaitees = getNombreGardesSouhaitees(desiderata, medecin.id);\r\n  \r\n  // Rechercher les desiderata les plus récents pour ce médecin\r\n  const medecinDesiderata = desiderata\r\n    .filter(d => d.userId === medecin.id)\r\n    .sort((a, b) => new Date(b.startDate) - new Date(a.startDate))[0];\r\n\r\n  // Si aucun desiderata n'est trouvé, on affiche \"Non défini\"\r\n  const gardesMaxParSemaine = medecinDesiderata?.nombreGardesMaxParSemaine !== undefined \r\n    ? medecinDesiderata.nombreGardesMaxParSemaine \r\n    : 'Non défini';\r\n\r\n  return (\r\n    <div style={{\r\n      backgroundColor: 'white',\r\n      borderRadius: '8px',\r\n      boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n      padding: '1.5rem',\r\n      marginBottom: '1.5rem'\r\n    }}>\r\n      <div style={{\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        gap: '1rem',\r\n        marginBottom: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: '#EBF5FF',\r\n          borderRadius: '50%',\r\n          padding: '0.75rem'\r\n        }}>\r\n          <User size={24} color=\"#2563EB\" />\r\n        </div>\r\n        <div>\r\n          <h3 style={{\r\n            fontSize: '1.25rem',\r\n            fontWeight: 'bold',\r\n            color: '#1F2937',\r\n            margin: 0\r\n          }}>\r\n            Dr. {medecin.prenom} {medecin.nom}\r\n          </h3>\r\n        </div>\r\n      </div>\r\n\r\n      <div style={{\r\n        display: 'grid',\r\n        gridTemplateColumns: 'repeat(auto-fit, minmax(160px, 1fr))',\r\n        gap: '1rem'\r\n      }}>\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes souhaitées / mois\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: '#2563EB'\r\n          }}>\r\n            {gardesSouhaitees || 'Non défini'}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes max. / semaine\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: '#059669'\r\n          }}>\r\n            {typeof gardesMaxParSemaine === 'number' ? gardesMaxParSemaine : 'Non défini'}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          padding: '1rem',\r\n          backgroundColor: '#F3F4F6',\r\n          borderRadius: '8px'\r\n        }}>\r\n          <div style={{\r\n            fontSize: '0.875rem',\r\n            color: '#6B7280',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Gardes attribuées\r\n          </div>\r\n          <div style={{\r\n            fontSize: '1.5rem',\r\n            fontWeight: 'bold',\r\n            color: gardesAttribuees > gardesSouhaitees ? '#DC2626' : '#059669'\r\n          }}>\r\n            {gardesAttribuees}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MedecinInfoPanel;","// src/components/planning/modals/ConfirmationModal.js\r\nimport React from 'react';\r\nimport { AlertTriangle, Check } from 'lucide-react';\r\n\r\nconst ConfirmationModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  title,\r\n  message,\r\n  confirmLabel = 'Confirmer',\r\n  cancelLabel = 'Annuler',\r\n  icon: Icon = AlertTriangle,\r\n  iconColor = '#DC2626',\r\n  iconBgColor = '#FEE2E2',\r\n  confirmButtonColor = '#DC2626'\r\n}) => {\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 50\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '2rem',\r\n        maxWidth: '28rem',\r\n        width: '90%',\r\n        textAlign: 'center'\r\n      }}>\r\n        <div style={{\r\n          width: '3rem',\r\n          height: '3rem',\r\n          backgroundColor: iconBgColor,\r\n          borderRadius: '50%',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          justifyContent: 'center',\r\n          margin: '0 auto 1rem'\r\n        }}>\r\n          <Icon size={24} color={iconColor} />\r\n        </div>\r\n\r\n        <h2 style={{\r\n          fontSize: '1.25rem',\r\n          fontWeight: 'bold',\r\n          color: '#111827',\r\n          marginBottom: '0.5rem'\r\n        }}>\r\n          {title}\r\n        </h2>\r\n\r\n        <p style={{\r\n          color: '#6B7280',\r\n          marginBottom: '1.5rem'\r\n        }}>\r\n          {message}\r\n        </p>\r\n\r\n        <div style={{\r\n          display: 'flex',\r\n          gap: '1rem',\r\n          justifyContent: 'center'\r\n        }}>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: '1px solid #D1D5DB',\r\n              backgroundColor: 'white',\r\n              color: '#374151',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            {cancelLabel}\r\n          </button>\r\n          <button\r\n            onClick={onConfirm}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              backgroundColor: confirmButtonColor,\r\n              color: 'white',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            {confirmLabel}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ConfirmationModal;","// src/components/planning/modals/GeneratePlanningModal.js\r\nimport React from 'react';\r\nimport { RefreshCcw } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst GeneratePlanningModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  planning\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title={planning ? 'Regénérer le planning' : 'Générer le planning'}\r\n      message={planning\r\n        ? 'Êtes-vous sûr de vouloir regénérer le planning ? Cette action remplacera le planning actuel.'\r\n        : 'Êtes-vous sûr de vouloir générer un nouveau planning ?'}\r\n      icon={RefreshCcw}\r\n      iconColor=\"#9333EA\"\r\n      iconBgColor=\"#F3E8FF\"\r\n      confirmButtonColor=\"#9333EA\"\r\n      confirmLabel=\"Générer\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default GeneratePlanningModal;","// src/components/planning/modals/PublishPlanningModal.js\r\nimport React from 'react';\r\nimport { Upload } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst PublishPlanningModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm,\r\n  publishedPlanning\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title=\"Publier le planning\"\r\n      message={publishedPlanning\r\n        ? 'Cette action mettra à jour le planning publié. Les médecins verront les changements immédiatement.'\r\n        : 'Cette action publiera le planning et le rendra visible pour tous les médecins.'}\r\n      icon={Upload}\r\n      iconColor=\"#059669\"\r\n      iconBgColor=\"#ECFDF5\"\r\n      confirmButtonColor=\"#059669\"\r\n      confirmLabel=\"Confirmer la publication\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default PublishPlanningModal;","// src/components/planning/modals/DiscardChangesModal.js\r\nimport React from 'react';\r\nimport { AlertTriangle } from 'lucide-react';\r\nimport ConfirmationModal from './ConfirmationModal';\r\n\r\nconst DiscardChangesModal = ({\r\n  isOpen,\r\n  onClose,\r\n  onConfirm\r\n}) => {\r\n  return (\r\n    <ConfirmationModal\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      onConfirm={onConfirm}\r\n      title=\"Changements non sauvegardés\"\r\n      message=\"Vous avez des modifications non sauvegardées. Voulez-vous vraiment quitter le mode édition ? Les changements seront perdus.\"\r\n      icon={AlertTriangle}\r\n      iconColor=\"#DC2626\"\r\n      iconBgColor=\"#FEE2E2\"\r\n      confirmButtonColor=\"#DC2626\"\r\n      confirmLabel=\"Abandonner les changements\"\r\n      cancelLabel=\"Continuer l'édition\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default DiscardChangesModal;","import React, { useState } from 'react';\r\nimport { X, Download, Search } from 'lucide-react';\r\nimport { jsPDF } from 'jspdf';\r\n\r\nfunction ExportDesiderataModal({ \r\n  isOpen, \r\n  onClose, \r\n  medecins, \r\n  desiderata,\r\n  periodeSaisie,\r\n  creneaux \r\n}) {\r\n  const [selectedMedecins, setSelectedMedecins] = useState({});\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n\r\n  const filteredMedecins = medecins.filter(medecin => \r\n    medecin.nom.toLowerCase().includes(searchTerm.toLowerCase()) ||\r\n    medecin.prenom.toLowerCase().includes(searchTerm.toLowerCase())\r\n  );\r\n\r\n  const toggleSelectAll = () => {\r\n    const newState = !selectAll;\r\n    setSelectAll(newState);\r\n    const newSelected = {};\r\n    filteredMedecins.forEach(medecin => {\r\n      newSelected[medecin.id] = newState;\r\n    });\r\n    setSelectedMedecins(newSelected);\r\n  };\r\n\r\n  const toggleMedecin = (medecinId) => {\r\n    setSelectedMedecins(prev => ({\r\n      ...prev,\r\n      [medecinId]: !prev[medecinId]\r\n    }));\r\n  };\r\n\r\n  const formatDate = (dateStr) => {\r\n    const date = new Date(dateStr);\r\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n    return `${days[date.getDay()]} ${date.getDate().toString().padStart(2, '0')}/${(date.getMonth() + 1).toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  const getPreferenceSymbol = (preference) => {\r\n    switch(preference) {\r\n      case 'Oui': return 'O';\r\n      case 'Possible': return 'P';\r\n      case 'Non': return 'N';\r\n      default: return '-';\r\n    }\r\n  };\r\n\r\n  const generatePDF = () => {\r\n    const doc = new jsPDF();\r\n    const selectedMedecinsList = medecins.filter(m => selectedMedecins[m.id]);\r\n    const creneauxSimplifies = [\r\n      { id: 'QUART_1', label: 'Q1' },\r\n      { id: 'QUART_2', label: 'Q2' },\r\n      { id: 'RENFORT_1', label: 'RM' },\r\n      { id: 'QUART_3', label: 'Q3' },\r\n      { id: 'RENFORT_2', label: 'RS' },\r\n      { id: 'QUART_4', label: 'Q4' }\r\n    ];\r\n\r\n    let currentPage = 1;\r\n    selectedMedecinsList.forEach((medecin, index) => {\r\n      if (index > 0) {\r\n        doc.addPage();\r\n        currentPage++;\r\n      }\r\n\r\n      const medecinDesiderata = desiderata.find(d => d.userId === medecin.id);\r\n      const startY = 20;\r\n\r\n      // En-tête du médecin\r\n      doc.setFontSize(14);\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text(`Dr. ${medecin.prenom} ${medecin.nom}`, 20, startY);\r\n\r\n      // Informations générales\r\n      doc.setFontSize(10);\r\n      doc.setFont('helvetica', 'normal');\r\n      const infoY = startY + 10;\r\n      doc.text(`Gardes/mois: ${medecinDesiderata?.nombreGardesSouhaitees || '-'}`, 20, infoY);\r\n      doc.text(`Max/semaine: ${medecinDesiderata?.nombreGardesMaxParSemaine || '-'}`, 90, infoY);\r\n      doc.text(`Gardes groupées: ${medecinDesiderata?.gardesGroupees ? 'Oui' : 'Non'}`, 20, infoY + 7);\r\n      doc.text(`Renforts associés: ${medecinDesiderata?.renfortsAssocies ? 'Oui' : 'Non'}`, 90, infoY + 7);\r\n\r\n      // Tableau des desiderata\r\n      const tableStartY = infoY + 15;\r\n      const cellWidth = 20;\r\n      const dateWidth = 40;\r\n      const rowHeight = 7;\r\n      let currentY = tableStartY;\r\n\r\n      // En-têtes des créneaux\r\n      doc.setFont('helvetica', 'bold');\r\n      doc.text('Date', 20, currentY);\r\n      creneauxSimplifies.forEach((creneau, index) => {\r\n        doc.text(creneau.label, dateWidth + (index * cellWidth) + 7, currentY);\r\n      });\r\n      currentY += 5;\r\n\r\n      // Ligne de séparation\r\n      doc.setLineWidth(0.1);\r\n      doc.line(20, currentY, dateWidth + (creneauxSimplifies.length * cellWidth), currentY);\r\n      currentY += 5;\r\n\r\n      // Données du tableau\r\n      doc.setFont('helvetica', 'normal');\r\n      const dates = Object.keys(medecinDesiderata?.desiderata || {}).sort();\r\n      \r\n      dates.forEach(date => {\r\n        // Vérifier s'il faut ajouter une nouvelle page\r\n        if (currentY > 270) {\r\n          doc.addPage();\r\n          currentPage++;\r\n          currentY = 20;\r\n          \r\n          // Répéter les en-têtes sur la nouvelle page\r\n          doc.setFont('helvetica', 'bold');\r\n          doc.text('Date', 20, currentY);\r\n          creneauxSimplifies.forEach((creneau, index) => {\r\n            doc.text(creneau.label, dateWidth + (index * cellWidth) + 7, currentY);\r\n          });\r\n          currentY += 5;\r\n          doc.line(20, currentY, dateWidth + (creneauxSimplifies.length * cellWidth), currentY);\r\n          currentY += 5;\r\n          doc.setFont('helvetica', 'normal');\r\n        }\r\n\r\n        // Date\r\n        doc.text(formatDate(date), 20, currentY);\r\n\r\n        // Préférences\r\n        creneauxSimplifies.forEach((creneau, index) => {\r\n          const preference = medecinDesiderata?.desiderata[date]?.[creneau.id];\r\n          const symbol = getPreferenceSymbol(preference);\r\n          \r\n          // Ajouter un rectangle coloré selon la préférence\r\n          if (symbol !== '-') {\r\n            doc.setFillColor(\r\n              symbol === 'O' ? '#BBF7D0' :\r\n              symbol === 'P' ? '#FEF08A' :\r\n              '#FECACA'\r\n            );\r\n            doc.rect(dateWidth + (index * cellWidth), currentY - 4, cellWidth, rowHeight, 'F');\r\n          }\r\n          \r\n          doc.text(symbol, dateWidth + (index * cellWidth) + 7, currentY);\r\n        });\r\n\r\n        currentY += rowHeight;\r\n      });\r\n\r\n      // Légende\r\n      currentY += 10;\r\n      if (currentY > 270) {\r\n        doc.addPage();\r\n        currentPage++;\r\n        currentY = 20;\r\n      }\r\n\r\n      doc.setFontSize(8);\r\n      doc.setFillColor('#BBF7D0');\r\n      doc.rect(20, currentY, 5, 5, 'F');\r\n      doc.text('O: Oui', 30, currentY + 4);\r\n\r\n      doc.setFillColor('#FEF08A');\r\n      doc.rect(50, currentY, 5, 5, 'F');\r\n      doc.text('P: Possible', 60, currentY + 4);\r\n\r\n      doc.setFillColor('#FECACA');\r\n      doc.rect(90, currentY, 5, 5, 'F');\r\n      doc.text('N: Non', 100, currentY + 4);\r\n\r\n      doc.setFillColor('#F3F4F6');\r\n      doc.rect(130, currentY, 5, 5, 'F');\r\n      doc.text('-: Non spécifié', 140, currentY + 4);\r\n\r\n      // Numéro de page\r\n      doc.setFontSize(8);\r\n      doc.text(`Page ${currentPage}`, 180, 290);\r\n    });\r\n\r\n    doc.save('desiderata.pdf');\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div style={{\r\n      position: 'fixed',\r\n      top: 0,\r\n      left: 0,\r\n      right: 0,\r\n      bottom: 0,\r\n      backgroundColor: 'rgba(0, 0, 0, 0.5)',\r\n      display: 'flex',\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      zIndex: 50\r\n    }}>\r\n      <div style={{\r\n        backgroundColor: 'white',\r\n        borderRadius: '0.5rem',\r\n        padding: '2rem',\r\n        width: '90%',\r\n        maxWidth: '600px',\r\n        position: 'relative'\r\n      }}>\r\n        <button\r\n          onClick={onClose}\r\n          style={{\r\n            position: 'absolute',\r\n            top: '1rem',\r\n            right: '1rem',\r\n            padding: '0.5rem',\r\n            border: 'none',\r\n            background: 'none',\r\n            cursor: 'pointer'\r\n          }}\r\n        >\r\n          <X size={20} color=\"#6B7280\" />\r\n        </button>\r\n\r\n        <h2 style={{\r\n          fontSize: '1.5rem',\r\n          fontWeight: 'bold',\r\n          color: '#111827',\r\n          marginBottom: '1.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem'\r\n        }}>\r\n          <Download size={24} />\r\n          Exporter les desiderata\r\n        </h2>\r\n\r\n        <div style={{ marginBottom: '1rem' }}>\r\n          {/* Barre de recherche */}\r\n          <div style={{\r\n            position: 'relative',\r\n            marginBottom: '1rem'\r\n          }}>\r\n            <div style={{\r\n              position: 'absolute',\r\n              left: '0.75rem',\r\n              top: '50%',\r\n              transform: 'translateY(-50%)',\r\n              color: '#6B7280'\r\n            }}>\r\n              <Search size={20} />\r\n            </div>\r\n            <input\r\n              type=\"text\"\r\n              value={searchTerm}\r\n              onChange={(e) => setSearchTerm(e.target.value)}\r\n              placeholder=\"Rechercher un médecin...\"\r\n              style={{\r\n                width: '100%',\r\n                padding: '0.75rem',\r\n                paddingLeft: '2.5rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #D1D5DB',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            {searchTerm && (\r\n              <button\r\n                onClick={() => setSearchTerm('')}\r\n                style={{\r\n                  position: 'absolute',\r\n                  right: '0.75rem',\r\n                  top: '50%',\r\n                  transform: 'translateY(-50%)',\r\n                  background: 'none',\r\n                  border: 'none',\r\n                  padding: '0.25rem',\r\n                  cursor: 'pointer',\r\n                  color: '#6B7280'\r\n                }}\r\n              >\r\n                <X size={16} />\r\n              </button>\r\n            )}\r\n          </div>\r\n\r\n          {/* Sélection en masse */}\r\n          <label style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '0.5rem',\r\n            marginBottom: '1rem',\r\n            padding: '0.5rem',\r\n            backgroundColor: '#F3F4F6',\r\n            borderRadius: '0.375rem',\r\n            cursor: 'pointer'\r\n          }}>\r\n            <input\r\n              type=\"checkbox\"\r\n              checked={selectAll}\r\n              onChange={toggleSelectAll}\r\n              style={{ width: 'auto' }}\r\n            />\r\n            <span style={{ fontWeight: '500' }}>Sélectionner tous les médecins</span>\r\n          </label>\r\n\r\n          {/* Liste des médecins filtrée */}\r\n          <div style={{\r\n            maxHeight: '300px',\r\n            overflowY: 'auto',\r\n            border: '1px solid #E5E7EB',\r\n            borderRadius: '0.375rem',\r\n            padding: '0.5rem'\r\n          }}>\r\n            {filteredMedecins.length > 0 ? (\r\n              filteredMedecins.map(medecin => (\r\n                <label\r\n                  key={medecin.id}\r\n                  style={{\r\n                    display: 'flex',\r\n                    alignItems: 'center',\r\n                    gap: '0.5rem',\r\n                    padding: '0.5rem',\r\n                    cursor: 'pointer',\r\n                    borderRadius: '0.25rem',\r\n                    transition: 'background-color 0.2s'\r\n                  }}\r\n                  onMouseOver={(e) => e.currentTarget.style.backgroundColor = '#F3F4F6'}\r\n                  onMouseOut={(e) => e.currentTarget.style.backgroundColor = 'transparent'}\r\n                >\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={selectedMedecins[medecin.id] || false}\r\n                    onChange={() => toggleMedecin(medecin.id)}\r\n                    style={{ width: 'auto' }}\r\n                  />\r\n                  <span>Dr. {medecin.prenom} {medecin.nom}</span>\r\n                </label>\r\n              ))\r\n            ) : (\r\n              <div style={{\r\n                padding: '1rem',\r\n                textAlign: 'center',\r\n                color: '#6B7280'\r\n              }}>\r\n                Aucun médecin trouvé\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <div style={{\r\n          marginTop: '2rem',\r\n          display: 'flex',\r\n          justifyContent: 'flex-end',\r\n          gap: '1rem'\r\n        }}>\r\n          <button\r\n            onClick={onClose}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              border: '1px solid #D1D5DB',\r\n              borderRadius: '0.375rem',\r\n              backgroundColor: 'white',\r\n              color: '#374151'\r\n            }}\r\n          >\r\n            Annuler\r\n          </button>\r\n          <button\r\n            onClick={generatePDF}\r\n            disabled={Object.values(selectedMedecins).filter(Boolean).length === 0}\r\n            style={{\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: Object.values(selectedMedecins).filter(Boolean).length === 0 ? '#9CA3AF' : '#2563EB',\r\n              color: 'white',\r\n              border: 'none',\r\n              borderRadius: '0.375rem',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              cursor: Object.values(selectedMedecins).filter(Boolean).length === 0 ? 'not-allowed' : 'pointer'\r\n            }}\r\n          >\r\n            <Download size={18} />\r\n            Exporter en PDF\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ExportDesiderataModal;","// src/components/planning/GestionPlanning.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../../firebase';\r\nimport { getUser, getMedecins } from '../../services/userService';\r\nimport { \r\n  getLatestPlanning, \r\n  savePlanning, \r\n  updatePlanning, \r\n  getDesiderataForPeriod, \r\n  publishPlanning, \r\n  getPublishedPlanning, \r\n  getPeriodeSaisie \r\n} from '../../services/planningService';\r\nimport { genererPlanning, creneaux } from '../../utils/planningGenerator';\r\nimport { AlertTriangle, Check } from 'lucide-react';\r\n\r\n// Import des sous-composants\r\nimport PlanningHeader from './PlanningHeader';\r\nimport PlanningFilters from './PlanningFilters';\r\nimport PlanningStatistics from './PlanningStatistics';\r\nimport PlanningTable from './PlanningTable';\r\nimport MedecinInfoPanel from './MedecinInfoPanel';\r\nimport GeneratePlanningModal from './modals/GeneratePlanningModal';\r\nimport PublishPlanningModal from './modals/PublishPlanningModal';\r\nimport DiscardChangesModal from './modals/DiscardChangesModal';\r\nimport ExportDesiderataModal from '../ExportDesiderataModal';\r\n\r\nfunction GestionPlanning({ isAdmin = true }) {\r\n  // États pour les données\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n  const [planning, setPlanning] = useState(null);\r\n  const [publishedPlanning, setPublishedPlanning] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [desiderata, setDesiderata] = useState([]);\r\n\r\n  // États pour l'interface utilisateur\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [modified, setModified] = useState(false);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n\r\n  // États pour les filtres\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [dateFilter, setDateFilter] = useState({ start: '', end: '' });\r\n  const [creneauFilter, setCreneauFilter] = useState('all');\r\n  const [selectedMedecin, setSelectedMedecin] = useState('all');\r\n  const [viewMode, setViewMode] = useState('list');\r\n\r\n  // États pour les modales\r\n  const [showGenerateConfirm, setShowGenerateConfirm] = useState(false);\r\n  const [showPublishConfirm, setShowPublishConfirm] = useState(false);\r\n  const [showDiscardChanges, setShowDiscardChanges] = useState(false);\r\n  const [showExportModal, setShowExportModal] = useState(false);\r\n\r\n  const history = useHistory();\r\n\r\n  // Effet pour charger les données initiales\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'admin') {\r\n          setError('Accès non autorisé');\r\n          history.push('/');\r\n          return;\r\n        }\r\n\r\n        // Chargement des données de base\r\n        const [periode, medecinsList, latestPlan, publishedPlan] = await Promise.all([\r\n          getPeriodeSaisie(),\r\n          getMedecins(),\r\n          getLatestPlanning(),\r\n          getPublishedPlanning()\r\n        ]);\r\n\r\n        setPeriodeSaisie(periode);\r\n        setMedecins(medecinsList);\r\n\r\n        if (latestPlan) {\r\n          setPlanning(latestPlan);\r\n          setDateFilter({\r\n            start: latestPlan.startDate.split('T')[0],\r\n            end: latestPlan.endDate.split('T')[0]\r\n          });\r\n        }\r\n\r\n        setPublishedPlanning(publishedPlan);\r\n\r\n        // Charger les desiderata si une période est définie\r\n        if (periode) {\r\n          const desiderataData = await getDesiderataForPeriod(\r\n            periode.startDate,\r\n            periode.endDate\r\n          );\r\n          setDesiderata(desiderataData);\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Erreur:', error);\r\n        setError('Erreur lors du chargement des données');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [history]);\r\n\r\n  // Gestion des notifications\r\n  const showNotification = (message, isError = false) => {\r\n    if (isError) {\r\n      setError(message);\r\n      setTimeout(() => setError(null), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(null), 5000);\r\n    }\r\n  };\r\n\r\n  // Handlers pour les actions principales\r\n  const handleGeneratePlanning = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!periodeSaisie) {\r\n        throw new Error('Période de saisie non définie');\r\n      }\r\n\r\n      const newPlanningData = await genererPlanning(\r\n        periodeSaisie.startDate, \r\n        periodeSaisie.endDate\r\n      );\r\n\r\n      if (planning && planning.id) {\r\n        const updatedPlanning = { \r\n          ...planning, \r\n          planning: newPlanningData \r\n        };\r\n        await updatePlanning(planning.id, updatedPlanning);\r\n        setPlanning(updatedPlanning);\r\n      } else {\r\n        const savedPlanningId = await savePlanning({\r\n          planning: newPlanningData,\r\n          startDate: periodeSaisie.startDate,\r\n          endDate: periodeSaisie.endDate\r\n        });\r\n        setPlanning({ \r\n          id: savedPlanningId, \r\n          planning: newPlanningData \r\n        });\r\n      }\r\n\r\n      showNotification('Planning généré avec succès');\r\n      setModified(false);\r\n      setShowGenerateConfirm(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la génération du planning:\", error);\r\n      showNotification(\"Erreur lors de la génération du planning\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handlePublishPlanning = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!planning || !planning.id) {\r\n        throw new Error('Aucun planning à publier');\r\n      }\r\n\r\n      await publishPlanning(planning.id);\r\n      const updatedPublishedPlanning = await getPublishedPlanning();\r\n      setPublishedPlanning(updatedPublishedPlanning);\r\n      \r\n      showNotification('Planning publié avec succès');\r\n      setShowPublishConfirm(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la publication:\", error);\r\n      showNotification(\"Erreur lors de la publication du planning\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSaveChanges = async () => {\r\n    setLoading(true);\r\n    try {\r\n      if (!planning || !planning.id) {\r\n        throw new Error('Aucun planning à sauvegarder');\r\n      }\r\n\r\n      await updatePlanning(planning.id, planning);\r\n      showNotification('Modifications sauvegardées avec succès');\r\n      setModified(false);\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la sauvegarde:\", error);\r\n      showNotification(\"Erreur lors de la sauvegarde des modifications\", true);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleMedecinChange = (date, creneau, index, medecinId) => {\r\n    if (!editMode) return;\r\n\r\n    setPlanning(prev => {\r\n      const newPlanning = { ...prev };\r\n      if (!newPlanning.planning[date]) {\r\n        newPlanning.planning[date] = {};\r\n      }\r\n      if (!newPlanning.planning[date][creneau]) {\r\n        newPlanning.planning[date][creneau] = Array(\r\n          creneaux.find(c => c.id === creneau)?.medecins || 0\r\n        ).fill(null);\r\n      }\r\n      newPlanning.planning[date][creneau][index] = medecinId || null;\r\n      return newPlanning;\r\n    });\r\n    setModified(true);\r\n  };\r\n\r\n  const toggleEditMode = () => {\r\n    if (editMode && modified) {\r\n      setShowDiscardChanges(true);\r\n      return;\r\n    }\r\n    setEditMode(!editMode);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        <div style={{\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          alignItems: 'center',\r\n          gap: '1rem'\r\n        }}>\r\n          <div style={{\r\n            width: '2rem',\r\n            height: '2rem',\r\n            border: '2px solid #E5E7EB',\r\n            borderTop: '2px solid #2563EB',\r\n            borderRadius: '50%',\r\n            animation: 'spin 1s linear infinite'\r\n          }} />\r\n          <p style={{ color: '#6B7280' }}>Chargement...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* En-tête */}\r\n      <PlanningHeader\r\n        editMode={editMode}\r\n        modified={modified}\r\n        onEditToggle={toggleEditMode}\r\n        onGenerateClick={() => setShowGenerateConfirm(true)}\r\n        onPublishClick={() => setShowPublishConfirm(true)}\r\n        onSaveChanges={handleSaveChanges}\r\n        onBackClick={() => history.push('/dashboard-admin')}\r\n        onExportClick={() => setShowExportModal(true)}\r\n        planning={planning}\r\n      />\r\n\r\n      {/* Notifications */}\r\n      {error && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#FEE2E2',\r\n          color: '#DC2626',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <AlertTriangle size={20} />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#DCFCE7',\r\n          color: '#16A34A',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <Check size={20} />\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem'\r\n      }}>\r\n        {/* Statistiques */}\r\n        <PlanningStatistics\r\n          medecins={medecins}\r\n          periodeSaisie={periodeSaisie}\r\n          planning={planning}\r\n          publishedPlanning={publishedPlanning}\r\n        />\r\n\r\n        {/* Filtres */}\r\n        <PlanningFilters\r\n          showFilters={showFilters}\r\n          onToggleFilters={() => setShowFilters(!showFilters)}\r\n          dateFilter={dateFilter}\r\n          onDateFilterChange={setDateFilter}\r\n          creneauFilter={creneauFilter}\r\n          onCreneauFilterChange={setCreneauFilter}\r\n          selectedMedecin={selectedMedecin}\r\n          onMedecinFilterChange={setSelectedMedecin}\r\n          viewMode={viewMode}\r\n          onViewModeChange={setViewMode}\r\n          medecins={medecins}\r\n          creneaux={creneaux}\r\n        />\r\n\r\n        {/* Panneau d'information médecin */}\r\n        {selectedMedecin !== 'all' && (\r\n          <MedecinInfoPanel\r\n            medecin={medecins.find(m => m.id === selectedMedecin)}\r\n            planning={planning}\r\n            desiderata={desiderata}\r\n          />\r\n        )}\r\n\r\n        {/* Table du planning */}\r\n        {planning && (\r\n          <PlanningTable\r\n            planning={planning}\r\n            creneaux={creneaux}\r\n            medecins={medecins}\r\n            desiderata={desiderata}\r\n            selectedMedecin={selectedMedecin}\r\n            editMode={editMode}\r\n            onMedecinChange={handleMedecinChange}\r\n            dateFilter={dateFilter}\r\n            creneauFilter={creneauFilter}\r\n          />\r\n        )}\r\n      </main>\r\n\r\n      {/* Modales */}\r\n      <GeneratePlanningModal\r\n        isOpen={showGenerateConfirm}\r\n        onClose={() => setShowGenerateConfirm(false)}\r\n        onConfirm={handleGeneratePlanning}\r\n        planning={planning}\r\n      />\r\n\r\n      <PublishPlanningModal\r\n        isOpen={showPublishConfirm}\r\n        onClose={() => setShowPublishConfirm(false)}\r\n        onConfirm={handlePublishPlanning}\r\n        publishedPlanning={publishedPlanning}\r\n      />\r\n\r\n      <DiscardChangesModal\r\n        isOpen={showDiscardChanges}\r\n        onClose={() => setShowDiscardChanges(false)}\r\n        onConfirm={() => {\r\n          setShowDiscardChanges(false);\r\n          setModified(false);\r\n          setEditMode(false);\r\n        }}\r\n      />\r\n\r\n      <ExportDesiderataModal\r\n        isOpen={showExportModal}\r\n        onClose={() => setShowExportModal(false)}\r\n        medecins={medecins}\r\n        desiderata={desiderata}\r\n        periodeSaisie={periodeSaisie}\r\n        creneaux={creneaux}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionPlanning;","// src/components/GestionPeriodeSaisie.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser } from '../services/userService';\r\nimport { setPeriodeSaisie, getPeriodeSaisie } from '../services/planningService';\r\nimport { ArrowLeft, Calendar, Save, AlertTriangle, Check } from 'lucide-react';\r\n\r\nfunction GestionPeriodeSaisie() {\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [currentUser, setCurrentUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const history = useHistory();\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged(async (authUser) => {\r\n      if (authUser) {\r\n        try {\r\n          const userData = await getUser(authUser.uid);\r\n          if (userData.role !== 'admin') {\r\n            setError(\"Accès non autorisé\");\r\n            history.push('/');\r\n          } else {\r\n            setCurrentUser(userData);\r\n            const periode = await getPeriodeSaisie();\r\n            if (periode) {\r\n              setStartDate(periode.startDate.split('T')[0]);\r\n              setEndDate(periode.endDate.split('T')[0]);\r\n            }\r\n          }\r\n        } catch (error) {\r\n          console.error(\"Erreur lors de la récupération des données utilisateur:\", error);\r\n          setError(\"Erreur lors de la récupération des données utilisateur\");\r\n        }\r\n      } else {\r\n        history.push('/');\r\n      }\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [history]);\r\n\r\n  const showNotification = (message, isError = false) => {\r\n    if (isError) {\r\n      setError(message);\r\n      setTimeout(() => setError(null), 5000);\r\n    } else {\r\n      setSuccess(message);\r\n      setTimeout(() => setSuccess(null), 5000);\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await setPeriodeSaisie(startDate, endDate);\r\n      showNotification('Période de saisie mise à jour avec succès! Les desiderata obsolètes ont été supprimés.');\r\n    } catch (error) {\r\n      console.error(\"Erreur lors de la mise à jour de la période de saisie:\", error);\r\n      showNotification(\"Une erreur est survenue lors de la mise à jour de la période de saisie\", true);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error && !currentUser) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-admin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-admin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Période de saisie</span>\r\n            </div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={handleSubmit}\r\n            style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer',\r\n              fontWeight: '500'\r\n            }}\r\n          >\r\n            <Save size={18} />\r\n            Enregistrer\r\n          </button>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Notifications */}\r\n      {error && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#FEE2E2',\r\n          color: '#DC2626',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <AlertTriangle size={20} />\r\n          {error}\r\n        </div>\r\n      )}\r\n\r\n      {success && (\r\n        <div style={{\r\n          position: 'fixed',\r\n          top: '1rem',\r\n          right: '1rem',\r\n          backgroundColor: '#DCFCE7',\r\n          color: '#16A34A',\r\n          padding: '1rem',\r\n          borderRadius: '0.5rem',\r\n          display: 'flex',\r\n          alignItems: 'center',\r\n          gap: '0.5rem',\r\n          zIndex: 50,\r\n          boxShadow: '0 2px 4px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <Check size={20} />\r\n          {success}\r\n        </div>\r\n      )}\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '1280px',\r\n        margin: '0 auto',\r\n        padding: '6rem 1rem 2rem'\r\n      }}>\r\n        {/* Carte explicative */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          marginBottom: '2rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <h1 style={{\r\n            fontSize: '1.875rem',\r\n            fontWeight: 'bold',\r\n            color: '#1f2937',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Définir la période de saisie\r\n          </h1>\r\n          <p style={{ color: '#6b7280' }}>\r\n            Configurez la période pendant laquelle les médecins pourront saisir leurs desiderata. \r\n            Les desiderata en dehors de cette période seront automatiquement supprimés.\r\n          </p>\r\n        </div>\r\n\r\n        {/* Formulaire de sélection des dates */}\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          borderRadius: '0.5rem',\r\n          padding: '1.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)'\r\n        }}>\r\n          <form onSubmit={handleSubmit}>\r\n            <div style={{\r\n              display: 'grid',\r\n              gap: '1.5rem',\r\n              gridTemplateColumns: 'repeat(auto-fit, minmax(200px, 1fr))'\r\n            }}>\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Date de début\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={startDate}\r\n                  onChange={(e) => setStartDate(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              <div>\r\n                <label style={{\r\n                  display: 'block',\r\n                  fontSize: '0.875rem',\r\n                  fontWeight: '500',\r\n                  color: '#374151',\r\n                  marginBottom: '0.5rem'\r\n                }}>\r\n                  Date de fin\r\n                </label>\r\n                <input\r\n                  type=\"date\"\r\n                  value={endDate}\r\n                  onChange={(e) => setEndDate(e.target.value)}\r\n                  required\r\n                  style={{\r\n                    width: '100%',\r\n                    padding: '0.5rem',\r\n                    borderRadius: '0.375rem',\r\n                    border: '1px solid #D1D5DB',\r\n                    fontSize: '0.875rem'\r\n                  }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            {/* Message d'information */}\r\n            <div style={{\r\n              backgroundColor: '#FFF7ED',\r\n              border: '1px solid #FB923C',\r\n              borderRadius: '0.375rem',\r\n              padding: '1rem',\r\n              marginTop: '1.5rem',\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.75rem'\r\n            }}>\r\n              <AlertTriangle size={20} color=\"#FB923C\" />\r\n              <p style={{\r\n                fontSize: '0.875rem',\r\n                color: '#9A3412',\r\n                margin: 0\r\n              }}>\r\n                Attention : La modification de la période de saisie entrainera la suppression des desiderata obsolètes.\r\n              </p>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default GestionPeriodeSaisie;","// src/components/PlanningVisualisation.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { auth } from '../firebase';\r\nimport { getUser, getMedecins } from '../services/userService';\r\nimport { \r\n  getPublishedPlanning, \r\n  getPeriodeSaisie \r\n} from '../services/planningService';\r\nimport { \r\n  Calendar, \r\n  ArrowLeft, \r\n  Download,\r\n  Filter,\r\n  ChevronDown,\r\n  ChevronUp,\r\n  Eye,\r\n  EyeOff\r\n} from 'lucide-react';\r\nimport { createEvents } from 'ics';\r\n\r\nconst creneaux = [\r\n  { id: 'QUART_1', label: '1er QUART', hours: '1h - 7h', medecins: 2, color: '#E3F2FD', textColor: '#1E88E5' },\r\n  { id: 'QUART_2', label: '2ème QUART', hours: '7h - 13h', medecins: 3, color: '#E8F5E9', textColor: '#43A047' },\r\n  { id: 'RENFORT_1', label: 'RENFORT', hours: '10h - 13h', medecins: 1, samediOnly: true, color: '#FFF3E0', textColor: '#FB8C00' },\r\n  { id: 'QUART_3', label: '3ème QUART', hours: '13h - 19h', medecins: 3, color: '#F3E5F5', textColor: '#8E24AA' },\r\n  { id: 'RENFORT_2', label: 'RENFORT', hours: '20h - 00h', medecins: 1, color: '#FFF3E0', textColor: '#FB8C00' },\r\n  { id: 'QUART_4', label: '4ème QUART', hours: '19h - 1h', medecins: 3, color: '#E1F5FE', textColor: '#039BE5' }\r\n];\r\n\r\nfunction PlanningVisualisation() {\r\n  // États\r\n  const [planning, setPlanning] = useState(null);\r\n  const [medecins, setMedecins] = useState([]);\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [viewMode, setViewMode] = useState('all'); // 'all' ou 'personal'\r\n  const [showFilters, setShowFilters] = useState(false);\r\n  const [startDate, setStartDate] = useState('');\r\n  const [endDate, setEndDate] = useState('');\r\n  const [periodeSaisie, setPeriodeSaisie] = useState(null);\r\n\r\n  const history = useHistory();\r\n\r\n  // Effets\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const authUser = auth.currentUser;\r\n        if (!authUser) {\r\n          history.push('/');\r\n          return;\r\n        }\r\n \r\n        const userData = await getUser(authUser.uid);\r\n        if (!userData || userData.role !== 'medecin') {\r\n          setError(\"Accès non autorisé\");\r\n          history.push('/');\r\n          return;\r\n        }\r\n \r\n        // Charger tous les médecins\r\n        const allMedecins = await getMedecins();\r\n        setMedecins(allMedecins);\r\n        setUser(userData);\r\n \r\n        const periode = await getPeriodeSaisie();\r\n        if (!periode) {\r\n          setError(\"Aucune période de saisie n'a été définie\");\r\n          return;\r\n        }\r\n        setPeriodeSaisie(periode);\r\n        setStartDate(periode.startDate.split('T')[0]);\r\n        setEndDate(periode.endDate.split('T')[0]);\r\n \r\n        const publishedPlan = await getPublishedPlanning();\r\n        if (publishedPlan) {\r\n          setPlanning(publishedPlan);\r\n        } else {\r\n          setError(\"Aucun planning n'a été publié\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Erreur:\", error);\r\n        setError(\"Une erreur est survenue lors du chargement des données\");\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n \r\n    fetchData();\r\n  }, [history]);\r\n\r\n  const exportToICS = () => {\r\n    if (!planning || !planning.planning) return;\r\n\r\n    const events = [];\r\n    const sortedDates = Object.keys(planning.planning).sort((a, b) => new Date(a) - new Date(b));\r\n\r\n    sortedDates.forEach(date => {\r\n      creneaux.forEach(creneau => {\r\n        if (planning.planning[date][creneau.id]) {\r\n          planning.planning[date][creneau.id].forEach((medecinId, index) => {\r\n            if (medecinId === user.id) {\r\n              const startDate = new Date(date);\r\n              const endDate = new Date(date);\r\n              let startHour, endHour;\r\n\r\n              switch (creneau.id) {\r\n                case 'QUART_1': startHour = 1; endHour = 7; break;\r\n                case 'QUART_2': startHour = 7; endHour = 13; break;\r\n                case 'RENFORT_1': startHour = 10; endHour = 13; break;\r\n                case 'QUART_3': startHour = 13; endHour = 19; break;\r\n                case 'RENFORT_2': startHour = 20; endHour = 24; break;\r\n                case 'QUART_4': startHour = 19; endHour = 25; break;\r\n                default: startHour = 0; endHour = 0; break;\r\n              }\r\n\r\n              startDate.setHours(startHour, 0, 0);\r\n              endDate.setHours(endHour, 0, 0);\r\n\r\n              if (endHour === 25) {\r\n                endDate.setDate(endDate.getDate() + 1);\r\n                endDate.setHours(1, 0, 0);\r\n              }\r\n\r\n              events.push({\r\n                start: [startDate.getFullYear(), startDate.getMonth() + 1, startDate.getDate(), startDate.getHours(), startDate.getMinutes()],\r\n                end: [endDate.getFullYear(), endDate.getMonth() + 1, endDate.getDate(), endDate.getHours(), endDate.getMinutes()],\r\n                title: `Garde - ${creneau.label}`,\r\n                description: `Garde médicale - ${creneau.label}`,\r\n                location: 'Hôpital'\r\n              });\r\n            }\r\n          });\r\n        }\r\n      });\r\n    });\r\n\r\n    createEvents(events, (error, value) => {\r\n      if (error) {\r\n        console.error(error);\r\n        alert('Une erreur est survenue lors de la création du fichier ICS');\r\n        return;\r\n      }\r\n      const blob = new Blob([value], { type: 'text/calendar;charset=utf-8' });\r\n      const link = document.createElement('a');\r\n      link.href = URL.createObjectURL(blob);\r\n      link.download = 'gardes.ics';\r\n      document.body.appendChild(link);\r\n      link.click();\r\n      document.body.removeChild(link);\r\n    });\r\n  };\r\n\r\n  // Fonctions utilitaires\r\n  const formatDate = (dateString) => {\r\n    const date = new Date(dateString);\r\n    const days = ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'];\r\n    const months = ['jan', 'fév', 'mar', 'avr', 'mai', 'juin', 'juil', 'août', 'sep', 'oct', 'nov', 'déc'];\r\n    return `${days[date.getDay()]} ${date.getDate()} ${months[date.getMonth()]}`;\r\n  };\r\n\r\n  const isWeekend = (dateString) => {\r\n    const date = new Date(dateString);\r\n    return date.getDay() === 0 || date.getDay() === 6;\r\n  };\r\n\r\n  const getMedecinName = (medecinId) => {\r\n    if (medecinId === user.id) {\r\n      return `Dr. ${user.prenom} ${user.nom}`;\r\n    }\r\n    const medecin = medecins.find(m => m.id === medecinId);\r\n    return medecin ? `Dr. ${medecin.prenom} ${medecin.nom}` : 'Médecin non trouvé';\r\n  };\r\n\r\n  // Rendu conditionnel pour chargement et erreurs\r\n  if (loading) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Chargement...\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6',\r\n        padding: '1rem'\r\n      }}>\r\n        <div style={{\r\n          backgroundColor: 'white',\r\n          padding: '2rem',\r\n          borderRadius: '0.5rem',\r\n          boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n          maxWidth: '500px',\r\n          width: '100%',\r\n          textAlign: 'center'\r\n        }}>\r\n          <h2 style={{ color: '#DC2626', marginBottom: '1rem' }}>Erreur</h2>\r\n          <p style={{ color: '#4B5563', marginBottom: '1.5rem' }}>{error}</p>\r\n          <button\r\n            onClick={() => history.push('/dashboard-medecin')}\r\n            style={{\r\n              display: 'inline-flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              padding: '0.5rem 1rem',\r\n              backgroundColor: '#2563EB',\r\n              color: 'white',\r\n              borderRadius: '0.375rem',\r\n              border: 'none',\r\n              cursor: 'pointer'\r\n            }}\r\n          >\r\n            <ArrowLeft size={18} />\r\n            Retour au tableau de bord\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!planning || !planning.planning) {\r\n    return (\r\n      <div style={{\r\n        minHeight: '100vh',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n        backgroundColor: '#f3f4f6'\r\n      }}>\r\n        Aucun planning disponible\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filtrage des dates en fonction de la période sélectionnée\r\n  const filteredDates = Object.keys(planning.planning)\r\n    .filter(date => date >= startDate && date <= endDate)\r\n    .sort((a, b) => new Date(a) - new Date(b));\r\n\r\n  return (\r\n    <div style={{ backgroundColor: '#f3f4f6', minHeight: '100vh' }}>\r\n      {/* Menu fixe en haut */}\r\n      <nav style={{\r\n        position: 'fixed',\r\n        top: 0,\r\n        left: 0,\r\n        right: 0,\r\n        backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n        borderBottom: '1px solid #e5e7eb',\r\n        boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n        zIndex: 40,\r\n      }}>\r\n        <div style={{\r\n          maxWidth: '1280px',\r\n          margin: '0 auto',\r\n          padding: '1rem',\r\n          display: 'flex',\r\n          justifyContent: 'space-between',\r\n          alignItems: 'center'\r\n        }}>\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={() => history.push('/dashboard-medecin')}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                color: '#4B5563',\r\n                border: 'none',\r\n                background: 'none',\r\n                cursor: 'pointer',\r\n                padding: '0.5rem'\r\n              }}\r\n            >\r\n              <ArrowLeft size={20} />\r\n              Retour\r\n            </button>\r\n            <div style={{\r\n              display: 'flex',\r\n              alignItems: 'center',\r\n              gap: '0.5rem',\r\n              color: '#2563EB',\r\n              fontWeight: 'bold'\r\n            }}>\r\n              <Calendar size={24} />\r\n              <span>Planning des gardes</span>\r\n            </div>\r\n          </div>\r\n\r\n          <div style={{\r\n            display: 'flex',\r\n            alignItems: 'center',\r\n            gap: '1rem'\r\n          }}>\r\n            <button\r\n              onClick={exportToICS}\r\n              style={{\r\n                display: 'flex',\r\n                alignItems: 'center',\r\n                gap: '0.5rem',\r\n                padding: '0.5rem 1rem',\r\n                backgroundColor: '#2563EB',\r\n                color: 'white',\r\n                borderRadius: '0.375rem',\r\n                border: 'none',\r\n                cursor: 'pointer',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            >\r\n              <Download size={18} />\r\n              Exporter (ICS)\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Contenu principal */}\r\n      <main style={{\r\n        maxWidth: '100%',\r\n        margin: '0 auto',\r\n        padding: '2rem',\r\n        marginTop: '80px', // Espace spécifique après le bandeau\r\n        height: 'calc(100vh - 80px)', // Ajusté pour la nouvelle marge\r\n        display: 'flex',\r\n        flexDirection: 'column',\r\n        gap: '1.5rem'\r\n      }}>\r\n\r\n{/* Section des filtres */}\r\n<div style={{\r\n  backgroundColor: 'white',\r\n  borderRadius: '12px',\r\n  boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n  marginBottom: '2rem',\r\n  border: '1px solid #E5E7EB'\r\n}}>\r\n  {/* En-tête des filtres */}\r\n  <button\r\n    onClick={() => setShowFilters(!showFilters)}\r\n    style={{\r\n      width: '100%',\r\n      padding: '1rem 1.5rem',\r\n      display: 'flex',\r\n      justifyContent: 'space-between',\r\n      alignItems: 'center',\r\n      border: 'none',\r\n      background: 'none',\r\n      cursor: 'pointer',\r\n      borderBottom: showFilters ? '1px solid #E5E7EB' : 'none'\r\n    }}\r\n  >\r\n    <div style={{ \r\n      display: 'flex', \r\n      alignItems: 'center', \r\n      gap: '0.5rem',\r\n      color: '#374151'\r\n    }}>\r\n      <Filter size={20} />\r\n      <span style={{ fontWeight: '500' }}>Filtres</span>\r\n    </div>\r\n    {showFilters ? <ChevronUp size={20} /> : <ChevronDown size={20} />}\r\n  </button>\r\n\r\n  {showFilters && (\r\n    <div style={{ padding: '1.5rem' }}>\r\n      <div style={{\r\n        display: 'grid',\r\n        gap: '1.5rem'\r\n      }}>\r\n        {/* Sélection du mode de vue */}\r\n        <div>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '0.875rem',\r\n            fontWeight: '500',\r\n            color: '#374151',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Mode d'affichage\r\n          </label>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem',\r\n            backgroundColor: '#F3F4F6',\r\n            padding: '0.25rem',\r\n            borderRadius: '0.375rem',\r\n            width: 'fit-content'\r\n          }}>\r\n            <button\r\n  onClick={() => setViewMode('all')}\r\n  style={{\r\n    padding: '0.5rem 1rem',\r\n    borderRadius: '0.25rem',\r\n    border: 'none',\r\n    backgroundColor: viewMode === 'all' ? '#2563EB' : '#F3F4F6',\r\n    color: viewMode === 'all' ? 'white' : '#374151',\r\n    boxShadow: viewMode === 'all' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '0.5rem',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500'\r\n  }}\r\n>\r\n  <Eye size={16} />\r\n  Voir tout\r\n</button>\r\n<button\r\n  onClick={() => setViewMode('personal')}\r\n  style={{\r\n    padding: '0.5rem 1rem',\r\n    borderRadius: '0.25rem',\r\n    border: 'none',\r\n    backgroundColor: viewMode === 'personal' ? '#2563EB' : '#F3F4F6',\r\n    color: viewMode === 'personal' ? 'white' : '#374151',\r\n    boxShadow: viewMode === 'personal' ? '0 1px 3px rgba(0,0,0,0.1)' : 'none',\r\n    cursor: 'pointer',\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    gap: '0.5rem',\r\n    fontSize: '0.875rem',\r\n    fontWeight: '500'\r\n  }}\r\n>\r\n  <EyeOff size={16} />\r\n  Mes gardes\r\n</button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Sélection de la période */}\r\n        <div>\r\n          <label style={{\r\n            display: 'block',\r\n            fontSize: '0.875rem',\r\n            fontWeight: '500',\r\n            color: '#374151',\r\n            marginBottom: '0.5rem'\r\n          }}>\r\n            Période\r\n          </label>\r\n          <div style={{\r\n            display: 'flex',\r\n            gap: '0.5rem'\r\n          }}>\r\n            <input\r\n              type=\"date\"\r\n              value={startDate}\r\n              onChange={(e) => setStartDate(e.target.value)}\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #D1D5DB',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n            <input\r\n              type=\"date\"\r\n              value={endDate}\r\n              onChange={(e) => setEndDate(e.target.value)}\r\n              style={{\r\n                flex: 1,\r\n                padding: '0.5rem',\r\n                borderRadius: '0.375rem',\r\n                border: '1px solid #D1D5DB',\r\n                fontSize: '0.875rem'\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )}\r\n</div>\r\n\r\n{/* Tableau du planning */}\r\n<div style={{\r\n    backgroundColor: 'white',\r\n    borderRadius: '12px',\r\n    boxShadow: '0 1px 3px rgba(0,0,0,0.1)',\r\n    overflowX: 'auto',\r\n    flexGrow: 1, // Pour prendre l'espace disponible\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    border: '1px solid #E5E7EB'\r\n  }}>\r\n    <table style={{\r\n      width: '100%',\r\n      borderCollapse: 'collapse',\r\n      fontSize: '0.875rem',\r\n      tableLayout: 'fixed' // Forcer une largeur fixe pour les colonnes\r\n    }}>\r\n      <colgroup>\r\n        <col style={{ width: '120px' }} /> {/* Largeur fixe pour la colonne de date */}\r\n        {creneaux.map(creneau => (\r\n          <col key={creneau.id} style={{ width: `${100 / creneaux.length}%` }} />\r\n        ))}\r\n      </colgroup>\r\n      <thead>\r\n        <tr>\r\n          <th style={{\r\n            padding: '0.75rem',\r\n            backgroundColor: '#F9FAFB',\r\n            borderBottom: '1px solid #E5E7EB',\r\n            textAlign: 'left',\r\n            fontWeight: '600',\r\n            position: 'sticky',\r\n            left: 0,\r\n            top: 0,\r\n            zIndex: 20,\r\n            backgroundColor: 'white',\r\n            width: '120px'\r\n          }}>\r\n            Date\r\n          </th>\r\n          {creneaux.map(creneau => (\r\n            <th key={creneau.id} style={{\r\n              padding: '0.75rem',\r\n              backgroundColor: '#F9FAFB',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              textAlign: 'left',\r\n              fontWeight: '600',\r\n              position: 'sticky',\r\n              top: 0,\r\n              zIndex: 10\r\n            }}>\r\n              <div>{creneau.label}</div>\r\n              <div style={{\r\n                fontSize: '0.75rem',\r\n                color: '#6B7280'\r\n              }}>\r\n                {creneau.hours}\r\n              </div>\r\n            </th>\r\n          ))}\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        {filteredDates.map(date => (\r\n          <tr key={date} style={{\r\n            backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white'\r\n          }}>\r\n            <td style={{\r\n              padding: '0.75rem',\r\n              borderBottom: '1px solid #E5E7EB',\r\n              fontWeight: '500',\r\n              position: 'sticky',\r\n              left: 0,\r\n              backgroundColor: isWeekend(date) ? '#F9FAFB' : 'white',\r\n              zIndex: 10,\r\n              width: '120px'\r\n            }}>\r\n              {formatDate(date)}\r\n            </td>\r\n            {creneaux.map(creneau => (\r\n              <td key={`${date}-${creneau.id}`} style={{\r\n                padding: '0.75rem',\r\n                borderBottom: '1px solid #E5E7EB',\r\n                verticalAlign: 'top'\r\n              }}>\r\n                {(!creneau.samediOnly || new Date(date).getDay() === 6) && (\r\n                  <div style={{\r\n                    display: 'flex',\r\n                    flexDirection: 'column',\r\n                    gap: '0.25rem'\r\n                  }}>\r\n                    {planning.planning[date]?.[creneau.id]?.map((medecinId, index) => (\r\n                      <div key={index} style={{\r\n                        padding: '0.5rem',\r\n                        backgroundColor: medecinId ? creneau.color : '#F3F4F6',\r\n                        color: medecinId ? creneau.textColor : '#6B7280',\r\n                        borderRadius: '0.375rem',\r\n                        fontSize: '0.75rem',\r\n                        whiteSpace: 'nowrap',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis'\r\n                      }}>\r\n                        {medecinId ? getMedecinName(medecinId) : 'Non assigné'}\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </td>\r\n            ))}\r\n          </tr>\r\n        ))}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n</main>\r\n</div>\r\n);\r\n}\r\n\r\nexport default PlanningVisualisation;","// src/App.js\r\nimport React from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Login from './components/Login';\r\nimport DashboardMedecin from './components/DashboardMedecin';\r\nimport DashboardAdmin from './components/DashboardAdmin';\r\nimport FormulaireDesirata from './components/FormulaireDesirata';\r\nimport GestionUtilisateurs from './components/GestionUtilisateurs';\r\nimport GestionPlanning from './components/planning/GestionPlanning';\r\nimport GestionPeriodeSaisie from './components/GestionPeriodeSaisie';\r\nimport PlanningVisualisation from './components/PlanningVisualisation'; // Ajout de l'import\r\n\r\nfunction App() {\r\n  return (\r\n    <Router>\r\n      <div className=\"App\">\r\n        <Switch>\r\n          <Route exact path=\"/\" component={Login} />\r\n          <Route path=\"/dashboard-medecin\" component={DashboardMedecin} />\r\n          <Route path=\"/dashboard-admin\" component={DashboardAdmin} />\r\n          <Route path=\"/formulaire-desirata\" component={FormulaireDesirata} />\r\n          <Route path=\"/gestion-utilisateurs\" component={GestionUtilisateurs} />\r\n          <Route path=\"/gestion-planning-admin\" render={() => <GestionPlanning isAdmin={true} />} />\r\n          <Route path=\"/planning-visualisation\" component={PlanningVisualisation} />\r\n          <Route path=\"/gestion-periode-saisie\" component={GestionPeriodeSaisie} />\r\n        </Switch>\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;","// src/index.js\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}